{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///../../../src/components/VForm/VForm.ts","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./src/api/category.js","webpack:///./src/api/tag.js","webpack:///./src/views/admin/Article.vue?4be9","webpack:///src/views/admin/Article.vue","webpack:///./src/views/admin/Article.vue?619e","webpack:///../../../src/components/VTextarea/VTextarea.ts","webpack:///./src/views/admin/Article.vue","webpack:///./node_modules/vditor/dist/index.min.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","name","provide","form","inheritAttrs","props","disabled","lazyValidation","readonly","Boolean","data","inputs","watchers","errorBag","watch","handler","errors","Object","deep","immediate","methods","watchInput","watcher","input","val","_uid","valid","shouldValidate","validate","filter","reset","resetErrorBag","setTimeout","resetValidation","register","unregister","found","find","i","unwatch","render","h","staticClass","attrs","novalidate","attrs$","on","submit","e","$slots","runtime","exports","Op","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","AsyncIterator","PromiseImpl","invoke","record","result","__await","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","iterable","iteratorMethod","isNaN","length","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","findAllCategories","request","url","createOrUpdateCategory","category","deleteCategory","cid","findAllTags","createOrUpdateTag","tag","deleteTag","tid","_vm","_h","$createElement","_c","_self","model","callback","$$v","search","expression","$event","createItem","slot","_v","articles","headers","itemsPerPage","scopedSlots","_u","ref","item","editItem","deleteItem","dialog","close","_s","formTitle","save","titleRules","editedItem","$set","descriptionRules","bottom","offsetY","categoryRules","tags","tagRules","_e","staticRenderFns","page","size","contentEditor","editedIndex","title","description","content","defaultItem","created","getArticles","computed","open","indexOf","assign","getArticle","aid","getCategoriesAndTags","$nextTick","getHTML","position","timeout","tip","initEditor","height","toolbarConfig","pin","counter","enable","max","preview","hljs","lineNumber","after","baseMixins","mixins","autoGrow","noResize","rowHeight","Number","default","validator","v","parseFloat","rows","parseInt","classes","VTextField","noResizeHandle","lazyValue","mounted","calculateInputHeight","$refs","minHeight","Math","genInput","onInput","onKeyDown","isFocused","component","VBtn","VCard","VCardTitle","VCol","VContainer","VDataTable","VDialog","VForm","VIcon","VRow","VSelect","VSpacer","VTextarea","VToolbar","VToolbarItems","VToolbarTitle","root","factory","__webpack_modules__","694","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","Diff","op","text","diff_main","text1","text2","opt_checklines","opt_deadline","MAX_VALUE","Date","getTime","deadline","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute_","unshift","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_lineMode_","diff_bisect_","a","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","splice","subDiff","j","text1_length","text2_length","max_d","ceil","v_offset","v_length","v1","Array","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","x1","y1","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","String","fromCharCode","maxLines","charCodeAt","join","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","replace","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","split","param","decodeURI","ex","n","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","start","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","start_loc","expected_loc","end_loc","index2","index1","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","m","sign","coords1","coords2","157","857","__unused_webpack_module","__webpack_exports__","__webpack_require__","abcRender","chartRender","codeRender","flowchartRender","graphvizRender","highlightRender","lazyLoadImageRender","element","document","loadImg","it","testImage","createElement","src","getAttribute","addEventListener","naturalHeight","naturalWidth","querySelector","clientWidth","window","innerHeight","style","removeAttribute","querySelectorAll","imgElement","vditorImageIntersectionObserver","disconnect","observe","IntersectionObserver","entries","entrie","isIntersecting","intersectionRatio","target","mathRender","mediaRender","mermaidRender","mindmapRender","outlineRender","plantumlRender","constants","setContentTheme","addScript","hasClosest","merge","anchorRender","anchor","classList","add","onclick","id","substr","top","getElementById","offsetTop","scrollTop","onhashchange","decodeURIComponent","location","hash","setLute","selection","speechRender","lang","speechSynthesis","SpeechSynthesisUtterance","playSVG","pauseSVG","speechDom","className","body","insertAdjacentElement","getVoice","currentVoice","defaultVoice","voices","getVoices","onvoiceschanged","voice_1","utterThis","voice","onend","cancel","innerHTML","speak","speaking","paused","resume","pause","Hc","vditorSpeechRange","getSelection","trim","display","event","getRangeAt","cloneRange","rect","getBoundingClientRect","left","screenX","setAttribute","__awaiter","thisArg","_arguments","P","adopt","fulfilled","step","rejected","__generator","f","t","g","_","label","trys","ops","verb","mergeOptions","options","defaultOption","cdn","CDN","customEmoji","emojiPath","HLJS_OPTIONS","icon","markdown","MARKDOWN_OPTIONS","math","MATH_OPTIONS","mode","speech","theme","THEME_OPTIONS","T","md2html","mdText","mergedOptions","G","lute","X","autoSpace","codeBlockPreview","emojiSite","emojis","fixTermTypo","footnotes","headingAnchor","inlineMathDigit","inlineDigit","lazyLoadImage","linkBase","linkPrefix","listStyle","mathBlockPreview","paragraphBeginningSpace","sanitize","toc","renderers","SetJSRenderers","Md2HTML","SetHeadingID","previewRender","previewElement","_a","transform","Z","current","path","O","H","p","B","Q","Y","spanElement","lG","fb","headingElement","scrollTo","scrollX","preview_image","setCodeTheme","Vditor","previewImage","E","k","260","_VDITOR_VERSION","Constants","ZWSP","DROP_EDITOR","MOBILE_WIDTH","CLASS_MENU_DISABLED","EDIT_TOOLBARS","CODE_THEME","CODE_LANGUAGES","engine","macros","list","577","i18n","en_US","ja_JP","ko_KR","ru_RU","zh_CN","zh_TW","369","_constants__WEBPACK_IMPORTED_MODULE_0__","_util_addScript__WEBPACK_IMPORTED_MODULE_1__","abcElements","parentElement","contains","ABCJS","renderAbc","textContent","overflowX","726","echartsElements","innerText","option","JSON","parse","echarts","init","setOption","23","_i18n_index__WEBPACK_IMPORTED_MODULE_0__","_util_code160to32__WEBPACK_IMPORTED_MODULE_1__","index","maxHeight","codeText","codeElement","remove","divElement","copy","copied","textarea","before","outerHeight","383","flowchartElements","flowchartObj","flowchart","drawSVG","890","graphvizElements","blob","Blob","URL","webkitURL","blobUrl","createObjectURL","worker","Worker","Viz","renderSVGElement","outerHTML","catch","console","93","_util_addScript__WEBPACK_IMPORTED_MODULE_2__","_util_addStyle__WEBPACK_IMPORTED_MODULE_1__","hljsOption","includes","vditorHljsStyle","href","c","codes","block","highlightElement","linenNumberTemp","whiteSpace","getComputedStyle","isSoftWrap","lineNumberHTML","lineList","map","lineHeight","insertAdjacentHTML","323","_util_code160to32__WEBPACK_IMPORTED_MODULE_3__","mathElements","defaultOptions","mathElement","katex","renderToString","displayMode","tagName","output","message","stopPropagation","preventDefault","vditorMathElement","currentTarget","closest","clipboardData","setData","chainAsync_1","fns","curr","last","MathJax","loader","paths","mathjax","startup","typeset","tex","J","renderMath_1","mathOptions","getMetricsFor","tex2svgPromise","node","append","clear","updateDocument","errorTextElement","promise","chains","_loop_1","207","videoRender","audioRender","iframeRender","youtubeMatch","youkuMatch","qqMatch","coubMatch","facebookMatch","dailymotionMatch","bilibiliMatch","tedMatch","encodeURIComponent","aElement","765","mermaidElements","config","altFontFamily","htmlLabels","useMaxWidth","fontFamily","gantt","leftPadding","rightPadding","securityLevel","sequence","boxMargin","diagramMarginX","diagramMarginY","startOnLoad","themeVariables","activationBkgColor","activationBorderColor","activeTaskBkgColor","activeTaskBorderColor","actorBkg","actorBorder","actorLineColor","actorTextColor","altBackground","altSectionBkgColor","arrowheadColor","background","border1","border2","classText","clusterBkg","clusterBorder","critBkgColor","critBorderColor","darkTextColor","defaultLinkColor","doneTaskBkgColor","doneTaskBorderColor","edgeLabelBackground","errorBkgColor","errorTextColor","fillType0","fillType1","fillType2","fillType3","fillType4","fillType5","fillType6","fillType7","fontSize","gridColor","labelBackground","labelBoxBkgColor","labelBoxBorderColor","labelColor","labelTextColor","lineColor","loopTextColor","mainBkg","mainContrastColor","nodeBkg","nodeBorder","noteBkgColor","noteBorderColor","noteTextColor","primaryBorderColor","primaryColor","primaryTextColor","secondBkg","secondaryBorderColor","secondaryColor","secondaryTextColor","sectionBkgColor","sectionBkgColor2","sequenceNumberColor","signalColor","signalTextColor","taskBkgColor","taskBorderColor","taskTextClickableColor","taskTextColor","taskTextDarkColor","taskTextLightColor","taskTextOutsideColor","tertiaryBorderColor","tertiaryColor","tertiaryTextColor","textColor","titleColor","todayLineColor","mermaid","initialize","894","mindmapElements","series","initialTreeDepth","itemStyle","borderWidth","color","backgroundColor","borderColor","borderRadius","offset","lineStyle","width","roam","symbol","params","children","tooltip","trigger","triggerOn","198","_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__","_mathRender__WEBPACK_IMPORTED_MODULE_0__","contentElement","targetElement","vditor","tocHTML","ids","from","W","lastIndex","tempElement","SetToC","currentMode","HTML2VditorDOM","SpinVditorIRDOM","SpinVditorDOM","Lute","New","headingsElement","firstElementChild","nextElementSibling","isEqualNode","idElement","windowScrollY","toolbar","offsetHeight","scrollY","583","plantumlElements","plantumlEncoder","encode","792","PutEmojis","SetEmojiSite","SetHeadingAnchor","SetInlineMathAllowDigitAfterOpenMarker","SetAutoSpace","SetFootnotes","SetFixTermTypo","SetVditorCodeBlockPreview","SetVditorMathBlockPreview","SetSanitize","SetChineseParagraphBeginningSpace","SetRenderListStyle","SetLinkBase","SetLinkPrefix","SetMark","SetImageLazyLoading","264","_i18n__WEBPACK_IMPORTED_MODULE_0__","oldImgElement","oldImgRect","spin","overflow","translate3d","innerWidth","scrollWidth","scrollHeight","clientHeight","btnElement","deg","968","codeTheme","958","_util_addStyle__WEBPACK_IMPORTED_MODULE_0__","contentTheme","vditorContentTheme","cssPath","228","addScriptSync","xhrObj","XMLHttpRequest","setRequestHeader","send","scriptElement","responseText","head","appendChild","onload","946","addStyle","styleElement","rel","getElementsByTagName","769","code160to32","931","isSafari","navigator","userAgent","isFirefox","toLowerCase","accessLocalStorage","localStorage","getEventName","isCtrl","platform","toUpperCase","metaKey","ctrlKey","updateHotkeyTip","hotkey","test","startsWith","isChrome","vendor","713","_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__","hasTopClosestByClassName","hasClosestByClassName","parentClosest","findTop","hasTopClosestByTag","nodeName","S","getTopList","topUlElement","topOlElement","topListElement","hasClosestByAttribute","attr","nodeType","isClosest","hasClosestBlock","blockElement","hasClosestByMatchTag","getLastNode","lastChild","615","hasClosestByTag","hasClosestByHeadings","224","_i","merger","prop","187","_compatibility__WEBPACK_IMPORTED_MODULE_2__","_hasClosest__WEBPACK_IMPORTED_MODULE_1__","getEditorRange","range","rangeCount","startContainer","focus","ownerDocument","createRange","setStart","collapse","getCursorPosition","editor","cursorRect","parentRect","getClientRects","parent_1","startOffset","childNodes","selectNode","setEnd","endContainer","endOffset","selectIsEditor","container","commonAncestorContainer","setSelectionFocus","removeAllRanges","addRange","getSelectPosition","selectElement","editorElement","end","preSelectionRange","selectNodeContents","setSelectionByPosition","charIndex","pNode","foundStart","nextCharIndex","nextSibling","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setRangeByWbr","wbrElement","previousElementSibling","isSameNode","previousSibling","i7","insertNode","createTextNode","insertHTML","tempBlockElement","pasteElement","preventInput","execCommand","lastElementChild","F9","pasteTemplate","cloneNode","__webpack_module_cache__","moduleId","cachedModule","definition","o","get","templateObject_1","getMarkdown","sv","VditorDOM2Md","wysiwyg","VditorIRDOM2Md","ir","DevTools","renderEchart","_this","devtools","ASTChart","RenderEChartsJSON","align","verticalAlign","orient","toolbox","emphasis","iconStyle","feature","restore","show","saveAsImage","right","resize","compatibility","removeCurrentToolbar","names","itemElement","setCurrentToolbar","enableToolbar","disableToolbar","hideToolbar","showToolbar","hidePanel","panels","exceptElement","elements","emoji","hint","popover","toggleSubMenu","panelElement","actionBtn","level","Le","log","print","processPasteCode","isCode","childElementCount","pres","code","processCodeRender","previewPanel","language","renderToc","outline","clickToc","keydownToc","im","execAfterRender","insertBeforeBlock","trimRight","insertAfterBlock","tocElement","ignoreSpace","isHrMD","isHeadingMD","startSpace","endSpace","markerElement","previousNode","previewRenderElement","firstLinkRefDefElement","isIRElement","footnoteElement","a1","blockquoteElement","O9","listPrevElement","listNextElement","inputType","debugger","footnoteItemElement","footnoteItemText","marker","footnoteRefElement","firstFootnoteElement","allLinkRefDefsElement","allFootnoteElement","ib","process_processAfterRender","enableAddUndoStack","enableHint","enableInput","matchHotKey","hotKey","yl","altKey","shiftKey","hotKeys","keyCode","hasShift","vU","nextIsNode","nodeValue","nextNode","parentNextNode","previousIsNode","expandMarker","nodeElement","JQ","nodeElementEnd","collapsed","processKeydown","composingLock","isComposing","undo","recordFirstPosition","zh","fixGSKeyBackspace","fixCJKPosition","fixHR","newlineElement","beforeMarkerElement","afterMarkerElement","pElement","fixMarkdown","fixList","fixBlockquote","preRenderElement","codeRenderElement","firstChild","fixCodeBlock","preBeforeElement","recentLanguage","cellElement","tableElement","isFirstCell","table2Element","isLastCell","fixTable","fixTask","fixTab","headingMarkerElement","process_processHeading","fixDelete","rangeStart","headingLength","fixFirefoxArrowUpTable","fixCursorDownInlineMath","inputEvent","processAfterRender","codeBlockMarkerElement","openMarkerElement","getSideByType","mathBlockMarkerElement","mathBlockCloseElement","Caret","isSVElement","processSpinVditorSVDOM","scrollCenter","processKeydown_processKeydown","_b","_d","textElement","blockquoteMarkerElement","listMarkerElement","taskMarkerElement","listLastMarkerElement","startIndex","isTask","listFirstMarkerElement","isFirst","newLineMatch","newLineText","processPreviousMarkers","extractContents","previousLastElement","setTheme","initUI","upload","export","setEditMode","afterRender","visualViewport","pendingUpdate_1","viewportHandler","requestAnimationFrame","layoutViewport","setPadding","minPadding","maxWidth","paddingLeft","offsetWidth","setTypewriterPosition","typewriterMode","setProperty","initValue","pK","getItem","cache","originalInnerHTML","HTML2Md","highlightToolbarIR","clearTimeout","hlToolbarTimeoutId","Gb","typeElement","quoteElement","strongElement","emElement","sElement","liElement","codeBlockElement","afterRenderEvent","afterRenderTimeoutId","setItem","addToUndoStack","undoDelay","previoueIsEmptyA","nextIsCode","getNextHTML","getPreviousHTML","getRenderElementNextNode","blockCodeElement","splitElement","previousHTML","nextHTML","beforeHTML","afterHTML","modifyPre","cloneRangeOffset","parentNode","insertBefore","setHeading","removeHeading","showCode","first","previousElement","wysiwyg_processKeydown_processKeydown","blur","inputElemment","select","topBQElement","E2","pTempElement","linRefElement","inputElement","removeBlockElement","click","rangeStartOffset","nextElement","highlightToolbarWYSIWYG","footnotesElement","genClose","setPopoverPosition","commentElement","ids_1","nextIds_1","genUp","genDown","updateTable_1","oldRow","oldColumn","cells","row","input_1","column","input2_1","columnDiff","rowDiff","rowHTML","l","setAlign_1","setTableAlign","left_1","center_1","right_1","td","th","alignType","alignLeft","ns","alignCenter","alignRight","insertRowElement","insertRowBelow","insertRow","insertRowBElement","insertRowAbove","insertColumnElement","insertColumnRight","insertColumn","insertColumnBElement","insertColumnLeft","deleteRowElement","deleteRow","deleteColumnElement","deleteColumn","inputWrap","textAlign","oninput","onkeydown","input2Wrap","linkRefElement","genLinkRefPopover","footnotesRefElement","footnoteRef","input_2","blockRenderElement","languageWrap","language_1","codeElement_1","onkeyup","matchLangData","selectionStart","keyName","genHTML","input_3","genAPopover","backslashElement","offsetLeft","updateLinkRef","input1","textIsNotEmpty","linkHotkey","input1Wrap","linkRef","upElement","up","downElement","down","nextInputElement","updateA","input2","link","tooltipText","genImagePopover","updateImg","alt","imageURL","elementEvent","altWrap","alternateText","titleWrap","highlightToolbar","renderDomByMd","md","Md2VditorDOM","cancelBES","commandName","jump","lastTagName","lastEndTagName","splitHTML","lastBeforeHTML","lastAfterHTML","toolbarEvent","CustomEvent","useHighlight","useRender","inlineCodeElement","listToggle","surroundContents","deleteContents","textInputElement","textInputElements","tableHTML_1","tableText","delimiter_1","header","subIndex","cell","hrHTML","MenuItem","menuItem","iconElement","tipPosition","process_processToolbar","processToolbar","__extends","extendStatics","b","__","markdownText","SetVditorIR","SetVditorWYSIWYG","SetVditorSV","Md2VditorIRDOM","svHTML","resetIcon","toggle","EditMode","_super","instantRendering","splitView","_bindEvent","getSelectText","focusEvent","dblclickEvent","blurEvent","expandElement","selectPopover","relatedTarget","hideComment","dropEvent","dataTransfer","getData","types","paste","pasteCode","copyEvent","cutEvent","comment","getComments","adjustTop","cursorTop","Ny","hotkeyEvent","extend","ctrlEnter","redo","esc","processHeading","repeat","sub","subMenuItem","dispatchEvent","selectEvent","onmouseup","selectText","showComment","processPaste","Md2VditorSVDOM","spanNode","isPrevious","sideElement","SpinVditorSVDOM","spanType","markerText","hasNL","previousType","previousText","openMarker","processTimeoutId","newLine","insertAdjacentText","getElement","setHeaders","xhr","Upload","isUploading","validateFile","files","hide","uploadFileList","errorTip","uploadingStr","iMax","file","nameEmpty","over","fileExt","filename","accept","isAccept","some","fileTypeError","uploading","genUploadedLabel","response","msg","errFiles","uploadError","succFileText","succMap","uploadFiles","fileList","filesMax","fileItem","isValidate","validateResult","formData","extraData","multiple","DataTransferItem","getAsFile","FormData","fieldName","token","withCredentials","onreadystatechange","readyState","DONE","status","success","format","onprogress","lengthComputable","progress","loaded","total","progressBar","input_input","previousAEmptyElement","wbr","html_1","firstLinkRefDefElement_1","isWYSIWYGElement","firstFootnoteElement_1","triggerRemoveComment","__makeTemplateObject","cooked","raw","fixBrowserBehavior_awaiter","fixBrowserBehavior_generator","pLiElement","zwspNode","inlineElement","insertEmptyBlock","goPreviousCell","isSelected","pHTML","trimLeft","replaceChild","listIndent","liElements_1","cloneContents","liParentElement","liHTML_1","tempTopListElement","listOutdent","liParentLiElement","liParentAfterElement","liElements_2","isMatch_1","afterHTML_1","columnCnt","rowCnt","currentColumn","textArray","endsWith","tab","pText","pTextList","tableHeaderMD","pInnerHTML","innerHTMLList","lastElement","DX","theadHTML","tbodyElement","brElement","trElement","previousCellElement","codePosition","isEmpty","taskItemElement","checked","lastNode","afterHTML_2","beforeHTML_1","isAfter_1","taskItem","parentTagName","dataMarker","startAttribute","rangeElement","lastCellElement","textHTML","textPlain","renderLinkDest","doc","items","entering","WalkContinue","TokensStr","__internal_object__","Parent","Type","linkToImgUrl","xhr_1","linkToImgFormat","responseJSON_1","original_1","originalURL","linkToImgCallback","stringify","DOMParser","parseFromString","$j","HTML2VditorIRDOM","oC","processHint","matchLangData_1","key_1","removeInline","aTextElement","Hint","hintExtends","splitChar","fillEmoji","preElement","timeId","focusNode","currentLineValue","getKey","emojiHint_1","GetEmojis","matchEmojiData_1","delay","textareaPosition","hintsHTML","hintData","replaceHtml","replaceIndex","defaultView","getPropertyValue","currentHintElement","length_1","currentLastIndex","lastItem","maxLength","preChar","IR","placeholder","bindEvent","linkElement","lastRect","VditorDOM2HTML","VditorIRDOM2HTML","Outline","outlineLabel","Preview","copyToX","actions","actionElement","actionHtml","action","btn","actionCustom","w","mdTimeoutId","renderStartTime","responseJSON","startTime","time","performanceTip","cmtFocusElement","copyElement","backgroundImage","Resize","documentSelf","clientY","ondragstart","captureEvents","onmousemove","moveEvent","paddingBottom","onselectstart","onselect","Editor","textScrollTop","textHeight","textScrollHeight","Tip","setPreviewMode","Both_extends","Both","Br","CodeTheme_extends","CodeTheme","ContentTheme_extends","ContentTheme","Counter","Custom_extends","Custom","Devtools_extends","Devtools","Divider","Emoji_extends","Emoji","commonEmojiHTML","emojiValue","tailHTML","emojiTail","download","downloadTip","exportMarkdown","exportPDF","generate","iframe","contentDocument","write","contentWindow","postMessage","exportHTML","Export_extends","Export","Fullscreen_extends","Fullscreen","zIndex","svgElement","fullscreen","Headings_extends","Headings","Help_extends","Help","Indent_extends","Indent","Info_extends","Info","Version","InsertAfter_extends","InsertAfter","InsertBefore_extends","InsertBefore","Outdent_extends","Outdent","Outline_extends","Outline_Outline","Preview_extends","Preview_Preview","toolbars","RecordMedia","SAMPLE_RATE","isRecording","readyFlag","leftChannel","rightChannel","recordingLength","AudioContext","webkitAudioContext","DEFAULT_SAMPLE_RATE","sampleRate","volume","createGain","audioInput","createMediaStreamSource","connect","recorder","createScriptProcessor","onaudioprocess","destination","cloneChannelData","leftChannelData","rightChannelData","Float32Array","startRecordingNewWavFile","stopRecording","buildWavFileBlob","leftBuffer","mergeBuffers","rightBuffer","interleaved","downSampleBuffer","totalByteCount","buffer","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","subChunk2ByteCount","lng","setInt16","rate","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","desiredChannelBuffer","set","setUint8","Record_extends","Record","mediaRecorder","File","recording","mediaDevices","getUserMedia","audio","mediaStream","inputBuffer","getChannelData","Redo_extends","Redo","Undo_extends","Undo","Upload_extends","Upload_Upload","inputHTML","Toolbar","genItem","panelElement_1","subI","menuItemObj","undo_Undo","stackSize","resetStack","clearStack","undoStack","redoStack","renderDiff","hasUndo","G6","addCaret","lastText","diff","patchList","isRedo","redoPatchList","setFocus","cloneElement","Options","mergeToolbar","toolbarItem","toolbarResult","currentMenuItem","defaultMenuItem","WYSIWYG","commentIds","blockStartElement","blockEndElement","NewNodeID","rangeClone","contents","removeStart","removeEnd","startElement","endElement","Set","comments_1","difference","has","oldIds","removedIds","codeEndElement","aEndElement","aTitle","popoverTop1","popoverTop","scroll","topPx","checkElement","nextRenderElement","src_extends","version","getOptions","_lutePath","contentThemePath","getValue","getCurrentMode","renderPreview","clearCache","removeItem","disabledCache","enableCache","html2md","deleteValue","isCollapsed","updateValue","insertValue","tmpElement","setValue","destroy","getCommentIds","hlCommentIds","hlItem","unHlCommentIds","unHlItem","removeCommentIds","removeIds","removeId"],"mappings":"qLAAA,SAASA,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIxB,SAASS,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,S,sJCXG,sBAAO,EAAD,KAEnB,eAAmB,SAFN,OAIN,CACPC,KADO,SAGPC,QAHO,WAIL,MAAO,CAAEC,KAAMR,OAGjBS,cAPO,EASPC,MAAO,CACLC,SADK,QAELC,eAFK,QAGLC,SAHK,QAILrB,MAAOsB,SAGTC,KAAM,iBAAO,CACXC,OADW,GAEXC,SAFW,GAGXC,SAAU,KAGZC,MAAO,CACLD,SAAU,CACRE,QADQ,SACD,GACL,IAAMC,EAASC,OAAA,oBAAf,GAEAtB,KAAA,mBAEFuB,MANQ,EAORC,WAAW,IAIfC,QAAS,CACPC,WADO,SACG,GAAY,WACdC,EAAW,SAAAC,GACf,OAAOA,EAAA,mBAA0B,SAAAC,GAC/B,OAAU,EAAV,SAAyBD,EAAzB,UACC,CAAEJ,WAAW,KAGZP,EAAqB,CACzBa,KAAMF,EADmB,KAEzBG,MAAO,aACPC,eAAgB,cAiBlB,OAdIhC,KAAJ,eAEEiB,EAAA,eAA0BW,EAAA,yBAAgC,SAAAC,GACxD,IAGI,0BAA6BD,EAAjC,QAEAX,EAAA,MAAiBU,EAAjB,QAGFV,EAAA,MAAiBU,EAAjB,GAGF,GAGFM,SA/BO,WAgCL,WAAOjC,KAAKgB,OAAOkB,QAAO,SAAAN,GAAK,OAAKA,EAAA,UAA7B,cAGTO,MAnCO,WAoCLnC,KAAA,gBAAoB,SAAA4B,GAAK,OAAIA,EAA7B,WACA5B,KAAA,iBAEFoC,cAvCO,WAuCM,WACPpC,KAAJ,gBAEEqC,YAAW,WACT,gBADF,IAMJC,gBAhDO,WAiDLtC,KAAA,gBAAoB,SAAA4B,GAAK,OAAIA,EAA7B,qBACA5B,KAAA,iBAEFuC,SApDO,SAoDC,GACNvC,KAAA,eACAA,KAAA,cAAmBA,KAAK0B,WAAxB,KAEFc,WAxDO,SAwDG,GACR,IAAMC,EAAQzC,KAAKgB,OAAO0B,MAAK,SAAAC,GAAC,OAAIA,EAAA,OAAWf,EAA/C,QAEA,MAEA,IAAMgB,EAAU5C,KAAKiB,SAASyB,MAAK,SAAAC,GAAC,OAAIA,EAAA,OAAWF,EAAnD,QACA,IACEG,EAAA,QACAA,EAAA,kBAGF5C,KAAA,SAAgBA,KAAKiB,SAASiB,QAAO,SAAAS,GAAC,OAAIA,EAAA,OAAWF,EAArD,QACAzC,KAAA,OAAcA,KAAKgB,OAAOkB,QAAO,SAAAS,GAAC,OAAIA,EAAA,OAAWF,EAAjD,QACAzC,KAAA,QAAaA,KAAb,SAA4ByC,EAA5B,SAIJI,OA3GO,SA2GD,GAAG,WACP,OAAOC,EAAE,OAAQ,CACfC,YADe,SAEfC,MAAO,gBACLC,YADK,GAEFjD,KAAKkD,QAEVC,GAAI,CACFC,OAAS,SAAAC,GAAD,OAAc,uBAEvBrD,KAAKsD,OATR,a,uBC7HJ,IAAIC,EAAW,SAAUC,GACvB,aAEA,IAEInD,EAFAoD,EAAKnC,OAAOoC,UACZC,EAASF,EAAGG,eAEZC,EAA4B,oBAAXC,OAAwBA,OAAS,GAClDC,EAAiBF,EAAQG,UAAY,aACrCC,EAAsBJ,EAAQK,eAAiB,kBAC/CC,EAAoBN,EAAQO,aAAe,gBAE/C,SAASC,EAAOC,EAAKjF,EAAKG,GAOxB,OANA8B,OAAOiD,eAAeD,EAAKjF,EAAK,CAC9BG,MAAOA,EACPgF,YAAY,EACZC,cAAc,EACdC,UAAU,IAELJ,EAAIjF,GAEb,IAEEgF,EAAO,GAAI,IACX,MAAOjE,GACPiE,EAAS,SAASC,EAAKjF,EAAKG,GAC1B,OAAO8E,EAAIjF,GAAOG,GAItB,SAASmF,EAAKC,EAASC,EAAS9E,EAAM+E,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQnB,qBAAqBsB,EAAYH,EAAUG,EAC/EC,EAAY3D,OAAO4D,OAAOH,EAAerB,WACzCyB,EAAU,IAAIC,EAAQN,GAAe,IAMzC,OAFAG,EAAUI,QAAUC,EAAiBV,EAAS7E,EAAMoF,GAE7CF,EAcT,SAASM,EAASzF,EAAIwE,EAAKhF,GACzB,IACE,MAAO,CAAEkG,KAAM,SAAUlG,IAAKQ,EAAG2F,KAAKnB,EAAKhF,IAC3C,MAAOc,GACP,MAAO,CAAEoF,KAAM,QAASlG,IAAKc,IAhBjCoD,EAAQmB,KAAOA,EAoBf,IAAIe,EAAyB,iBACzBC,EAAyB,iBACzBC,EAAoB,YACpBC,EAAoB,YAIpBC,EAAmB,GAMvB,SAASd,KACT,SAASe,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxBA,EAAkBlC,GAAkB,WAClC,OAAO/D,MAGT,IAAIkG,EAAW5E,OAAO6E,eAClBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MAC/DD,GACAA,IAA4B3C,GAC5BE,EAAO8B,KAAKW,EAAyBrC,KAGvCkC,EAAoBG,GAGtB,IAAIE,EAAKN,EAA2BtC,UAClCsB,EAAUtB,UAAYpC,OAAO4D,OAAOe,GAWtC,SAASM,EAAsB7C,GAC7B,CAAC,OAAQ,QAAS,UAAU8C,SAAQ,SAASC,GAC3CpC,EAAOX,EAAW+C,GAAQ,SAASnH,GACjC,OAAOU,KAAKqF,QAAQoB,EAAQnH,SAkClC,SAASoH,EAAczB,EAAW0B,GAChC,SAASC,EAAOH,EAAQnH,EAAKL,EAASC,GACpC,IAAI2H,EAAStB,EAASN,EAAUwB,GAASxB,EAAW3F,GACpD,GAAoB,UAAhBuH,EAAOrB,KAEJ,CACL,IAAIsB,EAASD,EAAOvH,IAChBE,EAAQsH,EAAOtH,MACnB,OAAIA,GACiB,kBAAVA,GACPmE,EAAO8B,KAAKjG,EAAO,WACdmH,EAAY1H,QAAQO,EAAMuH,SAASnH,MAAK,SAASJ,GACtDoH,EAAO,OAAQpH,EAAOP,EAASC,MAC9B,SAASkB,GACVwG,EAAO,QAASxG,EAAKnB,EAASC,MAI3ByH,EAAY1H,QAAQO,GAAOI,MAAK,SAASoH,GAI9CF,EAAOtH,MAAQwH,EACf/H,EAAQ6H,MACP,SAASrH,GAGV,OAAOmH,EAAO,QAASnH,EAAOR,EAASC,MAvBzCA,EAAO2H,EAAOvH,KA4BlB,IAAI2H,EAEJ,SAASC,EAAQT,EAAQnH,GACvB,SAAS6H,IACP,OAAO,IAAIR,GAAY,SAAS1H,EAASC,GACvC0H,EAAOH,EAAQnH,EAAKL,EAASC,MAIjC,OAAO+H,EAaLA,EAAkBA,EAAgBrH,KAChCuH,EAGAA,GACEA,IAKRnH,KAAKqF,QAAU6B,EA2BjB,SAAS5B,EAAiBV,EAAS7E,EAAMoF,GACvC,IAAIiC,EAAQ1B,EAEZ,OAAO,SAAgBe,EAAQnH,GAC7B,GAAI8H,IAAUxB,EACZ,MAAM,IAAIyB,MAAM,gCAGlB,GAAID,IAAUvB,EAAmB,CAC/B,GAAe,UAAXY,EACF,MAAMnH,EAKR,OAAOgI,IAGTnC,EAAQsB,OAASA,EACjBtB,EAAQ7F,IAAMA,EAEd,MAAO,EAAM,CACX,IAAIiI,EAAWpC,EAAQoC,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUpC,GACnD,GAAIqC,EAAgB,CAClB,GAAIA,IAAmB1B,EAAkB,SACzC,OAAO0B,GAIX,GAAuB,SAAnBrC,EAAQsB,OAGVtB,EAAQuC,KAAOvC,EAAQwC,MAAQxC,EAAQ7F,SAElC,GAAuB,UAAnB6F,EAAQsB,OAAoB,CACrC,GAAIW,IAAU1B,EAEZ,MADA0B,EAAQvB,EACFV,EAAQ7F,IAGhB6F,EAAQyC,kBAAkBzC,EAAQ7F,SAEN,WAAnB6F,EAAQsB,QACjBtB,EAAQ0C,OAAO,SAAU1C,EAAQ7F,KAGnC8H,EAAQxB,EAER,IAAIiB,EAAStB,EAASX,EAAS7E,EAAMoF,GACrC,GAAoB,WAAhB0B,EAAOrB,KAAmB,CAO5B,GAJA4B,EAAQjC,EAAQzF,KACZmG,EACAF,EAEAkB,EAAOvH,MAAQwG,EACjB,SAGF,MAAO,CACLtG,MAAOqH,EAAOvH,IACdI,KAAMyF,EAAQzF,MAGS,UAAhBmH,EAAOrB,OAChB4B,EAAQvB,EAGRV,EAAQsB,OAAS,QACjBtB,EAAQ7F,IAAMuH,EAAOvH,OAU7B,SAASmI,EAAoBF,EAAUpC,GACrC,IAAIsB,EAASc,EAASvD,SAASmB,EAAQsB,QACvC,GAAIA,IAAWpG,EAAW,CAKxB,GAFA8E,EAAQoC,SAAW,KAEI,UAAnBpC,EAAQsB,OAAoB,CAE9B,GAAIc,EAASvD,SAAS,YAGpBmB,EAAQsB,OAAS,SACjBtB,EAAQ7F,IAAMe,EACdoH,EAAoBF,EAAUpC,GAEP,UAAnBA,EAAQsB,QAGV,OAAOX,EAIXX,EAAQsB,OAAS,QACjBtB,EAAQ7F,IAAM,IAAIwI,UAChB,kDAGJ,OAAOhC,EAGT,IAAIe,EAAStB,EAASkB,EAAQc,EAASvD,SAAUmB,EAAQ7F,KAEzD,GAAoB,UAAhBuH,EAAOrB,KAIT,OAHAL,EAAQsB,OAAS,QACjBtB,EAAQ7F,IAAMuH,EAAOvH,IACrB6F,EAAQoC,SAAW,KACZzB,EAGT,IAAIvG,EAAOsH,EAAOvH,IAElB,OAAMC,EAOFA,EAAKG,MAGPyF,EAAQoC,EAASQ,YAAcxI,EAAKC,MAGpC2F,EAAQ6C,KAAOT,EAASU,QAQD,WAAnB9C,EAAQsB,SACVtB,EAAQsB,OAAS,OACjBtB,EAAQ7F,IAAMe,GAUlB8E,EAAQoC,SAAW,KACZzB,GANEvG,GA3BP4F,EAAQsB,OAAS,QACjBtB,EAAQ7F,IAAM,IAAIwI,UAAU,oCAC5B3C,EAAQoC,SAAW,KACZzB,GAoDX,SAASoC,EAAaC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBnI,KAAKyI,WAAWC,KAAKN,GAGvB,SAASO,EAAcP,GACrB,IAAIvB,EAASuB,EAAMQ,YAAc,GACjC/B,EAAOrB,KAAO,gBACPqB,EAAOvH,IACd8I,EAAMQ,WAAa/B,EAGrB,SAASzB,EAAQN,GAIf9E,KAAKyI,WAAa,CAAC,CAAEJ,OAAQ,SAC7BvD,EAAY0B,QAAQ0B,EAAclI,MAClCA,KAAKmC,OAAM,GA8Bb,SAASkE,EAAOwC,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAAS9E,GAC9B,GAAI+E,EACF,OAAOA,EAAerD,KAAKoD,GAG7B,GAA6B,oBAAlBA,EAASb,KAClB,OAAOa,EAGT,IAAKE,MAAMF,EAASG,QAAS,CAC3B,IAAIrG,GAAK,EAAGqF,EAAO,SAASA,IAC1B,QAASrF,EAAIkG,EAASG,OACpB,GAAIrF,EAAO8B,KAAKoD,EAAUlG,GAGxB,OAFAqF,EAAKxI,MAAQqJ,EAASlG,GACtBqF,EAAKtI,MAAO,EACLsI,EAOX,OAHAA,EAAKxI,MAAQa,EACb2H,EAAKtI,MAAO,EAELsI,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMV,GAIjB,SAASA,IACP,MAAO,CAAE9H,MAAOa,EAAWX,MAAM,GA+MnC,OA5mBAqG,EAAkBrC,UAAY4C,EAAG2C,YAAcjD,EAC/CA,EAA2BiD,YAAclD,EACzCA,EAAkBmD,YAAc7E,EAC9B2B,EACA7B,EACA,qBAaFX,EAAQ2F,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,oBAAXD,GAAyBA,EAAOH,YAClD,QAAOI,IACHA,IAAStD,GAG2B,uBAAnCsD,EAAKH,aAAeG,EAAK/I,QAIhCkD,EAAQ8F,KAAO,SAASF,GAQtB,OAPI9H,OAAOiI,eACTjI,OAAOiI,eAAeH,EAAQpD,IAE9BoD,EAAOI,UAAYxD,EACnB3B,EAAO+E,EAAQjF,EAAmB,sBAEpCiF,EAAO1F,UAAYpC,OAAO4D,OAAOoB,GAC1B8C,GAOT5F,EAAQiG,MAAQ,SAASnK,GACvB,MAAO,CAAEyH,QAASzH,IAsEpBiH,EAAsBG,EAAchD,WACpCgD,EAAchD,UAAUO,GAAuB,WAC7C,OAAOjE,MAETwD,EAAQkD,cAAgBA,EAKxBlD,EAAQkG,MAAQ,SAAS9E,EAASC,EAAS9E,EAAM+E,EAAa6B,QACxC,IAAhBA,IAAwBA,EAAchH,SAE1C,IAAIgK,EAAO,IAAIjD,EACb/B,EAAKC,EAASC,EAAS9E,EAAM+E,GAC7B6B,GAGF,OAAOnD,EAAQ2F,oBAAoBtE,GAC/B8E,EACAA,EAAK3B,OAAOpI,MAAK,SAASkH,GACxB,OAAOA,EAAOpH,KAAOoH,EAAOtH,MAAQmK,EAAK3B,WAuKjDzB,EAAsBD,GAEtBjC,EAAOiC,EAAInC,EAAmB,aAO9BmC,EAAGvC,GAAkB,WACnB,OAAO/D,MAGTsG,EAAGsD,SAAW,WACZ,MAAO,sBAkCTpG,EAAQqG,KAAO,SAASC,GACtB,IAAID,EAAO,GACX,IAAK,IAAIxK,KAAOyK,EACdD,EAAKnB,KAAKrJ,GAMZ,OAJAwK,EAAKE,UAIE,SAAS/B,IACd,MAAO6B,EAAKb,OAAQ,CAClB,IAAI3J,EAAMwK,EAAKG,MACf,GAAI3K,KAAOyK,EAGT,OAFA9B,EAAKxI,MAAQH,EACb2I,EAAKtI,MAAO,EACLsI,EAQX,OADAA,EAAKtI,MAAO,EACLsI,IAsCXxE,EAAQ6C,OAASA,EAMjBjB,EAAQ1B,UAAY,CAClBuF,YAAa7D,EAEbjD,MAAO,SAAS8H,GAcd,GAbAjK,KAAKkK,KAAO,EACZlK,KAAKgI,KAAO,EAGZhI,KAAK0H,KAAO1H,KAAK2H,MAAQtH,EACzBL,KAAKN,MAAO,EACZM,KAAKuH,SAAW,KAEhBvH,KAAKyG,OAAS,OACdzG,KAAKV,IAAMe,EAEXL,KAAKyI,WAAWjC,QAAQmC,IAEnBsB,EACH,IAAK,IAAI3J,KAAQN,KAEQ,MAAnBM,EAAK6J,OAAO,IACZxG,EAAO8B,KAAKzF,KAAMM,KACjByI,OAAOzI,EAAK8J,MAAM,MACrBpK,KAAKM,GAAQD,IAMrBgK,KAAM,WACJrK,KAAKN,MAAO,EAEZ,IAAI4K,EAAYtK,KAAKyI,WAAW,GAC5B8B,EAAaD,EAAU1B,WAC3B,GAAwB,UAApB2B,EAAW/E,KACb,MAAM+E,EAAWjL,IAGnB,OAAOU,KAAKwK,MAGd5C,kBAAmB,SAAS6C,GAC1B,GAAIzK,KAAKN,KACP,MAAM+K,EAGR,IAAItF,EAAUnF,KACd,SAAS0K,EAAOC,EAAKC,GAYnB,OAXA/D,EAAOrB,KAAO,QACdqB,EAAOvH,IAAMmL,EACbtF,EAAQ6C,KAAO2C,EAEXC,IAGFzF,EAAQsB,OAAS,OACjBtB,EAAQ7F,IAAMe,KAGNuK,EAGZ,IAAK,IAAIjI,EAAI3C,KAAKyI,WAAWO,OAAS,EAAGrG,GAAK,IAAKA,EAAG,CACpD,IAAIyF,EAAQpI,KAAKyI,WAAW9F,GACxBkE,EAASuB,EAAMQ,WAEnB,GAAqB,SAAjBR,EAAMC,OAIR,OAAOqC,EAAO,OAGhB,GAAItC,EAAMC,QAAUrI,KAAKkK,KAAM,CAC7B,IAAIW,EAAWlH,EAAO8B,KAAK2C,EAAO,YAC9B0C,EAAanH,EAAO8B,KAAK2C,EAAO,cAEpC,GAAIyC,GAAYC,EAAY,CAC1B,GAAI9K,KAAKkK,KAAO9B,EAAME,SACpB,OAAOoC,EAAOtC,EAAME,UAAU,GACzB,GAAItI,KAAKkK,KAAO9B,EAAMG,WAC3B,OAAOmC,EAAOtC,EAAMG,iBAGjB,GAAIsC,GACT,GAAI7K,KAAKkK,KAAO9B,EAAME,SACpB,OAAOoC,EAAOtC,EAAME,UAAU,OAG3B,KAAIwC,EAMT,MAAM,IAAIzD,MAAM,0CALhB,GAAIrH,KAAKkK,KAAO9B,EAAMG,WACpB,OAAOmC,EAAOtC,EAAMG,gBAU9BV,OAAQ,SAASrC,EAAMlG,GACrB,IAAK,IAAIqD,EAAI3C,KAAKyI,WAAWO,OAAS,EAAGrG,GAAK,IAAKA,EAAG,CACpD,IAAIyF,EAAQpI,KAAKyI,WAAW9F,GAC5B,GAAIyF,EAAMC,QAAUrI,KAAKkK,MACrBvG,EAAO8B,KAAK2C,EAAO,eACnBpI,KAAKkK,KAAO9B,EAAMG,WAAY,CAChC,IAAIwC,EAAe3C,EACnB,OAIA2C,IACU,UAATvF,GACS,aAATA,IACDuF,EAAa1C,QAAU/I,GACvBA,GAAOyL,EAAaxC,aAGtBwC,EAAe,MAGjB,IAAIlE,EAASkE,EAAeA,EAAanC,WAAa,GAItD,OAHA/B,EAAOrB,KAAOA,EACdqB,EAAOvH,IAAMA,EAETyL,GACF/K,KAAKyG,OAAS,OACdzG,KAAKgI,KAAO+C,EAAaxC,WAClBzC,GAGF9F,KAAKgL,SAASnE,IAGvBmE,SAAU,SAASnE,EAAQ2B,GACzB,GAAoB,UAAhB3B,EAAOrB,KACT,MAAMqB,EAAOvH,IAcf,MAXoB,UAAhBuH,EAAOrB,MACS,aAAhBqB,EAAOrB,KACTxF,KAAKgI,KAAOnB,EAAOvH,IACM,WAAhBuH,EAAOrB,MAChBxF,KAAKwK,KAAOxK,KAAKV,IAAMuH,EAAOvH,IAC9BU,KAAKyG,OAAS,SACdzG,KAAKgI,KAAO,OACa,WAAhBnB,EAAOrB,MAAqBgD,IACrCxI,KAAKgI,KAAOQ,GAGP1C,GAGTmF,OAAQ,SAAS1C,GACf,IAAK,IAAI5F,EAAI3C,KAAKyI,WAAWO,OAAS,EAAGrG,GAAK,IAAKA,EAAG,CACpD,IAAIyF,EAAQpI,KAAKyI,WAAW9F,GAC5B,GAAIyF,EAAMG,aAAeA,EAGvB,OAFAvI,KAAKgL,SAAS5C,EAAMQ,WAAYR,EAAMI,UACtCG,EAAcP,GACPtC,IAKb,MAAS,SAASuC,GAChB,IAAK,IAAI1F,EAAI3C,KAAKyI,WAAWO,OAAS,EAAGrG,GAAK,IAAKA,EAAG,CACpD,IAAIyF,EAAQpI,KAAKyI,WAAW9F,GAC5B,GAAIyF,EAAMC,SAAWA,EAAQ,CAC3B,IAAIxB,EAASuB,EAAMQ,WACnB,GAAoB,UAAhB/B,EAAOrB,KAAkB,CAC3B,IAAI0F,EAASrE,EAAOvH,IACpBqJ,EAAcP,GAEhB,OAAO8C,GAMX,MAAM,IAAI7D,MAAM,0BAGlB8D,cAAe,SAAStC,EAAUd,EAAYE,GAa5C,OAZAjI,KAAKuH,SAAW,CACdvD,SAAUqC,EAAOwC,GACjBd,WAAYA,EACZE,QAASA,GAGS,SAAhBjI,KAAKyG,SAGPzG,KAAKV,IAAMe,GAGNyF,IAQJtC,EA7sBK,CAotBiB4H,EAAO5H,SAGtC,IACE6H,mBAAqB9H,EACrB,MAAO+H,GAUPC,SAAS,IAAK,yBAAdA,CAAwChI,K,kKCnuBnC,SAASiI,IACd,OAAOC,eAAQ,CACbhF,OAAQ,MACRiF,IAAK,cAoCF,SAASC,EAAwBC,GACtC,OAAOH,eAAQ,CACbhF,OAAQ,OACRiF,IAAK,YACL3K,KAAM6K,IASH,SAASC,EAAgBC,GAC9B,OAAOL,eAAQ,CACbhF,OAAQ,SACRiF,IAAK,aAAF,OAAeI,O,kKCvDf,SAASC,IACd,OAAON,eAAQ,CACbhF,OAAQ,MACRiF,IAAK,SAoCF,SAASM,EAAmBC,GACjC,OAAOR,eAAQ,CACbhF,OAAQ,OACRiF,IAAK,OACL3K,KAAMkL,IASH,SAASC,EAAWC,GACzB,OAAOV,eAAQ,CACbhF,OAAQ,SACRiF,IAAK,QAAF,OAAUS,O,yCC9DjB,IAAItJ,EAAS,WAAa,IAAIuJ,EAAIpM,KAASqM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACvJ,MAAM,CAAC,KAAO,KAAK,CAACuJ,EAAG,eAAe,CAACxJ,YAAY,0CAA0C,CAACwJ,EAAG,eAAe,CAACvJ,MAAM,CAAC,eAAe,GAAG,mBAAmB,QAAQ,SAAW,GAAG,UAAY,GAAG,MAAQ,GAAG,MAAQ,MAAMyJ,MAAM,CAACjN,MAAO4M,EAAU,OAAEM,SAAS,SAAUC,GAAMP,EAAIQ,OAAOD,GAAKE,WAAW,WAAW,CAACN,EAAG,QAAQ,CAACxJ,YAAY,OAAOC,MAAM,CAAC,KAAO,eAAe,OAAS,KAAK,MAAQ,UAAU,KAAO,IAAIG,GAAG,CAAC,MAAQ,SAAS2J,GAAQ,OAAOV,EAAIW,eAAeC,KAAK,gBAAgB,CAACT,EAAG,SAAS,CAACH,EAAIa,GAAG,eAAe,IAAI,IAAI,GAAGV,EAAG,eAAe,CAACxJ,YAAY,UAAUC,MAAM,CAAC,MAAQoJ,EAAIc,SAAS,QAAUd,EAAIe,QAAQ,OAASf,EAAIQ,OAAO,QAAU,CAACQ,aAAa,KAAKC,YAAYjB,EAAIkB,GAAG,CAAC,CAACjO,IAAI,eAAeS,GAAG,SAASyN,GACp0B,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAACjB,EAAG,QAAQ,CAACxJ,YAAY,OAAOC,MAAM,CAAC,KAAO,GAAG,MAAQ,WAAWG,GAAG,CAAC,MAAQ,SAAS2J,GAAQ,OAAOV,EAAIqB,SAASD,MAAS,CAACjB,EAAG,SAAS,CAACH,EAAIa,GAAG,mBAAmB,GAAGV,EAAG,QAAQ,CAACvJ,MAAM,CAAC,KAAO,GAAG,MAAQ,SAASG,GAAG,CAAC,MAAQ,SAAS2J,GAAQ,OAAOV,EAAIsB,WAAWF,MAAS,CAACjB,EAAG,SAAS,CAACH,EAAIa,GAAG,mBAAmB,UAAWb,EAAU,OAAEG,EAAG,WAAW,CAACvJ,MAAM,CAAC,WAAa,GAAG,eAAe,GAAG,WAAa,4BAA4ByJ,MAAM,CAACjN,MAAO4M,EAAU,OAAEM,SAAS,SAAUC,GAAMP,EAAIuB,OAAOhB,GAAKE,WAAW,WAAW,CAACN,EAAG,SAAS,CAACvJ,MAAM,CAAC,KAAO,KAAK,CAACuJ,EAAG,YAAY,CAACvJ,MAAM,CAAC,KAAO,GAAG,MAAQ,YAAY,CAACuJ,EAAG,QAAQ,CAACvJ,MAAM,CAAC,KAAO,GAAG,KAAO,IAAIG,GAAG,CAAC,MAAQ,SAAS2J,GAAQ,OAAOV,EAAIwB,WAAW,CAACrB,EAAG,SAAS,CAACH,EAAIa,GAAG,gBAAgB,GAAGV,EAAG,kBAAkB,CAACH,EAAIa,GAAGb,EAAIyB,GAAGzB,EAAI0B,cAAcvB,EAAG,YAAYA,EAAG,kBAAkB,CAACA,EAAG,QAAQ,CAACvJ,MAAM,CAAC,KAAO,GAAG,KAAO,IAAIG,GAAG,CAAC,MAAQ,SAAS2J,GAAQ,OAAOV,EAAI2B,UAAU,CAAC3B,EAAIa,GAAG,WAAW,IAAI,GAAGV,EAAG,cAAc,CAACvJ,MAAM,CAAC,GAAK,OAAO,MAAQ,KAAK,CAACuJ,EAAG,SAAS,CAACgB,IAAI,OAAOvK,MAAM,CAAC,kBAAkB,KAAK,CAACuJ,EAAG,eAAe,CAACvJ,MAAM,CAAC,mBAAmB,QAAQ,SAAW,GAAG,UAAY,GAAG,MAAQ,GAAG,MAAQ,KAAK,MAAQoJ,EAAI4B,WAAW,QAAU,MAAMvB,MAAM,CAACjN,MAAO4M,EAAI6B,WAAgB,MAAEvB,SAAS,SAAUC,GAAMP,EAAI8B,KAAK9B,EAAI6B,WAAY,QAAStB,IAAME,WAAW,sBAAsBN,EAAG,aAAa,CAACvJ,MAAM,CAAC,OAAS,KAAK,YAAY,GAAG,mBAAmB,QAAQ,SAAW,GAAG,UAAY,GAAG,MAAQ,GAAG,MAAQ,KAAK,MAAQoJ,EAAI+B,iBAAiB,QAAU,MAAM,eAAe,QAAQ1B,MAAM,CAACjN,MAAO4M,EAAI6B,WAAsB,YAAEvB,SAAS,SAAUC,GAAMP,EAAI8B,KAAK9B,EAAI6B,WAAY,cAAetB,IAAME,WAAW,4BAA4BN,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACvJ,MAAM,CAAC,KAAO,KAAK,GAAK,MAAM,CAACuJ,EAAG,WAAW,CAACvJ,MAAM,CAAC,gBAAgB,GAAG,MAAQoJ,EAAIR,SAAS,YAAY,OAAO,aAAa,MAAM,aAAa,CAAEwC,QAAQ,EAAMC,SAAS,GAAO,MAAQ,KAAK,SAAW,GAAG,MAAQ,GAAG,UAAY,GAAG,eAAe,OAAO,MAAQjC,EAAIkC,eAAe7B,MAAM,CAACjN,MAAO4M,EAAI6B,WAAmB,SAAEvB,SAAS,SAAUC,GAAMP,EAAI8B,KAAK9B,EAAI6B,WAAY,WAAYtB,IAAME,WAAW,0BAA0B,GAAGN,EAAG,QAAQ,CAACvJ,MAAM,CAAC,KAAO,KAAK,GAAK,MAAM,CAACuJ,EAAG,WAAW,CAACvJ,MAAM,CAAC,gBAAgB,GAAG,MAAQoJ,EAAImC,KAAK,YAAY,OAAO,aAAa,MAAM,aAAa,CAAEH,QAAQ,EAAMC,SAAS,GAAO,MAAQ,KAAK,cAAc,GAAG,SAAW,GAAG,MAAQ,GAAG,UAAY,GAAG,SAAW,GAAG,MAAQjC,EAAIoC,UAAU/B,MAAM,CAACjN,MAAO4M,EAAI6B,WAAe,KAAEvB,SAAS,SAAUC,GAAMP,EAAI8B,KAAK9B,EAAI6B,WAAY,OAAQtB,IAAME,WAAW,sBAAsB,IAAI,GAAGN,EAAG,MAAM,CAACvJ,MAAM,CAAC,GAAK,aAAa,IAAI,IAAI,IAAI,GAAGoJ,EAAIqC,MAAM,IACrkFC,EAAkB,G,2FC2KtB,G,UAAA,CACEpO,KAAM,UACNS,KAFF,WAGI,MAAO,CAELoM,QACN,CACA,CACQ,KAAR,KACQ,MAAR,OAEA,CACQ,KAAR,KACQ,UAAR,EACQ,MAAR,SAEA,CACQ,KAAR,OACQ,MAAR,WAEA,CACQ,KAAR,OACQ,MAAR,WAEA,CACQ,KAAR,KACQ,MAAR,UACQ,UAAR,IAGMD,SAAU,GACVyB,KAAM,EACNC,KAAM,GACNhC,OAAQ,GACRoB,WAAY,CAClB,YAAQ,QAAR,aACA,YAAQ,OAAR,6BAEMG,iBAAkB,CACxB,YAAQ,QAAR,aACA,YAAQ,OAAR,+BAEMG,cAAe,CACrB,YAAQ,QAAR,cAEME,SAAU,CAChB,YAAQ,QAAR,0BAEM5C,SAAU,GACV2C,KAAM,GACNM,cAAe,GACflB,QAAQ,EACRmB,aAAc,EACdb,WAAY,CACVc,MAAO,GACPC,YAAa,GACbC,QAAS,GACTrD,SAAU,KACV2C,KAAM,IAERW,YAAa,CACXH,MAAO,GACPC,YAAa,GACbC,QAAS,GACTrD,SAAU,KACV2C,KAAM,MAIZY,QArEF,WAsEInP,KAAKoP,eAEPC,SAAU,CACRvB,UADJ,WAEM,OAA6B,IAAtB9N,KAAK8O,YAAqB,OAAS,SAG9C3N,MAAO,CACLwM,OADJ,SACA,GACM9L,GAAO7B,KAAK4N,UAGhBnM,QAAS,CAEP2N,YAFJ,WAEA,WACM,OAAN,OAAM,GAAN,kBACQ,EAAR,oBAII,WARJ,SAQA,iLACA,mBACA,aACA,gBACA,QACA,CACA,CACA,UACA,aACA,aAEA,CACA,UACA,YACA,eAdA,OACA,EADA,OAmBA,IACA,sBACA,mCACA,iBAtBA,8CA0BIrC,WAlCJ,WAmCM/M,KAAKsP,QAGP7B,SAtCJ,SAsCA,GACMzN,KAAK8O,YAAc9O,KAAKkN,SAASqC,QAAQ/B,GACzCxN,KAAKiO,WAAa3M,OAAOkO,OAAO,GAAIhC,GACpCxN,KAAKyP,WAAWjC,EAAKkC,KACrB1P,KAAKsP,QAGPA,KA7CJ,WA6CA,WACMtP,KAAK2P,uBACL3P,KAAK2N,QAAS,EACd3N,KAAK4P,WAAU,WACb,EAAR,iBAIIhC,MArDJ,WAqDA,WACM5N,KAAK2N,QAAS,EACd3N,KAAK4P,WAAU,WACb,EAAR,2CACQ,EAAR,mBAII7B,KA7DJ,WA6DA,WACM/N,KAAKiO,WAAWgB,QAAUjP,KAAK6O,cAAcgB,UACvC7P,KAAKiO,WAAWgB,QAAQjG,OAAS,EAE7C,4BACQ,OAAR,OAAQ,CAAR,kCACU,EAAV,gCACY8G,SAAU,MACVC,QAAS,MAEX,EAAV,iBAPQ/P,KAAK6O,cAAcmB,IAAI,SAAU,KAU/BhQ,KAAK8O,aAAe,EACtBxN,OAAOkO,OAAOxP,KAAKkN,SAASlN,KAAK8O,aAAc9O,KAAKiO,YAEpDjO,KAAKkN,SAASxE,KAAK1I,KAAKiO,YAE1BjO,KAAK4N,SAGP+B,qBAlFJ,WAkFA,WACM,OAAN,OAAM,GAAN,kBACQ,EAAR,mBAEM,OAAN,OAAM,GAAN,kBACQ,EAAR,gBAIIF,WA3FJ,SA2FA,cACUC,GACF,OAAR,OAAQ,CAAR,qBACU,EAAV,mBAKIO,WAnGJ,WAmGA,WAEMjQ,KAAK6O,cAAgB,IAAI,EAA/B,YACQqB,OAAQ,IACRC,cAAe,CACbC,KAAK,GAEPC,QAAS,CACPC,QAAQ,EACRC,IAAK,KAEPC,QAAS,CACPC,KAAM,CACJC,YAAY,IAGhBC,MAAO,WACL,EAAV,6ECpXgW,I,4OCkB1VC,EAAa,OAAAC,EAAA,MAAnB,QAOe,EAAAD,EAAA,OAAkB,CAC/BtQ,KAD+B,aAG/BI,MAAO,CACLoQ,SADK,QAELC,SAFK,QAGLC,UAAW,CACTxL,KAAM,CAACyL,OADE,QAETC,QAFS,GAGTC,UAAY,SAAAC,GAAD,OAAarI,MAAMsI,WAAD,MAE/BC,KAAM,CACJ9L,KAAM,CAACyL,OADH,QAEJC,QAFI,EAGJC,UAAY,SAAAC,GAAD,OAAarI,MAAMwI,SAASH,EAAV,QAIjC/B,SAAU,CACRmC,QADQ,WAEN,uBACE,cADK,EAEL,wBAAyBxR,KAFpB,SAGL,wBAAyBA,KAHpB,gBAIFyR,EAAA,2CAGPC,eATQ,WAUN,OAAO1R,KAAK+Q,UAAY/Q,KAAxB,WAIJmB,MAAO,CACLwQ,UADK,WAEH3R,KAAA,UAAiBA,KAAK4P,UAAU5P,KAAhC,uBAEFgR,UAJK,WAKHhR,KAAA,UAAiBA,KAAK4P,UAAU5P,KAAhC,wBAIJ4R,QAzC+B,WAyCxB,WACLvP,YAAW,WACT,YAAiB,EAAjB,yBADF,IAKFZ,QAAS,CACPoQ,qBADO,WAEL,IAAMjQ,EAAQ5B,KAAK8R,MAAnB,MACA,MAEAlQ,EAAA,iBACA,IAAMsO,EAAStO,EAAf,aACMmQ,EAAYR,SAASvR,KAAD,KAAR,IAA0BqR,WAAWrR,KANrC,WASlB4B,EAAA,aAAqBoQ,KAAA,SAArB,OAEFC,SAZO,WAaL,IAAMrQ,EAAQ6P,EAAA,mCAAd,MAMA,OAJA7P,EAAA,sBACOA,EAAA,WAAP,KACAA,EAAA,gBAA0B5B,KAA1B,KAEA,GAEFkS,QArBO,SAqBA,GACLT,EAAA,0CACAzR,KAAA,UAAiBA,KAAjB,wBAEFmS,UAzBO,SAyBE,GAIHnS,KAAKoS,WAAT,KAAsB/O,EAAA,SACpBA,EAAA,kBAGFrD,KAAA,uB,wBClGFqS,EAAY,eACd,EACAxP,EACA6L,GACA,EACA,KACA,KACA,MAIa,aAAA2D,EAAiB,QAqBhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,QAAA,KAAMC,WAAA,OAAWC,OAAA,KAAKC,aAAA,KAAWC,aAAA,KAAWC,UAAA,KAAQC,QAAA,KAAMC,QAAA,KAAMC,OAAA,KAAKC,UAAA,KAAQC,UAAA,KAAQxB,aAAA,KAAWyB,UAAA,EAAUC,WAAA,KAASC,cAAA,OAAcC,cAAA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;CCbpK,SAA2CC,EAAMC,GAE/CnI,EAAO5H,QAAU+P,KAFnB,CASGvT,GAAM,WACT,MAAgB,MACN,IAAIwT,EAAsB,CAE9BC,IACErI,IA8BR,IAAIsI,EAAmB,WAIrB1T,KAAK2T,aAAe,EAEpB3T,KAAK4T,cAAgB,EAErB5T,KAAK6T,gBAAkB,GAIvB7T,KAAK8T,eAAiB,IAKtB9T,KAAK+T,sBAAwB,GAE7B/T,KAAKgU,aAAe,EAEpBhU,KAAKiU,cAAgB,IAUnBC,GAAe,EACfC,EAAc,EACdC,EAAa,EAWjBV,EAAiBW,KAAO,SAAUC,EAAIC,GACpC,MAAO,CAACD,EAAIC,IAiBdb,EAAiBhQ,UAAU8Q,UAAY,SAAUC,EAAOC,EAAOC,EAAgBC,GAElD,oBAAhBA,IAEPA,EADE5U,KAAK2T,cAAgB,EACR1C,OAAO4D,WAEP,IAAIC,MAAOC,UAAgC,IAApB/U,KAAK2T,cAI/C,IAAIqB,EAAWJ,EAEf,GAAa,MAATH,GAA0B,MAATC,EACnB,MAAM,IAAIrN,MAAM,2BAIlB,GAAIoN,GAASC,EACX,OAAID,EACK,CAAC,IAAIf,EAAiBW,KAAKD,EAAYK,IAGzC,GAGoB,oBAAlBE,IACTA,GAAiB,GAGnB,IAAIM,EAAaN,EAEbO,EAAelV,KAAKmV,kBAAkBV,EAAOC,GAC7CU,EAAeX,EAAMY,UAAU,EAAGH,GACtCT,EAAQA,EAAMY,UAAUH,GACxBR,EAAQA,EAAMW,UAAUH,GAExBA,EAAelV,KAAKsV,kBAAkBb,EAAOC,GAC7C,IAAIa,EAAed,EAAMY,UAAUZ,EAAMzL,OAASkM,GAClDT,EAAQA,EAAMY,UAAU,EAAGZ,EAAMzL,OAASkM,GAC1CR,EAAQA,EAAMW,UAAU,EAAGX,EAAM1L,OAASkM,GAE1C,IAAIM,EAAQxV,KAAKyV,cAAchB,EAAOC,EAAOO,EAAYD,GAWzD,OATII,GACFI,EAAME,QAAQ,IAAIhC,EAAiBW,KAAKD,EAAYgB,IAGlDG,GACFC,EAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAYmB,IAGnDvV,KAAK2V,kBAAkBH,GAChBA,GAgBT9B,EAAiBhQ,UAAU+R,cAAgB,SAAUhB,EAAOC,EAAOO,EAAYD,GAC7E,IAAIQ,EAEJ,IAAKf,EAEH,MAAO,CAAC,IAAIf,EAAiBW,KAAKF,EAAaO,IAGjD,IAAKA,EAEH,MAAO,CAAC,IAAIhB,EAAiBW,KAAKH,EAAaO,IAGjD,IAAImB,EAAWnB,EAAMzL,OAAS0L,EAAM1L,OAASyL,EAAQC,EACjDmB,EAAYpB,EAAMzL,OAAS0L,EAAM1L,OAAS0L,EAAQD,EAClD9R,EAAIiT,EAASrG,QAAQsG,GAEzB,IAAU,GAANlT,EAQF,OANA6S,EAAQ,CAAC,IAAI9B,EAAiBW,KAAKF,EAAayB,EAASP,UAAU,EAAG1S,IAAK,IAAI+Q,EAAiBW,KAAKD,EAAYyB,GAAY,IAAInC,EAAiBW,KAAKF,EAAayB,EAASP,UAAU1S,EAAIkT,EAAU7M,UAEjMyL,EAAMzL,OAAS0L,EAAM1L,SACvBwM,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAKtB,GAGvBsB,EAGT,GAAwB,GAApBK,EAAU7M,OAGZ,MAAO,CAAC,IAAI0K,EAAiBW,KAAKH,EAAaO,GAAQ,IAAIf,EAAiBW,KAAKF,EAAaO,IAIhG,IAAIoB,EAAK9V,KAAK+V,gBAAgBtB,EAAOC,GAErC,GAAIoB,EAAI,CAEN,IAAIE,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbM,EAAaN,EAAG,GAEhBO,EAAUrW,KAAKwU,UAAUwB,EAASE,EAASjB,EAAYD,GACvDsB,EAAUtW,KAAKwU,UAAUyB,EAASE,EAASlB,EAAYD,GAE3D,OAAOqB,EAAQE,OAAO,CAAC,IAAI7C,EAAiBW,KAAKD,EAAYgC,IAAcE,GAG7E,OAAIrB,GAAcR,EAAMzL,OAAS,KAAO0L,EAAM1L,OAAS,IAC9ChJ,KAAKwW,eAAe/B,EAAOC,EAAOM,GAGpChV,KAAKyW,aAAahC,EAAOC,EAAOM,IAczCtB,EAAiBhQ,UAAU8S,eAAiB,SAAU/B,EAAOC,EAAOM,GAElE,IAAI0B,EAAI1W,KAAK2W,mBAAmBlC,EAAOC,GACvCD,EAAQiC,EAAEE,OACVlC,EAAQgC,EAAEG,OACV,IAAIC,EAAYJ,EAAEK,UACdvB,EAAQxV,KAAKwU,UAAUC,EAAOC,GAAO,EAAOM,GAEhDhV,KAAKgX,mBAAmBxB,EAAOsB,GAE/B9W,KAAKiX,qBAAqBzB,GAG1BA,EAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAY,KACjD,IAAI8C,EAAU,EACVC,EAAe,EACfC,EAAe,EACfC,EAAc,GACdC,EAAc,GAElB,MAAOJ,EAAU1B,EAAMxM,OAAQ,CAC7B,OAAQwM,EAAM0B,GAAS,IACrB,KAAK/C,EACHiD,IACAE,GAAe9B,EAAM0B,GAAS,GAC9B,MAEF,KAAKhD,EACHiD,IACAE,GAAe7B,EAAM0B,GAAS,GAC9B,MAEF,KAAK9C,EAEH,GAAI+C,GAAgB,GAAKC,GAAgB,EAAG,CAE1C5B,EAAM+B,OAAOL,EAAUC,EAAeC,EAAcD,EAAeC,GACnEF,EAAUA,EAAUC,EAAeC,EAGnC,IAFA,IAAII,EAAUxX,KAAKwU,UAAU6C,EAAaC,GAAa,EAAOtC,GAErDyC,EAAID,EAAQxO,OAAS,EAAGyO,GAAK,EAAGA,IACvCjC,EAAM+B,OAAOL,EAAS,EAAGM,EAAQC,IAGnCP,GAAoBM,EAAQxO,OAG9BoO,EAAe,EACfD,EAAe,EACfE,EAAc,GACdC,EAAc,GACd,MAGJJ,IAKF,OAFA1B,EAAMxL,MAECwL,GAcT9B,EAAiBhQ,UAAU+S,aAAe,SAAUhC,EAAOC,EAAOM,GAWhE,IATA,IAAI0C,EAAejD,EAAMzL,OACrB2O,EAAejD,EAAM1L,OACrB4O,EAAQ5F,KAAK6F,MAAMH,EAAeC,GAAgB,GAClDG,EAAWF,EACXG,EAAW,EAAIH,EACfI,EAAK,IAAIC,MAAMF,GACfG,EAAK,IAAID,MAAMF,GAGVI,EAAI,EAAGA,EAAIJ,EAAUI,IAC5BH,EAAGG,IAAM,EACTD,EAAGC,IAAM,EAGXH,EAAGF,EAAW,GAAK,EACnBI,EAAGJ,EAAW,GAAK,EAYnB,IAXA,IAAIM,EAAQV,EAAeC,EAGvBU,EAAQD,EAAQ,GAAK,EAGrBE,EAAU,EACVC,EAAQ,EACRC,EAAU,EACVC,EAAQ,EAEHC,EAAI,EAAGA,EAAId,EAAOc,IAAK,CAE9B,IAAI,IAAI5D,MAAOC,UAAYC,EACzB,MAIF,IAAK,IAAI2D,GAAMD,EAAIJ,EAASK,GAAMD,EAAIH,EAAOI,GAAM,EAAG,CACpD,IAAIC,EAAYd,EAAWa,EAIzBE,EADEF,IAAOD,GAAKC,GAAMD,GAAKV,EAAGY,EAAY,GAAKZ,EAAGY,EAAY,GACvDZ,EAAGY,EAAY,GAEfZ,EAAGY,EAAY,GAAK,EAG3B,IAAIE,EAAKD,EAAKF,EAEd,MAAOE,EAAKnB,GAAgBoB,EAAKnB,GAAgBlD,EAAMtK,OAAO0O,IAAOnE,EAAMvK,OAAO2O,GAChFD,IACAC,IAKF,GAFAd,EAAGY,GAAaC,EAEZA,EAAKnB,EAEPa,GAAS,OACJ,GAAIO,EAAKnB,EAEdW,GAAW,OACN,GAAID,EAAO,CAChB,IAAIU,EAAYjB,EAAWM,EAAQO,EAEnC,GAAII,GAAa,GAAKA,EAAYhB,IAA8B,GAAlBG,EAAGa,GAAkB,CAEjE,IAAIC,EAAKtB,EAAeQ,EAAGa,GAE3B,GAAIF,GAAMG,EAER,OAAOhZ,KAAKiZ,kBAAkBxE,EAAOC,EAAOmE,EAAIC,EAAI9D,KAO5D,IAAK,IAAIkE,GAAMR,EAAIF,EAASU,GAAMR,EAAID,EAAOS,GAAM,EAAG,CAChDH,EAAYjB,EAAWoB,EAIzBF,EADEE,IAAOR,GAAKQ,GAAMR,GAAKR,EAAGa,EAAY,GAAKb,EAAGa,EAAY,GACvDb,EAAGa,EAAY,GAEfb,EAAGa,EAAY,GAAK,EAG3B,IAAII,EAAKH,EAAKE,EAEd,MAAOF,EAAKtB,GAAgByB,EAAKxB,GAAgBlD,EAAMtK,OAAOuN,EAAesB,EAAK,IAAMtE,EAAMvK,OAAOwN,EAAewB,EAAK,GACvHH,IACAG,IAKF,GAFAjB,EAAGa,GAAaC,EAEZA,EAAKtB,EAEPe,GAAS,OACJ,GAAIU,EAAKxB,EAEda,GAAW,OACN,IAAKH,EAAO,CACbO,EAAYd,EAAWM,EAAQc,EAEnC,GAAIN,GAAa,GAAKA,EAAYb,IAA8B,GAAlBC,EAAGY,GAAkB,CACjE,IAAIC,EAAKb,EAAGY,GACRE,EAAKhB,EAAWe,EAAKD,EAIzB,GAFAI,EAAKtB,EAAesB,EAEhBH,GAAMG,EAER,OAAOhZ,KAAKiZ,kBAAkBxE,EAAOC,EAAOmE,EAAIC,EAAI9D,MAS9D,MAAO,CAAC,IAAItB,EAAiBW,KAAKH,EAAaO,GAAQ,IAAIf,EAAiBW,KAAKF,EAAaO,KAehGhB,EAAiBhQ,UAAUuV,kBAAoB,SAAUxE,EAAOC,EAAOyD,EAAGiB,EAAGpE,GAC3E,IAAIqE,EAAS5E,EAAMY,UAAU,EAAG8C,GAC5BmB,EAAS5E,EAAMW,UAAU,EAAG+D,GAC5BG,EAAS9E,EAAMY,UAAU8C,GACzBqB,EAAS9E,EAAMW,UAAU+D,GAEzB5D,EAAQxV,KAAKwU,UAAU6E,EAAQC,GAAQ,EAAOtE,GAC9CyE,EAASzZ,KAAKwU,UAAU+E,EAAQC,GAAQ,EAAOxE,GACnD,OAAOQ,EAAMe,OAAOkD,IAetB/F,EAAiBhQ,UAAUiT,mBAAqB,SAAUlC,EAAOC,GAC/D,IAAIqC,EAAY,GAEZ2C,EAAW,GAcf,SAASC,EAAwBpF,GAC/B,IAAIqF,EAAQ,GAIRC,EAAY,EACZC,GAAW,EAEXC,EAAkBhD,EAAU/N,OAEhC,MAAO8Q,EAAUvF,EAAKvL,OAAS,EAAG,CAChC8Q,EAAUvF,EAAKhF,QAAQ,KAAMsK,IAEb,GAAZC,IACFA,EAAUvF,EAAKvL,OAAS,GAG1B,IAAIgR,EAAOzF,EAAKc,UAAUwE,EAAWC,EAAU,IAE3CJ,EAAS9V,eAAiB8V,EAAS9V,eAAeoW,QAA2B3Z,IAAnBqZ,EAASM,IACrEJ,GAASK,OAAOC,aAAaR,EAASM,KAElCD,GAAmBI,IAGrBH,EAAOzF,EAAKc,UAAUwE,GACtBC,EAAUvF,EAAKvL,QAGjB4Q,GAASK,OAAOC,aAAaH,GAC7BL,EAASM,GAAQD,EACjBhD,EAAUgD,KAAqBC,GAGjCH,EAAYC,EAAU,EAGxB,OAAOF,EA/CT7C,EAAU,GAAK,GAmDf,IAAIoD,EAAW,IACXvD,EAAS+C,EAAwBlF,GACrC0F,EAAW,MACX,IAAItD,EAAS8C,EAAwBjF,GACrC,MAAO,CACLkC,OAAQA,EACRC,OAAQA,EACRE,UAAWA,IAYfrD,EAAiBhQ,UAAUsT,mBAAqB,SAAUxB,EAAOuB,GAC/D,IAAK,IAAIpU,EAAI,EAAGA,EAAI6S,EAAMxM,OAAQrG,IAAK,CAIrC,IAHA,IAAIiX,EAAQpE,EAAM7S,GAAG,GACjB4R,EAAO,GAEFkD,EAAI,EAAGA,EAAImC,EAAM5Q,OAAQyO,IAChClD,EAAKkD,GAAKV,EAAU6C,EAAMQ,WAAW3C,IAGvCjC,EAAM7S,GAAG,GAAK4R,EAAK8F,KAAK,MAY5B3G,EAAiBhQ,UAAUyR,kBAAoB,SAAUV,EAAOC,GAE9D,IAAKD,IAAUC,GAASD,EAAMtK,OAAO,IAAMuK,EAAMvK,OAAO,GACtD,OAAO,EAKT,IAAImQ,EAAa,EACbC,EAAavI,KAAKwI,IAAI/F,EAAMzL,OAAQ0L,EAAM1L,QAC1CyR,EAAaF,EACbG,EAAe,EAEnB,MAAOJ,EAAaG,EACdhG,EAAMY,UAAUqF,EAAcD,IAAe/F,EAAMW,UAAUqF,EAAcD,IAC7EH,EAAaG,EACbC,EAAeJ,GAEfC,EAAaE,EAGfA,EAAazI,KAAK2I,OAAOJ,EAAaD,GAAc,EAAIA,GAG1D,OAAOG,GAUT/G,EAAiBhQ,UAAU4R,kBAAoB,SAAUb,EAAOC,GAE9D,IAAKD,IAAUC,GAASD,EAAMtK,OAAOsK,EAAMzL,OAAS,IAAM0L,EAAMvK,OAAOuK,EAAM1L,OAAS,GACpF,OAAO,EAKT,IAAIsR,EAAa,EACbC,EAAavI,KAAKwI,IAAI/F,EAAMzL,OAAQ0L,EAAM1L,QAC1CyR,EAAaF,EACbK,EAAa,EAEjB,MAAON,EAAaG,EACdhG,EAAMY,UAAUZ,EAAMzL,OAASyR,EAAYhG,EAAMzL,OAAS4R,IAAelG,EAAMW,UAAUX,EAAM1L,OAASyR,EAAY/F,EAAM1L,OAAS4R,IACrIN,EAAaG,EACbG,EAAaN,GAEbC,EAAaE,EAGfA,EAAazI,KAAK2I,OAAOJ,EAAaD,GAAc,EAAIA,GAG1D,OAAOG,GAYT/G,EAAiBhQ,UAAUmX,oBAAsB,SAAUpG,EAAOC,GAEhE,IAAIgD,EAAejD,EAAMzL,OACrB2O,EAAejD,EAAM1L,OAEzB,GAAoB,GAAhB0O,GAAqC,GAAhBC,EACvB,OAAO,EAILD,EAAeC,EACjBlD,EAAQA,EAAMY,UAAUqC,EAAeC,GAC9BD,EAAeC,IACxBjD,EAAQA,EAAMW,UAAU,EAAGqC,IAG7B,IAAIoD,EAAc9I,KAAKwI,IAAI9C,EAAcC,GAEzC,GAAIlD,GAASC,EACX,OAAOoG,EAMT,IAAIC,EAAO,EACP/R,EAAS,EAEb,MAAO,EAAM,CACX,IAAIgS,EAAUvG,EAAMY,UAAUyF,EAAc9R,GACxCvG,EAAQiS,EAAMnF,QAAQyL,GAE1B,IAAc,GAAVvY,EACF,OAAOsY,EAGT/R,GAAUvG,EAEG,GAATA,GAAcgS,EAAMY,UAAUyF,EAAc9R,IAAW0L,EAAMW,UAAU,EAAGrM,KAC5E+R,EAAO/R,EACPA,OAiBN0K,EAAiBhQ,UAAUqS,gBAAkB,SAAUtB,EAAOC,GAC5D,GAAI1U,KAAK2T,cAAgB,EAEvB,OAAO,KAGT,IAAIiC,EAAWnB,EAAMzL,OAAS0L,EAAM1L,OAASyL,EAAQC,EACjDmB,EAAYpB,EAAMzL,OAAS0L,EAAM1L,OAAS0L,EAAQD,EAEtD,GAAImB,EAAS5M,OAAS,GAAwB,EAAnB6M,EAAU7M,OAAa4M,EAAS5M,OACzD,OAAO,KAGT,IAAIiS,EAAMjb,KAeV,SAASkb,EAAiBtF,EAAUC,EAAWlT,GAE7C,IAGIwY,EAAiBC,EAAiBC,EAAkBC,EAHpDC,EAAO3F,EAASP,UAAU1S,EAAGA,EAAIqP,KAAK2I,MAAM/E,EAAS5M,OAAS,IAC9DyO,GAAK,EACL+D,EAAc,GAGlB,OAAgD,IAAxC/D,EAAI5B,EAAUtG,QAAQgM,EAAM9D,EAAI,IAAW,CACjD,IAAIgE,EAAeR,EAAI9F,kBAAkBS,EAASP,UAAU1S,GAAIkT,EAAUR,UAAUoC,IAChFiE,EAAeT,EAAI3F,kBAAkBM,EAASP,UAAU,EAAG1S,GAAIkT,EAAUR,UAAU,EAAGoC,IAEtF+D,EAAYxS,OAAS0S,EAAeD,IACtCD,EAAc3F,EAAUR,UAAUoC,EAAIiE,EAAcjE,GAAK5B,EAAUR,UAAUoC,EAAGA,EAAIgE,GACpFN,EAAkBvF,EAASP,UAAU,EAAG1S,EAAI+Y,GAC5CN,EAAkBxF,EAASP,UAAU1S,EAAI8Y,GACzCJ,EAAmBxF,EAAUR,UAAU,EAAGoC,EAAIiE,GAC9CJ,EAAmBzF,EAAUR,UAAUoC,EAAIgE,IAI/C,OAAyB,EAArBD,EAAYxS,QAAc4M,EAAS5M,OAC9B,CAACmS,EAAiBC,EAAiBC,EAAkBC,EAAkBE,GAEvE,KAKX,IAGI1F,EAcAE,EAASC,EAASC,EAASC,EAjB3BwF,EAAMT,EAAiBtF,EAAUC,EAAW7D,KAAK6F,KAAKjC,EAAS5M,OAAS,IAExE4S,EAAMV,EAAiBtF,EAAUC,EAAW7D,KAAK6F,KAAKjC,EAAS5M,OAAS,IAG5E,IAAK2S,IAAQC,EACX,OAAO,KAOP9F,EANU8F,EAEAD,GAILA,EAAI,GAAG3S,OAAS4S,EAAI,GAAG5S,OAAS2S,EAHhCC,EAFAD,EAWHlH,EAAMzL,OAAS0L,EAAM1L,QACvBgN,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,KAEbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbE,EAAUF,EAAG,GACbG,EAAUH,EAAG,IAGf,IAAIM,EAAaN,EAAG,GACpB,MAAO,CAACE,EAASC,EAASC,EAASC,EAASC,IAQ9C1C,EAAiBhQ,UAAUuT,qBAAuB,SAAUzB,GAC1D,IAAIqG,GAAU,EACVC,EAAa,GAEbC,EAAmB,EAInBC,EAAe,KAEf9E,EAAU,EAGV+E,EAAqB,EACrBC,EAAoB,EAEpBC,EAAqB,EACrBC,EAAoB,EAExB,MAAOlF,EAAU1B,EAAMxM,OACjBwM,EAAM0B,GAAS,IAAM9C,GAEvB0H,EAAWC,KAAsB7E,EACjC+E,EAAqBE,EACrBD,EAAoBE,EACpBD,EAAqB,EACrBC,EAAoB,EACpBJ,EAAexG,EAAM0B,GAAS,KAG1B1B,EAAM0B,GAAS,IAAM/C,EACvBgI,GAAsB3G,EAAM0B,GAAS,GAAGlO,OAExCoT,GAAqB5G,EAAM0B,GAAS,GAAGlO,OAKrCgT,GAAgBA,EAAahT,QAAUgJ,KAAKzB,IAAI0L,EAAoBC,IAAsBF,EAAahT,QAAUgJ,KAAKzB,IAAI4L,EAAoBC,KAEhJ5G,EAAM+B,OAAOuE,EAAWC,EAAmB,GAAI,EAAG,IAAIrI,EAAiBW,KAAKH,EAAa8H,IAEzFxG,EAAMsG,EAAWC,EAAmB,GAAK,GAAG,GAAK5H,EAEjD4H,IAEAA,IACA7E,EAAU6E,EAAmB,EAAID,EAAWC,EAAmB,IAAM,EACrEE,EAAqB,EAErBC,EAAoB,EACpBC,EAAqB,EACrBC,EAAoB,EACpBJ,EAAe,KACfH,GAAU,IAId3E,IAIE2E,GACF7b,KAAK2V,kBAAkBH,GAGzBxV,KAAKqc,6BAA6B7G,GAOlC0B,EAAU,EAEV,MAAOA,EAAU1B,EAAMxM,OAAQ,CAC7B,GAAIwM,EAAM0B,EAAU,GAAG,IAAMhD,GAAesB,EAAM0B,GAAS,IAAM/C,EAAa,CAC5E,IAAImI,EAAW9G,EAAM0B,EAAU,GAAG,GAC9BqF,EAAY/G,EAAM0B,GAAS,GAC3BsF,EAAkBxc,KAAK6a,oBAAoByB,EAAUC,GACrDE,EAAkBzc,KAAK6a,oBAAoB0B,EAAWD,GAEtDE,GAAmBC,GACjBD,GAAmBF,EAAStT,OAAS,GAAKwT,GAAmBD,EAAUvT,OAAS,KAElFwM,EAAM+B,OAAOL,EAAS,EAAG,IAAIxD,EAAiBW,KAAKD,EAAYmI,EAAUlH,UAAU,EAAGmH,KACtFhH,EAAM0B,EAAU,GAAG,GAAKoF,EAASjH,UAAU,EAAGiH,EAAStT,OAASwT,GAChEhH,EAAM0B,EAAU,GAAG,GAAKqF,EAAUlH,UAAUmH,GAC5CtF,MAGEuF,GAAmBH,EAAStT,OAAS,GAAKyT,GAAmBF,EAAUvT,OAAS,KAGlFwM,EAAM+B,OAAOL,EAAS,EAAG,IAAIxD,EAAiBW,KAAKD,EAAYkI,EAASjH,UAAU,EAAGoH,KACrFjH,EAAM0B,EAAU,GAAG,GAAK/C,EACxBqB,EAAM0B,EAAU,GAAG,GAAKqF,EAAUlH,UAAU,EAAGkH,EAAUvT,OAASyT,GAClEjH,EAAM0B,EAAU,GAAG,GAAKhD,EACxBsB,EAAM0B,EAAU,GAAG,GAAKoF,EAASjH,UAAUoH,GAC3CvF,KAIJA,IAGFA,MAWJxD,EAAiBhQ,UAAU2Y,6BAA+B,SAAU7G,GAWlE,SAASkH,EAA2BC,EAAKC,GACvC,IAAKD,IAAQC,EAEX,OAAO,EAQT,IAAIC,EAAQF,EAAIxS,OAAOwS,EAAI3T,OAAS,GAChC8T,EAAQF,EAAIzS,OAAO,GACnB4S,EAAmBF,EAAMG,MAAMtJ,EAAiBuJ,uBAChDC,EAAmBJ,EAAME,MAAMtJ,EAAiBuJ,uBAChDE,EAAcJ,GAAoBF,EAAMG,MAAMtJ,EAAiB0J,kBAC/DC,EAAcH,GAAoBJ,EAAME,MAAMtJ,EAAiB0J,kBAC/DE,EAAaH,GAAeN,EAAMG,MAAMtJ,EAAiB6J,iBACzDC,EAAaH,GAAeP,EAAME,MAAMtJ,EAAiB6J,iBACzDE,EAAaH,GAAcX,EAAIK,MAAMtJ,EAAiBgK,oBACtDC,EAAaH,GAAcZ,EAAII,MAAMtJ,EAAiBkK,sBAE1D,OAAIH,GAAcE,EAET,EACEL,GAAcE,EAEhB,EACET,IAAqBI,GAAeE,EAEtC,EACEF,GAAeE,EAEjB,EACEN,GAAoBG,EAEtB,EAGF,EAGT,IAAIhG,EAAU,EAEd,MAAOA,EAAU1B,EAAMxM,OAAS,EAAG,CACjC,GAAIwM,EAAM0B,EAAU,GAAG,IAAM9C,GAAcoB,EAAM0B,EAAU,GAAG,IAAM9C,EAAY,CAE9E,IAAIyJ,EAAYrI,EAAM0B,EAAU,GAAG,GAC/B4G,EAAOtI,EAAM0B,GAAS,GACtB6G,EAAYvI,EAAM0B,EAAU,GAAG,GAE/B8G,EAAehe,KAAKsV,kBAAkBuI,EAAWC,GAErD,GAAIE,EAAc,CAChB,IAAIC,EAAeH,EAAKzI,UAAUyI,EAAK9U,OAASgV,GAChDH,EAAYA,EAAUxI,UAAU,EAAGwI,EAAU7U,OAASgV,GACtDF,EAAOG,EAAeH,EAAKzI,UAAU,EAAGyI,EAAK9U,OAASgV,GACtDD,EAAYE,EAAeF,EAI7B,IAAIG,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,EAChBM,EAAY3B,EAA2BmB,EAAWC,GAAQpB,EAA2BoB,EAAMC,GAE/F,MAAOD,EAAK3T,OAAO,KAAO4T,EAAU5T,OAAO,GAAI,CAC7C0T,GAAaC,EAAK3T,OAAO,GACzB2T,EAAOA,EAAKzI,UAAU,GAAK0I,EAAU5T,OAAO,GAC5C4T,EAAYA,EAAU1I,UAAU,GAChC,IAAIiJ,EAAQ5B,EAA2BmB,EAAWC,GAAQpB,EAA2BoB,EAAMC,GAEvFO,GAASD,IACXA,EAAYC,EACZJ,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,GAIhBvI,EAAM0B,EAAU,GAAG,IAAMgH,IAEvBA,EACF1I,EAAM0B,EAAU,GAAG,GAAKgH,GAExB1I,EAAM+B,OAAOL,EAAU,EAAG,GAC1BA,KAGF1B,EAAM0B,GAAS,GAAKiH,EAEhBC,EACF5I,EAAM0B,EAAU,GAAG,GAAKkH,GAExB5I,EAAM+B,OAAOL,EAAU,EAAG,GAC1BA,MAKNA,MAKJxD,EAAiBuJ,sBAAwB,eACzCvJ,EAAiB0J,iBAAmB,KACpC1J,EAAiB6J,gBAAkB,SACnC7J,EAAiBgK,mBAAqB,WACtChK,EAAiBkK,qBAAuB,cAMxClK,EAAiBhQ,UAAU6a,uBAAyB,SAAU/I,GAC5D,IAAIqG,GAAU,EACVC,EAAa,GAEbC,EAAmB,EAInBC,EAAe,KAEf9E,EAAU,EAGVsH,GAAU,EAEVC,GAAU,EAEVC,GAAW,EAEXC,GAAW,EAEf,MAAOzH,EAAU1B,EAAMxM,OACjBwM,EAAM0B,GAAS,IAAM9C,GAEnBoB,EAAM0B,GAAS,GAAGlO,OAAShJ,KAAK4T,gBAAkB8K,GAAYC,IAEhE7C,EAAWC,KAAsB7E,EACjCsH,EAAUE,EACVD,EAAUE,EACV3C,EAAexG,EAAM0B,GAAS,KAG9B6E,EAAmB,EACnBC,EAAe,MAGjB0C,EAAWC,GAAW,IAGlBnJ,EAAM0B,GAAS,IAAMhD,EACvByK,GAAW,EAEXD,GAAW,EAYT1C,IAAiBwC,GAAWC,GAAWC,GAAYC,GAAY3C,EAAahT,OAAShJ,KAAK4T,cAAgB,GAAK4K,EAAUC,EAAUC,EAAWC,GAAY,KAE5JnJ,EAAM+B,OAAOuE,EAAWC,EAAmB,GAAI,EAAG,IAAIrI,EAAiBW,KAAKH,EAAa8H,IAEzFxG,EAAMsG,EAAWC,EAAmB,GAAK,GAAG,GAAK5H,EACjD4H,IAEAC,EAAe,KAEXwC,GAAWC,GAEbC,EAAWC,GAAW,EACtB5C,EAAmB,IAEnBA,IAEA7E,EAAU6E,EAAmB,EAAID,EAAWC,EAAmB,IAAM,EACrE2C,EAAWC,GAAW,GAGxB9C,GAAU,IAId3E,IAGE2E,GACF7b,KAAK2V,kBAAkBH,IAU3B9B,EAAiBhQ,UAAUiS,kBAAoB,SAAUH,GAEvDA,EAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAY,KACjD,IAKIc,EALAgC,EAAU,EACVC,EAAe,EACfC,EAAe,EACfC,EAAc,GACdC,EAAc,GAGlB,MAAOJ,EAAU1B,EAAMxM,OACrB,OAAQwM,EAAM0B,GAAS,IACrB,KAAK/C,EACHiD,IACAE,GAAe9B,EAAM0B,GAAS,GAC9BA,IACA,MAEF,KAAKhD,EACHiD,IACAE,GAAe7B,EAAM0B,GAAS,GAC9BA,IACA,MAEF,KAAK9C,EAEC+C,EAAeC,EAAe,GACX,IAAjBD,GAAuC,IAAjBC,IAExBlC,EAAelV,KAAKmV,kBAAkBmC,EAAaD,GAE9B,IAAjBnC,IACEgC,EAAUC,EAAeC,EAAe,GAAK5B,EAAM0B,EAAUC,EAAeC,EAAe,GAAG,IAAMhD,EACtGoB,EAAM0B,EAAUC,EAAeC,EAAe,GAAG,IAAME,EAAYjC,UAAU,EAAGH,IAEhFM,EAAM+B,OAAO,EAAG,EAAG,IAAI7D,EAAiBW,KAAKD,EAAYkD,EAAYjC,UAAU,EAAGH,KAClFgC,KAGFI,EAAcA,EAAYjC,UAAUH,GACpCmC,EAAcA,EAAYhC,UAAUH,IAItCA,EAAelV,KAAKsV,kBAAkBgC,EAAaD,GAE9B,IAAjBnC,IACFM,EAAM0B,GAAS,GAAKI,EAAYjC,UAAUiC,EAAYtO,OAASkM,GAAgBM,EAAM0B,GAAS,GAC9FI,EAAcA,EAAYjC,UAAU,EAAGiC,EAAYtO,OAASkM,GAC5DmC,EAAcA,EAAYhC,UAAU,EAAGgC,EAAYrO,OAASkM,KAKhEgC,GAAWC,EAAeC,EAC1B5B,EAAM+B,OAAOL,EAASC,EAAeC,GAEjCC,EAAYrO,SACdwM,EAAM+B,OAAOL,EAAS,EAAG,IAAIxD,EAAiBW,KAAKH,EAAamD,IAChEH,KAGEI,EAAYtO,SACdwM,EAAM+B,OAAOL,EAAS,EAAG,IAAIxD,EAAiBW,KAAKF,EAAamD,IAChEJ,KAGFA,KACqB,IAAZA,GAAiB1B,EAAM0B,EAAU,GAAG,IAAM9C,GAEnDoB,EAAM0B,EAAU,GAAG,IAAM1B,EAAM0B,GAAS,GACxC1B,EAAM+B,OAAOL,EAAS,IAEtBA,IAGFE,EAAe,EACfD,EAAe,EACfE,EAAc,GACdC,EAAc,GACd,MAI6B,KAA/B9B,EAAMA,EAAMxM,OAAS,GAAG,IAC1BwM,EAAMxL,MAMR,IAAI6R,GAAU,EACd3E,EAAU,EAEV,MAAOA,EAAU1B,EAAMxM,OAAS,EAC1BwM,EAAM0B,EAAU,GAAG,IAAM9C,GAAcoB,EAAM0B,EAAU,GAAG,IAAM9C,IAE9DoB,EAAM0B,GAAS,GAAG7B,UAAUG,EAAM0B,GAAS,GAAGlO,OAASwM,EAAM0B,EAAU,GAAG,GAAGlO,SAAWwM,EAAM0B,EAAU,GAAG,IAE7G1B,EAAM0B,GAAS,GAAK1B,EAAM0B,EAAU,GAAG,GAAK1B,EAAM0B,GAAS,GAAG7B,UAAU,EAAGG,EAAM0B,GAAS,GAAGlO,OAASwM,EAAM0B,EAAU,GAAG,GAAGlO,QAC5HwM,EAAM0B,EAAU,GAAG,GAAK1B,EAAM0B,EAAU,GAAG,GAAK1B,EAAM0B,EAAU,GAAG,GACnE1B,EAAM+B,OAAOL,EAAU,EAAG,GAC1B2E,GAAU,GACDrG,EAAM0B,GAAS,GAAG7B,UAAU,EAAGG,EAAM0B,EAAU,GAAG,GAAGlO,SAAWwM,EAAM0B,EAAU,GAAG,KAE5F1B,EAAM0B,EAAU,GAAG,IAAM1B,EAAM0B,EAAU,GAAG,GAC5C1B,EAAM0B,GAAS,GAAK1B,EAAM0B,GAAS,GAAG7B,UAAUG,EAAM0B,EAAU,GAAG,GAAGlO,QAAUwM,EAAM0B,EAAU,GAAG,GACnG1B,EAAM+B,OAAOL,EAAU,EAAG,GAC1B2E,GAAU,IAId3E,IAIE2E,GACF7b,KAAK2V,kBAAkBH,IAa3B9B,EAAiBhQ,UAAUkb,YAAc,SAAUpJ,EAAO7K,GACxD,IAIIwN,EAJAvB,EAAS,EACTC,EAAS,EACTgI,EAAc,EACdC,EAAc,EAGlB,IAAK3G,EAAI,EAAGA,EAAI3C,EAAMxM,OAAQmP,IAAK,CAWjC,GAVI3C,EAAM2C,GAAG,KAAOhE,IAElByC,GAAUpB,EAAM2C,GAAG,GAAGnP,QAGpBwM,EAAM2C,GAAG,KAAOjE,IAElB2C,GAAUrB,EAAM2C,GAAG,GAAGnP,QAGpB4N,EAASjM,EAEX,MAGFkU,EAAcjI,EACdkI,EAAcjI,EAIhB,OAAIrB,EAAMxM,QAAUmP,GAAK3C,EAAM2C,GAAG,KAAOjE,EAChC4K,EAIFA,GAAenU,EAAMkU,IAS9BnL,EAAiBhQ,UAAUqb,gBAAkB,SAAUvJ,GAOrD,IANA,IAAIwJ,EAAO,GACPC,EAAc,KACdC,EAAa,KACbC,EAAa,KACbC,EAAe,MAEVjH,EAAI,EAAGA,EAAI3C,EAAMxM,OAAQmP,IAAK,CACrC,IAAI7D,EAAKkB,EAAM2C,GAAG,GAEdpX,EAAOyU,EAAM2C,GAAG,GAEhB5D,EAAOxT,EAAKse,QAAQJ,EAAa,SAASI,QAAQH,EAAY,QAAQG,QAAQF,EAAY,QAAQE,QAAQD,EAAc,cAE5H,OAAQ9K,GACN,KAAKH,EACH6K,EAAK7G,GAAK,oCAAsC5D,EAAO,SACvD,MAEF,KAAKL,EACH8K,EAAK7G,GAAK,oCAAsC5D,EAAO,SACvD,MAEF,KAAKH,EACH4K,EAAK7G,GAAK,SAAW5D,EAAO,UAC5B,OAIN,OAAOyK,EAAK3E,KAAK,KASnB3G,EAAiBhQ,UAAU4b,WAAa,SAAU9J,GAGhD,IAFA,IAAIjB,EAAO,GAEF4D,EAAI,EAAGA,EAAI3C,EAAMxM,OAAQmP,IAC5B3C,EAAM2C,GAAG,KAAOhE,IAClBI,EAAK4D,GAAK3C,EAAM2C,GAAG,IAIvB,OAAO5D,EAAK8F,KAAK,KASnB3G,EAAiBhQ,UAAU6b,WAAa,SAAU/J,GAGhD,IAFA,IAAIjB,EAAO,GAEF4D,EAAI,EAAGA,EAAI3C,EAAMxM,OAAQmP,IAC5B3C,EAAM2C,GAAG,KAAOjE,IAClBK,EAAK4D,GAAK3C,EAAM2C,GAAG,IAIvB,OAAO5D,EAAK8F,KAAK,KAUnB3G,EAAiBhQ,UAAU8b,iBAAmB,SAAUhK,GAKtD,IAJA,IAAIiK,EAAc,EACdC,EAAa,EACbC,EAAY,EAEPxH,EAAI,EAAGA,EAAI3C,EAAMxM,OAAQmP,IAAK,CACrC,IAAI7D,EAAKkB,EAAM2C,GAAG,GACdpX,EAAOyU,EAAM2C,GAAG,GAEpB,OAAQ7D,GACN,KAAKH,EACHuL,GAAc3e,EAAKiI,OACnB,MAEF,KAAKkL,EACHyL,GAAa5e,EAAKiI,OAClB,MAEF,KAAKoL,EAEHqL,GAAezN,KAAKzB,IAAImP,EAAYC,GACpCD,EAAa,EACbC,EAAY,EACZ,OAKN,OADAF,GAAezN,KAAKzB,IAAImP,EAAYC,GAC7BF,GAYT/L,EAAiBhQ,UAAUkc,aAAe,SAAUpK,GAGlD,IAFA,IAAIjB,EAAO,GAEF4D,EAAI,EAAGA,EAAI3C,EAAMxM,OAAQmP,IAChC,OAAQ3C,EAAM2C,GAAG,IACf,KAAKhE,EACHI,EAAK4D,GAAK,IAAM0H,UAAUrK,EAAM2C,GAAG,IACnC,MAEF,KAAKjE,EACHK,EAAK4D,GAAK,IAAM3C,EAAM2C,GAAG,GAAGnP,OAC5B,MAEF,KAAKoL,EACHG,EAAK4D,GAAK,IAAM3C,EAAM2C,GAAG,GAAGnP,OAC5B,MAIN,OAAOuL,EAAK8F,KAAK,MAAMgF,QAAQ,OAAQ,MAYzC3L,EAAiBhQ,UAAUoc,eAAiB,SAAUrL,EAAO2D,GAQ3D,IAPA,IAAI5C,EAAQ,GACRuK,EAAc,EAEd7I,EAAU,EAEV8I,EAAS5H,EAAM6H,MAAM,OAEhB9H,EAAI,EAAGA,EAAI6H,EAAOhX,OAAQmP,IAAK,CAGtC,IAAI+H,EAAQF,EAAO7H,GAAG9C,UAAU,GAEhC,OAAQ2K,EAAO7H,GAAGhO,OAAO,IACvB,IAAK,IACH,IACEqL,EAAMuK,KAAiB,IAAIrM,EAAiBW,KAAKF,EAAagM,UAAUD,IACxE,MAAOE,GAEP,MAAM,IAAI/Y,MAAM,qCAAuC6Y,GAGzD,MAEF,IAAK,IAEL,IAAK,IACH,IAAIG,EAAI9O,SAAS2O,EAAO,IAExB,GAAInX,MAAMsX,IAAMA,EAAI,EAClB,MAAM,IAAIhZ,MAAM,qCAAuC6Y,GAGzD,IAAI3L,EAAOE,EAAMY,UAAU6B,EAASA,GAAWmJ,GAEpB,KAAvBL,EAAO7H,GAAGhO,OAAO,GACnBqL,EAAMuK,KAAiB,IAAIrM,EAAiBW,KAAKD,EAAYG,GAE7DiB,EAAMuK,KAAiB,IAAIrM,EAAiBW,KAAKH,EAAaK,GAGhE,MAEF,QAGE,GAAIyL,EAAO7H,GACT,MAAM,IAAI9Q,MAAM,6CAA+C2Y,EAAO7H,KAM9E,GAAIjB,GAAWzC,EAAMzL,OACnB,MAAM,IAAI3B,MAAM,iBAAmB6P,EAAU,wCAA0CzC,EAAMzL,OAAS,MAGxG,OAAOwM,GAYT9B,EAAiBhQ,UAAU4c,WAAa,SAAU/L,EAAMyG,EAASrQ,GAE/D,GAAY,MAAR4J,GAA2B,MAAXyG,GAA0B,MAAPrQ,EACrC,MAAM,IAAItD,MAAM,4BAKlB,OAFAsD,EAAMqH,KAAKzB,IAAI,EAAGyB,KAAKwI,IAAI7P,EAAK4J,EAAKvL,SAEjCuL,GAAQyG,EAEH,EACGzG,EAAKvL,OAGNuL,EAAKc,UAAU1K,EAAKA,EAAMqQ,EAAQhS,SAAWgS,EAE/CrQ,EAGA3K,KAAKugB,aAAahM,EAAMyG,EAASrQ,IANhC,GAoBZ+I,EAAiBhQ,UAAU6c,aAAe,SAAUhM,EAAMyG,EAASrQ,GACjE,GAAIqQ,EAAQhS,OAAShJ,KAAKiU,cACxB,MAAM,IAAI5M,MAAM,sCAIlB,IAAImZ,EAAIxgB,KAAKygB,gBAAgBzF,GACzBC,EAAMjb,KAWV,SAAS0gB,EAAkBrd,EAAG8U,GAC5B,IAAIwI,EAAWtd,EAAI2X,EAAQhS,OACvB4X,EAAY5O,KAAK6O,IAAIlW,EAAMwN,GAE/B,OAAK8C,EAAInH,eAKF6M,EAAWC,EAAY3F,EAAInH,eAHzB8M,EAAY,EAAMD,EAO7B,IAAIG,EAAkB9gB,KAAK6T,gBAEvBkN,EAAWxM,EAAKhF,QAAQyL,EAASrQ,IAEpB,GAAboW,IACFD,EAAkB9O,KAAKwI,IAAIkG,EAAkB,EAAGK,GAAWD,GAE3DC,EAAWxM,EAAKyM,YAAYhG,EAASrQ,EAAMqQ,EAAQhS,SAElC,GAAb+X,IACFD,EAAkB9O,KAAKwI,IAAIkG,EAAkB,EAAGK,GAAWD,KAK/D,IAEIG,EAASC,EAFTC,EAAY,GAAKnG,EAAQhS,OAAS,EACtC+X,GAAY,EAKZ,IAHA,IACIK,EADAC,EAAUrG,EAAQhS,OAASuL,EAAKvL,OAG3B0P,EAAI,EAAGA,EAAIsC,EAAQhS,OAAQ0P,IAAK,CAIvCuI,EAAU,EACVC,EAAUG,EAEV,MAAOJ,EAAUC,EACXR,EAAkBhI,EAAG/N,EAAMuW,IAAYJ,EACzCG,EAAUC,EAEVG,EAAUH,EAGZA,EAAUlP,KAAK2I,OAAO0G,EAAUJ,GAAW,EAAIA,GAIjDI,EAAUH,EACV,IAAII,EAAQtP,KAAKzB,IAAI,EAAG5F,EAAMuW,EAAU,GACpCjW,EAAS+G,KAAKwI,IAAI7P,EAAMuW,EAAS3M,EAAKvL,QAAUgS,EAAQhS,OACxDuY,EAAKtJ,MAAMhN,EAAS,GACxBsW,EAAGtW,EAAS,IAAM,GAAKyN,GAAK,EAE5B,IAAK,IAAIjB,EAAIxM,EAAQwM,GAAK6J,EAAO7J,IAAK,CAGpC,IAAI+J,EAAYhB,EAAEjM,EAAKpK,OAAOsN,EAAI,IAUlC,GANE8J,EAAG9J,GAFK,IAANiB,GAEO6I,EAAG9J,EAAI,IAAM,EAAI,GAAK+J,GAGtBD,EAAG9J,EAAI,IAAM,EAAI,GAAK+J,GAAcJ,EAAQ3J,EAAI,GAAK2J,EAAQ3J,KAAO,EAAI,EAAK2J,EAAQ3J,EAAI,GAGhG8J,EAAG9J,GAAK0J,EAAW,CACrB,IAAI7C,EAAQoC,EAAkBhI,EAAGjB,EAAI,GAGrC,GAAI6G,GAASwC,EAAiB,CAK5B,GAHAA,EAAkBxC,EAClByC,EAAWtJ,EAAI,IAEXsJ,EAAWpW,GAKb,MAHA2W,EAAQtP,KAAKzB,IAAI,EAAG,EAAI5F,EAAMoW,KAUtC,GAAIL,EAAkBhI,EAAI,EAAG/N,GAAOmW,EAClC,MAGFM,EAAUG,EAGZ,OAAOR,GAUTrN,EAAiBhQ,UAAU+c,gBAAkB,SAAUzF,GAGrD,IAFA,IAAIwF,EAAI,GAEC7d,EAAI,EAAGA,EAAIqY,EAAQhS,OAAQrG,IAClC6d,EAAExF,EAAQ7Q,OAAOxH,IAAM,EAGzB,IAASA,EAAI,EAAGA,EAAIqY,EAAQhS,OAAQrG,IAClC6d,EAAExF,EAAQ7Q,OAAOxH,KAAO,GAAKqY,EAAQhS,OAASrG,EAAI,EAGpD,OAAO6d,GAYT9M,EAAiBhQ,UAAU+d,kBAAoB,SAAUC,EAAOnN,GAC9D,GAAmB,GAAfA,EAAKvL,OAAT,CAIA,GAAqB,OAAjB0Y,EAAMC,OACR,MAAMta,MAAM,yBAGd,IAAI2T,EAAUzG,EAAKc,UAAUqM,EAAMC,OAAQD,EAAMC,OAASD,EAAME,SAC5DC,EAAU,EAGd,MAAOtN,EAAKhF,QAAQyL,IAAYzG,EAAKyM,YAAYhG,IAAYA,EAAQhS,OAAShJ,KAAKiU,cAAgBjU,KAAKgU,aAAehU,KAAKgU,aAC1H6N,GAAW7hB,KAAKgU,aAChBgH,EAAUzG,EAAKc,UAAUqM,EAAMC,OAASE,EAASH,EAAMC,OAASD,EAAME,QAAUC,GAIlFA,GAAW7hB,KAAKgU,aAEhB,IAAI8N,EAASvN,EAAKc,UAAUqM,EAAMC,OAASE,EAASH,EAAMC,QAEtDG,GACFJ,EAAMlM,MAAME,QAAQ,IAAIhC,EAAiBW,KAAKD,EAAY0N,IAI5D,IAAIC,EAASxN,EAAKc,UAAUqM,EAAMC,OAASD,EAAME,QAASF,EAAMC,OAASD,EAAME,QAAUC,GAErFE,GACFL,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAY2N,IAIzDL,EAAMM,QAAUF,EAAO9Y,OACvB0Y,EAAMC,QAAUG,EAAO9Y,OAEvB0Y,EAAME,SAAWE,EAAO9Y,OAAS+Y,EAAO/Y,OACxC0Y,EAAMO,SAAWH,EAAO9Y,OAAS+Y,EAAO/Y,SA0B1C0K,EAAiBhQ,UAAUwe,WAAa,SAAUxL,EAAGyL,EAAOC,GAC1D,IAAI3N,EAAOe,EAEX,GAAgB,iBAALkB,GAAiC,iBAATyL,GAAqC,oBAATC,EAG7D3N,EAEAiC,EACAlB,EAAQxV,KAAKwU,UAAUC,EAEvB0N,GAAO,GAEH3M,EAAMxM,OAAS,IACjBhJ,KAAKiX,qBAAqBzB,GAC1BxV,KAAKue,uBAAuB/I,SAEzB,GAAIkB,GAAiB,iBAALA,GAAiC,oBAATyL,GAAwC,oBAATC,EAG5E5M,EAEAkB,EACAjC,EAAQzU,KAAKsf,WAAW9J,QACnB,GAAgB,iBAALkB,GAAiByL,GAAyB,iBAATA,GAAqC,oBAATC,EAE7E3N,EAEAiC,EACAlB,EAEA2M,MACK,IAAgB,iBAALzL,GAAiC,iBAATyL,IAAqBC,GAAyB,iBAATA,EAU7E,MAAM,IAAI/a,MAAM,sCAPhBoN,EAEAiC,EACAlB,EAEA4M,EAKF,GAAqB,IAAjB5M,EAAMxM,OACR,MAAO,GAiBT,IAdA,IAAIqZ,EAAU,GACVX,EAAQ,IAAIhO,EAAiB4O,UAC7BC,EAAkB,EAElBC,EAAc,EAEdC,EAAc,EAKdC,EAAgBjO,EAChBkO,EAAiBlO,EAEZ0D,EAAI,EAAGA,EAAI3C,EAAMxM,OAAQmP,IAAK,CACrC,IAAIyK,EAAYpN,EAAM2C,GAAG,GACrB0K,EAAYrN,EAAM2C,GAAG,GAQzB,OANKoK,GAAmBK,IAAcxO,IAEpCsN,EAAMM,OAASQ,EACfd,EAAMC,OAASc,GAGTG,GACN,KAAKzO,EACHuN,EAAMlM,MAAM+M,KAAqB/M,EAAM2C,GACvCuJ,EAAMO,SAAWY,EAAU7Z,OAC3B2Z,EAAiBA,EAAetN,UAAU,EAAGoN,GAAeI,EAAYF,EAAetN,UAAUoN,GACjG,MAEF,KAAKvO,EACHwN,EAAME,SAAWiB,EAAU7Z,OAC3B0Y,EAAMlM,MAAM+M,KAAqB/M,EAAM2C,GACvCwK,EAAiBA,EAAetN,UAAU,EAAGoN,GAAeE,EAAetN,UAAUoN,EAAcI,EAAU7Z,QAC7G,MAEF,KAAKoL,EACCyO,EAAU7Z,QAAU,EAAIhJ,KAAKgU,cAAgBuO,GAAmB/M,EAAMxM,QAAUmP,EAAI,GAEtFuJ,EAAMlM,MAAM+M,KAAqB/M,EAAM2C,GACvCuJ,EAAME,SAAWiB,EAAU7Z,OAC3B0Y,EAAMO,SAAWY,EAAU7Z,QAClB6Z,EAAU7Z,QAAU,EAAIhJ,KAAKgU,cAElCuO,IACFviB,KAAKyhB,kBAAkBC,EAAOgB,GAC9BL,EAAQ3Z,KAAKgZ,GACbA,EAAQ,IAAIhO,EAAiB4O,UAC7BC,EAAkB,EAKlBG,EAAgBC,EAChBH,EAAcC,GAIlB,MAIAG,IAAczO,IAChBqO,GAAeK,EAAU7Z,QAGvB4Z,IAAc1O,IAChBuO,GAAeI,EAAU7Z,QAU7B,OALIuZ,IACFviB,KAAKyhB,kBAAkBC,EAAOgB,GAC9BL,EAAQ3Z,KAAKgZ,IAGRW,GAST3O,EAAiBhQ,UAAUof,eAAiB,SAAUT,GAIpD,IAFA,IAAIU,EAAc,GAET5K,EAAI,EAAGA,EAAIkK,EAAQrZ,OAAQmP,IAAK,CACvC,IAAIuJ,EAAQW,EAAQlK,GAChB6K,EAAY,IAAItP,EAAiB4O,UACrCU,EAAUxN,MAAQ,GAElB,IAAK,IAAI4D,EAAI,EAAGA,EAAIsI,EAAMlM,MAAMxM,OAAQoQ,IACtC4J,EAAUxN,MAAM4D,GAAK,IAAI1F,EAAiBW,KAAKqN,EAAMlM,MAAM4D,GAAG,GAAIsI,EAAMlM,MAAM4D,GAAG,IAGnF4J,EAAUhB,OAASN,EAAMM,OACzBgB,EAAUrB,OAASD,EAAMC,OACzBqB,EAAUpB,QAAUF,EAAME,QAC1BoB,EAAUf,QAAUP,EAAMO,QAC1Bc,EAAY5K,GAAK6K,EAGnB,OAAOD,GAYTrP,EAAiBhQ,UAAUuf,YAAc,SAAUZ,EAAS9N,GAC1D,GAAsB,GAAlB8N,EAAQrZ,OACV,MAAO,CAACuL,EAAM,IAIhB8N,EAAUriB,KAAK8iB,eAAeT,GAC9B,IAAIa,EAAcljB,KAAKmjB,iBAAiBd,GACxC9N,EAAO2O,EAAc3O,EAAO2O,EAC5BljB,KAAKojB,eAAef,GAQpB,IAHA,IAAIjK,EAAQ,EACRiL,EAAU,GAELlL,EAAI,EAAGA,EAAIkK,EAAQrZ,OAAQmP,IAAK,CACvC,IAEImL,EA6BE5O,EA/BF6O,EAAelB,EAAQlK,GAAGwJ,OAASvJ,EACnC3D,EAAQzU,KAAKsf,WAAW+C,EAAQlK,GAAG3C,OAEnCgO,GAAW,EAmBf,GAjBI/O,EAAMzL,OAAShJ,KAAKiU,eAGtBqP,EAAYtjB,KAAKsgB,WAAW/L,EAAME,EAAMY,UAAU,EAAGrV,KAAKiU,eAAgBsP,IAExD,GAAdD,IACFE,EAAUxjB,KAAKsgB,WAAW/L,EAAME,EAAMY,UAAUZ,EAAMzL,OAAShJ,KAAKiU,eAAgBsP,EAAe9O,EAAMzL,OAAShJ,KAAKiU,iBAEvG,GAAZuP,GAAiBF,GAAaE,KAEhCF,GAAa,KAIjBA,EAAYtjB,KAAKsgB,WAAW/L,EAAME,EAAO8O,IAGzB,GAAdD,EAEFD,EAAQlL,IAAK,EAEbC,GAASiK,EAAQlK,GAAG8J,QAAUI,EAAQlK,GAAGyJ,aAazC,GAVAyB,EAAQlL,IAAK,EACbC,EAAQkL,EAAYC,EAIlB7O,GADc,GAAZ8O,EACMjP,EAAKc,UAAUiO,EAAWA,EAAY7O,EAAMzL,QAE5CuL,EAAKc,UAAUiO,EAAWE,EAAUxjB,KAAKiU,eAG/CQ,GAASC,EAEXH,EAAOA,EAAKc,UAAU,EAAGiO,GAAatjB,KAAKuf,WAAW8C,EAAQlK,GAAG3C,OAASjB,EAAKc,UAAUiO,EAAY7O,EAAMzL,YACtG,CAGL,IAAIwM,EAAQxV,KAAKwU,UAAUC,EAAOC,GAAO,GAEzC,GAAID,EAAMzL,OAAShJ,KAAKiU,eAAiBjU,KAAKwf,iBAAiBhK,GAASf,EAAMzL,OAAShJ,KAAK+T,sBAE1FsP,EAAQlL,IAAK,MACR,CACLnY,KAAKqc,6BAA6B7G,GAIlC,IAHA,IACIiO,EADAC,EAAS,EAGJtK,EAAI,EAAGA,EAAIiJ,EAAQlK,GAAG3C,MAAMxM,OAAQoQ,IAAK,CAChD,IAAIuK,EAAMtB,EAAQlK,GAAG3C,MAAM4D,GAEvBuK,EAAI,KAAOvP,IACbqP,EAASzjB,KAAK4e,YAAYpJ,EAAOkO,IAG/BC,EAAI,KAAOxP,EAEbI,EAAOA,EAAKc,UAAU,EAAGiO,EAAYG,GAAUE,EAAI,GAAKpP,EAAKc,UAAUiO,EAAYG,GAC1EE,EAAI,KAAOzP,IAEpBK,EAAOA,EAAKc,UAAU,EAAGiO,EAAYG,GAAUlP,EAAKc,UAAUiO,EAAYtjB,KAAK4e,YAAYpJ,EAAOkO,EAASC,EAAI,GAAG3a,UAGhH2a,EAAI,KAAOzP,IACbwP,GAAUC,EAAI,GAAG3a,WAU7B,OADAuL,EAAOA,EAAKc,UAAU6N,EAAYla,OAAQuL,EAAKvL,OAASka,EAAYla,QAC7D,CAACuL,EAAM8O,IAUhB3P,EAAiBhQ,UAAUyf,iBAAmB,SAAUd,GAItD,IAHA,IAAIuB,EAAgB5jB,KAAKgU,aACrBkP,EAAc,GAET/K,EAAI,EAAGA,GAAKyL,EAAezL,IAClC+K,GAAejJ,OAAOC,aAAa/B,GAIrC,IAASA,EAAI,EAAGA,EAAIkK,EAAQrZ,OAAQmP,IAClCkK,EAAQlK,GAAG6J,QAAU4B,EACrBvB,EAAQlK,GAAGwJ,QAAUiC,EAIvB,IAAIlC,EAAQW,EAAQ,GAChB7M,EAAQkM,EAAMlM,MAElB,GAAoB,GAAhBA,EAAMxM,QAAewM,EAAM,GAAG,IAAMpB,EAEtCoB,EAAME,QAAQ,IAAIhC,EAAiBW,KAAKD,EAAY8O,IACpDxB,EAAMM,QAAU4B,EAEhBlC,EAAMC,QAAUiC,EAEhBlC,EAAME,SAAWgC,EACjBlC,EAAMO,SAAW2B,OACZ,GAAIA,EAAgBpO,EAAM,GAAG,GAAGxM,OAAQ,CAE7C,IAAI6a,EAAcD,EAAgBpO,EAAM,GAAG,GAAGxM,OAC9CwM,EAAM,GAAG,GAAK0N,EAAY7N,UAAUG,EAAM,GAAG,GAAGxM,QAAUwM,EAAM,GAAG,GACnEkM,EAAMM,QAAU6B,EAChBnC,EAAMC,QAAUkC,EAChBnC,EAAME,SAAWiC,EACjBnC,EAAMO,SAAW4B,EAOnB,GAHAnC,EAAQW,EAAQA,EAAQrZ,OAAS,GACjCwM,EAAQkM,EAAMlM,MAEM,GAAhBA,EAAMxM,QAAewM,EAAMA,EAAMxM,OAAS,GAAG,IAAMoL,EAErDoB,EAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAY8O,IACjDxB,EAAME,SAAWgC,EACjBlC,EAAMO,SAAW2B,OACZ,GAAIA,EAAgBpO,EAAMA,EAAMxM,OAAS,GAAG,GAAGA,OAAQ,CAExD6a,EAAcD,EAAgBpO,EAAMA,EAAMxM,OAAS,GAAG,GAAGA,OAC7DwM,EAAMA,EAAMxM,OAAS,GAAG,IAAMka,EAAY7N,UAAU,EAAGwO,GACvDnC,EAAME,SAAWiC,EACjBnC,EAAMO,SAAW4B,EAGnB,OAAOX,GAUTxP,EAAiBhQ,UAAU0f,eAAiB,SAAUf,GAGpD,IAFA,IAAIyB,EAAa9jB,KAAKiU,cAEbkE,EAAI,EAAGA,EAAIkK,EAAQrZ,OAAQmP,IAClC,KAAIkK,EAAQlK,GAAGyJ,SAAWkC,GAA1B,CAIA,IAAIC,EAAW1B,EAAQlK,GAEvBkK,EAAQ9K,OAAOY,IAAK,GACpB,IAAI6J,EAAS+B,EAAS/B,OAClBL,EAASoC,EAASpC,OAClBqC,EAAa,GAEjB,MAAiC,IAA1BD,EAASvO,MAAMxM,OAAc,CAElC,IAAI0Y,EAAQ,IAAIhO,EAAiB4O,UAC7B2B,GAAQ,EACZvC,EAAMM,OAASA,EAASgC,EAAWhb,OACnC0Y,EAAMC,OAASA,EAASqC,EAAWhb,OAEhB,KAAfgb,IACFtC,EAAME,QAAUF,EAAMO,QAAU+B,EAAWhb,OAC3C0Y,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAY4P,KAGzD,MAAiC,IAA1BD,EAASvO,MAAMxM,QAAgB0Y,EAAME,QAAUkC,EAAa9jB,KAAKgU,aAAc,CACpF,IAAI4O,EAAYmB,EAASvO,MAAM,GAAG,GAC9BqN,EAAYkB,EAASvO,MAAM,GAAG,GAE9BoN,IAAczO,GAEhBuN,EAAMO,SAAWY,EAAU7Z,OAC3B2Y,GAAUkB,EAAU7Z,OACpB0Y,EAAMlM,MAAM9M,KAAKqb,EAASvO,MAAM0O,SAChCD,GAAQ,GACCrB,IAAc1O,GAAqC,GAAtBwN,EAAMlM,MAAMxM,QAAe0Y,EAAMlM,MAAM,GAAG,IAAMpB,GAAcyO,EAAU7Z,OAAS,EAAI8a,GAE3HpC,EAAME,SAAWiB,EAAU7Z,OAC3BgZ,GAAUa,EAAU7Z,OACpBib,GAAQ,EACRvC,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKuO,EAAWC,IACtDkB,EAASvO,MAAM0O,UAGfrB,EAAYA,EAAUxN,UAAU,EAAGyO,EAAapC,EAAME,QAAU5hB,KAAKgU,cACrE0N,EAAME,SAAWiB,EAAU7Z,OAC3BgZ,GAAUa,EAAU7Z,OAEhB4Z,IAAcxO,GAChBsN,EAAMO,SAAWY,EAAU7Z,OAC3B2Y,GAAUkB,EAAU7Z,QAEpBib,GAAQ,EAGVvC,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKuO,EAAWC,IAElDA,GAAakB,EAASvO,MAAM,GAAG,GACjCuO,EAASvO,MAAM0O,QAEfH,EAASvO,MAAM,GAAG,GAAKuO,EAASvO,MAAM,GAAG,GAAGH,UAAUwN,EAAU7Z,SAMtEgb,EAAahkB,KAAKuf,WAAWmC,EAAMlM,OACnCwO,EAAaA,EAAW3O,UAAU2O,EAAWhb,OAAShJ,KAAKgU,cAE3D,IAAImQ,EAAcnkB,KAAKsf,WAAWyE,EAASvO,OAAOH,UAAU,EAAGrV,KAAKgU,cAEhD,KAAhBmQ,IACFzC,EAAME,SAAWuC,EAAYnb,OAC7B0Y,EAAMO,SAAWkC,EAAYnb,OAEF,IAAvB0Y,EAAMlM,MAAMxM,QAAgB0Y,EAAMlM,MAAMkM,EAAMlM,MAAMxM,OAAS,GAAG,KAAOoL,EACzEsN,EAAMlM,MAAMkM,EAAMlM,MAAMxM,OAAS,GAAG,IAAMmb,EAE1CzC,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAY+P,KAItDF,GACH5B,EAAQ9K,SAASY,EAAG,EAAGuJ,MAY/BhO,EAAiBhQ,UAAU0gB,aAAe,SAAU/B,GAGlD,IAFA,IAAI9N,EAAO,GAEF4D,EAAI,EAAGA,EAAIkK,EAAQrZ,OAAQmP,IAClC5D,EAAK4D,GAAKkK,EAAQlK,GAGpB,OAAO5D,EAAK8F,KAAK,KAUnB3G,EAAiBhQ,UAAU2gB,eAAiB,SAAUC,GACpD,IAAIjC,EAAU,GAEd,IAAKiC,EACH,OAAOjC,EAGT,IAAI9N,EAAO+P,EAASrE,MAAM,MACtBsE,EAAc,EACdC,EAAc,uCAElB,MAAOD,EAAchQ,EAAKvL,OAAQ,CAChC,IAAIyb,EAAIlQ,EAAKgQ,GAAavH,MAAMwH,GAEhC,IAAKC,EACH,MAAM,IAAIpd,MAAM,yBAA2BkN,EAAKgQ,IAGlD,IAAI7C,EAAQ,IAAIhO,EAAiB4O,UACjCD,EAAQ3Z,KAAKgZ,GACbA,EAAMM,OAASzQ,SAASkT,EAAE,GAAI,IAEjB,KAATA,EAAE,IACJ/C,EAAMM,SACNN,EAAME,QAAU,GACC,KAAR6C,EAAE,GACX/C,EAAME,QAAU,GAEhBF,EAAMM,SACNN,EAAME,QAAUrQ,SAASkT,EAAE,GAAI,KAGjC/C,EAAMC,OAASpQ,SAASkT,EAAE,GAAI,IAEjB,KAATA,EAAE,IACJ/C,EAAMC,SACND,EAAMO,QAAU,GACC,KAARwC,EAAE,GACX/C,EAAMO,QAAU,GAEhBP,EAAMC,SACND,EAAMO,QAAU1Q,SAASkT,EAAE,GAAI,KAGjCF,IAEA,MAAOA,EAAchQ,EAAKvL,OAAQ,CAChC,IAAI0b,EAAOnQ,EAAKgQ,GAAapa,OAAO,GAEpC,IACE,IAAI6P,EAAOmG,UAAU5L,EAAKgQ,GAAalP,UAAU,IACjD,MAAO+K,GAEP,MAAM,IAAI/Y,MAAM,qCAAuC2S,GAGzD,GAAY,KAAR0K,EAEFhD,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKH,EAAa8F,SACnD,GAAY,KAAR0K,EAEThD,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKF,EAAa6F,SACnD,GAAY,KAAR0K,EAEThD,EAAMlM,MAAM9M,KAAK,IAAIgL,EAAiBW,KAAKD,EAAY4F,QAClD,IAAY,KAAR0K,EAET,MACK,GAAa,KAATA,EAGT,MAAM,IAAIrd,MAAM,uBAAyBqd,EAAO,SAAW1K,GAG7DuK,KAIJ,OAAOlC,GAQT3O,EAAiB4O,UAAY,WAE3BtiB,KAAKwV,MAAQ,GAGbxV,KAAKgiB,OAAS,KAGdhiB,KAAK2hB,OAAS,KAGd3hB,KAAK4hB,QAAU,EAGf5hB,KAAKiiB,QAAU,GAUjBvO,EAAiB4O,UAAU5e,UAAUkG,SAAW,WAC9C,IAAI+a,EAASC,EAGXD,EADmB,IAAjB3kB,KAAK4hB,QACG5hB,KAAKgiB,OAAS,KACC,GAAhBhiB,KAAK4hB,QACJ5hB,KAAKgiB,OAAS,EAEdhiB,KAAKgiB,OAAS,EAAI,IAAMhiB,KAAK4hB,QAIvCgD,EADmB,IAAjB5kB,KAAKiiB,QACGjiB,KAAK2hB,OAAS,KACC,GAAhB3hB,KAAKiiB,QACJjiB,KAAK2hB,OAAS,EAEd3hB,KAAK2hB,OAAS,EAAI,IAAM3hB,KAAKiiB,QAMzC,IAHA,IACI3N,EADAC,EAAO,CAAC,OAASoQ,EAAU,KAAOC,EAAU,SAGvCzM,EAAI,EAAGA,EAAInY,KAAKwV,MAAMxM,OAAQmP,IAAK,CAC1C,OAAQnY,KAAKwV,MAAM2C,GAAG,IACpB,KAAKhE,EACHG,EAAK,IACL,MAEF,KAAKJ,EACHI,EAAK,IACL,MAEF,KAAKF,EACHE,EAAK,IACL,MAGJC,EAAK4D,EAAI,GAAK7D,EAAKuL,UAAU7f,KAAKwV,MAAM2C,GAAG,IAAM,KAGnD,OAAO5D,EAAK8F,KAAK,IAAIgF,QAAQ,OAAQ,MAIvCjU,EAAO5H,QAAUkQ,EACjBtI,EAAO5H,QAAQkQ,iBAAmBA,EAClCtI,EAAO5H,QAAQ0Q,YAAcA,EAC7B9I,EAAO5H,QAAQ2Q,YAAcA,EAC7B/I,EAAO5H,QAAQ4Q,WAAaA,GAItByQ,IACA,OAMAC,IACA,CAAEC,EAAyBC,EAAqBC,KAEtD,aAGAA,EAAoBvM,EAAEsM,EAAqB,CACzC,QAAW,IAAM,IAInB,IAAIE,EAAYD,EAAoB,KAEhCE,EAAcF,EAAoB,KAElCG,EAAaH,EAAoB,IAEjCI,EAAkBJ,EAAoB,KAEtCK,EAAiBL,EAAoB,KAErCM,EAAkBN,EAAoB,IAEtCO,EAAsB,SAAUC,QAChB,IAAZA,IAAsBA,EAAUC,UACpC,IAAIC,EAAU,SAAUC,GACpB,IAAIC,EAAYH,SAASI,cAAc,OACvCD,EAAUE,IAAMH,EAAGI,aAAa,YAChCH,EAAUI,iBAAiB,QAAQ,WAC1BL,EAAGI,aAAa,UAAaJ,EAAGI,aAAa,UAC7CJ,EAAGI,aAAa,UAAaJ,EAAGI,aAAa,WAC1CH,EAAUK,cAAgBL,EAAUM,cACpCN,EAAUM,aAAeN,EAAUK,cAC/BR,SAASU,cAAc,iBAAiBC,aAAeC,OAAOC,YAAc,KAChFV,EAAUK,cAAiBI,OAAOC,YAAc,KAChDX,EAAGY,MAAMtW,OAAUoW,OAAOC,YAAc,GAAM,MAGtDX,EAAGG,IAAMF,EAAUE,OAEvBH,EAAGa,gBAAgB,aAEvB,KAAM,yBAA0BH,QAM5B,OALAb,EAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUmgB,GAC1CA,EAAWX,aAAa,aACxBL,EAAQgB,OAGT,EAEPL,OAAOM,iCACPN,OAAOM,gCAAgCC,aACvCpB,EAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUmgB,GAC9CL,OAAOM,gCAAgCE,QAAQH,QAInDL,OAAOM,gCAAkC,IAAIG,sBAAqB,SAAUC,GACxEA,EAAQxgB,SAAQ,SAAUygB,IACgB,qBAA1BA,EAAOC,eACgB,IAA7BD,EAAOE,kBACPF,EAAOC,iBACND,EAAOG,OAAOpB,aAAa,aAC9BL,EAAQsB,EAAOG,cAI3B3B,EAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUmgB,GAC9CL,OAAOM,gCAAgCE,QAAQH,QAMvDU,EAAapC,EAAoB,KAEjCqC,EAAcrC,EAAoB,KAElCsC,EAAgBtC,EAAoB,KAEpCuC,EAAgBvC,EAAoB,KAEpCwC,EAAgBxC,EAAoB,KAEpCyC,EAAiBzC,EAAoB,KAErC0C,EAAY1C,EAAoB,KAEhC2C,EAAkB3C,EAAoB,KAEtC4C,EAAY5C,EAAoB,KAEhC6C,EAAa7C,EAAoB,KAEjC8C,EAAQ9C,EAAoB,KAE5B+C,EAAe,SAAUxiB,GACzBkgB,SAASgB,iBAAiB,kBAAkBlgB,SAAQ,SAAUyhB,GAC7C,IAATziB,GACAyiB,EAAOC,UAAUC,IAAI,uBAEzBF,EAAOG,QAAU,WACb,IAAIC,EAAKJ,EAAOjC,aAAa,QAAQsC,OAAO,GACxCC,EAAM7C,SAAS8C,eAAe,gBAAkBH,GAAII,UACxD/C,SAASU,cAAc,QAAQsC,UAAYH,MAGnDjC,OAAOqC,aAAe,WAClB,IAAIlD,EAAUC,SAAS8C,eAAe,gBAAkBI,mBAAmBtC,OAAOuC,SAASC,KAAKR,OAAO,KACnG7C,IACAC,SAASU,cAAc,QAAQsC,UAAYjD,EAAQgD,aAM3DM,EAAU9D,EAAoB,KAE9B+D,EAAY/D,EAAoB,KAGhCgE,EAAe,SAAUxD,EAASyD,GAElC,QADa,IAATA,IAAmBA,EAAO,SACC,qBAApBC,iBAAuE,qBAA7BC,yBAArD,CAGA,IAAIC,EAAU,wDACVC,EAAW,yDACXC,EAAY7D,SAASU,cAAc,kBACvC,IAAKmD,EAAW,CACZA,EAAY7D,SAASI,cAAc,OACnCyD,EAAUC,UAAY,gBACtB9D,SAAS+D,KAAKC,sBAAsB,YAAaH,GACjD,IAAII,EAAW,WACX,IACIC,EACAC,EAFAC,EAASX,gBAAgBY,YAc7B,OAXAD,EAAOtjB,SAAQ,SAAUgH,GACjBA,EAAK0b,OAASA,EAAK7J,QAAQ,IAAK,OAChCuK,EAAepc,GAEfA,EAAK0D,UACL2Y,EAAerc,MAGlBoc,IACDA,EAAeC,GAEZD,QAE6BvpB,IAApC8oB,gBAAgBa,kBAChBb,gBAAgBa,gBAAkBL,GAEtC,IAAIM,EAAUN,IACdJ,EAAUnB,QAAU,WAChB,GAA4B,kBAAxBmB,EAAUC,UAA+B,CACzC,IAAIU,EAAY,IAAId,yBAAyBG,EAAUvD,aAAa,cACpEkE,EAAUC,MAAQF,EAClBC,EAAUE,MAAQ,WACdb,EAAUC,UAAY,gBACtBL,gBAAgBkB,SAChBd,EAAUe,UAAYjB,GAE1BF,gBAAgBoB,MAAML,GACtBX,EAAUC,UAAY,uCACtBD,EAAUe,UAAYhB,OAGlBH,gBAAgBqB,WACZrB,gBAAgBsB,QAChBtB,gBAAgBuB,SAChBnB,EAAUe,UAAYhB,IAGtBH,gBAAgBwB,QAChBpB,EAAUe,UAAYjB,KAIlC,EAAGL,EAAiC4B,IAAItE,OAAOuE,oBAEnDnF,SAAS+D,KAAKxD,iBAAiB,SAAS,WACK,KAArC6E,eAAelhB,WAAWmhB,QAA6C,UAA5BxB,EAAU/C,MAAMwE,UAC3DzB,EAAUC,UAAY,gBACtBL,gBAAgBkB,SAChBd,EAAU/C,MAAMwE,QAAU,WAItCvF,EAAQQ,iBAAiB,WAAW,SAAUgF,GAC1C,IAAI1W,EAAOuW,eAAelhB,WAAWmhB,OAErC,GADA5B,gBAAgBkB,SACyB,KAArCS,eAAelhB,WAAWmhB,OAA9B,CAOAzE,OAAOuE,kBAAoBC,eAAeI,WAAW,GAAGC,aACxD,IAAIC,EAAON,eAAeI,WAAW,GAAGG,wBACxC9B,EAAUe,UAAYjB,EACtBE,EAAU/C,MAAMwE,QAAU,QAC1BzB,EAAU/C,MAAM+B,IAAO6C,EAAK7C,IAAM6C,EAAKlb,OAASwV,SAASU,cAAc,QAAQsC,UAAY,GAAM,KACjGa,EAAU/C,MAAM8E,KAAQL,EAAMM,QAAU,EAAK,KAC7ChC,EAAUiC,aAAa,YAAajX,OAZA,UAA5BgV,EAAU/C,MAAMwE,UAChBzB,EAAUC,UAAY,gBACtBD,EAAU/C,MAAMwE,QAAU,aAetCS,EAAkD,SAAUC,EAASC,EAAYC,EAAG3mB,GACpF,SAAS4mB,EAAMrsB,GAAS,OAAOA,aAAiBosB,EAAIpsB,EAAQ,IAAIosB,GAAE,SAAU3sB,GAAWA,EAAQO,MAC/F,OAAO,IAAKosB,IAAMA,EAAIjsB,WAAU,SAAUV,EAASC,GAC/C,SAAS4sB,EAAUtsB,GAAS,IAAMusB,EAAK9mB,EAAU+C,KAAKxI,IAAW,MAAO6D,GAAKnE,EAAOmE,IACpF,SAAS2oB,EAASxsB,GAAS,IAAMusB,EAAK9mB,EAAU,SAASzF,IAAW,MAAO6D,GAAKnE,EAAOmE,IACvF,SAAS0oB,EAAKjlB,GAAUA,EAAOpH,KAAOT,EAAQ6H,EAAOtH,OAASqsB,EAAM/kB,EAAOtH,OAAOI,KAAKksB,EAAWE,GAClGD,GAAM9mB,EAAYA,EAAU9E,MAAMurB,EAASC,GAAc,KAAK3jB,YAGlEikB,EAAsD,SAAUP,EAASjC,GACzE,IAAsGyC,EAAG9S,EAAG+S,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAG5kB,KAAM,WAAa,GAAW,EAAPykB,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOI,KAAM,GAAIC,IAAK,IAChG,OAAOJ,EAAI,CAAEpkB,KAAMykB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAX3oB,SAA0BsoB,EAAEtoB,OAAOE,UAAY,WAAa,OAAOhE,OAAUosB,EACvJ,SAASK,EAAKpM,GAAK,OAAO,SAAUjP,GAAK,OAAO2a,EAAK,CAAC1L,EAAGjP,KACzD,SAAS2a,EAAKzX,GACV,GAAI4X,EAAG,MAAM,IAAIpkB,UAAU,mCAC3B,MAAOukB,EAAG,IACN,GAAIH,EAAI,EAAG9S,IAAM+S,EAAY,EAAR7X,EAAG,GAAS8E,EAAE,UAAY9E,EAAG,GAAK8E,EAAE,YAAc+S,EAAI/S,EAAE,YAAc+S,EAAE1mB,KAAK2T,GAAI,GAAKA,EAAEpR,SAAWmkB,EAAIA,EAAE1mB,KAAK2T,EAAG9E,EAAG,KAAK5U,KAAM,OAAOysB,EAE3J,OADI/S,EAAI,EAAG+S,IAAG7X,EAAK,CAAS,EAARA,EAAG,GAAQ6X,EAAE3sB,QACzB8U,EAAG,IACP,KAAK,EAAG,KAAK,EAAG6X,EAAI7X,EAAI,MACxB,KAAK,EAAc,OAAX+X,EAAEC,QAAgB,CAAE9sB,MAAO8U,EAAG,GAAI5U,MAAM,GAChD,KAAK,EAAG2sB,EAAEC,QAASlT,EAAI9E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK+X,EAAEG,IAAIxiB,MAAOqiB,EAAEE,KAAKviB,MAAO,SACxC,QACI,GAAMmiB,EAAIE,EAAEE,OAAMJ,EAAIA,EAAEnjB,OAAS,GAAKmjB,EAAEA,EAAEnjB,OAAS,MAAkB,IAAVsL,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE+X,EAAI,EAAG,SACjG,GAAc,IAAV/X,EAAG,MAAc6X,GAAM7X,EAAG,GAAK6X,EAAE,IAAM7X,EAAG,GAAK6X,EAAE,IAAM,CAAEE,EAAEC,MAAQhY,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY+X,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAI7X,EAAI,MAC7D,GAAI6X,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEG,IAAI9jB,KAAK4L,GAAK,MACvD6X,EAAE,IAAIE,EAAEG,IAAIxiB,MAChBqiB,EAAEE,KAAKviB,MAAO,SAEtBsK,EAAKmV,EAAKhkB,KAAKimB,EAASW,GAC1B,MAAOhpB,GAAKiR,EAAK,CAAC,EAAGjR,GAAI+V,EAAI,EAAK,QAAU8S,EAAIC,EAAI,EACtD,GAAY,EAAR7X,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE9U,MAAO8U,EAAG,GAAKA,EAAG,QAAK,EAAQ5U,MAAM,KAuB9EgtB,EAAe,SAAUC,GACzB,IAAIC,EAAgB,CAChB3E,OAAQ,EACR4E,IAAKlF,EAA6ByE,EAAEU,IACpCC,YAAa,GACbC,WAAaL,GAAWA,EAAQK,WAAcrF,EAA6ByE,EAAEU,KAAO,qBACpFrc,KAAMkX,EAAsCyE,EAAEa,aAC9CC,KAAM,MACNhE,KAAM,QACNiE,SAAUxF,EAA0CyE,EAAEgB,iBACtDC,KAAM1F,EAAsCyE,EAAEkB,aAC9CC,KAAM,QACNC,OAAQ,CACJld,QAAQ,GAEZmd,MAAO9F,EAAuCyE,EAAEsB,eAEpD,OAAO,EAAG3F,EAAiB4F,GAAGf,EAAeD,IAE7CiB,EAAU,SAAUC,EAAQlB,GAC5B,IAAImB,EAAgBpB,EAAaC,GACjC,OAAO,EAAG9E,EAAyBkG,GAAGD,EAAcjB,IAAM,4BAA6B,oBAAoBjtB,MAAK,WAC5G,IAAIouB,GAAO,EAAGjF,EAAqBkF,GAAG,CAClCC,UAAWJ,EAAcX,SAASe,UAClCC,iBAAkBL,EAAcX,SAASgB,iBACzCC,UAAWN,EAAcd,UACzBqB,OAAQP,EAAcf,YACtBuB,YAAaR,EAAcX,SAASmB,YACpCC,UAAWT,EAAcX,SAASoB,UAClCC,cAAwC,IAAzBV,EAAc7F,OAC7BwG,gBAAiBX,EAAcT,KAAKqB,YACpCC,cAAeb,EAAca,cAC7BC,SAAUd,EAAcX,SAASyB,SACjCC,WAAYf,EAAcX,SAAS0B,WACnCC,UAAWhB,EAAcX,SAAS2B,UAClCxlB,KAAMwkB,EAAcX,SAAS7jB,KAC7BylB,iBAAkBjB,EAAcX,SAAS4B,iBACzCC,wBAAyBlB,EAAcX,SAAS6B,wBAChDC,SAAUnB,EAAcX,SAAS8B,SACjCC,IAAKpB,EAAcX,SAAS+B,MAUhC,OARgB,OAAZvC,QAAgC,IAAZA,OAAqB,EAASA,EAAQwC,YAC1DnB,EAAKoB,eAAe,CAChBD,UAAW,CACPE,QAAS1C,EAAQwC,aAI7BnB,EAAKsB,cAAa,GACXtB,EAAKqB,QAAQxB,OAGxB0B,EAAgB,SAAUC,EAAgBrC,EAAUR,GAAW,OAAOlB,OAAU,OAAQ,OAAQ,GAAQ,WACxG,IAAIqC,EAAe9O,EACnB,OAAOiN,EAAYjsB,MAAM,SAAUyvB,GAC/B,OAAQA,EAAGnD,OACP,KAAK,EAED,OADAwB,EAAgBpB,EAAaC,GACtB,CAAC,EAAaiB,EAAQT,EAAUW,IAC3C,KAAK,EAkDD,OAjDA9O,EAAOyQ,EAAG/nB,OACNomB,EAAc4B,YACd1Q,EAAO8O,EAAc4B,UAAU1Q,IAEnCwQ,EAAelF,UAAYtL,EAC3BwQ,EAAetH,UAAUC,IAAI,iBAC7B,EAAGP,EAAqC+H,GAAG7B,EAAcL,MAAMmC,QAAS9B,EAAcL,MAAMoC,MAC/D,IAAzB/B,EAAc7F,QACduH,EAAetH,UAAUC,IAAI,yBAEjC,EAAG/C,EAA2B0K,GAAGN,EAAgB1B,EAAc5E,OAC/D,EAAG3D,EAAqC/E,GAAGsN,EAAcrd,KAAM+e,EAAgB1B,EAAcjB,MAC7F,EAAGxF,EAA2B0I,GAAGP,EAAgB,CAC7C3C,IAAKiB,EAAcjB,IACnBQ,KAAMS,EAAcT,QAExB,EAAG9F,EAAiC5kB,GAAG6sB,EAAgB1B,EAAcjB,IAAKiB,EAAcP,OACxF,EAAGlI,EAAqCuG,GAAG4D,EAAgB1B,EAAcjB,MACzE,EAAGvH,EAAmClU,GAAGoe,EAAgB1B,EAAcjB,MACvE,EAAG1H,EAA6B6K,GAAGR,EAAgB1B,EAAcjB,IAAKiB,EAAcP,OACpF,EAAG/F,EAAiCoE,GAAG4D,EAAgB1B,EAAcjB,IAAKiB,EAAcP,OACxF,EAAG7F,EAAmCuI,GAAGT,EAAgB1B,EAAcjB,MACvE,EAAG3H,EAAyBgL,GAAGV,EAAgB1B,EAAcjB,MAC7D,EAAGvF,EAA6B6I,GAAGX,GAC/B1B,EAAcN,OAAOld,QACrB2Y,EAAauG,EAAgB1B,EAAc5E,MAElB,IAAzB4E,EAAc7F,QACdD,EAAa8F,EAAc7F,QAE3B6F,EAAcnd,OACdmd,EAAcnd,QAEdmd,EAAca,eACdnJ,EAAoBgK,GAEpB1B,EAAcZ,OACd,EAAGrF,EAAyBkG,GAAGD,EAAcjB,IAAM,kBAAoBiB,EAAcZ,KAAO,MAAO,oBAEvGsC,EAAevJ,iBAAiB,SAAS,SAAUgF,GAC/C,IAAImF,GAAc,EAAGtI,EAAqCuI,IAAIpF,EAAM7D,OAAQ,QAC5E,GAAIgJ,IAAe,EAAGtI,EAAsCwI,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiBf,EAAepJ,cAAc,IAAMgK,EAAYpK,aAAa,mBAC7EuK,GACAjK,OAAOkK,SAASlK,OAAOmK,QAASF,EAAe9H,oBAKpD,CAAC,WAMpBiI,EAAgBzL,EAAoB,KAEpC0L,EAAe1L,EAAoB,KAoBnC2L,EAAwB,WACxB,SAASA,KAwCT,OArCAA,EAAOC,aAAeH,EAAgCI,EAEtDF,EAAOxL,WAAaA,EAA2B0K,EAE/Cc,EAAOtL,eAAiBA,EAAmClU,EAE3Dwf,EAAOrL,gBAAkBA,EAAqC/E,EAE9DoQ,EAAOvJ,WAAaA,EAA2B0I,EAE/Ca,EAAOrJ,cAAgBA,EAAiC5kB,EAExDiuB,EAAOvL,gBAAkBA,EAAqCuG,EAE9DgF,EAAOzL,YAAcA,EAA6B6K,EAElDY,EAAO1L,UAAYA,EAAyBgL,EAE5CU,EAAOpJ,cAAgBA,EAAiCoE,EAExDgF,EAAOlJ,eAAiBA,EAAmCuI,EAE3DW,EAAOnJ,cAAgBA,EAAiCsJ,EAExDH,EAAOtJ,YAAcA,EAA6B6I,EAElDS,EAAO3H,aAAeA,EAEtB2H,EAAOpL,oBAAsBA,EAE7BoL,EAAOhD,QAAUA,EAEjBgD,EAAOpgB,QAAU+e,EAEjBqB,EAAOD,aAAeA,EAA+BR,EAErDS,EAAOhJ,gBAAkBA,EAAqC+H,EACvDiB,EAzCgB,GA2CE,MAAMnqB,EAAS,GAKtCuqB,IACA,CAAEjM,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,EACX,EAAK,IAAM,IAElC,IAAIiM,EAAkB,QAElBC,EAA2B,WAC3B,SAASA,KA0DT,OAxDAA,EAAUC,KAAO,IACjBD,EAAUE,YAAc,qBACxBF,EAAUG,aAAe,IACzBH,EAAUI,oBAAsB,wBAChCJ,EAAUK,cAAgB,CAAC,QAAS,WAAY,OAAQ,SAAU,SAAU,OAAQ,OAChF,eAAgB,UAAW,SAAU,QAAS,OAAQ,QAAS,OAAQ,cAAe,eACtF,gBAAiB,SAAU,SAAU,SACzCL,EAAUM,WAAa,CAAC,OAAQ,QAAS,WAAY,UAAW,SAAU,UAAW,KACjF,WAAY,UAAW,QAAS,WAAY,SAAU,SAAU,OAAQ,WAAY,QAAS,UAC7F,eAAgB,SAAU,SAAU,eAAgB,gBAAiB,SAAU,UAAW,WAC1F,eAAgB,MAAO,iBAAkB,oBAAqB,kBAAmB,UAAW,QAAS,OACrG,MAAO,KAAM,QAAS,cAC1BN,EAAUO,eAAiB,CAAC,UAAW,UAAW,UAAW,WAAY,MAAO,WAAY,YAAa,SACrG,KAAM,KAAM,OAEZ,aAAc,SAAU,OAAQ,IAAK,SAAU,MAAO,MAAO,eAAgB,OAAQ,KAAM,MAAO,OAClG,OAAQ,OAAQ,aAAc,SAAU,OAAQ,MAAO,WAAY,WAAY,QAAS,aAAc,MACtG,eAAgB,OAAQ,YAAa,SAAU,cAAe,IAAK,OAAQ,OAAQ,OAAQ,MAAO,QAClG,QAAS,MAAO,aAAc,QAAS,OACvC,MAAO,UAAW,OAAQ,MAAO,UAAW,SAAU,UAAW,QAAS,aAAc,OAAQ,SAChG,QAAS,aAAc,WAAY,QAAS,QAAS,eACzDP,EAAUpE,IAAM,4CAChBoE,EAAU9D,iBAAmB,CACzBc,WAAW,EACXC,kBAAkB,EAClBG,aAAa,EACbC,WAAW,EACXK,SAAU,GACVC,WAAY,GACZC,WAAW,EACXxlB,MAAM,EACNylB,kBAAkB,EAClBC,yBAAyB,EACzBC,UAAU,EACVC,KAAK,GAETgC,EAAUjE,aAAe,CACrB3c,QAAQ,EACRI,YAAY,EACZ8V,MAAO,UAEX0K,EAAU5D,aAAe,CACrBoE,OAAQ,QACRhD,aAAa,EACbiD,OAAQ,IAEZT,EAAUxD,cAAgB,CACtBkC,QAAS,QACTgC,KAAM,CACF,aAAc,aACd,KAAQ,OACR,MAAS,QACT,OAAU,UAEd/B,KAAMqB,EAAUpE,IAAM,2BAEnBoE,EA3DmB,IAkExBW,IACA,CAAE9M,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI8M,EAAO,CACPC,MAAO,CACH,YAAe,SACf,UAAa,OACb,WAAc,QACd,cAAiB,iBACjB,KAAQ,OACR,KAAQ,mBACR,MAAS,YACT,MAAS,QACT,KAAQ,aACR,aAAc,2BACd,OAAU,SACV,QAAW,UACX,QAAW,UACX,gBAAiB,wBACjB,OAAU,SACV,KAAQ,OACR,gBAAiB,aACjB,aAAc,gBACd,SAAY,WACZ,KAAQ,OACR,YAAe,qDACf,KAAQ,OACR,YAAa,mBACb,MAAS,QACT,OAAU,SACV,cAAiB,qBACjB,YAAe,eACf,WAAc,oBACd,SAAY,aACZ,SAAY,WACZ,KAAQ,OACR,SAAY,YACZ,OAAU,SACV,KAAQ,OACR,cAAe,cACf,eAAgB,oBAChB,gBAAiB,qBACjB,iBAAoB,gBACpB,kBAAqB,iBACrB,eAAkB,iBAClB,eAAkB,iBAClB,iBAAoB,oBACpB,OAAU,SACV,SAAY,WACZ,KAAQ,OACR,KAAQ,OACR,QAAW,WACX,KAAQ,OACR,KAAQ,OACR,UAAa,gBACb,eAAgB,aAChB,QAAW,UACX,QAAW,UACX,KAAQ,OACR,eAAkB,sDAClB,QAAW,UACX,MAAS,QACT,OAAU,0BACV,aAAc,wCACd,UAAa,eACb,KAAQ,OACR,OAAU,SACV,IAAO,MACP,KAAQ,OACR,UAAa,aACb,OAAU,SACV,MAAS,QACT,eAAkB,iBAClB,MAAS,QACT,YAAe,eACf,KAAQ,OACR,GAAM,KACN,OAAU,SACV,OAAU,uBACV,YAAe,eACf,UAAa,eACb,QAAW,WAEfC,MAAO,CACH,YAAe,KACf,UAAa,KACb,WAAc,KACd,cAAiB,SACjB,KAAQ,KACR,KAAQ,gBACR,MAAS,UACT,MAAS,MACT,KAAQ,YACR,aAAc,aACd,OAAU,KACV,QAAW,OACX,QAAW,KACX,gBAAiB,WACjB,OAAU,QACV,KAAQ,MACR,gBAAiB,OACjB,aAAc,OACd,SAAY,QACZ,KAAQ,SACR,YAAe,4BACf,KAAQ,KACR,YAAa,QACb,MAAS,MACT,OAAU,OACV,cAAiB,cACjB,YAAe,OACf,WAAc,OACd,SAAY,OACZ,SAAY,UACZ,KAAQ,MACR,SAAY,WACZ,OAAU,MACV,KAAQ,KACR,cAAe,WACf,eAAgB,aAChB,gBAAiB,YACjB,iBAAoB,UACpB,kBAAqB,UACrB,eAAkB,SAClB,eAAkB,SAClB,iBAAoB,eACpB,OAAU,KACV,SAAY,KACZ,KAAQ,OACR,KAAQ,MACR,QAAW,QACX,KAAQ,MACR,KAAQ,QACR,UAAa,gBACb,eAAgB,WAChB,QAAW,YACX,QAAW,KACX,KAAQ,OACR,eAAkB,0DAClB,QAAW,QACX,MAAS,OACT,OAAU,YACV,aAAc,kBACd,UAAa,SACb,KAAQ,KACR,OAAU,KACV,IAAO,IACP,KAAQ,MACR,UAAa,SACb,OAAU,QACV,MAAS,OACT,eAAkB,iBAClB,MAAS,KACT,YAAe,SACf,KAAQ,OACR,GAAM,KACN,OAAU,SACV,OAAU,gBACV,YAAe,WACf,UAAa,UACb,QAAW,UAEfC,MAAO,CACH,YAAe,MACf,UAAa,KACb,WAAc,MACd,cAAiB,SACjB,KAAQ,KACR,KAAQ,aACR,MAAS,OACT,MAAS,KACT,KAAQ,SACR,aAAc,SACd,OAAU,IACV,QAAW,MACX,QAAW,KACX,gBAAiB,QACjB,OAAU,OACV,KAAQ,KACR,gBAAiB,OACjB,aAAc,OACd,SAAY,MACZ,KAAQ,KACR,YAAe,2BACf,KAAQ,KACR,YAAa,OACb,MAAS,MACT,OAAU,OACV,cAAiB,YACjB,YAAe,OACf,WAAc,OACd,SAAY,KACZ,SAAY,OACZ,KAAQ,MACR,SAAY,UACZ,OAAU,OACV,KAAQ,KACR,cAAe,QACf,eAAgB,WAChB,gBAAiB,YACjB,iBAAoB,WACpB,kBAAqB,YACrB,eAAkB,UAClB,eAAkB,WAClB,iBAAoB,OACpB,OAAU,OACV,SAAY,KACZ,KAAQ,OACR,KAAQ,KACR,QAAW,QACX,KAAQ,UACR,KAAQ,MACR,UAAa,cACb,eAAgB,UAChB,QAAW,OACX,QAAW,KACX,KAAQ,KACR,eAAkB,uDAClB,QAAW,OACX,MAAS,OACT,OAAU,YACV,aAAc,iBACd,UAAa,SACb,KAAQ,OACR,OAAU,KACV,IAAO,IACP,KAAQ,KACR,UAAa,OACb,OAAU,MACV,MAAS,MACT,eAAkB,gBAClB,MAAS,KACT,YAAe,KACf,KAAQ,OACR,GAAM,KACN,OAAU,OACV,OAAU,YACV,YAAe,SACf,UAAa,UACb,QAAW,QAEfC,MAAO,CACH,YAAe,sBACf,UAAa,2BACb,WAAc,4BACd,cAAiB,uBACjB,KAAQ,mBACR,KAAQ,4BACR,MAAS,eACT,MAAS,UACT,KAAQ,YACR,aAAc,8BACd,OAAU,sBACV,QAAW,cACX,QAAW,cACX,gBAAiB,4BACjB,OAAU,cACV,KAAQ,aACR,gBAAiB,kBACjB,aAAc,iBACd,SAAY,iBACZ,KAAQ,mBACR,YAAe,2CACf,KAAQ,iBACR,YAAa,mCACb,MAAS,SACT,OAAU,UACV,cAAiB,oBACjB,YAAe,SACf,WAAc,gCACd,SAAY,YACZ,SAAY,YACZ,KAAQ,SACR,SAAY,qBACZ,OAAU,SACV,KAAQ,yBACR,cAAe,kBACf,eAAgB,mCAChB,gBAAiB,oCACjB,iBAAoB,yBACpB,kBAAqB,0BACrB,eAAkB,yBAClB,eAAkB,wBAClB,iBAAoB,uBACpB,OAAU,SACV,SAAY,YACZ,KAAQ,QACR,KAAQ,SACR,QAAW,kBACX,KAAQ,SACR,KAAQ,gBACR,UAAa,aACb,eAAgB,uBAChB,QAAW,SACX,QAAW,aACX,KAAQ,MACR,eAAkB,oFAClB,QAAW,eACX,MAAS,SACT,OAAU,iCACV,aAAc,oCACd,UAAa,YACb,KAAQ,UACR,OAAU,UACV,IAAO,mBACP,KAAQ,YACR,UAAa,uBACb,OAAU,oBACV,MAAS,UACT,eAAkB,mBAClB,MAAS,YACT,YAAe,8BACf,KAAQ,WACR,GAAM,oBACN,OAAU,WACV,OAAU,iCACV,YAAe,kBACf,UAAa,cACb,QAAW,oBAEfC,MAAO,CACH,YAAe,KACf,UAAa,KACb,WAAc,KACd,cAAiB,OACjB,KAAQ,KACR,KAAQ,UACR,MAAS,OACT,MAAS,KACT,KAAQ,MACR,aAAc,UACd,OAAU,IACV,QAAW,KACX,QAAW,KACX,gBAAiB,SACjB,OAAU,MACV,KAAQ,KACR,gBAAiB,MACjB,aAAc,MACd,SAAY,QACZ,KAAQ,IACR,YAAe,cACf,KAAQ,KACR,YAAa,SACb,MAAS,KACT,OAAU,KACV,cAAiB,YACjB,YAAe,OACf,WAAc,OACd,SAAY,MACZ,SAAY,KACZ,KAAQ,KACR,SAAY,OACZ,OAAU,OACV,KAAQ,KACR,cAAe,OACf,eAAgB,QAChB,gBAAiB,QACjB,iBAAoB,UACpB,kBAAqB,UACrB,eAAkB,UAClB,eAAkB,UAClB,iBAAoB,OACpB,OAAU,KACV,SAAY,KACZ,KAAQ,MACR,KAAQ,KACR,QAAW,OACX,KAAQ,OACR,KAAQ,KACR,UAAa,UACb,eAAgB,OAChB,QAAW,SACX,QAAW,KACX,KAAQ,KACR,eAAkB,gCAClB,QAAW,KACX,MAAS,KACT,OAAU,YACV,aAAc,aACd,UAAa,SACb,KAAQ,KACR,OAAU,KACV,IAAO,IACP,KAAQ,KACR,UAAa,OACb,OAAU,MACV,MAAS,KACT,eAAkB,WAClB,MAAS,KACT,YAAe,OACf,KAAQ,KACR,GAAM,IACN,OAAU,KACV,OAAU,UACV,YAAe,OACf,UAAa,SACb,QAAW,SAEfC,MAAO,CACH,YAAe,KACf,UAAa,KACb,WAAc,KACd,cAAiB,OACjB,KAAQ,KACR,KAAQ,UACR,MAAS,OACT,MAAS,KACT,KAAQ,MACR,aAAc,UACd,OAAU,IACV,QAAW,KACX,QAAW,KACX,gBAAiB,SACjB,OAAU,MACV,KAAQ,KACR,gBAAiB,MACjB,aAAc,MACd,SAAY,QACZ,KAAQ,IACR,YAAe,cACf,KAAQ,KACR,YAAa,SACb,MAAS,KACT,OAAU,KACV,cAAiB,YACjB,YAAe,OACf,WAAc,QACd,SAAY,MACZ,SAAY,KACZ,KAAQ,KACR,SAAY,OACZ,OAAU,OACV,KAAQ,KACR,cAAe,OACf,eAAgB,QAChB,gBAAiB,QACjB,iBAAoB,UACpB,kBAAqB,UACrB,eAAkB,UAClB,eAAkB,UAClB,iBAAoB,OACpB,OAAU,KACV,SAAY,KACZ,KAAQ,MACR,KAAQ,KACR,QAAW,OACX,KAAQ,OACR,KAAQ,KACR,UAAa,UACb,eAAgB,OAChB,QAAW,SACX,QAAW,KACX,KAAQ,KACR,eAAkB,gCAClB,QAAW,KACX,MAAS,KACT,OAAU,YACV,aAAc,aACd,UAAa,SACb,KAAQ,KACR,OAAU,KACV,IAAO,IACP,KAAQ,KACR,UAAa,OACb,OAAU,MACV,MAAS,KACT,eAAkB,WAClB,MAAS,KACT,YAAe,OACf,KAAQ,KACR,GAAM,IACN,OAAU,KACV,OAAU,UACV,YAAe,OACf,UAAa,SACb,QAAW,WAObC,IACA,CAAEtN,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9DsN,EAA+CtN,EAAoB,KAGxFC,EAAY,SAAUO,EAASoH,QACf,IAAZpH,IAAsBA,EAAUC,eACxB,IAARmH,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAI0F,EAAc/M,EAAQiB,iBAAiB,iBACvC8L,EAAYxpB,OAAS,IACrB,EAAGupB,EAA8DxE,GAAGlB,EAAM,oCAAqC,qBAAqBjtB,MAAK,WACrI4yB,EAAYhsB,SAAQ,SAAUgH,GACtBA,EAAKilB,cAAcvK,UAAUwK,SAAS,wBACtCllB,EAAKilB,cAAcvK,UAAUwK,SAAS,2BAGE,SAAxCllB,EAAKwY,aAAa,oBAGtB2M,MAAMC,UAAUplB,EAAMA,EAAKqlB,YAAY9H,QACvCvd,EAAKgZ,MAAMsM,UAAY,OACvBtlB,EAAKge,aAAa,iBAAkB,iBAS9CuH,IACA,CAAEhO,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9DsN,EAA+CtN,EAAoB,KAGxFE,EAAc,SAAUM,EAASoH,EAAKY,QACtB,IAAZhI,IAAsBA,EAAUC,eACxB,IAARmH,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAIkG,EAAkBvN,EAAQiB,iBAAiB,qBAC3CsM,EAAgBhqB,OAAS,IACzB,EAAGupB,EAA8DxE,GAAGlB,EAAM,kCAAmC,uBAAuBjtB,MAAK,WACrIozB,EAAgBxsB,SAAQ,SAAUnD,GAC9B,IAAIA,EAAEovB,cAAcvK,UAAUwK,SAAS,yBACnCrvB,EAAEovB,cAAcvK,UAAUwK,SAAS,0BADvC,CAIA,IAAIne,EAAOlR,EAAE4vB,UAAUlI,OACvB,GAAKxW,EAGL,IACI,GAAyC,SAArClR,EAAE2iB,aAAa,kBACf,OAEJ,IAAIkN,EAASC,KAAKC,MAAM7e,GACxB8e,QAAQC,KAAKjwB,EAAa,SAAVoqB,EAAmB,YAASptB,GAAWkzB,UAAUL,GACjE7vB,EAAEmoB,aAAa,iBAAkB,QAErC,MAAO/rB,GACH4D,EAAEmmB,UAAY,sBACdnmB,EAAEinB,UAAY,6BAA+B7qB,YAU3D+zB,GACA,CAAEzO,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIyO,EAA2CxO,EAAoB,KAC/DyO,EAAiDzO,EAAoB,KAG1FG,EAAa,SAAUK,EAASyD,QACnB,IAATA,IAAmBA,EAAO,SAC9BzD,EAAQiB,iBAAiB,cAAclgB,SAAQ,SAAUnD,EAAGswB,GACxD,IAAItwB,EAAEovB,cAAcvK,UAAUwK,SAAS,yBACnCrvB,EAAEovB,cAAcvK,UAAUwK,SAAS,6BAGnCrvB,EAAE6kB,UAAUwK,SAAS,qBAAuBrvB,EAAE6kB,UAAUwK,SAAS,uBACjErvB,EAAE6kB,UAAUwK,SAAS,qBAAuBrvB,EAAE6kB,UAAUwK,SAAS,qBACjErvB,EAAE6kB,UAAUwK,SAAS,sBACrBrvB,EAAE6kB,UAAUwK,SAAS,iBAAmBrvB,EAAE6kB,UAAUwK,SAAS,sBAC7DrvB,EAAE6kB,UAAUwK,SAAS,qBAGrBrvB,EAAEmjB,MAAMoN,UAAUrkB,QAAQ,OAAS,MAInCkW,EAAQyC,UAAUwK,SAAS,mBAAqBiB,EAAQ,GAA5D,CAGA,IAAIE,EAAWxwB,EAAE4vB,UACjB,GAAI5vB,EAAE6kB,UAAUwK,SAAS,oBAAqB,CAC1C,IAAIoB,EAAcpO,SAASI,cAAc,QACzCgO,EAAYxJ,UAAYjnB,EAAEinB,UAC1BwJ,EAAYpN,iBAAiB,iBAAiBlgB,SAAQ,SAAUgH,GAC5DA,EAAKumB,YAETF,EAAWC,EAAYb,UAE3B,IAAIe,EAAatO,SAASI,cAAc,OACxCkO,EAAWxK,UAAY,cACvBwK,EAAW1J,UAAY,qBAAwBmJ,EAAqD/c,EAAEwS,GAAM+K,KAAO,sDAAwDR,EAAqD/c,EAAEwS,GAAM+K,KAAjN,wKACoBR,EAAqD/c,EAAEwS,GAAMgL,OAAS,oEACjH,IAAIC,EAAWzO,SAASI,cAAc,YACtCqO,EAAS30B,OAAQ,EAAGk0B,EAAkEzF,GAAG4F,GACzFG,EAAWtK,sBAAsB,aAAcyK,GAC/C9wB,EAAE+wB,OAAOJ,GACT3wB,EAAEmjB,MAAMoN,UAAatN,OAAO+N,YAAc,GAAM,WAOlDC,IACA,CAAEvP,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9DsN,EAA+CtN,EAAoB,KAGxFI,EAAkB,SAAUI,EAASoH,QACzB,IAARA,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAIyH,EAAoB9O,EAAQiB,iBAAiB,uBAChB,IAA7B6N,EAAkBvrB,SAGtB,EAAGupB,EAA8DxE,GAAGlB,EAAM,yCAA0C,yBAAyBjtB,MAAK,WAC9I20B,EAAkB/tB,SAAQ,SAAUgH,GAChC,GAA4C,SAAxCA,EAAKwY,aAAa,kBAAtB,CAGA,IAAIwO,EAAeC,UAAUrB,MAAM5lB,EAAKqlB,aACxCrlB,EAAK8c,UAAY,GACjBkK,EAAaE,QAAQlnB,GACrBA,EAAKge,aAAa,iBAAkB,iBAQ1CmJ,IACA,CAAE5P,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9DsN,EAA+CtN,EAAoB,KAGxFK,EAAiB,SAAUG,EAASoH,QACxB,IAARA,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAI8H,EAAmBnP,EAAQiB,iBAAiB,sBAChB,IAA5BkO,EAAiB5rB,SAGrB,EAAGupB,EAA8DxE,GAAGlB,EAAM,2BAA4B,wBAAwBjtB,MAAK,WAC/Hg1B,EAAiBpuB,SAAQ,SAAUnD,GAC/B,IAAIA,EAAEovB,cAAcvK,UAAUwK,SAAS,yBACnCrvB,EAAEovB,cAAcvK,UAAUwK,SAAS,2BAGE,SAArCrvB,EAAE2iB,aAAa,mBAAyD,KAAzB3iB,EAAEwvB,YAAY9H,OAAjE,CAGA,IACI,IAAI8J,EAAO,IAAIC,KAAK,CAAC,kBAAoBpP,SAAS8C,eAAe,wBAAwBzC,IAAI1G,QAAQ,SAAU,kBAAoB,OAAQ,CAAE7Z,KAAM,2BAC/IkG,EAAM4a,OAAOyO,KAAOzO,OAAO0O,UAC3BC,EAAUvpB,EAAIwpB,gBAAgBL,GAC9BM,EAAS,IAAIC,OAAOH,GACxB,IAAII,IAAI,CAAEF,OAAQA,IACbG,iBAAiBjyB,EAAEwvB,aAAajzB,MAAK,SAAUkH,GAChDzD,EAAEinB,UAAYxjB,EAAOyuB,aACtBC,OAAM,SAAU/1B,GACf4D,EAAEinB,UAAY,8BAAgC7qB,EAC9C4D,EAAEmmB,UAAY,yBAGtB,MAAOnmB,GACHoyB,QAAQh2B,MAAM,iBAAkB4D,GAEpCA,EAAEmoB,aAAa,iBAAkB,iBAQvCkK,GACA,CAAE3Q,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9D0Q,EAA+C1Q,EAAoB,KACnE2Q,EAA8C3Q,EAAoB,KAIvFM,EAAkB,SAAUsQ,EAAYpQ,EAASoH,QACjC,IAAZpH,IAAsBA,EAAUC,eACxB,IAARmH,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAItG,EAAQqP,EAAWrP,MAClB8L,EAA6ElG,EAAEoF,WAAWsE,SAAStP,KACpGA,EAAQ,UAEZ,IAAIuP,EAAkBrQ,SAAS8C,eAAe,mBAC1CwN,EAAOnJ,EAAM,gCAAkCrG,EAAQ,OAK3D,GAJIuP,GAAmBA,EAAgBC,OAASA,GAC5CD,EAAgBhC,UAEpB,EAAG6B,EAA4DK,GAAGpJ,EAAM,gCAAkCrG,EAAQ,OAAQ,oBAChG,IAAtBqP,EAAWvlB,OAAf,CAGA,IAAI4lB,EAAQzQ,EAAQiB,iBAAiB,cAChB,IAAjBwP,EAAMltB,SAGV,EAAG2sB,EAA8D5H,GAAGlB,EAAM,0CAA2C,oBAAoBjtB,MAAK,WAC1I6lB,EAAQiB,iBAAiB,cAAclgB,SAAQ,SAAU2vB,GAErD,IAAIA,EAAM1D,cAAcvK,UAAUwK,SAAS,4BACvCyD,EAAM1D,cAAcvK,UAAUwK,SAAS,0BAGvCyD,EAAMjO,UAAUwK,SAAS,qBAAuByD,EAAMjO,UAAUwK,SAAS,uBACzEyD,EAAMjO,UAAUwK,SAAS,qBAAuByD,EAAMjO,UAAUwK,SAAS,qBACzEyD,EAAMjO,UAAUwK,SAAS,sBACzByD,EAAMjO,UAAUwK,SAAS,iBAAmByD,EAAMjO,UAAUwK,SAAS,sBACrEyD,EAAMjO,UAAUwK,SAAS,oBAG7BjiB,KAAK2lB,iBAAiBD,GACjBN,EAAWnlB,YAAhB,CAGAylB,EAAMjO,UAAUC,IAAI,qBACpB,IAAIkO,EAAkBF,EAAM/P,cAAc,4BACrCiQ,IACDA,EAAkB3Q,SAASI,cAAc,OACzCuQ,EAAgB7M,UAAY,0BAC5B2M,EAAMzM,sBAAsB,YAAa2M,IAE7C,IAAIC,EAAaC,iBAAiBJ,GAAOG,WACrCE,GAAa,EACE,aAAfF,GAA4C,aAAfA,IAC7BE,GAAa,GAEjB,IAAIC,EAAiB,GACjBC,EAAWP,EAAMtD,YAAY5S,MAAM,eACvCyW,EAAS1sB,MACT0sB,EAASC,KAAI,SAAU3c,GACnB,IAAI4c,EAAa,GACbJ,IACAH,EAAgBxD,YAAc7Y,GAAQ,KACtC4c,EAAa,kBAAqBP,EAAgBhL,wBAAwBnb,OAAS,OAEvFumB,GAAkB,QAAUG,EAAa,cAE7CP,EAAgB7P,MAAMwE,QAAU,OAChCyL,EAAiB,yCAA6CA,EAAiB,UAC/EN,EAAMU,mBAAmB,YAAaJ,aAQ5CK,IACA,CAAE/R,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9D0Q,EAA+C1Q,EAAoB,KACnE2Q,EAA8C3Q,EAAoB,KAClE8R,EAAiD9R,EAAoB,KAK1FoC,EAAa,SAAU5B,EAASkH,GAChC,IAAIqK,EAAevR,EAAQiB,iBAAiB,kBAC5C,GAA4B,IAAxBsQ,EAAahuB,OAAjB,CAGA,IAAIiuB,EAAiB,CACjBpK,IAAKyF,EAA6DlG,EAAEU,IACpEO,KAAM,CACFqE,OAAQ,QACRhD,aAAa,EACbiD,OAAQ,KAQhB,GALIhF,GAAWA,EAAQU,OACnBV,EAAQU,KACJ/rB,OAAOkO,OAAO,GAAIynB,EAAe5J,KAAMV,EAAQU,OAEvDV,EAAUrrB,OAAOkO,OAAO,GAAIynB,EAAgBtK,GAChB,UAAxBA,EAAQU,KAAKqE,QACb,EAAGkE,EAA4DK,GAAGtJ,EAAQE,IAAM,+BAAgC,qBAChH,EAAG8I,EAA8D5H,GAAGpB,EAAQE,IAAM,8BAA+B,qBAAqBjtB,MAAK,WACvIo3B,EAAaxwB,SAAQ,SAAU0wB,GAC3B,IAAIA,EAAYzE,cAAcvK,UAAUwK,SAAS,yBAC7CwE,EAAYzE,cAAcvK,UAAUwK,SAAS,4BAG7CwE,EAAYlR,aAAa,aAA7B,CAGA,IAAIqH,GAAO,EAAG0J,EAAkE9I,GAAGiJ,EAAYrE,aAC/FqE,EAAY1L,aAAa,YAAa6B,GACtC,IACI6J,EAAY5M,UAAY6M,MAAMC,eAAe/J,EAAM,CAC/CgK,YAAqC,QAAxBH,EAAYI,QACzBC,OAAQ,SAGhB,MAAOl0B,GACH6zB,EAAY5M,UAAYjnB,EAAEm0B,QAC1BN,EAAY1N,UAAY,oCAE5B0N,EAAYjR,iBAAiB,QAAQ,SAAUgF,GAC3CA,EAAMwM,kBACNxM,EAAMyM,iBACN,IAAIC,EAAoB1M,EAAM2M,cAAcC,QAAQ,kBACpD5M,EAAM6M,cAAcC,QAAQ,YAAaJ,EAAkBrN,WAC3DW,EAAM6M,cAAcC,QAAQ,aAAcJ,EAAkB3R,aAAa,6BAKpF,GAA4B,YAAxB2G,EAAQU,KAAKqE,OAAsB,CACxC,IAAIsG,EAAe,SAAUC,GACzB,GAAmB,IAAfA,EAAIjvB,OAAR,CAGA,IAAIkvB,EAAO,EACPC,EAAOF,EAAIA,EAAIjvB,OAAS,GACxBhB,EAAO,WACP,IAAIlI,EAAKm4B,EAAIC,KACbp4B,IAAOq4B,EAAOr4B,IAAOA,EAAGkI,IAE5BA,MAECse,OAAO8R,UACR9R,OAAO8R,QAAU,CACbC,OAAQ,CACJC,MAAO,CAAEC,QAAS5L,EAAQE,IAAM,qBAEpC2L,QAAS,CACLC,SAAS,GAEbC,IAAK,CACD/G,OAAQhF,EAAQU,KAAKsE,WAKjC,EAAGgE,EAAkEgD,GAAGhM,EAAQE,IAAM,mCAAoC,wBAC1H,IAAI+L,EAAe,SAAU1B,EAAalvB,GACtC,IAAIqlB,GAAO,EAAG0J,EAAkE9I,GAAGiJ,EAAYrE,aAAa9H,OACxG8N,EAAcvS,OAAO8R,QAAQU,cAAc5B,GAC/C2B,EAAY7N,QAAkC,QAAxBkM,EAAYI,QAClChR,OAAO8R,QAAQW,eAAe1L,EAAMwL,GAAaj5B,MAAK,SAAUo5B,GAC5D9B,EAAY5M,UAAY,GACxB4M,EAAY1L,aAAa,YAAa6B,GACtC6J,EAAY+B,OAAOD,GACnB1S,OAAO8R,QAAQI,QAAQ9S,SAASwT,QAChC5S,OAAO8R,QAAQI,QAAQ9S,SAASyT,iBAChC,IAAIC,EAAmBJ,EAAK5S,cAAc,4BACtCgT,GAA4D,KAAxCA,EAAiBvG,YAAY9H,SACjDmM,EAAY5M,UAAY8O,EAAiBvG,YAAY9H,OACrDmM,EAAY1N,UAAY,uBAExBxhB,GACAA,QAIZse,OAAO8R,QAAQI,QAAQa,QAAQz5B,MAAK,WAiBhC,IAhBA,IAAI05B,EAAS,GACTC,EAAU,SAAU52B,GACpB,IAAIu0B,EAAcF,EAAar0B,GAC1Bu0B,EAAYzE,cAAcvK,UAAUwK,SAAS,wBAC7CwE,EAAYzE,cAAcvK,UAAUwK,SAAS,2BAC7CwE,EAAYlR,aAAa,gBAAgB,EAAG+Q,EAAkE9I,GAAGiJ,EAAYrE,aAAa9H,QAC3IuO,EAAO5wB,MAAK,SAAUV,GACdrF,IAAMq0B,EAAahuB,OAAS,EAC5B4vB,EAAa1B,GAGb0B,EAAa1B,EAAalvB,OAKjCrF,EAAI,EAAGA,EAAIq0B,EAAahuB,OAAQrG,IACrC42B,EAAQ52B,GAEZq1B,EAAasB,UAQnBE,IACA,CAAEzU,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAIyU,EAAc,SAAUhU,EAAS/Z,GACjC+Z,EAAQoR,mBAAmB,WAAY,mCAAwCnrB,EAAM,cACrF+Z,EAAQsO,UAER2F,EAAc,SAAUjU,EAAS/Z,GACjC+Z,EAAQoR,mBAAmB,WAAY,mCAAwCnrB,EAAM,cACrF+Z,EAAQsO,UAER4F,EAAe,SAAUlU,EAAS/Z,GAClC,IAAIkuB,EAAeluB,EAAIsR,MAAM,uHACzB6c,EAAanuB,EAAIsR,MAAM,+CACvB8c,EAAUpuB,EAAIsR,MAAM,qDACpB+c,EAAYruB,EAAIsR,MAAM,wCACtBgd,EAAgBtuB,EAAIsR,MAAM,2DAC1Bid,EAAmBvuB,EAAIsR,MAAM,2CAC7Bkd,EAAgBxuB,EAAIsR,MAAM,6CAC1Bmd,EAAWzuB,EAAIsR,MAAM,wCACrB4c,GAA2C,KAA3BA,EAAa,GAAG5wB,QAChCyc,EAAQoR,mBAAmB,WAAY,8DAAoE+C,EAAa,IACnHA,EAAa,GAAK,UAAYA,EAAa,GAAK,IAAO,eAC5DnU,EAAQsO,UAEH8F,GAAcA,EAAW,IAC9BpU,EAAQoR,mBAAmB,WAAY,+DAAoEgD,EAAW,GAAK,eAC3HpU,EAAQsO,UAEH+F,GAAWA,EAAQ,IACxBrU,EAAQoR,mBAAmB,WAAY,kFAAuFiD,EAAQ,GAAK,eAC3IrU,EAAQsO,UAEHgG,GAAaA,EAAU,IAC5BtU,EAAQoR,mBAAmB,WAAY,yDAA8DkD,EAAU,GAAK,8EACpHtU,EAAQsO,UAEHiG,GAAiBA,EAAc,IACpCvU,EAAQoR,mBAAmB,WAAY,wFAA6FuD,mBAAmBJ,EAAc,IAAM,eAC3KvU,EAAQsO,UAEHkG,GAAoBA,EAAiB,IAC1CxU,EAAQoR,mBAAmB,WAAY,gFAAqFoD,EAAiB,GAAK,eAClJxU,EAAQsO,UAEHmG,GAAiBA,EAAc,IACpCzU,EAAQoR,mBAAmB,WAAY,+EAAoFqD,EAAc,GAAK,eAC9IzU,EAAQsO,UAEHoG,GAAYA,EAAS,KAC1B1U,EAAQoR,mBAAmB,WAAY,4DAAiEsD,EAAS,GAAK,eACtH1U,EAAQsO,WAGZzM,EAAc,SAAU7B,GACnBA,GAGLA,EAAQiB,iBAAiB,KAAKlgB,SAAQ,SAAU6zB,GAC5C,IAAI3uB,EAAM2uB,EAASrU,aAAa,QAC3Bta,IAGDA,EAAIsR,MAAM,+BACVyc,EAAYY,EAAU3uB,GAEjBA,EAAIsR,MAAM,uBACf0c,EAAYW,EAAU3uB,GAGtBiuB,EAAaU,EAAU3uB,SAQ7B4uB,IACA,CAAEvV,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9DsN,EAA+CtN,EAAoB,KAGxFsC,EAAgB,SAAU9B,EAASoH,EAAKY,QAC5B,IAARZ,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAIyN,EAAkB9U,EAAQiB,iBAAiB,qBAChB,IAA3B6T,EAAgBvxB,SAGpB,EAAGupB,EAA8DxE,GAAGlB,EAAM,kCAAmC,uBAAuBjtB,MAAK,WACrI,IAAI46B,EAAS,CACTC,cAAe,aACfhG,UAAW,CACPiG,YAAY,EACZC,aAAa,GAEjBC,WAAY,aACZC,MAAO,CACHC,YAAa,GACbC,aAAc,IAElBC,cAAe,QACfC,SAAU,CACNC,UAAW,EACXC,eAAgB,EAChBC,eAAgB,EAChBT,aAAa,GAEjBU,aAAa,GAEH,SAAV5N,IACA+M,EAAO/M,MAAQ,OACf+M,EAAOc,eAAiB,CACpBC,mBAAoB,0CACpBC,sBAAuB,UACvBC,mBAAoB,UACpBC,sBAAuB,UACvBC,SAAU,UACVC,YAAa,UACbC,eAAgB,YAChBC,eAAgB,YAChBC,cAAe,kBACfC,mBAAoB,OACpBC,eAAgB,YAChBC,WAAY,OACZC,QAAS,UACTC,QAAS,4BACTC,UAAW,UACXC,WAAY,0CACZC,cAAe,4BACfC,aAAc,UACdC,gBAAiB,UACjBC,cAAe,qDACfC,iBAAkB,YAClBC,iBAAkB,YAClBC,oBAAqB,OACrBC,oBAAqB,6BACrBC,cAAe,UACfC,eAAgB,OAChBC,UAAW,UACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACX5C,WAAY,iCACZ6C,SAAU,OACVC,UAAW,YACXC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,WAAY,OACZC,eAAgB,YAChBC,UAAW,YACXC,cAAe,YACfC,QAAS,UACTC,kBAAmB,YACnBC,QAAS,UACTC,WAAY,UACZC,aAAc,UACdC,gBAAiB,4BACjBC,cAAe,UACfC,mBAAoB,8BACpBC,aAAc,UACdC,iBAAkB,UAClBC,UAAW,0CACXC,qBAAsB,+BACtBC,eAAgB,0CAChBC,mBAAoB,sDACpBC,gBAAiB,mDACjBC,iBAAkB,UAClBC,oBAAqB,QACrBC,YAAa,YACbC,gBAAiB,YACjBC,aAAc,0CACdC,gBAAiB,UACjBC,uBAAwB,UACxBC,cAAe,qDACfC,kBAAmB,qDACnBC,mBAAoB,YACpBC,qBAAsB,YACtBC,oBAAqB,6BACrBC,cAAe,yCACfC,kBAAmB,sDACnBC,UAAW,OACXC,WAAY,UACZC,eAAgB,YAGxBC,QAAQC,WAAW3F,GACnBD,EAAgB/zB,SAAQ,SAAUgH,GACc,SAAxCA,EAAKwY,aAAa,mBAA4D,KAA5BxY,EAAKqlB,YAAY9H,SAGvEmV,QAAQ5M,UAAKjzB,EAAWmN,GACxBA,EAAKge,aAAa,iBAAkB,iBAQ1C4U,IACA,CAAErb,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9DsN,EAA+CtN,EAAoB,KAGxFuC,EAAgB,SAAU/B,EAASoH,EAAKY,QACxB,IAAZhI,IAAsBA,EAAUC,eACxB,IAARmH,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAIuT,EAAkB5a,EAAQiB,iBAAiB,qBAC3C2Z,EAAgBr3B,OAAS,IACzB,EAAGupB,EAA8DxE,GAAGlB,EAAM,kCAAmC,uBAAuBjtB,MAAK,WACrIygC,EAAgB75B,SAAQ,SAAUnD,GAC9B,IAAIA,EAAEovB,cAAcvK,UAAUwK,SAAS,yBACnCrvB,EAAEovB,cAAcvK,UAAUwK,SAAS,0BADvC,CAIA,IAAIne,EAAOlR,EAAE2iB,aAAa,aAC1B,GAAKzR,EAGL,IACI,GAAyC,SAArClR,EAAE2iB,aAAa,kBACf,OAEJqN,QAAQC,KAAKjwB,EAAa,SAAVoqB,EAAmB,YAASptB,GAAWkzB,UAAU,CAC7D+M,OAAQ,CACJ,CACIv/B,KAAM,CAACoyB,KAAKC,MAAMxK,mBAAmBrU,KACrCgsB,kBAAmB,EACnBC,UAAW,CACPC,YAAa,EACbC,MAAO,WAEXpU,MAAO,CACHqU,gBAAiB,UACjBC,YAAa,UACbC,aAAc,EACdJ,YAAa,GACbC,MAAO,UACP9J,WAAY,GACZkK,OAAQ,EAAE,EAAG,GACbjf,QAAS,CAAC,EAAG,GACb/R,SAAU,eAEdixB,UAAW,CACPL,MAAO,UACPM,MAAO,GAEXC,MAAM,EACNC,OAAQ,SAAU1hC,EAAO2hC,GACrB,IAAI1R,EACJ,OAA2E,QAAtEA,EAAgB,OAAX0R,QAA8B,IAAXA,OAAoB,EAASA,EAAOpgC,YAAyB,IAAP0uB,OAAgB,EAASA,EAAG2R,UACpG,SAGA,WAGf57B,KAAM,SAGd67B,QAAS,CACLC,QAAS,OACTC,UAAW,eAGnBl+B,EAAEmoB,aAAa,iBAAkB,QAErC,MAAO/rB,GACH4D,EAAEmmB,UAAY,sBACdnmB,EAAEinB,UAAY,6BAA+B7qB,YAU3D+hC,IACA,CAAEzc,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIyc,EAA0Dxc,EAAoB,KAC9Eyc,EAA2Czc,EAAoB,KAGpFwC,EAAgB,SAAUka,EAAgBC,EAAeC,GACzD,IAAIC,EAAU,GACVC,EAAM,GAWV,GAVA9pB,MAAM+pB,KAAKL,EAAeP,UAAU56B,SAAQ,SAAUgH,EAAMmmB,GACxD,IAAI,EAAG8N,EAAoFQ,GAAGz0B,GAAO,CACjG,GAAIq0B,EAAQ,CACR,IAAIK,EAAY10B,EAAK6a,GAAGrH,YAAY,KACpCxT,EAAK6a,GAAK7a,EAAK6a,GAAGhT,UAAU,GAAkB,IAAf6sB,OAAmB7hC,EAAY6hC,GAAa,IAAMvO,EAErFoO,EAAIr5B,KAAK8E,EAAK6a,IACdyZ,GAAWt0B,EAAK+nB,UAAUlW,QAAQ,QAAS,QAGnC,KAAZyiB,EAEA,OADAF,EAActX,UAAY,GACnB,GAEX,IAAI6X,EAAczc,SAASI,cAAc,OACzC,GAAI+b,EACAA,EAAO7T,KAAKoU,QAAO,GACQ,YAAvBP,EAAOQ,aAA8BR,EAAOrxB,QAAQiV,QAAQiN,SAASiP,GAGzC,OAAvBE,EAAOQ,aAAyBR,EAAOrxB,QAAQiV,QAAQiN,SAASiP,GAIrEQ,EAAY7X,UAAYuX,EAAO7T,KAAKsU,eAAe,eAAiBR,GAHpEK,EAAY7X,UAAYuX,EAAO7T,KAAKuU,gBAAgB,eAAiBT,GAHrEK,EAAY7X,UAAYuX,EAAO7T,KAAKwU,cAAc,eAAiBV,GAQvED,EAAO7T,KAAKoU,OAAOP,EAAOlV,QAAQnc,QAAQ2c,SAAS+B,SAElD,CACD0S,EAAc1Z,UAAUC,IAAI,kBAC5B,IAAI6F,EAAOyU,KAAKC,MAChB1U,EAAKoU,QAAO,GACZD,EAAY7X,UAAY0D,EAAKsU,eAAe,eAAiBR,GAEjE,IAAIa,EAAkBR,EAAYS,kBAAkBlc,iBAAiB,6BAWrE,OAVAic,EAAgBn8B,SAAQ,SAAUgH,EAAMmmB,GAChCnmB,EAAKq1B,oBAA0D,OAApCr1B,EAAKq1B,mBAAmBvL,QACnD9pB,EAAK8c,UAAY,6FAA+F9c,EAAK8c,UAAY,UAGjI9c,EAAK8c,UAAY,oBAAsB9c,EAAK8c,UAAY,UAE5D9c,EAAKge,aAAa,iBAAkBuW,EAAIpO,OAE5CmO,EAAUK,EAAYS,kBAAkBtY,UACT,IAA3BqY,EAAgB35B,QAChB44B,EAActX,UAAY,GACnBwX,IAEXF,EAActX,UAAYwX,EACtBD,IACA,EAAGH,EAA2D3R,GAAG6R,EAAe,CAC5E/U,IAAKgV,EAAOlV,QAAQE,IACpBQ,KAAMwU,EAAOlV,QAAQnc,QAAQ6c,OAGrCuU,EAAcgB,kBAAkB3c,iBAAiB,SAAS,SAAUgF,GAChE,IAAI7D,EAAS6D,EAAM7D,OACnB,MAAOA,IAAWA,EAAO0b,YAAYlB,GAAgB,CACjD,GAAIxa,EAAOc,UAAUwK,SAAS,0BAA2B,CACjDtL,EAAOc,UAAUwK,SAAS,kCAC1BtL,EAAOc,UAAU6L,OAAO,iCACxB3M,EAAOqL,cAAcoQ,mBAAmBrX,aAAa,QAAS,mBAG9DpE,EAAOc,UAAUC,IAAI,iCACrBf,EAAOqL,cAAcoQ,mBAAmBrX,aAAa,QAAS,iBAElEP,EAAMyM,iBACNzM,EAAMwM,kBACN,MAEC,GAAIrQ,EAAOpB,aAAa,kBAAmB,CAC5CiF,EAAMyM,iBACNzM,EAAMwM,kBACN,IAAIsL,EAAYrd,SAAS8C,eAAepB,EAAOpB,aAAa,mBAC5D,IAAK+c,EACD,OAEJ,GAAIlB,EACA,GAA8B,SAA1BA,EAAOlV,QAAQzc,OAAmB,CAClC,IAAI8yB,EAAgBD,EAAUta,UAAYoZ,EAAOpc,QAAQgD,UACpDoZ,EAAOlV,QAAQxc,cAAcC,MAC9B4yB,GAAiBnB,EAAOoB,QAAQxd,QAAQyd,cAE5C5c,OAAOkK,SAASlK,OAAOmK,QAASuS,QAG5BnB,EAAOpc,QAAQgD,UAAYnC,OAAO6c,SAClC7c,OAAOkK,SAASlK,OAAOmK,QAASoR,EAAOpc,QAAQgD,WAE/CoZ,EAAOrxB,QAAQiV,QAAQiN,SAASiP,GAChCA,EAAelP,cAAc/J,UAAYqa,EAAUta,UAGnDkZ,EAAejZ,UAAYqa,EAAUta,eAK7CnC,OAAOkK,SAASlK,OAAOmK,QAASsS,EAAUta,WAE9C,MAEJrB,EAASA,EAAOqL,kBAGjBqP,KAMLsB,IACA,CAAEre,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9DsN,EAA+CtN,EAAoB,KAGxFyC,EAAiB,SAAUjC,EAASoH,QACpB,IAAZpH,IAAsBA,EAAUC,eACxB,IAARmH,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KAC3F,IAAIuW,EAAmB5d,EAAQiB,iBAAiB,sBAChB,IAA5B2c,EAAiBr6B,SAGrB,EAAGupB,EAA8DxE,GAAGlB,EAAM,4CAA6C,wBAAwBjtB,MAAK,WAChJyjC,EAAiB78B,SAAQ,SAAUnD,GAC/B,IAAIA,EAAEovB,cAAcvK,UAAUwK,SAAS,yBACnCrvB,EAAEovB,cAAcvK,UAAUwK,SAAS,0BADvC,CAIA,IAAIne,EAAOlR,EAAEwvB,YAAY9H,OACzB,GAAKxW,EAGL,IACIlR,EAAEinB,UAAY,oDAAuDgZ,gBAAgBC,OAAOhvB,GAAQ,KAExG,MAAO9U,GACH4D,EAAEmmB,UAAY,sBACdnmB,EAAEinB,UAAY,8BAAgC7qB,YASxD+jC,IACA,CAAEze,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI+D,EAAU,SAAU4D,GACpB,IAAIqB,EAAOyU,KAAKC,MAoBhB,OAnBA1U,EAAKyV,UAAU9W,EAAQ0B,QACvBL,EAAK0V,aAAa/W,EAAQyB,WAC1BJ,EAAK2V,iBAAiBhX,EAAQ6B,eAC9BR,EAAK4V,uCAAuCjX,EAAQ8B,iBACpDT,EAAK6V,aAAalX,EAAQuB,WAC1BF,EAAKoU,OAAOzV,EAAQuC,KACpBlB,EAAK8V,aAAanX,EAAQ4B,WAC1BP,EAAK+V,eAAepX,EAAQ2B,aAC5BN,EAAKgW,0BAA0BrX,EAAQwB,kBACvCH,EAAKiW,0BAA0BtX,EAAQoC,kBACvCf,EAAKkW,YAAYvX,EAAQsC,UACzBjB,EAAKmW,kCAAkCxX,EAAQqC,yBAC/ChB,EAAKoW,mBAAmBzX,EAAQmC,WAChCd,EAAKqW,YAAY1X,EAAQiC,UACzBZ,EAAKsW,cAAc3X,EAAQkC,YAC3Bb,EAAKuW,QAAQ5X,EAAQrjB,MACjBqjB,EAAQgC,eACRX,EAAKwW,oBAAoB7X,EAAQgC,eAE9BX,IAMLyW,IACA,CAAE1f,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI0f,EAAqCzf,EAAoB,KAE9E4L,EAAe,SAAU8T,EAAezb,EAAMuE,QACjC,IAATvE,IAAmBA,EAAO,cAChB,IAAVuE,IAAoBA,EAAQ,WAChC,IAAImX,EAAaD,EAActZ,wBAC3Bnb,EAAS,GACbwV,SAAS+D,KAAKoN,mBAAmB,YAAa,iCAA8C,SAAVpJ,EAAmB,gBAAkB,IAAM,oKAA+KiX,EAA+ChuB,EAAEwS,GAAM2b,KAAO,2KAA6KH,EAA+ChuB,EAAEwS,GAAMtb,MAAQ,8KAAiL+2B,EAAc3D,MAAQ,aAAe2D,EAAcz0B,OAAS,6BAA+B00B,EAAWtZ,KAAO,QAAUsZ,EAAWrc,IAAMrY,GAAU,gBAAoBy0B,EAAc3e,aAAa,OAAS,0BACj9BN,SAAS+D,KAAKjD,MAAMse,SAAW,SAE/B,IAAIne,EAAajB,SAASU,cAAc,mBACpC2e,EAAc,eAAiB/yB,KAAKzB,IAAI,EAAG+V,OAAO0e,WAAaL,EAAcxe,cAAgB,EAAI,OAASnU,KAAKzB,IAAI,EAAG+V,OAAOC,YAAcrW,EAASy0B,EAAcze,eAAiB,EAAI,SAC3L7jB,YAAW,WACPskB,EAAW6E,aAAa,QAAS,oDAAsDuZ,GACvF1iC,YAAW,WACPskB,EAAW8L,cAAcjC,UAAU7J,EAAW8L,cAAcwS,YAActe,EAAW8L,cAAcpM,aAAe,GAAIM,EAAW8L,cAAcyS,aAAeve,EAAW8L,cAAc0S,cAAgB,KACxM,QAGP,IAAIC,EAAa1f,SAASU,cAAc,oBACxCgf,EAAWnf,iBAAiB,SAAS,WACjC,IAAIof,EAAM9zB,SAAS6zB,EAAWpf,aAAa,YAAa,IAAM,GACzDqf,EAAM,GAAM,IAAM,GAAKV,EAAcxe,aAAeQ,EAAW8L,cAAc0S,aAC9Exe,EAAWH,MAAMkJ,UAAY,eAAiB1d,KAAKzB,IAAI,EAAG+V,OAAO0e,WAAaL,EAAcxe,cAAgB,EAAI,QAAUwe,EAAcxe,aAAe,EAAIwe,EAAcze,cAAgB,GAAK,kBAAoBmf,EAAM,OAGxN1e,EAAWH,MAAMkJ,UAAYqV,EAAc,YAAcM,EAAM,OAEnED,EAAW5Z,aAAa,WAAY6Z,EAAIz7B,YACxCvH,YAAW,WACPskB,EAAW8L,cAAcjC,UAAU7J,EAAW8L,cAAcwS,YAActe,EAAW8L,cAAcpM,aAAe,GAAIM,EAAW8L,cAAcyS,aAAeve,EAAW8L,cAAc0S,cAAgB,KACxM,UAOLG,IACA,CAAEvgB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIsN,EAA0CrN,EAAoB,KAC9D2Q,EAA8C3Q,EAAoB,KAGvF0L,EAAe,SAAU4U,EAAW1Y,QACxB,IAARA,IAAkBA,EAAMyF,EAA6DlG,EAAEU,KACtFwF,EAA6ElG,EAAEoF,WAAWsE,SAASyP,KACpGA,EAAY,UAEhB,IAAIxP,EAAkBrQ,SAAS8C,eAAe,mBAC1CwN,EAAOnJ,EAAM,gCAAkC0Y,EAAY,OAC1DxP,EAGIA,EAAgBC,OAASA,IAC9BD,EAAgBhC,UAChB,EAAG6B,EAA4DK,GAAGD,EAAM,qBAJxE,EAAGJ,EAA4DK,GAAGD,EAAM,qBAW1EwP,IACA,CAAEzgB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAIygB,EAA8CxgB,EAAoB,KAEvF2C,EAAkB,SAAU8d,EAAc7V,GAC1C,GAAK6V,GAAiB7V,EAAtB,CAGA,IAAI8V,EAAqBjgB,SAAS8C,eAAe,sBAC7Cod,EAAU/V,EAAO,IAAM6V,EAAe,OACrCC,EAGIA,EAAmB3P,OAAS4P,IACjCD,EAAmB5R,UACnB,EAAG0R,EAA4DxP,GAAG2P,EAAS,wBAJ3E,EAAGH,EAA4DxP,GAAG2P,EAAS,yBAW7EC,IACA,CAAE9gB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,EACX,EAAK,IAAM,IAElC,IAAI8gB,EAAgB,SAAUjW,EAAMxH,GAChC,GAAI3C,SAAS8C,eAAeH,GACxB,OAAO,EAEX,IAAI0d,EAAS,IAAIC,eACjBD,EAAOz2B,KAAK,MAAOugB,GAAM,GACzBkW,EAAOE,iBAAiB,SAAU,0GAClCF,EAAOG,KAAK,IACZ,IAAIC,EAAgBzgB,SAASI,cAAc,UAC3CqgB,EAAc3gC,KAAO,kBACrB2gC,EAAc5xB,KAAOwxB,EAAOK,aAC5BD,EAAc9d,GAAKA,EACnB3C,SAAS2gB,KAAKC,YAAYH,IAE1Bte,EAAY,SAAUgI,EAAMxH,GAC5B,OAAO,IAAI1oB,SAAQ,SAAUV,EAASC,GAClC,GAAIwmB,SAAS8C,eAAeH,GAGxB,OADAppB,KACO,EAEX,IAAIknC,EAAgBzgB,SAASI,cAAc,UAC3CqgB,EAAcpgB,IAAM8J,EACpBsW,EAAcz8B,OAAQ,EAEtBgc,SAAS2gB,KAAKC,YAAYH,GAC1BA,EAAcI,OAAS,WACnB,GAAI7gB,SAAS8C,eAAeH,GAIxB,OAFA8d,EAAcpS,SACd90B,KACO,EAEXknC,EAAc9d,GAAKA,EACnBppB,UAQNunC,IACA,CAAEzhB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAIyhB,EAAW,SAAU/6B,EAAK2c,GAC1B,IAAK3C,SAAS8C,eAAeH,GAAK,CAC9B,IAAIqe,EAAehhB,SAASI,cAAc,QAC1C4gB,EAAare,GAAKA,EAClBqe,EAAaC,IAAM,aACnBD,EAAalhC,KAAO,WACpBkhC,EAAa1Q,KAAOtqB,EACpBga,SAASkhB,qBAAqB,QAAQ,GAAGN,YAAYI,MAOvDG,IACA,CAAE9hB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI8hB,EAAc,SAAUvyB,GAExB,OAAOA,EAAK8K,QAAQ,UAAW,OAM7B0nB,IACA,CAAEhiB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,IAEnC,IAAIgiB,EAAW,WACX,OAAOC,UAAUC,UAAU33B,QAAQ,WAAa,IAAgD,IAA3C03B,UAAUC,UAAU33B,QAAQ,WAEjF43B,EAAY,WACZ,OAAOF,UAAUC,UAAUE,cAAc73B,QAAQ,YAAc,GAE/D83B,EAAqB,WACrB,IACI,MAA+B,qBAAjBC,aAElB,MAAOjkC,GACH,OAAO,IAIXkkC,EAAe,WACf,OAAIN,UAAUC,UAAU33B,QAAQ,WAAa,EAClC,aAGA,SAIXi4B,EAAS,SAAUvc,GACnB,OAAIgc,UAAUQ,SAASC,cAAcn4B,QAAQ,QAAU,KAE/C0b,EAAM0c,SAAY1c,EAAM2c,WAMvB3c,EAAM0c,UAAW1c,EAAM2c,UAOhCC,EAAkB,SAAUC,GAuB5B,MAtBI,MAAMC,KAAKd,UAAUQ,WAAoC,WAAvBR,UAAUQ,SACxCK,EAAOv4B,QAAQ,MAAQ,GAAK43B,MAE5BW,EAASA,EAAOzoB,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAAKA,QAAQ,IAAK,OAKjEyoB,EADAA,EAAOE,WAAW,KACTF,EAAOzoB,QAAQ,IAAK,MAExByoB,EAAOE,WAAW,MAAgC,MAAxBF,EAAOxf,OAAO,EAAG,GACvCwf,EAAOzoB,QAAQ,IAAK,MAGpByoB,EAAOzoB,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAExDyoB,EAASA,EAAOzoB,QAAQ,IAAK,QAAQA,QAAQ,IAAK,SAC7CA,QAAQ,IAAK,OACdyoB,EAAOv4B,QAAQ,UAAY,IAC3Bu4B,EAASA,EAAOzoB,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAAKA,QAAQ,IAAK,OAGlEyoB,GAEPG,EAAW,WACX,MAAO,SAASF,KAAKd,UAAUC,YAAc,aAAaa,KAAKd,UAAUiB,UAMvEC,IACA,CAAEpjB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,IAGd,IAAIojB,EAAqDnjB,EAAoB,KAE9FojB,EAA2B,SAAU5iB,EAAS+D,GAC9C,IAAIqO,EAAUyQ,EAAsB7iB,EAAS+D,GACzC+e,GAAgB,EAChBC,GAAU,EACd,MAAO3Q,IAAYA,EAAQ3P,UAAUwK,SAAS,kBAAoB8V,EAC9DD,EAAgBD,EAAsBzQ,EAAQpF,cAAejJ,GACzD+e,EACA1Q,EAAU0Q,EAGVC,GAAU,EAGlB,OAAO3Q,IAAW,GAiBlB4Q,EAAqB,SAAUhjB,EAASijB,GACxC,IAAI7Q,GAAU,EAAGuQ,EAA0EO,GAAGljB,EAASijB,GACnGH,GAAgB,EAChBC,GAAU,EACd,MAAO3Q,IAAYA,EAAQ3P,UAAUwK,SAAS,kBAAoB8V,EAC9DD,GAAgB,EAAGH,EAA0EO,GAAG9Q,EAAQpF,cAAeiW,GACnHH,EACA1Q,EAAU0Q,EAGVC,GAAU,EAGlB,OAAO3Q,IAAW,GAElB+Q,EAAa,SAAUnjB,GACvB,IAAIojB,EAAeJ,EAAmBhjB,EAAS,MAC3CqjB,EAAeL,EAAmBhjB,EAAS,MAC3CsjB,EAAiBF,EAIrB,OAHIC,KAAkBD,GAAiBA,GAAgBC,EAAapW,SAASmW,MACzEE,EAAiBD,GAEdC,GAEPC,EAAwB,SAAUvjB,EAASwjB,EAAMzpC,GACjD,IAAKimB,EACD,OAAO,EAEc,IAArBA,EAAQyjB,WACRzjB,EAAUA,EAAQgN,eAEtB,IAAIpvB,EAAIoiB,EACJ0jB,GAAY,EAChB,MAAO9lC,IAAM8lC,IAAc9lC,EAAE6kB,UAAUwK,SAAS,gBACxCrvB,EAAE2iB,aAAaijB,KAAUzpC,EACzB2pC,GAAY,EAGZ9lC,EAAIA,EAAEovB,cAGd,OAAO0W,GAAa9lC,GAEpB+lC,EAAkB,SAAU3jB,GAC5B,IAAKA,EACD,OAAO,EAEc,IAArBA,EAAQyjB,WACRzjB,EAAUA,EAAQgN,eAEtB,IAAIpvB,EAAIoiB,EACJ0jB,GAAY,EACZE,EAAeL,EAAsBvjB,EAAS,aAAc,KAChE,GAAI4jB,EACA,OAAOA,EAEX,MAAOhmC,IAAM8lC,IAAc9lC,EAAE6kB,UAAUwK,SAAS,gBAC1B,OAAdrvB,EAAEi0B,SACY,OAAdj0B,EAAEi0B,SACY,OAAdj0B,EAAEi0B,SACY,OAAdj0B,EAAEi0B,SACY,OAAdj0B,EAAEi0B,SACY,OAAdj0B,EAAEi0B,SACY,MAAdj0B,EAAEi0B,SACY,eAAdj0B,EAAEi0B,SACY,OAAdj0B,EAAEi0B,SACY,OAAdj0B,EAAEi0B,QACF6R,GAAY,EAGZ9lC,EAAIA,EAAEovB,cAGd,OAAO0W,GAAa9lC,GAEpBimC,EAAuB,SAAU7jB,EAASijB,GAC1C,IAAKjjB,EACD,OAAO,EAEc,IAArBA,EAAQyjB,WACRzjB,EAAUA,EAAQgN,eAEtB,IAAIpvB,EAAIoiB,EACJ0jB,GAAY,EAChB,MAAO9lC,IAAM8lC,IAAc9lC,EAAE6kB,UAAUwK,SAAS,gBACxCrvB,EAAEqlC,WAAaA,EACfS,GAAY,EAGZ9lC,EAAIA,EAAEovB,cAGd,OAAO0W,GAAa9lC,GAEpBilC,EAAwB,SAAU7iB,EAAS+D,GAC3C,IAAK/D,EACD,OAAO,EAEc,IAArBA,EAAQyjB,WACRzjB,EAAUA,EAAQgN,eAEtB,IAAIpvB,EAAIoiB,EACJ0jB,GAAY,EAChB,MAAO9lC,IAAM8lC,IAAc9lC,EAAE6kB,UAAUwK,SAAS,gBACxCrvB,EAAE6kB,UAAUwK,SAASlJ,GACrB2f,GAAY,EAGZ9lC,EAAIA,EAAEovB,cAGd,OAAO0W,GAAa9lC,GAEpBkmC,EAAc,SAAUvQ,GACxB,MAAOA,GAAQA,EAAKwQ,UAChBxQ,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAMLyQ,IACA,CAAE1kB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,EACX,EAAK,IAAM,IAGlC,IAAI0kB,EAAkB,SAAUjkB,EAASijB,GACrC,IAAKjjB,EACD,OAAO,EAEc,IAArBA,EAAQyjB,WACRzjB,EAAUA,EAAQgN,eAEtB,IAAIpvB,EAAIoiB,EACJ0jB,GAAY,EAChB,MAAO9lC,IAAM8lC,IAAc9lC,EAAE6kB,UAAUwK,SAAS,gBACP,IAAjCrvB,EAAEqlC,SAASn5B,QAAQm5B,GACnBS,GAAY,EAGZ9lC,EAAIA,EAAEovB,cAGd,OAAO0W,GAAa9lC,GAEpBsmC,EAAuB,SAAUlkB,GACjC,IAAI8K,EAAiBmZ,EAAgBjkB,EAAS,KAC9C,SAAI8K,GAAoD,IAAlCA,EAAe+G,QAAQtuB,QAA2C,OAA3BunB,EAAe+G,UACjE/G,IAQTqZ,IACA,CAAE7kB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI+C,EAAQ,WAER,IADA,IAAI4E,EAAU,GACLkd,EAAK,EAAGA,EAAK3pC,UAAU8I,OAAQ6gC,IACpCld,EAAQkd,GAAM3pC,UAAU2pC,GAe5B,IAbA,IAAIziB,EAAS,GACT0iB,EAAS,SAAUxlC,GACnB,IAAK,IAAIylC,KAAQzlC,EACTA,EAAIV,eAAemmC,KAC+B,oBAA9CzoC,OAAOoC,UAAUkG,SAASnE,KAAKnB,EAAIylC,IACnC3iB,EAAO2iB,GAAQhiB,EAAMX,EAAO2iB,GAAOzlC,EAAIylC,IAGvC3iB,EAAO2iB,GAAQzlC,EAAIylC,KAK1BpnC,EAAI,EAAGA,EAAIgqB,EAAQ3jB,OAAQrG,IAChCmnC,EAAOnd,EAAQhqB,IAEnB,OAAOykB,IAML4iB,IACA,CAAEjlB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBvM,EAAEsM,EAAqB,CACzC,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,IAEd,IAAIsN,EAA0CrN,EAAoB,KAC9DglB,EAA8ChlB,EAAoB,KAClEilB,EAA2CjlB,EAAoB,KAIpFklB,EAAiB,SAAUtI,GAC3B,IAAIuI,EACA3kB,EAAUoc,EAAOA,EAAOQ,aAAa5c,QACzC,OAAIqF,eAAeuf,WAAa,IAC5BD,EAAQtf,eAAeI,WAAW,GAC9BzF,EAAQqd,YAAYsH,EAAME,iBAAmB7kB,EAAQiN,SAAS0X,EAAME,iBAC7DF,EAGXvI,EAAOA,EAAOQ,aAAa+H,MACpBvI,EAAOA,EAAOQ,aAAa+H,OAEtC3kB,EAAQ8kB,QACRH,EAAQ3kB,EAAQ+kB,cAAcC,cAC9BL,EAAMM,SAASjlB,EAAS,GACxB2kB,EAAMO,UAAS,GACRP,IAEPQ,EAAoB,SAAUC,GAC9B,IAAIT,EAAQ9jB,OAAOwE,eAAeI,WAAW,GAC7C,IAAK2f,EAAOnY,SAAS0X,EAAME,mBAAoB,EAAGJ,EAAsE5Z,IAAI8Z,EAAME,eAAgB,sBAC9I,MAAO,CACHhf,KAAM,EACN/C,IAAK,GAGb,IACIuiB,EADAC,EAAaF,EAAOpY,cAAcpH,wBAEtC,GAAsC,IAAlC+e,EAAMY,iBAAiBhiC,OACvB,GAAsC,IAAlCohC,EAAME,eAAepB,SAAgB,CAErC,IAAI+B,EAAWb,EAAME,eAAe7X,cACpC,KAAIwY,GAAYA,EAASD,iBAAiBhiC,OAAS,GAI/C,MAAO,CACHsiB,KAAM,EACN/C,IAAK,GALTuiB,EAAaG,EAASD,iBAAiB,OAS1C,CACD,IAAI5J,EAAWgJ,EAAME,eAAelJ,SACpC,GAAIA,EAASgJ,EAAMc,cACf9J,EAASgJ,EAAMc,aAAaF,iBAAiBhiC,OAAS,EAEtD8hC,EAAa1J,EAASgJ,EAAMc,aAAaF,iBAAiB,QAEzD,GAAIZ,EAAME,eAAea,WAAWniC,OAAS,EAAG,CAEjD,IAAImiB,EAAaif,EAAMjf,aACvBif,EAAMgB,WAAWhB,EAAME,eAAea,WAAWn5B,KAAKzB,IAAI,EAAG65B,EAAMc,YAAc,KACjFJ,EAAaV,EAAMY,iBAAiB,GACpCZ,EAAMiB,OAAOlgB,EAAWmgB,aAAcngB,EAAWogB,WACjDnB,EAAMM,SAASvf,EAAWmf,eAAgBnf,EAAW+f,kBAGrDJ,EAAaV,EAAME,eAAeU,iBAAiB,GAEvD,IAAKF,EAAY,CACb,IAAIrY,EAAgB2X,EAAME,eAAea,WAAWf,EAAMc,aAC1D,OAAQzY,EAAcuY,gBACjBvY,EAAcuY,gBAA4D,IAA1CvY,EAAcuY,iBAAiBhiC,OAChEypB,EAAgBA,EAAcA,cAElCqY,EAAarY,EAAcuY,iBAAiB,SAKpDF,EAAaV,EAAMY,iBAAiB,GAExC,MAAO,CACH1f,KAAMwf,EAAWxf,KAAOyf,EAAWzf,KACnC/C,IAAKuiB,EAAWviB,IAAMwiB,EAAWxiB,MAGrCijB,EAAiB,SAAUX,EAAQT,GACnC,IAAKA,EAAO,CACR,GAAkC,IAA9Btf,eAAeuf,WACf,OAAO,EAGPD,EAAQtf,eAAeI,WAAW,GAG1C,IAAIugB,EAAYrB,EAAMsB,wBACtB,OAAOb,EAAO/H,YAAY2I,IAAcZ,EAAOnY,SAAS+Y,IAExDE,EAAoB,SAAUvB,GAC9B,IAAIphB,EAAY1C,OAAOwE,eACvB9B,EAAU4iB,kBACV5iB,EAAU6iB,SAASzB,IAEnB0B,EAAoB,SAAUC,EAAeC,EAAe5B,GAC5D,IAAIt6B,EAAW,CACXm8B,IAAK,EACL3qB,MAAO,GAEX,IAAK8oB,EAAO,CACR,GAAkC,IAA9Btf,eAAeuf,WACf,OAAOv6B,EAEXs6B,EAAQ9jB,OAAOwE,eAAeI,WAAW,GAE7C,GAAIsgB,EAAeQ,EAAe5B,GAAQ,CACtC,IAAI8B,EAAoB9B,EAAMjf,aAC1B4gB,EAAcZ,WAAW,IAAMY,EAAcZ,WAAW,GAAGA,WAAW,GACtEe,EAAkBxB,SAASqB,EAAcZ,WAAW,GAAGA,WAAW,GAAI,GAGtEe,EAAkBC,mBAAmBJ,GAEzCG,EAAkBb,OAAOjB,EAAME,eAAgBF,EAAMc,aACrDp7B,EAASwR,MAAQ4qB,EAAkBtiC,WAAWZ,OAC9C8G,EAASm8B,IAAMn8B,EAASwR,MAAQ8oB,EAAMxgC,WAAWZ,OAErD,OAAO8G,GAEPs8B,EAAyB,SAAU9qB,EAAO2qB,EAAKpB,GAC/C,IAAIwB,EAAY,EACZryB,EAAO,EACPsyB,EAAQzB,EAAOM,WAAWnxB,GAC1BuyB,GAAa,EACbliC,GAAO,EACXiX,EAAQtP,KAAKzB,IAAI,EAAG+Q,GACpB2qB,EAAMj6B,KAAKzB,IAAI,EAAG07B,GAClB,IAAI7B,EAAQS,EAAOL,cAAcC,cACjCL,EAAMM,SAAS4B,GAASzB,EAAQ,GAChCT,EAAMO,UAAS,GACf,OAAQtgC,GAAQiiC,EAAO,CACnB,IAAIE,EAAgBH,EAAYC,EAAMzZ,YAAY7pB,OAClD,IAAKujC,GAAcjrB,GAAS+qB,GAAa/qB,GAASkrB,IAChC,IAAVlrB,EACA8oB,EAAMM,SAAS4B,EAAO,GAGe,IAAjCA,EAAMnB,WAAW,GAAGjC,SACpBkB,EAAMM,SAAS4B,EAAMnB,WAAW,GAAI7pB,EAAQ+qB,GAEvCC,EAAMG,YACXrC,EAAMsC,eAAeJ,EAAMG,aAG3BrC,EAAMuC,cAAcL,GAG5BC,GAAa,EACTjrB,IAAU2qB,GAAK,CACf5hC,GAAO,EACP,MAGJkiC,GAAcN,GAAOI,GAAaJ,GAAOO,IAC7B,IAARP,EACA7B,EAAMiB,OAAOiB,EAAO,GAGiB,IAAjCA,EAAMnB,WAAW,GAAGjC,SACpBkB,EAAMiB,OAAOiB,EAAMnB,WAAW,GAAIc,EAAMI,GAEnCC,EAAMG,YACXrC,EAAMwC,aAAaN,EAAMG,aAGzBrC,EAAMyC,YAAYP,GAG1BjiC,GAAO,GAEXgiC,EAAYG,EACZF,EAAQzB,EAAOM,aAAanxB,GAMhC,OAJK3P,GAAQwgC,EAAOM,WAAWnxB,EAAO,IAClCowB,EAAMsC,eAAe7B,EAAOM,WAAWnxB,EAAO,IAElD2xB,EAAkBvB,GACXA,GAEP0C,EAAgB,SAAUrnB,EAAS2kB,GACnC,IAAI2C,EAAatnB,EAAQW,cAAc,OACvC,GAAK2mB,EAAL,CAGA,GAAKA,EAAWC,uBAqBZ,GAAID,EAAWC,uBAAuBC,WAAWF,EAAWG,iBAAkB,CAC1E,GAAIH,EAAWC,uBAAuBxD,UAalC,OAXAY,EAAMsC,eAAeK,GACrB3C,EAAMO,UAAS,GACfgB,EAAkBvB,KAEd,EAAGH,EAA4DkD,OAAwD,OAA9CJ,EAAWC,uBAAuB1V,SAC7D,WAA9CyV,EAAWC,uBAAuB1V,SACY,MAA9CyV,EAAWC,uBAAuB1V,UAClC8S,EAAMgD,WAAW1nB,SAAS2nB,eAAe/a,EAA8DlG,EAAE+E,OACzGiZ,EAAMO,UAAS,SAEnBoC,EAAWhZ,SAKXqW,EAAMuC,cAAcI,EAAWC,6BAKnC5C,EAAMM,SAASqC,EAAWG,gBAAiBH,EAAWG,gBAAgBra,YAAY7pB,aA3ClF+jC,EAAWG,gBAEX9C,EAAMM,SAASqC,EAAWG,gBAAiBH,EAAWG,gBAAgBra,YAAY7pB,QAE7E+jC,EAAWN,YACwB,IAApCM,EAAWN,YAAYvD,SAEvBkB,EAAMM,SAASqC,EAAWN,YAAa,GAIvCrC,EAAMsC,eAAeK,EAAWN,aAKpCrC,EAAMM,SAASqC,EAAWta,cAAe,GA8BjD2X,EAAMO,UAAS,GACfoC,EAAWhZ,SACX4X,EAAkBvB,KAElBkD,EAAa,SAAUtuB,EAAM6iB,GAE7B,IAAIM,EAAczc,SAASI,cAAc,OACzCqc,EAAY7X,UAAYtL,EACxB,IAAIuuB,EAAmBpL,EAAYzb,iBAAiB,KACpB,IAA5B6mB,EAAiBvkC,SAAiBukC,EAAiB,GAAGL,kBAAoBK,EAAiB,GAAGd,aAC9F5K,EAAOA,EAAOQ,aAAa5c,QAAQ2b,SAASp4B,OAAS,GAA+C,MAA1Cm5B,EAAYS,kBAAkBtL,UACxFtY,EAAOuuB,EAAiB,GAAGjjB,UAAUS,QAEzC,IAAIyiB,EAAe9nB,SAASI,cAAc,OAC1C0nB,EAAaljB,UAAYtL,EACzB,IAAIorB,EAAQD,EAAetI,GAK3B,GAJyB,KAArBuI,EAAMxgC,aACNi4B,EAAOA,EAAOQ,aAAaoL,cAAe,EAC1C/nB,SAASgoB,YAAY,UAAU,EAAO,KAEtCF,EAAa5K,mBACiD,MAA9D4K,EAAa5K,kBAAkB5c,aAAa,cAAuB,CAEnEwnB,EAAaG,iBAAiB9W,mBAAmB,YAAa,SAC9D,IAAIwS,GAAe,EAAGa,EAAgE0D,IAAIxD,EAAME,gBAC3FjB,EAIDA,EAAaxS,mBAAmB,WAAY2W,EAAaljB,WAHzDuX,EAAOA,EAAOQ,aAAa5c,QAAQoR,mBAAmB,YAAa2W,EAAaljB,WAKpFwiB,EAAcjL,EAAOA,EAAOQ,aAAa5c,QAAS2kB,OAEjD,CACD,IAAIyD,EAAgBnoB,SAASI,cAAc,YAC3C+nB,EAAcvjB,UAAYtL,EAC1BorB,EAAMgD,WAAWS,EAAc5+B,QAAQ6+B,WAAU,IACjD1D,EAAMO,UAAS,GACfgB,EAAkBvB,OAUZ2D,EAA2B,GAG/B,SAAS9oB,EAAoB+oB,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqB3tC,IAAjB4tC,EACH,OAAOA,EAAazqC,QAGrB,IAAI4H,EAAS2iC,EAAyBC,GAAY,CAGjDxqC,QAAS,IAOV,OAHAgQ,EAAoBw6B,GAAU5iC,EAAQA,EAAO5H,QAASyhB,GAG/C7Z,EAAO5H,QAKf,MAECyhB,EAAoBvM,EAAI,CAAClV,EAAS0qC,KACjC,IAAI,IAAI7uC,KAAO6uC,EACXjpB,EAAoBkpB,EAAED,EAAY7uC,KAAS4lB,EAAoBkpB,EAAE3qC,EAASnE,IAC5EiC,OAAOiD,eAAef,EAASnE,EAAK,CAAEmF,YAAY,EAAM4pC,IAAKF,EAAW7uC,OAL5E,GAYA,MACC4lB,EAAoBkpB,EAAI,CAAC7pC,EAAKylC,IAAUzoC,OAAOoC,UAAUE,eAAe6B,KAAKnB,EAAKylC,IADnF,GAKV,IAAI/kB,EAAsB,GA0mUhB,MAxmUV,MACA,aAGAC,EAAoBvM,EAAEsM,EAAqB,CACzC,QAAW,IAAM,KAIRC,EAAoB,KAA/B,IAy7LIopB,EAv7LA5nC,EAASwe,EAAoB,KAE7B0C,EAAY1C,EAAoB,KAEhC6hB,EAAc7hB,EAAoB,KAGlCqpB,EAAc,SAAUzM,GACxB,MAA2B,OAAvBA,EAAOQ,aACA,EAAGyE,EAA6B7Y,IAAI4T,EAAO0M,GAAG9oB,QAAQoN,YAAc,MAAMxT,QAAQ,QAAS,OAEtE,YAAvBwiB,EAAOQ,YACLR,EAAO7T,KAAKwgB,aAAa3M,EAAO4M,QAAQhpB,QAAQ6E,WAE3B,OAAvBuX,EAAOQ,YACLR,EAAO7T,KAAK0gB,eAAe7M,EAAO8M,GAAGlpB,QAAQ6E,WAEjD,IAIPzC,EAAY5C,EAAoB,KAIhC2pB,EAA0B,WAC1B,SAASA,IACL5uC,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,kBACzBxpB,KAAKylB,QAAQ6E,UAAY,2EAoE7B,OAlEAskB,EAASlrC,UAAUmrC,aAAe,SAAUhN,GACxC,IAAIiN,EAAQ9uC,KACkC,UAA1C6hC,EAAOkN,SAAStpB,QAAQe,MAAMwE,UAGlC,EAAGnD,EAAyBkG,GAAG8T,EAAOlV,QAAQE,IAAM,kCAAmC,uBAAuBjtB,MAAK,WAC1GkvC,EAAME,WACPF,EAAME,SAAW3b,QAAQC,KAAKuO,EAAOkN,SAAStpB,QAAQkoB,mBAE1D,IACImB,EAAMrpB,QAAQkoB,iBAAiBnnB,MAAMwE,QAAU,QAC/C8jB,EAAMrpB,QAAQmd,kBAAkBtY,UAAY,GAC5CwkB,EAAME,SAASzb,UAAU,CACrB+M,OAAQ,CACJ,CACIv/B,KAAMoyB,KAAKC,MAAMyO,EAAO7T,KAAKihB,kBAAkBX,EAAYzM,KAC3DtB,kBAAmB,EACnBjU,MAAO,CACH4iB,MAAO,OACPvO,gBAAiB,wBACjBE,aAAc,EACdH,MAAO,UACPjD,SAAU,GACV7G,WAAY,GACZkK,OAAQ,CAAC,EAAG,IACZjf,QAAS,CAAC,EAAG,EAAG,EAAG,GACnB/R,SAAU,MACVq/B,cAAe,UAEnBpO,UAAW,CACPL,MAAO,UACPl7B,KAAM,QACNw7B,MAAO,GAEXoO,OAAQ,WACRnO,MAAM,EACNz7B,KAAM,SAGd6pC,QAAS,CACLjhC,OAAQ,GACRkhC,SAAU,CACNC,UAAW,CACP7O,MAAO,YAGf8O,QAAS,CACLC,QAAS,CACLC,MAAM,GAEVC,YAAa,CACTD,MAAM,IAGdE,MAAO,GACPF,MAAM,KAGdZ,EAAME,SAASa,SAEnB,MAAOxsC,GACHyrC,EAAMrpB,QAAQkoB,iBAAiBnnB,MAAMwE,QAAU,OAC/C8jB,EAAMrpB,QAAQmd,kBAAkBtY,UAAYjnB,OAIjDurC,EAxEkB,GA6EzBkB,EAAgB7qB,EAAoB,KAIpC8qB,EAAuB,SAAU9M,EAAS+M,GAC1CA,EAAMxpC,SAAQ,SAAUlG,GACpB,GAAK2iC,EAAQ3iC,GAAb,CAGA,IAAI2vC,EAAchN,EAAQ3iC,GAAM8gC,SAAS,GACrC6O,GAAeA,EAAY/nB,UAAUwK,SAAS,yBAC9Cud,EAAY/nB,UAAU6L,OAAO,6BAIrCmc,EAAoB,SAAUjN,EAAS+M,GACvCA,EAAMxpC,SAAQ,SAAUlG,GACpB,GAAK2iC,EAAQ3iC,GAAb,CAGA,IAAI2vC,EAAchN,EAAQ3iC,GAAM8gC,SAAS,GACrC6O,IAAgBA,EAAY/nB,UAAUwK,SAAS,yBAC/Cud,EAAY/nB,UAAUC,IAAI,6BAIlCgoB,EAAgB,SAAUlN,EAAS+M,GACnCA,EAAMxpC,SAAQ,SAAUlG,GACpB,GAAK2iC,EAAQ3iC,GAAb,CAGA,IAAI2vC,EAAchN,EAAQ3iC,GAAM8gC,SAAS,GACrC6O,GAAeA,EAAY/nB,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAC7F2e,EAAY/nB,UAAU6L,OAAOpM,EAA6CyE,EAAEkF,0BAIpF8e,EAAiB,SAAUnN,EAAS+M,GACpCA,EAAMxpC,SAAQ,SAAUlG,GACpB,GAAK2iC,EAAQ3iC,GAAb,CAGA,IAAI2vC,EAAchN,EAAQ3iC,GAAM8gC,SAAS,GACrC6O,IAAgBA,EAAY/nB,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAC9F2e,EAAY/nB,UAAUC,IAAIR,EAA6CyE,EAAEkF,0BAIjF+e,EAAc,SAAUpN,EAAS+M,GACjCA,EAAMxpC,SAAQ,SAAUlG,GACf2iC,EAAQ3iC,IAGT2iC,EAAQ3iC,KACR2iC,EAAQ3iC,GAAMkmB,MAAMwE,QAAU,YAItCslB,EAAc,SAAUrN,EAAS+M,GACjCA,EAAMxpC,SAAQ,SAAUlG,GACf2iC,EAAQ3iC,IAGT2iC,EAAQ3iC,KACR2iC,EAAQ3iC,GAAMkmB,MAAMwE,QAAU,aAKtCulB,EAAY,SAAU1O,EAAQ2O,EAAQC,GAClCD,EAAO1a,SAAS,gBAChB+L,EAAOoB,QAAQxd,QAAQiB,iBAAiB,gBAAgBlgB,SAAQ,SAAUgH,GAClEijC,GAAiBjjC,EAAKs1B,YAAY2N,KAGtCjjC,EAAKgZ,MAAMwE,QAAU,WAErB6W,EAAOoB,QAAQyN,SAASC,QACxB9O,EAAOoB,QAAQyN,SAASC,MAAMhD,iBAAiBnnB,MAAMwE,QAAU,SAGnEwlB,EAAO1a,SAAS,UAChB+L,EAAO+O,KAAKnrB,QAAQe,MAAMwE,QAAU,QAEpC6W,EAAO4M,QAAQoC,SAAWL,EAAO1a,SAAS,aAC1C+L,EAAO4M,QAAQoC,QAAQrqB,MAAMwE,QAAU,SAG3C8lB,EAAgB,SAAUjP,EAAQkP,EAAcC,EAAWC,GAC3DD,EAAU/qB,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3EA,EAAMyM,iBACNzM,EAAMwM,kBACFuZ,EAAU9oB,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,uBAGhFuQ,EAAOoB,QAAQxd,QAAQiB,iBAAiB,yBAAyBlgB,SAAQ,SAAUgH,GAC/EA,EAAK0a,UAAU6L,OAAO,2BAES,UAA/Bgd,EAAavqB,MAAMwE,QACnB+lB,EAAavqB,MAAMwE,QAAU,QAG7BulB,EAAU1O,EAAQ,CAAC,aAAc,OAAQ,WAAYmP,EAAUve,cAAcA,eACxEue,EAAU9oB,UAAUwK,SAAS,sBAC9Bse,EAAU9oB,UAAUC,IAAI,wBAE5B4oB,EAAavqB,MAAMwE,QAAU,QACzB6W,EAAOoB,QAAQxd,QAAQ4F,wBAAwBukB,MAAQoB,EAAU3lB,wBAAwBukB,MAAQ,IACjGmB,EAAa7oB,UAAUC,IAAI,sBAG3B4oB,EAAa7oB,UAAU6L,OAAO,4BAO1CjM,EAAa7C,EAAoB,KAEjC0kB,EAAuB1kB,EAAoB,KAE3CksB,EAAM,SAAU1qC,EAAQwI,EAASzJ,EAAM4rC,GACnCA,GAEA3b,QAAQ0b,IAAI1qC,EAAS,MAAQjB,EAAO,KAAOyJ,IAK/CiW,EAAYD,EAAoB,KAEhCE,EAAcF,EAAoB,KAElCG,EAAaH,EAAoB,IAEjCI,EAAkBJ,EAAoB,KAEtCK,EAAiBL,EAAoB,KAErCM,EAAkBN,EAAoB,IAEtCoC,EAAapC,EAAoB,KAEjCsC,EAAgBtC,EAAoB,KAEpCuC,EAAgBvC,EAAoB,KAEpCyC,EAAiBzC,EAAoB,KAYrCosB,EAAmB,SAAUryB,EAAMzK,EAAM/O,QAC5B,IAATA,IAAmBA,EAAO,MAC9B,IAAI28B,EAAczc,SAASI,cAAc,OACzCqc,EAAY7X,UAAYtL,EACxB,IAAIsyB,GAAS,EACyB,IAAlCnP,EAAYoP,mBACZpP,EAAYwL,iBAAiBnnB,MAAMoU,WAAWrrB,QAAQ,cAAgB,IAEtE+hC,GAAS,GAEb,IAAIE,EAAOrP,EAAYzb,iBAAiB,OAgBxC,GAfsC,IAAlCyb,EAAYoP,mBAA2C,IAAhBC,EAAKxoC,QACnB,mBAAtBwoC,EAAK,GAAGhoB,WACc,cAAtBgoB,EAAK,GAAGhoB,YAEX8nB,GAAS,GAE4B,IAArCtyB,EAAKzP,QAAQ,sBAEb+hC,GAAS,GAEyB,IAAlCnP,EAAYoP,mBAAqE,UAA1CpP,EAAYS,kBAAkBtL,SACrE6K,EAAY/b,cAAc,iBAAmB+b,EAAY/b,cAAc,mBAEvEkrB,GAAS,GAETA,EAAQ,CACR,IAAIG,EAAOl9B,GAAQyK,EACnB,MAAI,KAAK+oB,KAAK0J,IAAyB,IAAhBD,EAAKxoC,OACX,YAATxD,EACO,uFAA+FisC,EAAKpyB,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,2BAEvJ,UAAYoyB,EAAKpyB,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,QAG1D,YAAT7Z,EACO,SAAWisC,EAAKpyB,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,eAEnE,IAAMoyB,EAAO,IAG5B,OAAO,GAEPC,EAAoB,SAAUC,EAAc9P,GAC5C,GAAK8P,EAGL,GAA6D,eAAzDA,EAAalf,cAAczM,aAAa,aAA5C,CAIA,IAAI4rB,EAAWD,EAAa/O,kBAAkBpZ,UAAUnK,QAAQ,YAAa,IACxEuyB,IAGY,QAAbA,GACA,EAAG1sB,EAAyBgL,GAAGyhB,EAAc9P,EAAOlV,QAAQE,KAE1C,YAAb+kB,GACL,EAAGrqB,EAAiC5kB,GAAGgvC,EAAc9P,EAAOlV,QAAQE,IAAKgV,EAAOlV,QAAQc,OAEtE,cAAbmkB,GACL,EAAGvsB,EAAqCuG,GAAG+lB,EAAc9P,EAAOlV,QAAQE,KAEtD,YAAb+kB,GACL,EAAGzsB,EAA6B6K,GAAG2hB,EAAc9P,EAAOlV,QAAQE,IAAKgV,EAAOlV,QAAQc,OAElE,YAAbmkB,GACL,EAAGpqB,EAAiCoE,GAAG+lB,EAAc9P,EAAOlV,QAAQE,IAAKgV,EAAOlV,QAAQc,OAEtE,aAAbmkB,GACL,EAAGlqB,EAAmCuI,GAAG0hB,EAAc9P,EAAOlV,QAAQE,KAEpD,aAAb+kB,GACL,EAAGtsB,EAAmClU,GAAGugC,EAAc9P,EAAOlV,QAAQE,KAEpD,SAAb+kB,GACL,EAAGvqB,EAA2B0I,GAAG4hB,EAAc,CAAE9kB,IAAKgV,EAAOlV,QAAQE,IAAKQ,KAAMwU,EAAOlV,QAAQnc,QAAQ6c,SAGvG,EAAG9H,EAAqC/E,GAAGlf,OAAOkO,OAAO,GAAIqyB,EAAOlV,QAAQnc,QAAQC,MAAOkhC,EAAc9P,EAAOlV,QAAQE,MACxH,EAAGzH,EAA2B0K,GAAG6hB,EAAc9P,EAAOlV,QAAQzD,OAElEyoB,EAAanmB,aAAa,cAAe,WAnCrCmmB,EAAanmB,aAAa,cAAe,MAuC7CxC,EAAY/D,EAAoB,KAMhC4sB,EAAY,SAAUhQ,GACtB,GAA2B,OAAvBA,EAAOQ,YAAX,CAGA,IAAI2J,EAAgBnK,EAAOA,EAAOQ,aAAa5c,QAC3Cqc,EAAUD,EAAOiQ,QAAQjvC,OAAOg/B,GACpB,KAAZC,IACAA,EAAU,SAEdkK,EAActlB,iBAAiB,2BAA2BlgB,SAAQ,SAAUgH,GACxEA,EAAK8c,UAAYwX,GACjB,EAAGza,EAA2B0I,GAAGviB,EAAM,CACnCqf,IAAKgV,EAAOlV,QAAQE,IACpBQ,KAAMwU,EAAOlV,QAAQnc,QAAQ6c,YAIrC0kB,EAAW,SAAU9mB,EAAO4W,GAC5B,IAAIzR,GAAc,EAAGtI,EAAqCuI,IAAIpF,EAAM7D,OAAQ,QAC5E,GAAIgJ,IAAe,EAAGtI,EAAsCwI,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiBsR,EAAOA,EAAOQ,aAAa5c,QAAQW,cAAc,IAAMgK,EAAYpK,aAAa,mBACrG,GAAIuK,EACA,GAA8B,SAA1BsR,EAAOlV,QAAQzc,OAAmB,CAClC,IAAI8yB,EAAgBzS,EAAe9H,UAAYoZ,EAAOpc,QAAQgD,UACzDoZ,EAAOlV,QAAQxc,cAAcC,MAC9B4yB,GAAiBnB,EAAOoB,QAAQxd,QAAQyd,cAE5C5c,OAAOkK,SAASlK,OAAOmK,QAASuS,QAG5BnB,EAAOpc,QAAQgD,UAAYnC,OAAO6c,SAClC7c,OAAOkK,SAASlK,OAAOmK,QAASoR,EAAOpc,QAAQgD,WAEnDoZ,EAAOA,EAAOQ,aAAa5c,QAAQiD,UAAY6H,EAAe9H,iBAM1EupB,EAAa,SAAU3I,EAAcxH,EAAQ5W,EAAOmf,GAEpD,GAAIf,EAAa2D,wBACb3D,EAAa2D,uBAAuB9kB,UAAUwK,SAAS,cAAe,CACtE,GAAkB,cAAdzH,EAAM5rB,KACqG,KAA3G,EAAG2pB,EAAiCipB,IAAI5I,EAAcxH,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,MAGjG,OAFA+nB,EAAa2D,uBAAuBjZ,SACpCme,GAAgBrQ,IACT,EAEX,GAAIsQ,GAAkBtQ,EAAQ5W,EAAOmf,EAAOf,EAAcA,EAAa2D,wBACnE,OAAO,EAIf,GAAI3D,EAAaxG,oBACbwG,EAAaxG,mBAAmB3a,UAAUwK,SAAS,cAAe,CAClE,GAAkB,WAAdzH,EAAM5rB,MACN,EAAG2pB,EAAiCipB,IAAI5I,EAAcxH,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,OAC1F+nB,EAAaxW,YAAYuf,YAAYppC,OAG5C,OAFAqgC,EAAaxG,mBAAmB9O,SAChCme,GAAgBrQ,IACT,EAEX,GAAIwQ,GAAiBxQ,EAAQ5W,EAAOmf,EAAOf,EAAcA,EAAaxG,oBAClE,OAAO,EAIf,GAAkB,cAAd5X,EAAM5rB,KAAqC,WAAd4rB,EAAM5rB,IAAkB,CACrD,IAAIizC,GAAa,EAAGxqB,EAAsCwI,IAAI8Z,EAAME,eAAgB,cACpF,GAAIgI,EAGA,OAFAA,EAAWve,SACXme,GAAgBrQ,IACT,IAefjgC,EAAQ,SAAUigC,EAAQuI,EAAOmI,EAAatnB,QAC1B,IAAhBsnB,IAA0BA,GAAc,GAC5C,IAAIlJ,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAEhE,GAAIjB,IAAiBkJ,GAA0D,eAA3ClJ,EAAarjB,aAAa,aAA+B,CACzF,GAAKwsB,GAAOnJ,EAAa/e,YAAc+e,EAAa2D,wBAChDyF,GAAYpJ,EAAa/e,WACzB,OAMJ,IAHA,IAAI4gB,GAAc,EAAGliB,EAAiCipB,IAAI5I,EAAcxH,EAAO8M,GAAGlpB,QAAS2kB,GAAO9oB,MAE9FoxB,GAAa,EACR/vC,EAAIuoC,EAAc,EAE3BvoC,EAAI0mC,EAAaxW,YAAYvK,OAAO,EAAG4iB,GAAalqB,YAAY,MAAOre,IACnE,GAA2C,MAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,IAEO,OAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,GAAa,CAC7C+vC,GAAa,EACb,MAGY,IAAhBxH,IACAwH,GAAa,GAGjB,IAAIC,GAAW,EACf,IAAShwC,EAAIuoC,EAAc,EAAGvoC,EAAI0mC,EAAaxW,YAAY7pB,OAAQrG,IAC/D,GAA2C,MAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,IAAqD,OAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,GAAa,CAC3FgwC,GAAW,EACX,MAGR,GAAID,EACA,OAEJ,GAAIC,EAAU,CACV,IAAIC,GAAgB,EAAG9qB,EAAsCwI,IAAI8Z,EAAME,eAAgB,qBACvF,IAAIsI,EAGC,CACD,IAAIC,EAAezI,EAAME,eAAe4C,gBAKxC,YAJI2F,GAA0C,IAA1BA,EAAa3J,UAAkB2J,EAAa3qB,UAAUwK,SAAS,4BAE/EmgB,EAAa3qB,UAAU6L,OAAO,8BAc9C,GARA8N,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,4BAA4BlgB,SAAQ,SAAUgH,GAC7EA,EAAK0a,UAAU6L,OAAO,8BAErBsV,IAEDA,EAAexH,EAAO8M,GAAGlpB,UAGxB4jB,EAAajjB,cAAc,OAAQ,CACpC,IAAI0sB,GAAuB,EAAGhrB,EAAsCwI,IAAI8Z,EAAME,eAAgB,sBAC1FwI,EACAA,EAAqB9F,uBAAuBnW,mBAAmB,YAAa,SAG5EuT,EAAMgD,WAAW1nB,SAASI,cAAc,QAIhDujB,EAAa3iB,iBAAiB,WAAWlgB,SAAQ,SAAUgH,GACvDA,EAAKiZ,gBAAgB,YAEsB,wBAA3C4iB,EAAarjB,aAAa,eAE1BqjB,EAAexH,EAAO8M,GAAGlpB,SAE7B,IAiFIstB,EAjFAC,EAAc3J,EAAavG,YAAYjB,EAAO8M,GAAGlpB,SACjDwtB,GAAkB,EAAGnrB,EAAsCorB,IAAI7J,EAAc,YAAa,mBAC1FrqB,EAAO,GACX,GAAKg0B,EAsDDh0B,EAAOqqB,EAAa/e,cAtDN,CACd,IAAI6oB,GAAoB,EAAGxJ,EAA0ChB,GAAGyB,EAAME,eAAgB,cAE1FvB,GAAiB,EAAGjhB,EAA2BsrB,IAAIhJ,EAAME,gBAa7D,GAZIvB,IACAM,EAAeN,GAGfoK,KAAuBpK,GAAmBA,IAAmBoK,EAAkBzgB,SAASqW,MACxFM,EAAe8J,GAGfF,IACA5J,EAAe4J,GAEnBj0B,EAAOqqB,EAAa9T,UACS,OAAzB8T,EAAa/R,SAA6C,OAAzB+R,EAAa/R,QAAkB,CAEhE,IAAI+b,EAAkBhK,EAAa2D,uBAC/BsG,EAAkBjK,EAAaxG,oBAC/BwQ,GAAgD,OAA5BA,EAAgB/b,SAAgD,OAA5B+b,EAAgB/b,UACxEtY,EAAOq0B,EAAgB9d,UAAYvW,EACnCq0B,EAAgBtf,WAEhBuf,GAAgD,OAA5BA,EAAgBhc,SAAgD,OAA5Bgc,EAAgBhc,UACxEtY,GAAcs0B,EAAgB/d,UAC9B+d,EAAgBvf,UAGpB/U,EAAOA,EAAKK,QAAQ,uBAAwB,kCAEvCgqB,EAAa2D,wBACoF,KAAtG3D,EAAa2D,uBAAuBna,YAAYxT,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAC9FlG,GAA6B,oBAApBA,EAAMsoB,YAEfv0B,EAAOqqB,EAAa2D,uBAAuBzX,UAAYvW,EACvDqqB,EAAa2D,uBAAuBjZ,UAGxC8N,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,qCAAqClgB,SAAQ,SAAUgH,GAClFA,IAAS67B,EAAavG,YAAYt1B,KAClCwR,GAAQxR,EAAK+nB,UACb/nB,EAAKumB,aAIb8N,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,iCAAiClgB,SAAQ,SAAUgH,GAC9EA,IAAS67B,EAAavG,YAAYt1B,KAClCwR,GAAQxR,EAAK+nB,UACb/nB,EAAKumB,aAUjB,GAHAod,EAAI,kBAAmBnyB,EAAM,WAAY6iB,EAAOlV,QAAQ6mB,UACxDx0B,EAAO6iB,EAAO7T,KAAKuU,gBAAgBvjB,GACnCmyB,EAAI,kBAAmBnyB,EAAM,SAAU6iB,EAAOlV,QAAQ6mB,UAClDR,EACA3J,EAAa/e,UAAYtL,OAKzB,GAFAqqB,EAAa9T,UAAYvW,EAErBi0B,EAAiB,CACjB,IAAIQ,GAAsB,EAAG3rB,EAAsCorB,IAAIrR,EAAO8M,GAAGlpB,QAAQW,cAAc,OAAQ,YAAa,iBAC5H,GAAIqtB,EAAqB,CACrB,IAAIC,EAAmBD,EAAoB5gB,YACvC8gB,EAASD,EAAiBr+B,UAAU,EAAGq+B,EAAiBnkC,QAAQ,OAChEqkC,EAAqB/R,EAAO8M,GAAGlpB,QAAQW,cAAc,wDAA6DutB,EAAS,MAC3HC,GACAA,EAAmBpoB,aAAa,aAAckoB,EAAiBprB,OAAOqrB,EAAO3qC,OAAS,GAAG+hB,OAAOzC,OAAO,EAAG,MAO1H,IAcIurB,EAdAC,EAAwBjS,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,qCAC/DotB,EAAsBttC,SAAQ,SAAUgH,EAAMmmB,GAC5B,IAAVA,EACAof,EAAyBvlC,GAGzBulC,EAAuBlc,mBAAmB,YAAarpB,EAAK8c,WAC5D9c,EAAKumB,aAGT+f,EAAsB9qC,OAAS,GAC/B64B,EAAO8M,GAAGlpB,QAAQiE,sBAAsB,YAAaoqB,EAAsB,IAI/E,IAAIC,EAAqBlS,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,iCAC5DqtB,EAAmBvtC,SAAQ,SAAUgH,EAAMmmB,GACzB,IAAVA,EACAkgB,EAAuBrmC,GAGvBqmC,EAAqBhd,mBAAmB,YAAarpB,EAAK8c,WAC1D9c,EAAKumB,aAGTggB,EAAmB/qC,OAAS,GAC5B64B,EAAO8M,GAAGlpB,QAAQiE,sBAAsB,YAAaqqB,EAAmB,KAE5E,EAAG/qB,EAA6BgrB,IAAInS,EAAO8M,GAAGlpB,QAAS2kB,GACvDvI,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,wCAAwClgB,SAAQ,SAAUgH,GACzFkkC,EAAkBlkC,EAAMq0B,MAE5BgQ,EAAUhQ,GACVoS,GAA2BpS,EAAQ,CAC/BqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAOjBC,EAAc,SAAUC,EAAQrpB,GAChC,GAAe,KAAXqpB,EACA,OAAO,EAGX,IAA6B,IAAzBA,EAAO/kC,QAAQ,OAAwC,IAAzB+kC,EAAO/kC,QAAQ,OAAwC,IAAzB+kC,EAAO/kC,QAAQ,KAC3E,SAAK,EAAGugC,EAA0ByE,IAAItpB,IAAWA,EAAMupB,QAAWvpB,EAAMwpB,UAAYxpB,EAAMwmB,OAAS6C,GAMvG,GAAe,SAAXA,EACA,SAAK,EAAGxE,EAA0ByE,IAAItpB,IAAWA,EAAMupB,SAAUvpB,EAAMwpB,UAA2B,QAAfxpB,EAAMwmB,MAK7F,IAAIiD,EAAUJ,EAAOr0B,MAAM,IAC3B,GAAIq0B,EAAOtM,WAAW,KAAM,CAExB,IAAI2M,EAA6B,IAAnBD,EAAQ1rC,OAAe0rC,EAAQ,GAAKA,EAAQ,GAC1D,SAAwB,IAAnBA,EAAQ1rC,SAAe,EAAG8mC,EAA0ByE,IAAItpB,IAAU,EAAG6kB,EAA0ByE,IAAItpB,MAAWA,EAAMupB,QAAWvpB,EAAMwpB,UACtIxpB,EAAMwmB,QAAU,UAAU1J,KAAK4M,GAAW,QAAU,OAASA,GAMtD,WAAXL,IACAI,EAAU,CAAC,IAAK,UAEpB,IAAIE,EAAWF,EAAQ1rC,OAAS,GAAqB,MAAf0rC,EAAQ,GAC1Cr1C,EAAOu1C,EAAWF,EAAQ,GAAKA,EAAQ,GAS3C,OARIE,KAAa,EAAG9E,EAA6B+E,OAAU,MAAM9M,KAAKd,UAAUQ,YAChE,MAARpoC,EACAA,EAAM,IAEO,MAARA,IACLA,EAAM,UAGV,EAAGywC,EAA0ByE,IAAItpB,IAAUA,EAAM5rB,IAAI+nC,gBAAkB/nC,EAAI+nC,eAAkBnc,EAAMupB,WAC7FI,IAAa3pB,EAAMwpB,UAAcG,GAAY3pB,EAAMwpB,YAS7DK,EAAa,SAAU1K,GACvB,IAAIE,EAAiBF,EAAME,eAC3B,GAAgC,IAA5BA,EAAepB,UAAkBoB,EAAeyK,UAAU/rC,SAAWohC,EAAMc,YAC3E,OAAO,EAEX,IAAI8J,EAAW1K,EAAemC,YAC9B,MAAOuI,GAAqC,KAAzBA,EAASniB,YACxBmiB,EAAWA,EAASvI,YAExB,IAAKuI,EAAU,CAEX,IAAIpC,GAAgB,EAAG9qB,EAAsCwI,IAAIga,EAAgB,qBACjF,GAAIsI,IAAkBA,EAAcnG,YAAa,CAC7C,IAAIwI,EAAiB3K,EAAe7X,cAAcA,cAAcga,YAChE,GAAIwI,GAA8C,IAA5BA,EAAe/L,UACjC+L,EAAe/sB,UAAUwK,SAAS,mBAClC,OAAOuiB,EAGf,OAAO,EAEN,SAAID,GAAkC,IAAtBA,EAAS9L,WAAkB8L,EAAS9sB,UAAUwK,SAAS,oBACvEsiB,EAAShvB,aAAa,gBAEhBgvB,GAIXE,EAAiB,SAAU9K,GAC3B,IAAIE,EAAiBF,EAAME,eACvBuI,EAAevI,EAAe4C,gBAClC,QAAgC,IAA5B5C,EAAepB,UAAwC,IAAtBkB,EAAMc,cAAqB2H,GAA0C,IAA1BA,EAAa3J,WAEzF2J,EAAa3qB,UAAUwK,SAAS,oBAAuBmgB,EAAa7sB,aAAa,gBAC1E6sB,GAIXsC,EAAe,SAAU/K,EAAOvI,GAChCA,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,4BAA4BlgB,SAAQ,SAAUgH,GAC7EA,EAAK0a,UAAU6L,OAAO,8BAE1B,IAAIqhB,GAAc,EAAGttB,EAAyCutB,IAAIjL,EAAME,eAAgB,mBACpFgL,GAAkBlL,EAAMmL,YAAa,EAAGztB,EAAyCutB,IAAIjL,EAAMkB,aAAc,mBAE7G,GAAKlB,EAAMmL,WAAeH,GAAeA,IAAgBE,EAAzD,CAGIF,IACAA,EAAYltB,UAAUC,IAAI,2BAC1BitB,EAAYltB,UAAU6L,OAAO,4BAE7B,EAAG/K,EAAiC4B,IAAIwf,IAE5C,IAAI4K,EAAWF,EAAW1K,GAC1B,GAAI4K,EAGA,OAFAA,EAAS9sB,UAAUC,IAAI,gCACvB6sB,EAAS9sB,UAAU6L,OAAO,2BAG9B,IAAI8e,EAAeqC,EAAe9K,GAClC,OAAIyI,GACAA,EAAa3qB,UAAUC,IAAI,gCAC3B0qB,EAAa3qB,UAAU6L,OAAO,iCAFlC,IAmBAyhB,EAAiB,SAAU3T,EAAQ5W,GAEnC,GADA4W,EAAO8M,GAAG8G,cAAgBxqB,EAAMyqB,YAC5BzqB,EAAMyqB,YACN,OAAO,GAGyB,IAAhCzqB,EAAM5rB,IAAIkQ,QAAQ,UAAiC,SAAd0b,EAAM5rB,KAAgC,YAAd4rB,EAAM5rB,KAAmC,QAAd4rB,EAAM5rB,KAChF,UAAd4rB,EAAM5rB,KAAiC,aAAd4rB,EAAM5rB,KAAoC,WAAd4rB,EAAM5rB,KAAqB,aAAa0oC,KAAK9c,EAAM5rB,MACxGwiC,EAAO8T,KAAKC,oBAAoB/T,EAAQ5W,GAE5C,IAAImf,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CyI,EAAiBF,EAAME,eAC3B,IAAKwL,GAAkB7qB,EAAO4W,EAAQyI,GAClC,OAAO,EAKX,GAHAyL,GAAe3L,EAAOvI,EAAQ5W,GAC9B+qB,GAAM5L,GAEY,UAAdnf,EAAM5rB,KAAiC,QAAd4rB,EAAM5rB,KAA+B,cAAd4rB,EAAM5rB,MAAuD,IAAhC4rB,EAAM5rB,IAAIkQ,QAAQ,YAC3F,EAAGugC,EAA0ByE,IAAItpB,IAAwB,WAAdA,EAAM5rB,KAAkC,WAAd4rB,EAAM5rB,IAC/E,OAAO,EAGX,IAAI42C,GAAiB,EAAGnuB,EAAsCorB,IAAI5I,EAAgB,eAAgB,KAClG,KAAK,EAAGwF,EAA0ByE,IAAItpB,KAAWA,EAAMupB,SAAWvpB,EAAMwpB,UAA0B,UAAdxpB,EAAM5rB,KAAmB42C,GACtG7L,EAAMc,YAAc+K,EAAepjB,YAAY7pB,OAAQ,CAC1D,IAAIktC,EAAsBD,EAAejJ,uBACrCkJ,IACA9L,EAAMgD,WAAW1nB,SAAS2nB,eAAe6I,EAAoBrjB,cAC7DuX,EAAMO,UAAS,IAEnB,IAAIwL,EAAqBF,EAAexJ,YACpC0J,IACA/L,EAAMgD,WAAW1nB,SAAS2nB,eAAe8I,EAAmBtjB,cAC5DuX,EAAMO,UAAS,IAGvB,IAAIyL,GAAW,EAAGtuB,EAAqCuI,IAAIia,EAAgB,KAE3E,GAAI+L,GAAYprB,EAAO4W,EAAQuU,EAAUhM,GACrC,OAAO,EAGX,GAAIkM,GAAQlM,EAAOvI,EAAQuU,EAAUnrB,GACjC,OAAO,EAGX,GAAIsrB,GAAc1U,EAAQuI,EAAOnf,EAAOmrB,GACpC,OAAO,EAGX,IAAII,GAAmB,EAAG1uB,EAAsCwI,IAAIga,EAAgB,0BACpF,GAAIkM,GAAiD,QAA7BA,EAAiBlf,QAAmB,CACxD,IAAImf,EAAoBD,EAAiBE,WACzC,GAAIC,GAAa9U,EAAQ5W,EAAOurB,EAAkBpM,GAC9C,OAAO,EAGX,IAAqD,eAAhDqM,EAAkBzwB,aAAa,cACmB,eAAhDywB,EAAkBzwB,aAAa,eAClCmsB,GAAkBtQ,EAAQ5W,EAAOmf,EAAOqM,EAAmBD,EAAiB/jB,eAC5E,OAAO,EAGX,GAAI4f,GAAiBxQ,EAAQ5W,EAAOmf,EAAOqM,EAAmBD,EAAiB/jB,eAC3E,OAAO,EAIf,IAAImkB,GAAmB,EAAG9uB,EAAsCorB,IAAI5I,EAAgB,YAAa,mBACjG,GAAIsM,EAAkB,CAClB,GAAkB,UAAd3rB,EAAM5rB,KAAiC,QAAd4rB,EAAM5rB,IAK/B,OAJA+qC,EAAM+B,mBAAmByK,EAAiB/T,mBAAmB6T,YAC7DtM,EAAMO,UAAS,GACf1f,EAAMyM,iBACN6Y,EAAU1O,EAAQ,CAAC,UACZ,EAEX,GAAkB,cAAd5W,EAAM5rB,IAAqB,CAC3B,IAAIiiB,GAAQ,EAAG0H,EAAiCipB,IAAI2E,EAAkB/U,EAAO8M,GAAGlpB,SAASnE,MAC3E,IAAVA,GACA8oB,EAAMM,SAASJ,EAAgB,GAErB,IAAVhpB,IACAugB,EAAO+O,KAAKiG,eAAiB,IAGrC,GAAI1E,GAAkBtQ,EAAQ5W,EAAOmf,EAAOwM,EAAkBA,EAAiBnkB,eAG3E,OADA8d,EAAU1O,EAAQ,CAAC,UACZ,EAIf,IAAIiV,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAChE,GAAIrf,EAAM5rB,IAAIkQ,QAAQ,UAAY,GAAKunC,EAAa,CAChD,IAAIC,EAAeC,GAAYF,GAC/B,GAAIC,GAAgB5E,GAAkBtQ,EAAQ5W,EAAOmf,EAAO0M,EAAaC,GACrE,OAAO,EAEX,IAAIE,EAAgBC,GAAWJ,GAC/B,GAAIG,GAAiB5E,GAAiBxQ,EAAQ5W,EAAOmf,EAAO0M,EAAaG,GACrE,OAAO,EAGf,GAAIE,GAAStV,EAAQ5W,EAAOmf,GACxB,OAAO,EAGX,GAAIgN,GAAQvV,EAAQuI,EAAOnf,GACvB,OAAO,EAGX,GAAIosB,GAAOxV,EAAQuI,EAAOnf,GACtB,OAAO,EAEX,IAAIsF,GAAiB,EAAGoZ,EAA+C1H,GAAGqI,GAC1E,GAAI/Z,EAAgB,CAEhB,GAAI8jB,EAAY,KAAMppB,GAAQ,CAC1B,IAAIqsB,EAAuB/mB,EAAenK,cAAc,+BAKxD,OAJIkxB,GAAwBA,EAAqBzkB,YAAY9H,OAAO/hB,OAAS,GACzEuuC,GAAuB1V,EAAQyV,EAAqBzkB,YAAYvK,OAAO,IAE3E2C,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,KAAMppB,GAAQ,CACtBqsB,EAAuB/mB,EAAenK,cAAc,+BAKxD,OAJIkxB,GAAwBA,EAAqBzkB,YAAY9H,OAAO/hB,OAAS,GACzEuuC,GAAuB1V,EAAQyV,EAAqBzkB,YAAY9H,OAAS,MAE7EE,EAAMyM,kBACC,GAGf,IAAI2R,GAAe,EAAGvhB,EAAgC8lB,IAAItD,GAC1D,GAAkB,cAAdrf,EAAM5rB,OAAwB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QAA+B,KAArBpK,EAAMxgC,WAAmB,CACtI,GAAI4tC,GAAU3V,EAAQuI,EAAOnf,EAAOmrB,GAChC,OAAO,EAEX,GAAI/M,GAAgBA,EAAa2D,wBACD,OAAzB3D,EAAa/R,SAA6C,OAAzB+R,EAAa/R,UACqB,eAAlE+R,EAAa2D,uBAAuBhnB,aAAa,cACiB,eAAlEqjB,EAAa2D,uBAAuBhnB,aAAa,cAAgC,CACrF,IAAIyxB,GAAa,EAAGzuB,EAAiCipB,IAAI5I,EAAcxH,EAAO8M,GAAGlpB,QAAS2kB,GAAO9oB,MACjG,GAAmB,IAAfm2B,GAAoC,IAAfA,GAAoBpO,EAAapW,UAAU+U,WAAWrgB,EAA8ByE,EAAE+E,MAW3G,OATAiZ,EAAM+B,mBAAmB9C,EAAa2D,uBAAuB5mB,cAAc,iCAC3EgkB,EAAMO,UAAS,GACfwK,EAAa/K,EAAOvI,GACsE,KAAtFwH,EAAaxW,YAAY9H,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,MAE9EkY,EAAatV,SACbkgB,GAA2BpS,IAE/B5W,EAAMyM,kBACC,EAIf,GAAInH,EAAgB,CAChB,IAAImnB,EAAgBnnB,EAAeqS,kBAAkB/P,YAAY7pB,QAC7D,EAAGggB,EAAiCipB,IAAI1hB,EAAgBsR,EAAO8M,GAAGlpB,SAASnE,QAAUo2B,IACrFtN,EAAMM,SAASna,EAAeqS,kBAAkB8T,WAAYgB,EAAgB,GAC5EtN,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,KAIpD,QAAmB,YAAdnf,EAAM5rB,KAAmC,cAAd4rB,EAAM5rB,MAAwBgqC,IAE1DA,EAAa3iB,iBAAiB,oBAAoBlgB,SAAQ,SAAUgH,GAC3DA,EAAKklB,SAAS4X,IACf98B,EAAK0a,UAAUC,IAAI,+BAGvBwvB,GAAuB1sB,EAAOoe,EAAce,OAIpDwN,GAAwBxN,EAAOnf,EAAM5rB,QACjCgqC,IAAgB2I,EAAW3I,EAAcxH,EAAQ5W,EAAOmf,MACxDnf,EAAMyM,kBACC,KAMXhH,EAAgBzL,EAAoB,KAMpC4yB,EAAa,SAAUhW,EAAQ5W,GAC/B,IAAIwE,EACA2a,EAAQtf,eAAeI,WAAW,GAAGC,aACrCmf,EAAiBF,EAAME,eACW,IAAlCF,EAAME,eAAepB,UAAmD,QAAjCkB,EAAME,eAAehT,UAC5DgT,EAAiBF,EAAME,eAAea,WAAWf,EAAMc,YAAc,IAEzE,IAAI7B,GAAe,EAAGvhB,EAAsCorB,IAAI5I,EAAgB,aAAc,KAE9F,GAAIjB,GAAgBpe,IAA8B,0BAApBA,EAAMsoB,WAAwD,MAAftoB,EAAMlqB,MAAe,CAI9F,IAFA,IAAImqC,GAAc,EAAGliB,EAAiCipB,IAAI5I,EAAcxH,EAAO0M,GAAG9oB,QAAS2kB,GAAO9oB,MAC9FoxB,GAAa,EACR/vC,EAAIuoC,EAAc,EAE3BvoC,EAAI0mC,EAAaxW,YAAYvK,OAAO,EAAG4iB,GAAalqB,YAAY,MAAOre,IACnE,GAA2C,MAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,IAEO,OAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,GAAa,CAC7C+vC,GAAa,EACb,MAMR,GAHoB,IAAhBxH,IACAwH,GAAa,GAEbA,EAEA,YADAoF,GAAmBjW,GAGvB,GAAwB,0BAApB5W,EAAMsoB,UAAuC,CAE7C,IAAIwE,GAAyB,EAAGjwB,EAAsCorB,IAAI5I,EAAgB,YAAa,4BACnG,EAAGxiB,EAAsCorB,IAAI5I,EAAgB,YAAa,2BAC9E,GAAIyN,EAAwB,CACxB,GAAyD,4BAArDA,EAAuB/xB,aAAa,aAA4C,CAChF,IAAIgyB,EAAoBC,GAAc3N,EAAgB,0BACtD,GAAI0N,EAGA,OAFAA,EAAkBnlB,YAAcklB,EAAuBllB,iBACvDilB,GAAmBjW,GAI3B,GAAyD,2BAArDkW,EAAuB/xB,aAAa,aAA2C,CAC3EgyB,EAAoBC,GAAc3N,EAAgB,2BAA2B,GACjF,GAAI0N,EAGA,OAFAA,EAAkBnlB,YAAcklB,EAAuBllB,iBACvDilB,GAAmBjW,IAM/B,IAAIqW,GAAyB,EAAGpwB,EAAsCorB,IAAI5I,EAAgB,YAAa,0BACvG,GAAI4N,EAAwB,CACxB,IAAIC,EAAwBD,EAAuBrV,mBAAmBA,mBAKtE,YAJIsV,GAA6E,4BAApDA,EAAsBnyB,aAAa,eAC5DmyB,EAAsBpkB,SACtB+jB,GAAmBjW,KAI3BwH,EAAa3iB,iBAAiB,wCAAwClgB,SAAQ,SAAUgH,GACpD,IAA5BA,EAAKqlB,YAAY7pB,QACjBwE,EAAKumB,YAGbsV,EAAa3iB,iBAAiB,yCAAyClgB,SAAQ,SAAUgH,GACrD,IAA5BA,EAAKqlB,YAAY7pB,QACjBwE,EAAKumB,YAIb,IAAIxD,GAAiB,EAAGzI,EAAsCorB,IAAI5I,EAAgB,YAAa,kBAC/F,GAAI/Z,IAA+D,IAA7CA,EAAesC,YAAYtjB,QAAQ,KAErD,YADAuoC,GAAmBjW,GAK3B,IAAoB,MAAf5W,EAAMlqB,MAAoC,0BAApBkqB,EAAMsoB,cAC5B,EAAGzrB,EAAsCorB,IAAI5I,EAAgB,YAAa,aACpE,EAAGxiB,EAAsCorB,IAAI5I,EAAgB,YAAa,eAC1E,EAAGxiB,EAAsCorB,IAAI5I,EAAgB,YAAa,iBAC1E,EAAGxiB,EAAsCorB,IAAI5I,EAAgB,YAAa,sBAGjF,YADAwN,GAAmBjW,GAI3B,GAAIwH,GAAyD,OAAzCA,EAAaxW,YAAYuf,YAEzC0F,GAAmBjW,OAFvB,CAKKwH,IACDA,EAAexH,EAAO0M,GAAG9oB,SAEqF,yBAAnE,QAAzCgK,EAAK4Z,EAAazG,yBAAsC,IAAPnT,OAAgB,EAASA,EAAGzJ,aAAa,gBAE5FqjB,EAAexH,EAAO0M,GAAG9oB,UAEzB,EAAGqC,EAAsCorB,IAAI5I,EAAgB,YAAa,oBAE1EjB,EAAexH,EAAO0M,GAAG9oB,UAGyB,IAAlD4jB,EAAaxW,YAAYtjB,QAAQkzB,KAAK2V,QAEtChO,EAAMgD,WAAW1nB,SAAS2nB,eAAe5K,KAAK2V,QAGlD/O,EAAa3iB,iBAAiB,WAAWlgB,SAAQ,SAAUgH,GACvDA,EAAKiZ,gBAAgB,YAEzB4iB,EAAa3iB,iBAAiB,QAAQlgB,SAAQ,SAAUgH,GACpDA,EAAK+nB,UAAY/nB,EAAK8c,aAE1B,IAsCIyoB,EAtCA/zB,EAAOqqB,EAAaxW,YACpBwlB,EAAchP,EAAavG,YAAYjB,EAAO0M,GAAG9oB,SACjD4yB,EACAr5B,EAAOqqB,EAAaxW,aAIhBwW,EAAa2D,yBACbhuB,EAAOqqB,EAAa2D,uBAAuBna,YAAc7T,EACzDqqB,EAAa2D,uBAAuBjZ,UAEpCsV,EAAa2D,wBAAoD,IAA1BhuB,EAAKzP,QAAQ,WAEpDyP,EAAOqqB,EAAa2D,uBAAuBna,YAAc7T,EACzDqqB,EAAa2D,uBAAuBjZ,UAGxC8N,EAAO0M,GAAG9oB,QAAQiB,iBAAiB,qCAAqClgB,SAAQ,SAAUgH,EAAMmmB,GAC9E,IAAVA,GAAenmB,IAAS67B,EAAavG,YAAYt1B,EAAKilB,iBACtDzT,GAAQ,KAAOxR,EAAKilB,cAAcI,YAClCrlB,EAAKilB,cAAcsB,aAI3B8N,EAAO0M,GAAG9oB,QAAQiB,iBAAiB,gCAAgClgB,SAAQ,SAAUgH,EAAMmmB,GACzE,IAAVA,GAAenmB,IAAS67B,EAAavG,YAAYt1B,EAAKilB,iBACtDzT,GAAQ,KAAOxR,EAAKilB,cAAcI,YAClCrlB,EAAKilB,cAAcsB,cAI/B/U,EAAOs5B,GAAuBt5B,EAAM6iB,GAChCwW,EACAhP,EAAa/e,UAAYtL,EAGzBqqB,EAAa9T,UAAYvW,EAG7B,IAeI60B,EAfAC,EAAwBjS,EAAO0M,GAAG9oB,QAAQiB,iBAAiB,qCAC/DotB,EAAsBttC,SAAQ,SAAUgH,EAAMmmB,GAC5B,IAAVA,EACAof,EAAyBvlC,EAAKilB,eAG9BsgB,EAAuBpF,iBAAiB5Z,SACxCgf,EAAuBlc,mBAAmB,YAAa,GAAKrpB,EAAKilB,cAAcnI,WAC/E9c,EAAKilB,cAAcsB,aAGvB+f,EAAsB9qC,OAAS,GAC/B64B,EAAO0M,GAAG9oB,QAAQiE,sBAAsB,YAAaqpB,GAIzD,IAAIgB,EAAqBlS,EAAO0M,GAAG9oB,QAAQiB,iBAAiB,gCAC5DqtB,EAAmBvtC,SAAQ,SAAUgH,EAAMmmB,GACzB,IAAVA,EACAkgB,EAAuBrmC,EAAKilB,eAG5BohB,EAAqBlG,iBAAiB5Z,SACtC8f,EAAqBhd,mBAAmB,YAAa,GAAKrpB,EAAKilB,cAAcnI,WAC7E9c,EAAKilB,cAAcsB,aAGvBggB,EAAmB/qC,OAAS,GAC5B64B,EAAO0M,GAAG9oB,QAAQiE,sBAAsB,YAAamqB,IAEzD,EAAG7qB,EAA6BgrB,IAAInS,EAAO0M,GAAG9oB,QAAS2kB,GACvDmO,GAAa1W,GACbiW,GAAmBjW,EAAQ,CACvBqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,MAYjBoE,EAAgC,SAAU3W,EAAQ5W,GAClD,IAAIwE,EAAIgpB,EAAIlsC,EAAImsC,EAAIjqC,EAEpB,GADAozB,EAAO0M,GAAGkH,cAAgBxqB,EAAMyqB,YAC5BzqB,EAAMyqB,YACN,OAAO,EAOX,IALoC,IAAhCzqB,EAAM5rB,IAAIkQ,QAAQ,UAAiC,SAAd0b,EAAM5rB,KAAgC,YAAd4rB,EAAM5rB,KAAmC,QAAd4rB,EAAM5rB,KAChF,UAAd4rB,EAAM5rB,KAAiC,aAAd4rB,EAAM5rB,KAAoC,WAAd4rB,EAAM5rB,KAAqB,aAAa0oC,KAAK9c,EAAM5rB,MACxGwiC,EAAO8T,KAAKC,oBAAoB/T,EAAQ5W,GAG1B,UAAdA,EAAM5rB,KAAiC,QAAd4rB,EAAM5rB,KAA+B,cAAd4rB,EAAM5rB,MAAuD,IAAhC4rB,EAAM5rB,IAAIkQ,QAAQ,YAC3F,EAAGugC,EAA0ByE,IAAItpB,IAAwB,WAAdA,EAAM5rB,IACrD,OAAO,EAEX,IAAI+qC,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CyI,EAAiBF,EAAME,eACW,IAAlCF,EAAME,eAAepB,UAAmD,QAAjCkB,EAAME,eAAehT,UAC5DgT,EAAiBF,EAAME,eAAea,WAAWf,EAAMc,YAAc,IAEzE,IAAIyN,GAAc,EAAG7wB,EAAsCorB,IAAI5I,EAAgB,YAAa,QAExFsO,GAA0B,EAAG9wB,EAAsCorB,IAAI5I,EAAgB,YAAa,qBAMxG,IALKsO,GAAiD,IAAtBxO,EAAMc,aAAqByN,GAAeA,EAAY3L,wBACjB,sBAAjE2L,EAAY3L,uBAAuBhnB,aAAa,eAChD4yB,EAA0BD,EAAY3L,wBAGtC4L,GACkB,UAAd3tB,EAAM5rB,OAAoB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMupB,QACV,KAAlEoE,EAAwB/V,mBAAmBhQ,YAAY9H,SACvD,EAAG/B,EAAiCipB,IAAI2G,EAAyB/W,EAAO0M,GAAG9oB,QAAS2kB,GAAO9oB,QACvFs3B,EAAwB/lB,YAAY7pB,OAQxC,MAPkI,aAAnE,QAAzDymB,EAAKmpB,EAAwB5L,8BAA2C,IAAPvd,OAAgB,EAASA,EAAGzJ,aAAa,eAE5G4yB,EAAwB5L,uBAAuBxhB,aAAa,cAAe,gBAE/EotB,EAAwB7kB,SACxB+jB,GAAmBjW,GACnB5W,EAAMyM,kBACC,EAIf,IAAImhB,GAAoB,EAAG/wB,EAAsCorB,IAAI5I,EAAgB,YAAa,aAC9FwO,GAAoB,EAAGhxB,EAAsCorB,IAAI5I,EAAgB,YAAa,eAC9FyO,EAAwBF,EAW5B,GAVKE,GACGD,GAAwF,gBAAnEA,EAAkBjW,mBAAmB7c,aAAa,eACvE+yB,EAAwBD,GAG3BC,GAA+C,IAAtB3O,EAAMc,cAAqByN,IAAeA,EAAY3L,wBACd,cAAjE2L,EAAY3L,uBAAuBhnB,aAAa,cACoB,gBAAjE2yB,EAAY3L,uBAAuBhnB,aAAa,eACpD+yB,EAAwBJ,EAAY3L,wBAEpC+L,EAAuB,CACvB,IAAIC,GAAa,EAAGhwB,EAAiCipB,IAAI8G,EAAuBlX,EAAO0M,GAAG9oB,QAAS2kB,GAAO9oB,MACtG23B,EAA6D,gBAApDF,EAAsB/yB,aAAa,aAC5CkzB,EAAyBH,EAK7B,GAJIE,IACAC,EAAyBH,EAAsB/L,uBAAuBA,uBACjEA,wBAELgM,IAAeD,EAAsBlmB,YAAY7pB,OAAQ,CAEzD,GAAkB,UAAdiiB,EAAM5rB,OAAoB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMupB,SAAWvpB,EAAMwpB,UAC7B,KAAhEsE,EAAsBlW,mBAAmBhQ,YAAY9H,OAgBrD,MAfiI,aAAnE,QAAxD0tB,EAAKS,EAAuBlM,8BAA2C,IAAPyL,OAAgB,EAASA,EAAGzyB,aAAa,eAC3GkzB,EAAuBlM,uBAAuBjZ,SAC9C8jB,EAAWhW,KAGPoX,IACAC,EAAuBnlB,SACvBglB,EAAsB/L,uBAAuBA,uBAAuBjZ,SACpEglB,EAAsB/L,uBAAuBjZ,UAEjDglB,EAAsBlW,mBAAmB9O,SACzCglB,EAAsBhlB,SACtB+jB,GAAmBjW,IAEvB5W,EAAMyM,kBACC,EAGX,GAAkB,QAAdzM,EAAM5rB,IASN,OARA65C,EAAuBriB,mBAAmB,cAAe,6BAAiCqiB,EAAuBrmB,YAAYxT,QAAQ,MAAO,KAAO,WAC/I,MAAM0oB,KAAKmR,EAAuBrmB,eAClCqmB,EAAuBrmB,YAAcqmB,EAAuBrmB,YAAYxT,QAAQ,UAAW,KAC3F+qB,EAAM+B,mBAAmB4M,EAAsBrC,YAC/CtM,EAAMO,UAAS,IAEnBkN,EAAWhW,GACX5W,EAAMyM,kBACC,GAKnB,GAAI2f,GAAOxV,EAAQuI,EAAOnf,GACtB,OAAO,EAEX,IAAIoe,GAAe,EAAGvhB,EAAsCorB,IAAI5I,EAAgB,aAAc,KAC1Fla,GAAc,EAAGuZ,EAA0ChB,GAAG2B,EAAgB,QAElF,GAAkB,UAAdrf,EAAM5rB,OAAoB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMupB,SAAWvpB,EAAMwpB,UAAYpL,EAAc,CACvH,IAAI8P,GAAU,EACVC,EAAe/P,EAAaxW,YAAY7V,MAAM,SAC9C,EAAGgM,EAAiCipB,IAAI5I,EAAcxH,EAAO0M,GAAG9oB,SAASnE,QAAU83B,EAAeA,EAAa,GAAGpwC,OAAS,KAE3HmwC,GAAU,GAEd,IAAIE,EAAc,KAClB,GAAIjpB,EAAa,CACb,GAAwH,kBAArE,QAA7C7jB,EAAK6jB,EAAY4c,8BAA2C,IAAPzgC,OAAgB,EAASA,EAAGyZ,aAAa,gBAKhG,OAHAoK,EAAY4c,uBAAuBjZ,SACnC+jB,GAAmBjW,GACnB5W,EAAMyM,kBACC,EAGP2hB,GAAeC,GAAuBlpB,GAY9C,OATAga,EAAMgD,WAAW1nB,SAAS2nB,eAAegM,IACzCjP,EAAMO,UAAS,GACXtB,GAAoD,KAApCA,EAAaxW,YAAY9H,SAAkBouB,EAC3DtB,EAAWhW,GAGXiW,GAAmBjW,GAEvB5W,EAAMyM,kBACC,EAGX,GAAkB,cAAdzM,EAAM5rB,OAAwB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMupB,SAAWvpB,EAAMwpB,SAAU,CAC3G,GAAIrkB,GAAiI,aAAnE,QAA7CsoB,EAAKtoB,EAAY4c,8BAA2C,IAAP0L,OAAgB,EAASA,EAAG1yB,aAAa,eACtB,KAAzF,EAAGgD,EAAiCipB,IAAI7hB,EAAayR,EAAO0M,GAAG9oB,QAAS2kB,GAAO9oB,QAEb,IAAlE8O,EAAYpK,aAAa,aAAazW,QAAQ,eAW9C,OATA66B,EAAMM,SAASta,EAAa,GAC5Bga,EAAMmP,kBACiC,KAAnCnpB,EAAYyC,YAAY9H,OACxB8sB,EAAWhW,GAGXiW,GAAmBjW,GAEvB5W,EAAMyM,kBACC,EAGX,GAAI2R,GAA0G,KAA1F,EAAGrgB,EAAiCipB,IAAI5I,EAAcxH,EAAO0M,GAAG9oB,QAAS2kB,GAAO9oB,OAChG+nB,EAAa2D,uBAAwB,CACrC5C,EAAMmP,kBACN,IAAIC,EAAsBnQ,EAAa2D,uBAAuBW,iBAsB9D,MArBsD,YAAlD6L,EAAoBxzB,aAAa,eACjCwzB,EAAoBzlB,SACpBylB,EAAsBnQ,EAAa2D,uBAAuBW,kBAGR,YAAlD6L,EAAoBxzB,aAAa,eACjCwzB,EAAoB3iB,mBAAmB,WAAYwS,EAAa/e,WAChE+e,EAAatV,UAEuB,KAApCsV,EAAaxW,YAAY9H,SAAkE,QAA9Ctc,EAAK46B,EAAa2D,8BAA2C,IAAPv+B,OAAgB,EAASA,EAAG2X,cAAc,0CAIvF,YAAlDozB,EAAoBxzB,aAAa,eAEjCokB,EAAM+B,mBAAmBqN,EAAoBhQ,WAC7CY,EAAMO,UAAS,IAEnBmN,GAAmBjW,IARnBgW,EAAWhW,GAUf5W,EAAMyM,kBACC,GAGf,OAAO,GAIP5F,EAAO7M,EAAoB,KAE3B2C,EAAkB3C,EAAoB,KAEtCw0B,EAAW,SAAU5X,GACQ,SAAzBA,EAAOlV,QAAQc,MACfoU,EAAOpc,QAAQyC,UAAUC,IAAI,gBAG7B0Z,EAAOpc,QAAQyC,UAAU6L,OAAO,iBAUpC2lB,EAAS,SAAU7X,GACnBA,EAAOpc,QAAQ6E,UAAY,GAC3BuX,EAAOpc,QAAQyC,UAAUC,IAAI,UAC7BsxB,EAAS5X,IACT,EAAGja,EAAqC+H,GAAGkS,EAAOlV,QAAQnc,QAAQid,MAAMmC,QAASiS,EAAOlV,QAAQnc,QAAQid,MAAMoC,MACzE,kBAA1BgS,EAAOlV,QAAQzc,SACtB2xB,EAAOpc,QAAQe,MAAMtW,OAAS2xB,EAAOlV,QAAQzc,OAAS,MAElB,kBAA7B2xB,EAAOlV,QAAQ5a,YACtB8vB,EAAOpc,QAAQe,MAAMzU,UAAY8vB,EAAOlV,QAAQ5a,UAAY,MAE5B,kBAAzB8vB,EAAOlV,QAAQqU,MACtBa,EAAOpc,QAAQe,MAAMwa,MAAQa,EAAOlV,QAAQqU,MAAQ,KAGpDa,EAAOpc,QAAQe,MAAMwa,MAAQa,EAAOlV,QAAQqU,MAEhDa,EAAOpc,QAAQ6gB,YAAYzE,EAAOoB,QAAQxd,SAC1C,IAAIkc,EAAiBjc,SAASI,cAAc,OA+B5C,GA9BA6b,EAAenY,UAAY,iBACa,SAApCqY,EAAOlV,QAAQmlB,QAAQhiC,UACvB6xB,EAAe2E,YAAYzE,EAAOiQ,QAAQrsB,SAE9Ckc,EAAe2E,YAAYzE,EAAO4M,QAAQhpB,QAAQgN,eAClDkP,EAAe2E,YAAYzE,EAAO0M,GAAG9oB,SACrCkc,EAAe2E,YAAYzE,EAAO8M,GAAGlpB,QAAQgN,eAC7CkP,EAAe2E,YAAYzE,EAAOrxB,QAAQiV,SACtCoc,EAAOoB,QAAQyN,SAAS3B,UACxBpN,EAAe2E,YAAYzE,EAAOkN,SAAStpB,SAEP,UAApCoc,EAAOlV,QAAQmlB,QAAQhiC,WACvB+xB,EAAOiQ,QAAQrsB,QAAQyC,UAAUC,IAAI,yBACrCwZ,EAAe2E,YAAYzE,EAAOiQ,QAAQrsB,UAE1Coc,EAAO8X,QACPhY,EAAe2E,YAAYzE,EAAO8X,OAAOl0B,SAEzCoc,EAAOlV,QAAQkjB,OAAOv/B,QACtBqxB,EAAe2E,YAAYzE,EAAOgO,OAAOpqB,SAE7Ckc,EAAe2E,YAAYzE,EAAO+O,KAAKnrB,SACvCkc,EAAe2E,YAAYzE,EAAO7xB,IAAIyV,SACtCoc,EAAOpc,QAAQ6gB,YAAY3E,GACvBE,EAAOoB,QAAQyN,SAASkJ,QAExB/X,EAAOpc,QAAQoR,mBAAmB,YAAa,6DAEnDgjB,GAAYhY,EAAQA,EAAOlV,QAAQY,KAAMusB,EAAYjY,EAAQF,IAC7Djc,SAASgoB,YAAY,6BAA6B,EAAO,KACrDzG,UAAUC,UAAU33B,QAAQ,WAAa,GAAsC,qBAA1B+W,OAAOyzB,eAAgC,CAE5F,IAAIC,GAAkB,EAClBC,EAAkB,SAAUhvB,GACxB+uB,IAGJA,GAAkB,EAClBE,uBAAsB,WAClBF,GAAkB,EAClB,IAAIG,EAAiBtY,EAAOoB,QAAQxd,QACpC00B,EAAe3zB,MAAMkJ,UAAY,OAC7ByqB,EAAe9uB,wBAAwB9C,IAAM,IAC7C4xB,EAAe3zB,MAAMkJ,UAAY,iBAAmByqB,EAAe9uB,wBAAwB9C,IAAM,YAI7GjC,OAAOyzB,eAAe9zB,iBAAiB,SAAUg0B,GACjD3zB,OAAOyzB,eAAe9zB,iBAAiB,SAAUg0B,KAGrDG,EAAa,SAAUvY,GACvB,IAAIwY,EAAa/zB,OAAO0e,YAAcrd,EAAsCyE,EAAEiF,aAAe,GAAK,GAClG,GAA2D,SAAvDwQ,EAAO4M,QAAQhpB,QAAQgN,cAAcjM,MAAMwE,QAAoB,CAC/D,IAAInJ,GAAWggB,EAAO4M,QAAQhpB,QAAQgN,cAAcpM,YAC9Cwb,EAAOlV,QAAQnc,QAAQ8pC,UAAY,EACzCzY,EAAO4M,QAAQhpB,QAAQe,MAAM3E,QAAU,QAAU7P,KAAKzB,IAAI8pC,EAAYx4B,GAAW,KAErF,GAAsD,SAAlDggB,EAAO8M,GAAGlpB,QAAQgN,cAAcjM,MAAMwE,QAAoB,CACtDnJ,GAAWggB,EAAO8M,GAAGlpB,QAAQgN,cAAcpM,YACzCwb,EAAOlV,QAAQnc,QAAQ8pC,UAAY,EACzCzY,EAAO8M,GAAGlpB,QAAQe,MAAM3E,QAAU,QAAU7P,KAAKzB,IAAI8pC,EAAYx4B,GAAW,KAEnC,UAAzCggB,EAAOrxB,QAAQiV,QAAQe,MAAMwE,SAA8C,OAAvB6W,EAAOQ,cAC3DR,EAAOoB,QAAQxd,QAAQe,MAAM+zB,YAAcvoC,KAAKzB,IAAI,EAAGgB,SAASswB,EAAOA,EAAOQ,aAAa5c,QAAQe,MAAM+zB,aAAe,IAAK,KACpF,SAApC1Y,EAAOlV,QAAQmlB,QAAQhiC,SAAsB+xB,EAAOiQ,QAAQrsB,QAAQ+0B,YAAc,IAAM,OAGjGC,EAAwB,SAAU5Y,GAClC,GAAKA,EAAOlV,QAAQ+tB,eAApB,CAGA,IAAIxqC,EAASoW,OAAOC,YACiB,kBAA1Bsb,EAAOlV,QAAQzc,SACtBA,EAAS2xB,EAAOlV,QAAQzc,OACgB,kBAA7B2xB,EAAOlV,QAAQ5a,YACtB7B,EAAS8B,KAAKzB,IAAIL,EAAQ2xB,EAAOlV,QAAQ5a,YAE7C7B,EAAS8B,KAAKwI,IAAI8L,OAAOC,YAAarW,IAEtC2xB,EAAOpc,QAAQyC,UAAUwK,SAAS,wBAClCxiB,EAASoW,OAAOC,aAGpBsb,EAAOA,EAAOQ,aAAa5c,QAAQe,MAAMm0B,YAAY,mBAAqBzqC,EAAS2xB,EAAOoB,QAAQxd,QAAQyd,cAAgB,EAAK,QAE/H4W,EAAc,SAAUjY,EAAQF,GAChC8Y,EAAsB5Y,GACtBvb,OAAOL,iBAAiB,UAAU,WAC9Bm0B,EAAWvY,GACX4Y,EAAsB5Y,MAG1B,IAAI+Y,GAAY,EAAG9K,EAAsC+K,OAASvT,aAAawT,QAAQjZ,EAAOlV,QAAQouB,MAAM1yB,IAY5G,OAXKwZ,EAAOlV,QAAQouB,MAAMzqC,QAAWsqC,IAC7B/Y,EAAOlV,QAAQntB,MACfo7C,EAAY/Y,EAAOlV,QAAQntB,MAEtBqiC,EAAOmZ,kBACZJ,EAAY/Y,EAAO7T,KAAKitB,QAAQpZ,EAAOmZ,mBAEjCnZ,EAAOlV,QAAQouB,MAAMzqC,SAC3BsqC,EAAY,KAGbA,GAAa,IASpBM,EAAqB,SAAUrZ,GAC/BsZ,aAAatZ,EAAOA,EAAOQ,aAAa+Y,oBACxCvZ,EAAOA,EAAOQ,aAAa+Y,mBAAqB90B,OAAOjkB,YAAW,WAC9D,GAA2E,UAAvEw/B,EAAOA,EAAOQ,aAAa5c,QAAQO,aAAa,qBAG/C,EAAGgD,EAA8BqyB,IAAIxZ,EAAOA,EAAOQ,aAAa5c,SAArE,CAGAsqB,EAAqBlO,EAAOoB,QAAQyN,SAAU/oB,EAAuCyE,EAAEmF,eACvF4e,EAActO,EAAOoB,QAAQyN,SAAU/oB,EAAuCyE,EAAEmF,eAChF,IAAI6Y,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CyZ,EAAclR,EAAME,eACc,IAAlCF,EAAME,eAAepB,WACrBoS,EAAclR,EAAME,eAAe7X,eAEnC6oB,EAAYpzB,UAAUwK,SAAS,kBAC/B4oB,EAAcA,EAAYnQ,WAAWf,EAAMc,cAE/C,IAAI3a,EAAwC,OAAvBsR,EAAOQ,aACxB,EAAGva,EAAsCorB,IAAIoI,EAAa,YAAa,YAAa,EAAG3R,EAA+C1H,GAAGqZ,GACzI/qB,GACA2f,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,aAEhD,IAAI6K,EAAsC,OAAvB1Z,EAAOQ,aAAuB,EAAGva,EAAsCorB,IAAIoI,EAAa,YAAa,eACpH,EAAGxzB,EAAqCuI,IAAIirB,EAAa,cACzDC,GACArL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,UAEhD,IAAI8K,GAAgB,EAAG1zB,EAAsCorB,IAAIoI,EAAa,YAAa,UACvFE,GACAtL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,SAEhD,IAAI+K,GAAY,EAAG3zB,EAAsCorB,IAAIoI,EAAa,YAAa,MACnFG,GACAvL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,WAEhD,IAAIgL,GAAW,EAAG5zB,EAAsCorB,IAAIoI,EAAa,YAAa,KAClFI,GACAxL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,WAEhD,IAAIrW,GAAW,EAAGvS,EAAsCorB,IAAIoI,EAAa,YAAa,KAClFjhB,GACA6V,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,SAEhD,IAAIiL,GAAY,EAAG7zB,EAAqCuI,IAAIirB,EAAa,MACrEK,GACIA,EAAUzzB,UAAUwK,SAAS,eAC7Bwd,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,UAEH,OAApCiL,EAAUlpB,cAAc6E,QAC7B4Y,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,iBAEH,OAApCiL,EAAUlpB,cAAc6E,SAC7B4Y,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,SAEhDP,EAActO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,YAGnDN,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,WAExD,IAAIkL,GAAmB,EAAG9zB,EAAsCorB,IAAIoI,EAAa,YAAa,cAC1FM,IACAxL,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,cAAe,SAAU,OAAQ,QAAS,WACvFR,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,UAEhD,IAAI5c,GAAc,EAAGhM,EAAsCorB,IAAIoI,EAAa,YAAa,QACrFxnB,IACAsc,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,SAAU,OAAQ,QAAS,WACxER,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,iBAEhD,IAAIqG,GAAe,EAAGjvB,EAAsCorB,IAAIoI,EAAa,YAAa,SACtFvE,GACA3G,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,WAAY,OAAQ,eAAgB,QAAS,OAClF,QAAS,OAAQ,aAE1B,MAMHmL,GAAmB,SAAUha,EAAQlV,QACrB,IAAZA,IAAsBA,EAAU,CAChCunB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEbznB,EAAQwnB,YACRtS,EAAO+O,KAAK/tC,OAAOg/B,GAEvBsZ,aAAatZ,EAAO4M,QAAQqN,sBAC5Bja,EAAO4M,QAAQqN,qBAAuBx1B,OAAOjkB,YAAW,WACpD,IAAIw/B,EAAO4M,QAAQgH,cAAnB,CAGA,IAAIlhC,EAAO+5B,EAAYzM,GACa,oBAAzBA,EAAOlV,QAAQ/qB,OAAwB+qB,EAAQynB,aACtDvS,EAAOlV,QAAQ/qB,MAAM2S,GAErBstB,EAAOlV,QAAQtc,QAAQC,QACvBuxB,EAAOxxB,QAAQxN,OAAOg/B,EAAQttB,GAE9BstB,EAAOlV,QAAQouB,MAAMzqC,SAAU,EAAGw/B,EAAsC+K,QACxEvT,aAAayU,QAAQla,EAAOlV,QAAQouB,MAAM1yB,GAAI9T,GAC1CstB,EAAOlV,QAAQouB,MAAMpqC,OACrBkxB,EAAOlV,QAAQouB,MAAMpqC,MAAM4D,IAG/BstB,EAAOkN,UACPlN,EAAOkN,SAASF,aAAahN,GAE7BlV,EAAQunB,oBACRrS,EAAO8T,KAAKqG,eAAena,MAEhCA,EAAOlV,QAAQsvB,YAMlBC,GAAmB,SAAUljB,GAC7B,IAAI6Z,EAAe7Z,EAAKkU,gBACxB,MAAO2F,EAAc,CACjB,GAA8B,IAA1BA,EAAa3J,UAA2C,MAAzB2J,EAAavb,UAAoBub,EAAa3F,iBACG,KAA7E2F,EAAavoB,UAAUjL,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAAc0hB,EAAapG,YACnG,OAAOoG,EAEXA,EAAeA,EAAa3F,gBAEhC,OAAO,GAEPiP,GAAa,SAAU/R,GACvB,IAAI4K,EAAW5K,EAAME,eAAemC,YACpC,MAAOuI,GAAqC,KAAzBA,EAASniB,YACxBmiB,EAAWA,EAASvI,YAExB,SAAIuI,GAAkC,IAAtBA,EAAS9L,UAAwC,SAArB8L,EAAS1d,SACV,gBAAvC0d,EAAShvB,aAAa,cACiB,gBAAvCgvB,EAAShvB,aAAa,cACiB,gBAAvCgvB,EAAShvB,aAAa,eAK1Bo2B,GAAc,SAAUpjB,GACxB,IAAIha,EAAO,GACPg2B,EAAWhc,EAAKyT,YACpB,MAAOuI,EACuB,IAAtBA,EAAS9L,SACTlqB,GAAQg2B,EAASniB,YAGjB7T,GAAQg2B,EAASzf,UAErByf,EAAWA,EAASvI,YAExB,OAAOztB,GAEPq9B,GAAkB,SAAUrjB,GAC5B,IAAIha,EAAO,GACP6zB,EAAe7Z,EAAKkU,gBACxB,MAAO2F,EAEC7zB,EAD0B,IAA1B6zB,EAAa3J,SACN2J,EAAahgB,YAAc7T,EAG3B6zB,EAAatd,UAAYvW,EAEpC6zB,EAAeA,EAAa3F,gBAEhC,OAAOluB,GAEPs9B,GAA2B,SAAUC,GACrC,IAAIvH,EAAWuH,EACf,MAAOvH,IAAaA,EAASvI,YACzBuI,EAAWA,EAASviB,cAExB,OAAOuiB,EAASvI,aAEhB+P,GAAe,SAAUpS,GACzB,IAAIqS,EAAeJ,GAAgBjS,EAAME,gBACrCoS,EAAWN,GAAYhS,EAAME,gBAC7B/1B,EAAO61B,EAAME,eAAezX,YAC5BiO,EAASsJ,EAAMc,YACfyR,EAAa,GACbC,EAAY,GAOhB,OAN+B,KAA3BroC,EAAK+T,OAAO,EAAGwY,IAAkBvsB,EAAK+T,OAAO,EAAGwY,KAAYnZ,EAA8ByE,EAAE+E,MAAQsrB,KACpGE,EAAa,GAAKF,EAAeloC,EAAK+T,OAAO,EAAGwY,KAExB,KAAxBvsB,EAAK+T,OAAOwY,IAAkBvsB,EAAK+T,OAAOwY,KAAYnZ,EAA8ByE,EAAE+E,MAAQurB,KAC9FE,EAAY,GAAKroC,EAAK+T,OAAOwY,GAAU4b,GAEpC,CACHE,UAAWA,EACXD,WAAYA,IAGhBE,GAAY,SAAUhb,EAAQuI,GAE9BnyB,MAAM+pB,KAAKH,EAAO4M,QAAQhpB,QAAQ0lB,YAAYzoC,MAAK,SAAUs2B,GACzD,GAAsB,IAAlBA,EAAKkQ,SAAgB,CACrB,IAAIkN,EAAW1wB,SAASI,cAAc,KACtCswB,EAAS5qB,aAAa,aAAc,KACpC4qB,EAASvjB,YAAcmG,EAAKnG,YAE5B,IAAIiqB,EAAqD,IAAlC1S,EAAME,eAAepB,SAAiBkB,EAAMc,YAAclS,EAAKnG,YAAY7pB,OAMlG,OALAgwB,EAAK+jB,WAAWC,aAAa5G,EAAUpd,GACvCA,EAAKjF,SACLqW,EAAMM,SAAS0L,EAASM,WAAY1kC,KAAKwI,IAAI47B,EAASM,WAAW7jB,YAAY7pB,OAAQ8zC,IACrF1S,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IACjC,EAEN,IAAKpR,EAAKhT,aAAa,cAuBxB,MAtBqB,MAAjBgT,EAAK1B,QACL0B,EAAKjF,UAGgB,QAAjBiF,EAAK1B,SACL8S,EAAMgD,WAAW1nB,SAASI,cAAc,QAExCkT,EAAKzD,UAAY,qBAAyByD,EAAK1O,UAAY,QAGtC,OAAjB0O,EAAK1B,QAEL0B,EAAKzD,UAAY,qBAAyByD,EAAKzD,UAAY,aAG3D6U,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCkT,EAAKzD,UAAY,qBAAyByD,EAAKzD,UAAY,SAGnE,EAAGvM,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5DA,EAAQtf,eAAeI,WAAW,KAE/B,MASf+xB,GAAa,SAAUpb,EAAQvK,GAC/B,IAAI8S,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CwH,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAC3DjB,IACDA,EAAee,EAAME,eAAea,WAAWf,EAAMc,cAEpD7B,GAA2D,IAA3CxH,EAAO4M,QAAQhpB,QAAQ2b,SAASp4B,SACjDqgC,EAAexH,EAAO4M,QAAQhpB,SAE9B4jB,IAAiBA,EAAanhB,UAAUwK,SAAS,2BACjD0X,EAAMgD,WAAW1nB,SAASI,cAAc,QAEF,UAAlCujB,EAAa/e,UAAUS,SAEvBse,EAAa/e,UAAY,aAEA,eAAzB+e,EAAa/R,SAA4B+R,EAAanhB,UAAUwK,SAAS,gBACzE2W,EAAa/e,UAAY,IAAMgN,EAAU,mBAAuB+R,EAAa/e,UAAUS,OAAS,KAAOuM,EAAU,IAGjH+R,EAAa9T,UAAY,IAAM+B,EAAU,mBAAuB+R,EAAa/e,UAAUS,OAAS,KAAOuM,EAAU,KAErH,EAAGtO,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5DyH,EAAUhQ,KAGdqb,GAAgB,SAAUrb,GAC1B,IAAIuI,EAAQtf,eAAeI,WAAW,GAClCme,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAC3DjB,IACDA,EAAee,EAAME,eAAea,WAAWf,EAAMc,cAErD7B,IACAe,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCujB,EAAa9T,UAAY,qBAAyB8T,EAAa/e,UAAY,QAC3E,EAAGtB,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,IAEhEvI,EAAO4M,QAAQoC,QAAQrqB,MAAMwE,QAAU,QAMvCmyB,GAAW,SAAU3tB,EAAgBqS,EAAQub,QAC/B,IAAVA,IAAoBA,GAAQ,GAChC,IAAIC,EAAkB7tB,EAAewd,uBACjC5C,EAAQiT,EAAgB7S,cAAcC,cACV,SAA5B4S,EAAgB/lB,SAChB+lB,EAAgB72B,MAAMwE,QAAU,eAC5BoyB,EACAhT,EAAMM,SAAS2S,EAAgB3G,WAAY,GAG3CtM,EAAM+B,mBAAmBkR,KAI7BA,EAAgB72B,MAAMwE,QAAU,QAC3BqyB,EAAgB3G,WAAWA,YAC5B2G,EAAgB3G,WAAWpQ,YAAY5gB,SAAS2nB,eAAe,KAEnEjD,EAAM+B,mBAAmBkR,EAAgB3G,aAEzC0G,EACAhT,EAAMO,UAAS,GAGfP,EAAMO,UAAS,IAEnB,EAAG3hB,EAAiC4B,IAAIwf,GACpC5a,EAAeoT,kBAAkB1a,UAAUwK,SAAS,qBAGxD6lB,GAAa1W,IAiBbyb,GAAwC,SAAUzb,EAAQ5W,GAG1D,GADA4W,EAAO4M,QAAQgH,cAAgBxqB,EAAMyqB,YACjCzqB,EAAMyqB,YACN,OAAO,GAGyB,IAAhCzqB,EAAM5rB,IAAIkQ,QAAQ,UAAiC,SAAd0b,EAAM5rB,KAAgC,YAAd4rB,EAAM5rB,KAAmC,QAAd4rB,EAAM5rB,KAChF,UAAd4rB,EAAM5rB,KAAiC,aAAd4rB,EAAM5rB,KAAoC,WAAd4rB,EAAM5rB,KAAqB,aAAa0oC,KAAK9c,EAAM5rB,MACxGwiC,EAAO8T,KAAKC,oBAAoB/T,EAAQ5W,GAE5C,IAAImf,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CyI,EAAiBF,EAAME,eAC3B,IAAKwL,GAAkB7qB,EAAO4W,EAAQyI,GAClC,OAAO,EAKX,GAHAyL,GAAe3L,EAAOvI,EAAQ5W,GAC9B+qB,GAAM5L,GAEY,UAAdnf,EAAM5rB,KAAiC,QAAd4rB,EAAM5rB,KAA+B,cAAd4rB,EAAM5rB,MAAuD,IAAhC4rB,EAAM5rB,IAAIkQ,QAAQ,YAC3F,EAAGugC,EAA0ByE,IAAItpB,IAAwB,WAAdA,EAAM5rB,KAAkC,WAAd4rB,EAAM5rB,IAC/E,OAAO,EAEX,IAAIgqC,GAAe,EAAGvhB,EAAgC8lB,IAAItD,GACtD8L,GAAW,EAAGtuB,EAAqCuI,IAAIia,EAAgB,KAE3E,GAAI+L,GAAYprB,EAAO4W,EAAQuU,EAAUhM,GACrC,OAAO,EAGX,GAAIkM,GAAQlM,EAAOvI,EAAQuU,EAAUnrB,GACjC,OAAO,EAGX,GAAIksB,GAAStV,EAAQ5W,EAAOmf,GACxB,OAAO,EAGX,IAAIqM,GAAoB,EAAG3uB,EAAsCwI,IAAIga,EAAgB,yBACrF,GAAImM,EAAmB,CAEnB,GAAkB,WAAdxrB,EAAM5rB,KAA0D,IAAtCo3C,EAAkBrV,SAASp4B,OAKrD,OAJA64B,EAAO4M,QAAQoC,QAAQrqB,MAAMwE,QAAU,OACvCyrB,EAAkB7T,kBAAkBpc,MAAMwE,QAAU,OACpD6W,EAAO4M,QAAQhpB,QAAQ83B,OACvBtyB,EAAMyM,kBACC,EAGX,KAAK,EAAGoY,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,UAAYxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,KACrC,eAAhDo3C,EAAkBzwB,aAAa,aAA+B,CAC9D,IAAIw3B,EAAgB3b,EAAO4M,QAAQoC,QAAQzqB,cAAc,iBAIzD,OAHAo3B,EAAcjT,QACdiT,EAAcC,SACdxyB,EAAMyM,kBACC,EAEX,GAAqD,MAAjD+e,EAAkBzwB,aAAa,cAAuB,CACtD,GAAI2wB,GAAa9U,EAAQ5W,EAAOwrB,EAAkB7T,kBAAmBwH,GACjE,OAAO,EAEX,GAAIiI,GAAiBxQ,EAAQ5W,EAAOmf,EAAOqM,EAAkB7T,kBAAmB6T,GAC5E,OAAO,EAEX,GAAoD,sBAAhDA,EAAkBzwB,aAAa,cAC/BmsB,GAAkBtQ,EAAQ5W,EAAOmf,EAAOqM,EAAkB7T,kBAAmB6T,GAC7E,OAAO,GAKnB,GAAIF,GAAc1U,EAAQuI,EAAOnf,EAAOmrB,GACpC,OAAO,EAGX,IAAIsH,GAAe,EAAG51B,EAAmC61B,IAAIrT,EAAgB,cAC7E,GAAIoT,IACKzyB,EAAMwpB,UAAYxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,IAAiB,EACrD,EAAGywC,EAA0ByE,IAAItpB,GAMlCmf,EAAMsC,eAAegR,GAJrBtT,EAAMuC,cAAc+Q,IAMxB,EAAG10B,EAAiC4B,IAAIwf,GACxC,IAAIpR,EAAOtT,SAASI,cAAc,KASlC,OARAkT,EAAKxN,aAAa,aAAc,KAChCwN,EAAK1O,UAAY,KACjB8f,EAAMgD,WAAWpU,GACjBoR,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,GACxCyR,GAAiBha,GACjB0W,GAAa1W,GACb5W,EAAMyM,kBACC,EAIf,IAAInH,GAAiB,EAAGoZ,EAA+C1H,GAAGqI,GAC1E,GAAI/Z,EAAgB,CAChB,GAA+B,OAA3BA,EAAe+G,SAAoBgT,EAAezX,YAAY7pB,SAAWohC,EAAMc,eAC9E,EAAG4E,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,IAAiB,CAEvG,IAAIu+C,EAAel4B,SAASI,cAAc,KAS1C,OARA83B,EAAa/qB,YAAc,KAC3B+qB,EAAapyB,aAAa,aAAc,KACxC8e,EAAe7X,cAAc/I,sBAAsB,WAAYk0B,GAC/DxT,EAAMM,SAASkT,EAAc,IAC7B,EAAG50B,EAAiC4B,IAAIwf,GACxCyR,GAAiBha,GACjB0W,GAAa1W,GACb5W,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,KAAMppB,GAAQ,CAC1B,IAAI0I,EAAQpiB,SAASgf,EAAe+G,QAAQhP,OAAO,GAAI,IAAM,EAM7D,OALIqL,EAAQ,IACRspB,GAAWpb,EAAQ,IAAMlO,GACzBkoB,GAAiBha,IAErB5W,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,KAAMppB,GAAQ,CACtB0I,EAAQpiB,SAASgf,EAAe+G,QAAQhP,OAAO,GAAI,IAAM,EAM7D,OALIqL,EAAQ,IACRspB,GAAWpb,EAAQ,IAAMlO,GACzBkoB,GAAiBha,IAErB5W,EAAMyM,kBACC,EAEO,cAAdzM,EAAM5rB,MAAwB,EAAGywC,EAA0ByE,IAAItpB,IAAWA,EAAMwpB,UAAaxpB,EAAMupB,QAC1D,IAAtCjkB,EAAesC,YAAY7pB,QAE9Bk0C,GAAcrb,GAItB,GAAIuV,GAAQvV,EAAQuI,EAAOnf,GACvB,OAAO,EAGX,GAAIA,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,OAAoB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,SAAU,CAEtG,IAAIpa,GAAW,EAAGvS,EAAqCuI,IAAIia,EAAgB,KACvEuT,GAAgB,EAAG/1B,EAAsCorB,IAAI5I,EAAgB,YAAa,YAC1FsJ,GAAqB,EAAG9rB,EAAsCorB,IAAI5I,EAAgB,YAAa,iBACnG,GAAIjQ,GAAYwjB,GAAiBjK,GAC5BrjB,GAAoD,IAAlCA,EAAe+G,QAAQtuB,OAAe,CACzD,IAAI80C,EAAejc,EAAO4M,QAAQoC,QAAQzqB,cAAc,SACxD03B,EAAavT,QACbuT,EAAaL,UAIrB,GAAIM,GAAmBlc,EAAQ5W,GAC3B,OAAO,EAGX,GAAIopB,EAAY,MAAOppB,GAAQ,CAC3B,IAAIglB,EAAcpO,EAAO4M,QAAQoC,QAAQzqB,cAAc,oBACvD,GAAI6pB,EAGA,OAFAA,EAAY+N,QACZ/yB,EAAMyM,kBACC,EAIf,GAAI2c,EAAY,MAAOppB,GAAQ,CACvBglB,EAAcpO,EAAO4M,QAAQoC,QAAQzqB,cAAc,sBACvD,GAAI6pB,EAGA,OAFAA,EAAY+N,QACZ/yB,EAAMyM,kBACC,EAGf,GAAI2f,GAAOxV,EAAQuI,EAAOnf,GACtB,OAAO,EAGX,KAAK,EAAG6kB,EAA0ByE,IAAItpB,IAAUA,EAAMwpB,WAAaxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,KAC5C,OAAzCirC,EAAe7X,cAAc6E,SAA6D,MAAzCgT,EAAe7X,cAAc6E,QAa9E,MAZI,CAAC,SAAU,SAAU,IAAK,IAAK,KAAM,KAAKxB,SAASwU,EAAe7X,cAAc6E,SAEhF8S,EAAMgD,WAAW1nB,SAAS2nB,eAAe,KAAO1lB,EAA8ByE,EAAE+E,OAGhFiZ,EAAMgD,WAAW1nB,SAAS2nB,eAAe,OAE7CjD,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,GACxCyR,GAAiBha,GACjB0W,GAAa1W,GACb5W,EAAMyM,kBACC,EAGX,GAAkB,cAAdzM,EAAM5rB,OAAwB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QAA+B,KAArBpK,EAAMxgC,WAAmB,CACtI,GAAI4tC,GAAU3V,EAAQuI,EAAOnf,EAAOmrB,GAChC,OAAO,EAEX,GAAI/M,EAAc,CACd,GAAIA,EAAa2D,wBACV3D,EAAa2D,uBAAuB9kB,UAAUwK,SAAS,0BACY,MAAnE2W,EAAa2D,uBAAuBhnB,aAAa,eAExB,OAAzBqjB,EAAa/R,SAA6C,OAAzB+R,EAAa/R,QAAkB,CACnE,IAAImgB,GAAa,EAAGzuB,EAAiCipB,IAAI5I,EAAcxH,EAAO4M,QAAQhpB,QAAS2kB,GAAO9oB,MACtG,GAAoB,IAAfm2B,GAA0C,IAAtBrN,EAAMc,aACX,IAAfuM,GAAoBpO,EAAapW,UAAU+U,WAAWrgB,EAA8ByE,EAAE+E,MASvF,OAPAgsB,GAAS9T,EAAa2D,uBAAuBW,iBAAkB9L,GAAQ,GACiB,KAApFwH,EAAa/e,UAAUS,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,MAE5EkY,EAAatV,SACb8nB,GAAiBha,IAErB5W,EAAMyM,kBACC,EAGf,IAAIumB,EAAmB7T,EAAMc,YAC7B,GAAyB,KAArBd,EAAMxgC,YAAiD,IAA5B0gC,EAAepB,UACkB,OAA5DoB,EAAezX,YAAY1oB,OAAO8zC,EAAmB,IACrD3T,EAAezX,YAAY1oB,OAAO8zC,EAAmB,KAAOt2B,EAA8ByE,EAAE+E,MACzF,CAAC,SAAU,SAAU,IAAK,IAAK,KAAM,KAAK2E,SAASwU,EAAe7X,cAAc6E,SAQnF,OANAgT,EAAezX,YAAcyX,EAAezX,YAAYxd,UAAU,EAAG4oC,EAAmB,GACpFt2B,EAA8ByE,EAAE+E,KACpCiZ,EAAMM,SAASJ,EAAgB2T,GAC/B7T,EAAMO,UAAS,GACfkR,GAAiBha,GACjB5W,EAAMyM,kBACC,EAGP4S,EAAezX,cAAgBlL,EAA8ByE,EAAE+E,MAA8B,IAAtBiZ,EAAMc,cACzEZ,EAAe4C,iBAAmBiP,GAAW/R,KACjDE,EAAezX,YAAc,IAIjCwW,EAAa3iB,iBAAiB,uDAAuDlgB,SAAQ,SAAUgH,GACnGA,EAAKo1B,kBAAkBpc,MAAMwE,QAAU,SACvCxd,EAAKmgC,iBAAiBnnB,MAAMwE,QAAU,UAE1Cqe,EAAa3iB,iBAAiB,uDAAuDlgB,SAAQ,SAAUgH,GACnGA,EAAKo1B,kBAAkBpc,MAAMwE,QAAU,SACvCxd,EAAKmgC,iBAAiBnnB,MAAMwE,QAAU,WAIlD,IAAI,EAAG8kB,EAA6B+E,OAA+B,IAAtBzK,EAAMc,aAAqBZ,EAAezX,YAAYtjB,QAAQoY,EAA8ByE,EAAE+E,OAAS,GAChJmZ,EAAe4C,iBAA+D,IAA5C5C,EAAe4C,gBAAgBhE,UACtB,SAA3CoB,EAAe4C,gBAAgB5V,UAChB,cAAdrM,EAAM5rB,KAAqC,cAAd4rB,EAAM5rB,KAKpC,OAHA+qC,EAAM+B,mBAAmB7B,EAAe4C,iBACxC9C,EAAMO,UAAS,GACf1f,EAAMyM,kBACC,EAEX,GAAIigB,GAAuB1sB,EAAOoe,EAAce,GAE5C,OADAnf,EAAMyM,kBACC,EAGX,GADAkgB,GAAwBxN,EAAOnf,EAAM5rB,KACnB,cAAd4rB,EAAM5rB,IAAqB,CAE3B,IAAI6+C,EAAc5T,EAAemC,YAC7ByR,GAAwC,IAAzBA,EAAYhV,UAA4D,gBAA1CgV,EAAYl4B,aAAa,cACtEokB,EAAMuC,cAAcuR,GAG5B,SAAI7U,IAAgB2I,EAAW3I,EAAcxH,EAAQ5W,EAAOmf,MACxDnf,EAAMyM,kBACC,IAIXqmB,GAAqB,SAAUlc,EAAQ5W,GAEvC,GAAIopB,EAAY,MAAOppB,GAAQ,CAC3B,IAAIglB,EAAcpO,EAAO4M,QAAQoC,QAAQzqB,cAAc,wBACvD,GAAI6pB,EAGA,OAFAA,EAAY+N,QACZ/yB,EAAMyM,kBACC,IAqBfymB,GAA0B,SAAUtc,GACpCsZ,aAAatZ,EAAO4M,QAAQ2M,oBAC5BvZ,EAAO4M,QAAQ2M,mBAAqB90B,OAAOjkB,YAAW,WAClD,GAA+D,UAA3Dw/B,EAAO4M,QAAQhpB,QAAQO,aAAa,qBAGnC,EAAGgD,EAA8BqyB,IAAIxZ,EAAO4M,QAAQhpB,SAAzD,CAGAsqB,EAAqBlO,EAAOoB,QAAQyN,SAAU/oB,EAAuCyE,EAAEmF,eACvF4e,EAActO,EAAOoB,QAAQyN,SAAU/oB,EAAuCyE,EAAEmF,eAChF,IAAI6Y,EAAQtf,eAAeI,WAAW,GAClCowB,EAAclR,EAAME,eAEpBgR,EADkC,IAAlClR,EAAME,eAAepB,SACPkB,EAAME,eAAe7X,cAGrB6oB,EAAYnQ,WAAWf,EAAMc,aAAeoQ,EAAYnQ,WAAWniC,OAC7EsyC,EAAYnQ,WAAWniC,OAAS,EAAIohC,EAAMc,aAElD,IAAIkT,GAAmB,EAAGt2B,EAAsCorB,IAAIoI,EAAa,YAAa,mBAC9F,GAAI8C,EAIA,OAHAvc,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnC+zB,GAASD,EAAkBvc,QAC3Byc,GAAmBzc,EAAQuc,GAI/B,IAAIzC,GAAY,EAAG7zB,EAAqCuI,IAAIirB,EAAa,MACrEK,GACIA,EAAUzzB,UAAUwK,SAAS,eAC7Bwd,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,UAEH,OAApCiL,EAAUlpB,cAAc6E,QAC7B4Y,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,iBAEH,OAApCiL,EAAUlpB,cAAc6E,SAC7B4Y,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,SAEhDP,EAActO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,YAGnDN,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,YAEpD,EAAG5oB,EAAqCuI,IAAIirB,EAAa,eACzDpL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,YAE5C,EAAG5oB,EAAqCuI,IAAIirB,EAAa,OAAQ,EAAGxzB,EAAqCuI,IAAIirB,EAAa,YAC1HpL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,WAE5C,EAAG5oB,EAAqCuI,IAAIirB,EAAa,OAAQ,EAAGxzB,EAAqCuI,IAAIirB,EAAa,QAC1HpL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,aAE5C,EAAG5oB,EAAqCuI,IAAIirB,EAAa,YAAa,EAAGxzB,EAAqCuI,IAAIirB,EAAa,OAC/HpL,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,WAGhD7O,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,0BAA0BlgB,SAAQ,SAAUgH,GAChFA,EAAK0a,UAAU6L,OAAO,4BAE1B,IAAIwqB,GAAiB,EAAGz2B,EAAsCwI,IAAIgrB,EAAa,kBAC/E,GAAIiD,EAAgB,CAChB,IAAIC,EAAQD,EAAev4B,aAAa,eAAe/F,MAAM,KAC7D,GAAIu+B,EAAMx1C,OAAS,GAAKu1C,EAAe9R,YAAYQ,WAAWsR,EAAe1b,oBAAqB,CAC9F,IAAI4b,EAAYF,EAAe1b,mBAAmB7c,aAAa,eAAe/F,MAAM,KACpFu+B,EAAM97C,MAAK,SAAU2lB,GACjB,GAAIo2B,EAAU3oB,SAASzN,GAEnB,OADAm2B,EAAQ,CAACn2B,IACF,KAInBwZ,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GACrEA,EAAKwY,aAAa,eAAezW,QAAQivC,EAAM,KAAO,GACtDhxC,EAAK0a,UAAUC,IAAI,4BAI/B,IAAIkS,GAAW,EAAGvS,EAAqCuI,IAAIirB,EAAa,KACpEjhB,GACA6V,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,SAEhD,IAAIqG,GAAe,EAAGjvB,EAAqCuI,IAAIirB,EAAa,SACxE/qB,GAAiB,EAAGoZ,EAA+C1H,GAAGqZ,IACtE,EAAGxzB,EAAqCuI,IAAIirB,EAAa,SACrD,EAAGxzB,EAAqCuI,IAAIirB,EAAa,QACzDlL,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,cAAe,SAAU,OAAQ,QAAS,WACvFR,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,WAG5CN,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,SAAU,OAAQ,QAAS,WACxER,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,iBAG3CngB,GACL6f,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,SACzCR,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,cAEvCqG,GACL3G,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,UAG7C,IAAI4B,GAAa,EAAGxqB,EAAsCwI,IAAIgrB,EAAa,cAC3E,GAAIhJ,EAIA,OAHAzQ,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnC+zB,GAAS/L,EAAYzQ,QACrByc,GAAmBzc,EAAQyQ,GAI/B,IAAIa,GAAoB,EAAGxJ,EAA0ChB,GAAG2S,EAAa,cAiBrF,GAhBInI,IACAtR,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnCo0B,GAAMtU,EAAO+I,EAAmBtR,GAChC8c,GAAQvU,EAAO+I,EAAmBtR,GAClCwc,GAASlL,EAAmBtR,GAC5Byc,GAAmBzc,EAAQsR,IAG3BwI,IACA9Z,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnCo0B,GAAMtU,EAAOuR,EAAW9Z,GACxB8c,GAAQvU,EAAOuR,EAAW9Z,GAC1Bwc,GAAS1C,EAAW9Z,GACpByc,GAAmBzc,EAAQ8Z,IAG3B5E,EAAc,CACdlV,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnC,IAAIs0B,EAAgB,WAChB,IAAIC,EAAS9H,EAAazlC,KAAKtI,OAC3B81C,EAAY/H,EAAazlC,KAAK,GAAGytC,MAAM/1C,OACvCg2C,EAAMztC,SAAS0tC,EAAQz/C,MAAO,KAAOq/C,EACrCK,EAAS3tC,SAAS4tC,EAAS3/C,MAAO,KAAOs/C,EAC7C,GAAIE,IAAQH,GAAUC,IAAcI,EAApC,CAGA,GAAIJ,IAAcI,EAEd,IADA,IAAIE,EAAaF,EAASJ,EACjBn8C,EAAI,EAAGA,EAAIo0C,EAAazlC,KAAKtI,OAAQrG,IAC1C,GAAIy8C,EAAa,EACb,IAAK,IAAI3nC,EAAI,EAAGA,EAAI2nC,EAAY3nC,IAClB,IAAN9U,EACAo0C,EAAazlC,KAAK3O,GAAGgrC,iBAAiB9W,mBAAmB,WAAY,cAGrEkgB,EAAazlC,KAAK3O,GAAGgrC,iBAAiB9W,mBAAmB,WAAY,mBAK7E,IAAK,IAAI9F,EAAI+tB,EAAY,EAAG/tB,GAAKmuB,EAAQnuB,IACrCgmB,EAAazlC,KAAK3O,GAAGo8C,MAAMhuB,GAAGgD,SAK9C,GAAI8qB,IAAWG,EAAK,CAChB,IAAIK,EAAUL,EAAMH,EACpB,GAAIQ,EAAU,EAAG,CAEb,IADA,IAAIC,EAAU,OACL76B,EAAI,EAAGA,EAAIy6B,EAAQz6B,IACxB66B,GAAW,aAEf,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAASE,IACrBxI,EAAa3wB,cAAc,SAC3B2wB,EAAa3wB,cAAc,SAASyQ,mBAAmB,YAAayoB,GAGpEvI,EAAa3wB,cAAc,SAASyQ,mBAAmB,WAAYyoB,EAAU,cAKrF,IAAS76B,EAAIo6B,EAAS,EAAGp6B,GAAKu6B,EAAKv6B,IAC/BsyB,EAAazlC,KAAKmT,GAAGsP,SACY,IAA7BgjB,EAAazlC,KAAKtI,QAClB+tC,EAAa3wB,cAAc,SAAS2N,YAMpDyrB,EAAa,SAAUh6C,GACvBi6C,GAAc1I,EAAcvxC,GACf,UAATA,GACAk6C,EAAOx3B,UAAU6L,OAAO,wBACxB4rB,EAASz3B,UAAU6L,OAAO,wBAC1B6rB,EAAQ13B,UAAUC,IAAI,yBAER,WAAT3iB,GACLk6C,EAAOx3B,UAAU6L,OAAO,wBACxB6rB,EAAQ13B,UAAU6L,OAAO,wBACzB4rB,EAASz3B,UAAUC,IAAI,0BAGvBw3B,EAASz3B,UAAU6L,OAAO,wBAC1B6rB,EAAQ13B,UAAU6L,OAAO,wBACzB2rB,EAAOx3B,UAAUC,IAAI,0BAEzB,EAAGa,EAAiC4B,IAAIwf,GACxCyR,GAAiBha,IAEjBge,GAAK,EAAG/3B,EAAqCuI,IAAIirB,EAAa,MAC9DwE,GAAK,EAAGh4B,EAAqCuI,IAAIirB,EAAa,MAC9DyE,EAAY,OACZF,EACAE,EAAYF,EAAG75B,aAAa,UAAY,OAEnC85B,IACLC,EAAYD,EAAG95B,aAAa,UAAY,UAE5C,IAAI05B,EAASh6B,SAASI,cAAc,UACpC45B,EAAOl0B,aAAa,OAAQ,UAC5Bk0B,EAAOl0B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM82B,UACpE,KAAM,EAAGlQ,EAAmCmQ,IAAI,OAAS,KAC7DP,EAAOl0B,aAAa,YAAa,QACjCk0B,EAAOp1B,UAAY,8DACnBo1B,EAAOl2B,UAAY,sDACA,SAAdu2B,EAAuB,wBAA0B,IACtDL,EAAOt3B,QAAU,WACbo3B,EAAW,SAEf,IAAIG,EAAWj6B,SAASI,cAAc,UACtC65B,EAASn0B,aAAa,OAAQ,UAC9Bm0B,EAASn0B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMg3B,YACtE,KAAM,EAAGpQ,EAAmCmQ,IAAI,OAAS,KAC7DN,EAASn0B,aAAa,YAAa,UACnCm0B,EAASr1B,UAAY,gEACrBq1B,EAASn2B,UAAY,sDACF,WAAdu2B,EAAyB,wBAA0B,IACxDJ,EAASv3B,QAAU,WACfo3B,EAAW,WAEf,IAAII,EAAUl6B,SAASI,cAAc,UACrC85B,EAAQp0B,aAAa,OAAQ,UAC7Bo0B,EAAQp0B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMi3B,WACrE,KAAM,EAAGrQ,EAAmCmQ,IAAI,OAAS,KAC7DL,EAAQp0B,aAAa,YAAa,SAClCo0B,EAAQt1B,UAAY,+DACpBs1B,EAAQp2B,UAAY,sDACD,UAAdu2B,EAAwB,wBAA0B,IACvDH,EAAQx3B,QAAU,WACdo3B,EAAW,UAEf,IAAIY,EAAmB16B,SAASI,cAAc,UAC9Cs6B,EAAiB50B,aAAa,OAAQ,UACtC40B,EAAiB50B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMm3B,eAC9E,KAAM,EAAGvQ,EAAmCmQ,IAAI,MAAQ,KAC5DG,EAAiB50B,aAAa,YAAa,aAC3C40B,EAAiB91B,UAAY,8DAC7B81B,EAAiB52B,UAAY,qDAC7B42B,EAAiBh4B,QAAU,WACvB,IAAIkiB,EAAiBxf,eAAeI,WAAW,GAAGof,eAC9CwM,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAC5DwM,GACAwJ,GAAUze,EAAQuI,EAAO0M,IAGjC,IAAIyJ,EAAoB76B,SAASI,cAAc,UAC/Cy6B,EAAkB/0B,aAAa,OAAQ,UACvC+0B,EAAkB/0B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMs3B,eAC/E,KAAM,EAAG1Q,EAAmCmQ,IAAI,OAAS,KAC7DM,EAAkB/0B,aAAa,YAAa,aAC5C+0B,EAAkBj2B,UAAY,+DAC9Bi2B,EAAkB/2B,UAAY,qDAC9B+2B,EAAkBn4B,QAAU,WACxB,IAAIkiB,EAAiBxf,eAAeI,WAAW,GAAGof,eAC9CwM,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAC5DwM,GACA0J,GAAe3e,EAAQuI,EAAO0M,IAGtC,IAAI2J,EAAsB/6B,SAASI,cAAc,UACjD26B,EAAoBj1B,aAAa,OAAQ,UACzCi1B,EAAoBj1B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMw3B,kBACjF,KAAM,EAAG5Q,EAAmCmQ,IAAI,OAAS,KAC7DQ,EAAoBj1B,aAAa,YAAa,gBAC9Ci1B,EAAoBn2B,UAAY,iEAChCm2B,EAAoBj3B,UAAY,qDAChCi3B,EAAoBr4B,QAAU,WAC1B,IAAIkiB,EAAiBxf,eAAeI,WAAW,GAAGof,eAC9CwM,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAC5DwM,GACA6J,GAAa9e,EAAQkV,EAAcD,IAG3C,IAAI8J,EAAuBl7B,SAASI,cAAc,UAClD86B,EAAqBp1B,aAAa,OAAQ,UAC1Co1B,EAAqBp1B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM23B,iBAClF,KAAM,EAAG/Q,EAAmCmQ,IAAI,OAAS,KAC7DW,EAAqBp1B,aAAa,YAAa,gBAC/Co1B,EAAqBt2B,UAAY,kEACjCs2B,EAAqBp3B,UAAY,qDACjCo3B,EAAqBx4B,QAAU,WAC3B,IAAIkiB,EAAiBxf,eAAeI,WAAW,GAAGof,eAC9CwM,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAC5DwM,GACA6J,GAAa9e,EAAQkV,EAAcD,EAAa,gBAGxD,IAAIgK,EAAmBp7B,SAASI,cAAc,UAC9Cg7B,EAAiBt1B,aAAa,OAAQ,UACtCs1B,EAAiBt1B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM,cAC9E,KAAM,EAAG4mB,EAAmCmQ,IAAI,MAAQ,KAC5Da,EAAiBt1B,aAAa,YAAa,aAC3Cs1B,EAAiBx2B,UAAY,8DAC7Bw2B,EAAiBt3B,UAAY,qDAC7Bs3B,EAAiB14B,QAAU,WACvB,IAAIkiB,EAAiBxf,eAAeI,WAAW,GAAGof,eAC9CwM,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAC5DwM,GACAiK,GAAUlf,EAAQuI,EAAO0M,IAGjC,IAAIkK,EAAsBt7B,SAASI,cAAc,UACjDk7B,EAAoBx1B,aAAa,OAAQ,UACzCw1B,EAAoBx1B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM,iBACjF,KAAM,EAAG4mB,EAAmCmQ,IAAI,OAAS,KAC7De,EAAoBx1B,aAAa,YAAa,gBAC9Cw1B,EAAoB12B,UAAY,iEAChC02B,EAAoBx3B,UAAY,qDAChCw3B,EAAoB54B,QAAU,WAC1B,IAAIkiB,EAAiBxf,eAAeI,WAAW,GAAGof,eAC9CwM,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAC5DwM,GACAmK,GAAapf,EAAQuI,EAAO2M,EAAcD,IAGlD,IAAIoK,EAAYx7B,SAASI,cAAc,QACvCo7B,EAAU11B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM81B,KAC3EkC,EAAU13B,UAAY,yCACtB,IAAIy1B,EAAUv5B,SAASI,cAAc,SACrCo7B,EAAU5a,YAAY2Y,GACtBA,EAAQz5C,KAAO,SACfy5C,EAAQzkC,IAAM,IACdykC,EAAQz1B,UAAY,eACpBy1B,EAAQz4B,MAAMwa,MAAQ,OACtBie,EAAQz4B,MAAM26B,UAAY,SAC1BlC,EAAQzzB,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM81B,KAC1EC,EAAQz/C,MAAQu3C,EAAazlC,KAAKtI,OAAOY,WACzCq1C,EAAQmC,QAAU,WACdxC,KAEJK,EAAQoC,UAAY,SAAUp2B,GAC1B,IAAIA,EAAMyqB,YAGV,MAAkB,QAAdzqB,EAAM5rB,KACN8/C,EAAS5U,QACT4U,EAAS1B,cACTxyB,EAAMyM,uBAGVqmB,GAAmBlc,EAAQ5W,IAE/B,IAAIq2B,EAAa57B,SAASI,cAAc,QACxCw7B,EAAW91B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMg2B,QAC5EoC,EAAW93B,UAAY,yCACvB,IAAI21B,EAAWz5B,SAASI,cAAc,SACtCw7B,EAAWhb,YAAY6Y,GACvBA,EAAS35C,KAAO,SAChB25C,EAAS3kC,IAAM,IACf2kC,EAAS31B,UAAY,eACrB21B,EAAS34B,MAAMwa,MAAQ,OACvBme,EAAS34B,MAAM26B,UAAY,SAC3BhC,EAAS3zB,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMg2B,QAC3EC,EAAS3/C,MAAQu3C,EAAazlC,KAAK,GAAGytC,MAAM/1C,OAAOY,WACnDu1C,EAASiC,QAAU,WACfxC,KAEJO,EAASkC,UAAY,SAAUp2B,GAC3B,IAAIA,EAAMyqB,YAGV,MAAkB,QAAdzqB,EAAM5rB,KACN4/C,EAAQ1U,QACR0U,EAAQxB,cACRxyB,EAAMyM,uBAGVqmB,GAAmBlc,EAAQ5W,IAE/ByzB,GAAMtU,EAAO2M,EAAclV,GAC3B8c,GAAQvU,EAAO2M,EAAclV,GAC7Bwc,GAAStH,EAAclV,GACvBA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAag2B,GAC1D7d,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAai2B,GAC1D9d,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAak2B,GAC1D/d,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAa62B,GAC1D1e,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAa02B,GAC1Dve,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAak3B,GAC1D/e,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAa+2B,GAC1D5e,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAao3B,GAC1Djf,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAas3B,GAC1Dnf,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaw3B,GAC1Drf,EAAO4M,QAAQoC,QAAQha,mBAAmB,YAAa,OACvDgL,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAa43B,GAC1DhD,GAAmBzc,EAAQkV,GAG/B,IAAIwK,GAAiB,EAAGz5B,EAAsCorB,IAAIoI,EAAa,YAAa,YACxFiG,GACAC,GAAkB3f,EAAQ0f,GAG9B,IAAIE,GAAsB,EAAG35B,EAAsCorB,IAAIoI,EAAa,YAAa,iBACjG,GAAImG,EAAqB,CACrB5f,EAAO4M,QAAQoC,QAAQvmB,UAAY,GAC/B42B,EAAYx7B,SAASI,cAAc,QACvCo7B,EAAU11B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMw4B,YACvE,KAAM,EAAG5R,EAAmCmQ,IAAI,UAAY,KAChEiB,EAAU13B,UAAY,yCACtB,IAAIm4B,EAAUj8B,SAASI,cAAc,SACrCo7B,EAAU5a,YAAYqb,GACtBA,EAAQn4B,UAAY,eACpBm4B,EAAQn2B,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMw4B,YAAc,KAAM,EAAG5R,EAAmCmQ,IAAI,UAAY,KACpJ0B,EAAQn7B,MAAMwa,MAAQ,QACtB2gB,EAAQniD,MAAQiiD,EAAoBz7B,aAAa,wBACjD27B,EAAQP,QAAU,WACe,KAAzBO,EAAQniD,MAAMurB,QACd02B,EAAoBj2B,aAAa,uBAAwBm2B,EAAQniD,QAGzEmiD,EAAQN,UAAY,SAAUp2B,GAC1B,IAAIA,EAAMyqB,YAGV,OAAK,EAAG5F,EAA0ByE,IAAItpB,IAAWA,EAAMwpB,WAAYxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,SAOzF0+C,GAAmBlc,EAAQ5W,IANvBmf,EAAM+B,mBAAmBsV,GACzBrX,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,QACxCnf,EAAMyM,mBAKd2mB,GAASoD,EAAqB5f,GAC9BA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaw3B,GAC1D5C,GAAmBzc,EAAQ4f,GAE/B,IAAIG,GAAqB,EAAG95B,EAAsCwI,IAAIgrB,EAAa,yBAEnF,GAAIsG,GAAsBA,EAAmB57B,aAAa,aAAazW,QAAQ,UAAY,EAAG,CAK1F,GAJAsyB,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnCo0B,GAAMtU,EAAOwX,EAAoB/f,GACjC8c,GAAQvU,EAAOwX,EAAoB/f,GACnCwc,GAASuD,EAAoB/f,GACwB,eAAjD+f,EAAmB57B,aAAa,aAA+B,CAC/D,IAAI67B,EAAen8B,SAASI,cAAc,QAC1C+7B,EAAar2B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM0oB,SAC1E,KAAM,EAAG9B,EAAmCmQ,IAAI,UAAY,KAChE4B,EAAar4B,UAAY,yCACzB,IAAIs4B,EAAap8B,SAASI,cAAc,SACxC+7B,EAAavb,YAAYwb,GACzB,IAAIC,EAAgBH,EAAmBhf,kBAAkBA,kBACzDkf,EAAWt4B,UAAY,eACvBs4B,EAAWt2B,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM0oB,SAAW,KAAM,EAAG9B,EAAmCmQ,IAAI,UAAY,KACpJ6B,EAAWtiD,MAAQuiD,EAAcv4B,UAAUja,QAAQ,cAAgB,EAC/DwyC,EAAcv4B,UAAUvJ,MAAM,KAAK,GAAGA,MAAM,KAAK,GAAK,GAC1D6hC,EAAWV,QAAU,WACe,KAA5BU,EAAWtiD,MAAMurB,OACjBg3B,EAAcv4B,UAAY,YAAcs4B,EAAWtiD,OAGnDuiD,EAAcv4B,UAAY,GAC1BqY,EAAO+O,KAAKiG,eAAiB,IAE7B+K,EAAmBjU,iBAAiBzlB,UAAUwK,SAAS,6BACvDkvB,EAAmBjU,iBAAiBrjB,UAAYs3B,EAAmBhf,kBAAkBtY,UACrFonB,EAAkBkQ,EAAmBjU,iBAAkB9L,IAE3Dga,GAAiBha,IAErBigB,EAAWT,UAAY,SAAUp2B,GAC7B,IAAIA,EAAMyqB,cAGNqI,GAAmBlc,EAAQ5W,GAA/B,CAGA,GAAkB,WAAdA,EAAM5rB,KAA0D,UAAtCwiC,EAAO+O,KAAKnrB,QAAQe,MAAMwE,QAGpD,OAFA6W,EAAO+O,KAAKnrB,QAAQe,MAAMwE,QAAU,YACpCC,EAAMyM,kBAGL,EAAGoY,EAA0ByE,IAAItpB,IAAWA,EAAMwpB,WAAYxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,MACrF+qC,EAAMM,SAASqX,EAAcrL,WAAY,GACzCtM,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IAE5CvI,EAAO+O,KAAK6M,OAAOxyB,EAAO4W,KAE9BigB,EAAWE,QAAU,SAAU/2B,GAC3B,IAAIA,EAAMyqB,aAA6B,UAAdzqB,EAAM5rB,KAAiC,YAAd4rB,EAAM5rB,KAAmC,WAAd4rB,EAAM5rB,KAC9D,cAAd4rB,EAAM5rB,IADb,CAIA,IAAI4iD,EAAgB,GAChB5iD,EAAMyiD,EAAWtiD,MAAM6V,UAAU,EAAGysC,EAAWI,gBACnDv6B,EAAgDyE,EAAEqF,eAAejrB,SAAQ,SAAU27C,GAC3EA,EAAQ5yC,QAAQlQ,EAAI+nC,gBAAkB,GACtC6a,EAAcv5C,KAAK,CACfsW,KAAMmjC,EACN3iD,MAAO2iD,OAInBtgB,EAAO+O,KAAKwR,QAAQH,EAAe5iD,EAAKwiC,GACxC5W,EAAMyM,mBAEVmK,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAam4B,GAE9DvD,GAAmBzc,EAAQ+f,QAGtBA,GACD/f,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,4BAA4BlgB,SAAQ,SAAUypC,GAClF,IAAIoN,EAAkBpN,EAAYjD,uBAClCqQ,EAAgB72B,MAAMwE,QAAU,UAGxC42B,OAAqBvhD,EAEzB,GAAIkwB,EAAgB,CAChBsR,EAAO4M,QAAQoC,QAAQvmB,UAAY,GAC/B42B,EAAYx7B,SAASI,cAAc,QACvCo7B,EAAU11B,aAAa,aAAc,OAAa,EAAGskB,EAAmCmQ,IAAI,UAAY,KACxGiB,EAAU13B,UAAY,yCACtB,IAAI64B,EAAU38B,SAASI,cAAc,SACrCo7B,EAAU5a,YAAY+b,GACtBA,EAAQ74B,UAAY,eACpB64B,EAAQ72B,aAAa,cAAe,OAAa,EAAGskB,EAAmCmQ,IAAI,UAAY,KACvGoC,EAAQ77B,MAAMwa,MAAQ,QACtBqhB,EAAQ7iD,MAAQ+wB,EAAevK,aAAa,YAAc,GAC1Dq8B,EAAQjB,QAAU,WACd7wB,EAAe/E,aAAa,UAAW62B,EAAQ7iD,QAEnD6iD,EAAQhB,UAAY,SAAUp2B,GAC1B,IAAIA,EAAMyqB,YAGV,OAAK,EAAG5F,EAA0ByE,IAAItpB,IAAWA,EAAMwpB,WAAYxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,SAOzF0+C,GAAmBlc,EAAQ5W,IANvBmf,EAAM+B,mBAAmB5b,GACzB6Z,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,QACxCnf,EAAMyM,mBAKdgnB,GAAMtU,EAAO7Z,EAAgBsR,GAC7B8c,GAAQvU,EAAO7Z,EAAgBsR,GAC/Bwc,GAAS9tB,EAAgBsR,GACzBA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaw3B,GAC1D5C,GAAmBzc,EAAQtR,GAM/B,GAHI8J,GACAioB,GAAYzgB,EAAQxH,IAEnB8Y,IAAsBwI,IAAc5E,IAAiB6K,IAAuBvnB,IACzEknB,IAAmBE,IAAwBlxB,IAAmB+hB,EAAY,CAC9E,IAAIjJ,GAAe,EAAGvhB,EAAsCorB,IAAIoI,EAAa,aAAc,KACvFjS,GAAgBA,EAAa5W,cAAcqQ,YAAYjB,EAAO4M,QAAQhpB,UACtEoc,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnCo0B,GAAMtU,EAAOf,EAAcxH,GAC3B8c,GAAQvU,EAAOf,EAAcxH,GAC7Bwc,GAAShV,EAAcxH,GACvByc,GAAmBzc,EAAQwH,IAG3BxH,EAAO4M,QAAQoC,QAAQrqB,MAAMwE,QAAU,OAI/C6W,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,sCAAsClgB,SAAQ,SAAUgH,GAC5FA,EAAKgZ,MAAMwE,QAAU,UAEzB,IAAIu3B,GAAmB,EAAGz6B,EAAsCorB,IAAI9I,EAAME,eAAgB,YAAa,aACnGiY,IACAA,EAAiBn8B,cAAc,QAAQI,MAAMwE,QAAU,aAE5D,MAEHszB,GAAqB,SAAUzc,EAAQpc,GACvC,IAAImc,EAAgBnc,EAChBsxB,GAAe,EAAGjvB,EAAqCuI,IAAI5K,EAAS,SACpEsxB,IACAnV,EAAgBmV,GAEpBlV,EAAO4M,QAAQoC,QAAQrqB,MAAM8E,KAAO,IACpCuW,EAAO4M,QAAQoC,QAAQrqB,MAAMwE,QAAU,QACvC6W,EAAO4M,QAAQoC,QAAQrqB,MAAM+B,IAAMvW,KAAKzB,KAAK,EAAGqxB,EAAcnZ,UAAY,GAAKoZ,EAAO4M,QAAQhpB,QAAQiD,WAAa,KACnHmZ,EAAO4M,QAAQoC,QAAQrqB,MAAM8E,KACzBtZ,KAAKwI,IAAIonB,EAAc4gB,WAAY3gB,EAAO4M,QAAQhpB,QAAQY,YAAcwb,EAAO4M,QAAQoC,QAAQxqB,aAAe,KAClHwb,EAAO4M,QAAQoC,QAAQrlB,aAAa,YAAaoW,EAAcnZ,UAAY,IAAI7e,aAE/E43C,GAAoB,SAAU3f,EAAQ0f,GACtC1f,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnC,IAAIm4B,EAAgB,WACW,KAAvB7gD,EAAMpC,MAAMurB,SACmB,QAA3Bw2B,EAAejqB,QACfiqB,EAAe/1B,aAAa,MAAO5pB,EAAMpC,OAGzC+hD,EAAe1uB,YAAcjxB,EAAMpC,OAIf,KAAxBkjD,EAAOljD,MAAMurB,QACbw2B,EAAe/1B,aAAa,kBAAmBk3B,EAAOljD,QAG1D0hD,EAAYx7B,SAASI,cAAc,QACvCo7B,EAAU11B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMy5B,gBAC3EzB,EAAU13B,UAAY,yCACtB,IAAI5nB,EAAQ8jB,SAASI,cAAc,SACnCo7B,EAAU5a,YAAY1kC,GACtBA,EAAM4nB,UAAY,eAClB5nB,EAAM4pB,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMy5B,gBACxE/gD,EAAM4kB,MAAMwa,MAAQ,QACpBp/B,EAAMpC,MAAQ+hD,EAAev7B,aAAa,QAAUu7B,EAAe1uB,YACnEjxB,EAAMw/C,QAAU,WACZqB,KAEJ7gD,EAAMy/C,UAAY,SAAUp2B,GACpB8yB,GAAmBlc,EAAQ5W,IAG/B23B,GAAW/gB,EAAQ0f,EAAgBt2B,EAAOy3B,IAE9C,IAAIG,EAAan9B,SAASI,cAAc,QACxC+8B,EAAWr3B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM45B,SAC5ED,EAAWr5B,UAAY,yCACvB,IAAIk5B,EAASh9B,SAASI,cAAc,SACpC+8B,EAAWvc,YAAYoc,GACvBA,EAAOl5B,UAAY,eACnBk5B,EAAOl3B,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM45B,SACzEJ,EAAOljD,MAAQ+hD,EAAev7B,aAAa,mBAC3C08B,EAAOtB,QAAU,WACbqB,KAEJC,EAAOrB,UAAY,SAAUp2B,GACrB8yB,GAAmBlc,EAAQ5W,IAG/B23B,GAAW/gB,EAAQ0f,EAAgBt2B,EAAOrpB,IAE9Cy8C,GAASkD,EAAgB1f,GACzBA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaw3B,GAC1Drf,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAam5B,GAC1DvE,GAAmBzc,EAAQ0f,IAE3B7C,GAAQ,SAAUtU,EAAO3kB,EAASoc,GAClC,IAAIwb,EAAkB53B,EAAQunB,uBAC9B,GAAKqQ,IAAqB53B,EAAQgN,cAAcqQ,YAAYjB,EAAO4M,QAAQhpB,UAAgC,OAApBA,EAAQ6R,SAA/F,CAGA,IAAIyrB,EAAYr9B,SAASI,cAAc,UACvCi9B,EAAUv3B,aAAa,OAAQ,UAC/Bu3B,EAAUv3B,aAAa,YAAa,MACpCu3B,EAAUv3B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM85B,GACvE,KAAM,EAAGlT,EAAmCmQ,IAAI,OAAS,KAC7D8C,EAAUz4B,UAAY,sDACtBy4B,EAAUv5B,UAAY,qDACtBu5B,EAAU36B,QAAU,WAChBgiB,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCu3B,EAAgB3zB,sBAAsB,cAAejE,IACrD,EAAGuD,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5DyR,GAAiBha,GACjBsc,GAAwBtc,GACxB0W,GAAa1W,IAEjBA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaq5B,KAE1DpE,GAAU,SAAUvU,EAAO3kB,EAASoc,GACpC,IAAIqc,EAAcz4B,EAAQod,mBAC1B,GAAKqb,IAAiBz4B,EAAQgN,cAAcqQ,YAAYjB,EAAO4M,QAAQhpB,UAAgC,OAApBA,EAAQ6R,SAA3F,CAGA,IAAI2rB,EAAcv9B,SAASI,cAAc,UACzCm9B,EAAYz3B,aAAa,OAAQ,UACjCy3B,EAAYz3B,aAAa,YAAa,QACtCy3B,EAAYz3B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMg6B,KACzE,KAAM,EAAGpT,EAAmCmQ,IAAI,OAAS,KAC7DgD,EAAY34B,UAAY,wDACxB24B,EAAYz5B,UAAY,qDACxBy5B,EAAY76B,QAAU,WAClBgiB,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCo4B,EAAYx0B,sBAAsB,WAAYjE,IAC9C,EAAGuD,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5DyR,GAAiBha,GACjBsc,GAAwBtc,GACxB0W,GAAa1W,IAEjBA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAau5B,KAE1D5E,GAAW,SAAU54B,EAASoc,GAC9B,IAAIj0B,EAAQ8X,SAASI,cAAc,UACnClY,EAAM4d,aAAa,OAAQ,UAC3B5d,EAAM4d,aAAa,YAAa,UAChC5d,EAAM4d,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM6K,OACnE,KAAM,EAAG+b,EAAmCmQ,IAAI,OAAS,KAC7DryC,EAAM0c,UAAY,4DAClB1c,EAAM4b,UAAY,qDAClB5b,EAAMwa,QAAU,WACZ,IAAIgiB,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GACjDuI,EAAMuC,cAAclnB,IACpB,EAAGuD,EAAiC4B,IAAIwf,GACxC3kB,EAAQsO,SACR8nB,GAAiBha,GACjBsc,GAAwBtc,IAE5BA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAa9b,IAE1Dg1C,GAAa,SAAU/gB,EAAQpc,EAASwF,EAAOk4B,GAC/C,IAAIl4B,EAAMyqB,YAAV,CAGA,GAAkB,QAAdzqB,EAAM5rB,IAIN,OAHA8jD,EAAiB5Y,QACjB4Y,EAAiB1F,cACjBxyB,EAAMyM,iBAGV,KAAK,EAAGoY,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,UAAYxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,IAAiB,CACtG,IAAI+qC,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAEjDpc,EAAQoR,mBAAmB,WAAYlP,EAA8ByE,EAAE+E,MACvEiZ,EAAMuC,cAAclnB,EAAQgnB,aAC5BrC,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,GACxCnf,EAAMyM,oBAGV4qB,GAAc,SAAUzgB,EAAQxH,GAChCwH,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnC,IAAI84B,EAAU,WACiB,KAAvBxhD,EAAMpC,MAAMurB,SACZsP,EAAS/P,UAAY1oB,EAAMpC,OAE/B66B,EAAS7O,aAAa,OAAQk3B,EAAOljD,OACrC66B,EAAS7O,aAAa,QAAS63B,EAAO7jD,QAE1C66B,EAAS3T,iBAAiB,iBAAiBlgB,SAAQ,SAAUgH,GACzDA,EAAKiZ,gBAAgB,kBAEzB,IAAIy6B,EAAYx7B,SAASI,cAAc,QACvCo7B,EAAU11B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMy5B,gBAC3EzB,EAAU13B,UAAY,yCACtB,IAAI5nB,EAAQ8jB,SAASI,cAAc,SACnCo7B,EAAU5a,YAAY1kC,GACtBA,EAAM4nB,UAAY,eAClB5nB,EAAM4pB,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMy5B,gBACxE/gD,EAAM4kB,MAAMwa,MAAQ,QACpBp/B,EAAMpC,MAAQ66B,EAAS/P,WAAa,GACpC1oB,EAAMw/C,QAAU,WACZgC,KAEJxhD,EAAMy/C,UAAY,SAAUp2B,GACpB8yB,GAAmBlc,EAAQ5W,IAG/B23B,GAAW/gB,EAAQxH,EAAUpP,EAAOy3B,IAExC,IAAIG,EAAan9B,SAASI,cAAc,QACxC+8B,EAAWr3B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMo6B,MAC5ET,EAAWr5B,UAAY,yCACvB,IAAIk5B,EAASh9B,SAASI,cAAc,SACpC+8B,EAAWvc,YAAYoc,GACvBA,EAAOl5B,UAAY,eACnBk5B,EAAOl3B,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMo6B,MACzEZ,EAAOljD,MAAQ66B,EAASrU,aAAa,SAAW,GAChD08B,EAAOtB,QAAU,WACbgC,KAEJV,EAAOrB,UAAY,SAAUp2B,GACrB8yB,GAAmBlc,EAAQ5W,IAG/B23B,GAAW/gB,EAAQxH,EAAUpP,EAAOo4B,IAExC,IAAI/B,EAAa57B,SAASI,cAAc,QACxCw7B,EAAW91B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMq6B,aAC5EjC,EAAW93B,UAAY,yCACvB,IAAI65B,EAAS39B,SAASI,cAAc,SACpCw7B,EAAWhb,YAAY+c,GACvBA,EAAO75B,UAAY,eACnB65B,EAAO73B,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMq6B,aACzEF,EAAO78B,MAAMwa,MAAQ,OACrBqiB,EAAO7jD,MAAQ66B,EAASrU,aAAa,UAAY,GACjDq9B,EAAOjC,QAAU,WACbgC,KAEJC,EAAOhC,UAAY,SAAUp2B,GACrB8yB,GAAmBlc,EAAQ5W,IAG/B23B,GAAW/gB,EAAQxH,EAAUpP,EAAOrpB,IAExCy8C,GAAShkB,EAAUwH,GACnBA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaw3B,GAC1Drf,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAam5B,GAC1DhhB,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAa43B,GAC1DhD,GAAmBzc,EAAQxH,IAE3BmpB,GAAkB,SAAUv4B,EAAO4W,GACnC,IAAIlb,EAAasE,EAAM7D,OACvBya,EAAO4M,QAAQoC,QAAQvmB,UAAY,GACnC,IAAIm5B,EAAY,WACZ98B,EAAW6E,aAAa,MAAOsyB,EAAat+C,OAC5CmnB,EAAW6E,aAAa,MAAOk4B,EAAIlkD,OACnCmnB,EAAW6E,aAAa,QAASzc,EAAMvP,QAEvC0hD,EAAYx7B,SAASI,cAAc,QACvCo7B,EAAU11B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMy6B,UAC3EzC,EAAU13B,UAAY,yCACtB,IAAIs0B,EAAep4B,SAASI,cAAc,SAC1Co7B,EAAU5a,YAAYwX,GACtBA,EAAat0B,UAAY,eACzBs0B,EAAatyB,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMy6B,UAC/E7F,EAAat+C,MAAQmnB,EAAWX,aAAa,QAAU,GACvD83B,EAAasD,QAAU,WACnBqC,KAEJ3F,EAAauD,UAAY,SAAUuC,GAC/B7F,GAAmBlc,EAAQ+hB,IAE/B,IAAIC,EAAUn+B,SAASI,cAAc,QACrC+9B,EAAQr4B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM46B,eACzED,EAAQr6B,UAAY,yCACpB,IAAIk6B,EAAMh+B,SAASI,cAAc,SACjC+9B,EAAQvd,YAAYod,GACpBA,EAAIl6B,UAAY,eAChBk6B,EAAIl4B,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM46B,eACtEJ,EAAIl9B,MAAMwa,MAAQ,OAClB0iB,EAAIlkD,MAAQmnB,EAAWX,aAAa,QAAU,GAC9C09B,EAAItC,QAAU,WACVqC,KAEJC,EAAIrC,UAAY,SAAUuC,GACtB7F,GAAmBlc,EAAQ+hB,IAE/B,IAAIG,EAAYr+B,SAASI,cAAc,QACvCi+B,EAAUv4B,aAAa,aAAcsG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMna,OAC3Eg1C,EAAUv6B,UAAY,yCACtB,IAAIza,EAAQ2W,SAASI,cAAc,SACnCi+B,EAAUzd,YAAYv3B,GACtBA,EAAMya,UAAY,eAClBza,EAAMyc,aAAa,cAAesG,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMna,OACxEA,EAAMvP,MAAQmnB,EAAWX,aAAa,UAAY,GAClDjX,EAAMqyC,QAAU,WACZqC,KAEJ10C,EAAMsyC,UAAY,SAAUuC,GACxB7F,GAAmBlc,EAAQ+hB,IAE/BvF,GAAS13B,EAAYkb,GACrBA,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaw3B,GAC1Drf,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAam6B,GAC1DhiB,EAAO4M,QAAQoC,QAAQnnB,sBAAsB,YAAaq6B,GAC1DzF,GAAmBzc,EAAQlb,IAM3Bq9B,GAAmB,SAAUniB,GACF,YAAvBA,EAAOQ,YACP8b,GAAwBtc,GAEI,OAAvBA,EAAOQ,aACZ6Y,EAAmBrZ,IAOvBoiB,GAAgB,SAAUpiB,EAAQqiB,EAAIv3B,QACtB,IAAZA,IAAsBA,EAAU,CAChCunB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB,IAAIpI,EAAgBnK,EAAO4M,QAAQhpB,QACnCumB,EAAc1hB,UAAYuX,EAAO7T,KAAKm2B,aAAaD,GACnDlY,EAActlB,iBAAiB,6CAA6ClgB,SAAQ,SAAUgH,GAC1FkkC,EAAkBlkC,EAAMq0B,GACxBr0B,EAAKw/B,uBAAuBxhB,aAAa,QAAS,mBAEtDqwB,GAAiBha,EAAQlV,IAazBy3B,GAAY,SAAUha,EAAOvI,EAAQwiB,GACrC,IAAI5+B,EAAU2kB,EAAME,eAAe7X,cAC/B6xB,GAAO,EACPC,EAAc,GACdC,EAAiB,GACjBC,EAAYjI,GAAapS,GACzBsa,EAAiBD,EAAU9H,WAC3BgI,EAAgBF,EAAU7H,UAC9B,MAAOn3B,IAAY6+B,EAAM,CACrB,IAAIhtB,EAAU7R,EAAQ6R,QAUtB,GATgB,WAAZA,IACAA,EAAU,KAEE,MAAZA,IACAA,EAAU,MAEE,MAAZA,IACAA,EAAU,UAEE,MAAZA,GAA+B,WAAZA,GAAoC,OAAZA,EAAkB,CAC7D,IAAIgW,EAAa,GACbmP,EAAe,GACfC,EAAW,GAC0C,MAArDj3B,EAAQgN,cAAczM,aAAa,gBACnCy2B,EAAeJ,GAAgB52B,GAC/Bi3B,EAAWN,GAAY32B,KAEvBi/B,GAAkBjI,KAClBnP,EAAamP,EAAe,IAAMnlB,EAAU,IAAMotB,EAAiB,KAAOptB,EAAU,IACpFotB,EAAiBpX,IAEA,SAAhB+W,GAAsC,WAAZ/sB,GACV,WAAhB+sB,GAAwC,OAAZ/sB,GACZ,kBAAhB+sB,GAA+C,MAAZ/sB,KAEpCgW,GAAc,GAAKiX,EAAc58B,EAA8ByE,EAAE+E,KAAO,QAAUqzB,EAClFF,GAAO,IAEPK,GAAiBjI,KACjBiI,EAAgB,IAAMrtB,EAAU,IAAMqtB,EAAgB,KAAOrtB,EAAU,IAAMolB,EAC7EpP,GAAcqX,GAEuC,MAArDl/B,EAAQgN,cAAczM,aAAa,eACnCP,EAAUA,EAAQgN,cAClBhN,EAAQ6E,UAAYgjB,IAGpB7nB,EAAQ8P,UAAY+X,EACpB7nB,EAAUA,EAAQgN,eAEtB8xB,EAAc,IAAMjtB,EAAU,IAAMitB,EACpCC,EAAiB,KAAOltB,EAAU,IAAMktB,OAGxCF,GAAO,GAGf,EAAGt7B,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,IAE5Dwa,GAAe,SAAU/iB,EAAQmP,EAAW/lB,GAC5C,KAAI4W,EAAO4M,QAAQgH,eACZxqB,aAAiB45B,aADxB,CAKA,IAAIC,GAAe,EACfC,GAAY,EACZljB,EAAO4M,QAAQhpB,QAAQW,cAAc,QACrCyb,EAAO4M,QAAQhpB,QAAQW,cAAc,OAAO2N,SAEhD,IAAIqW,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CwiB,EAAcrT,EAAUhrB,aAAa,aAEzC,GAAIgrB,EAAU9oB,UAAUwK,SAAS,wBAI7B,GAHoB,WAAhB2xB,IACAA,EAAc,iBAEE,UAAhBA,EAAyB,CACzB,IAAI9I,GAAe,EAAGzzB,EAAqCuI,IAAI+Z,EAAME,eAAgB,cAChFiR,IACDA,EAAenR,EAAME,eAAea,WAAWf,EAAMc,cAErDqQ,IACAuJ,GAAe,EACf9T,EAAU9oB,UAAU6L,OAAO,wBAC3BqW,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCy1B,EAAahmB,UAA8C,KAAlCgmB,EAAajxB,UAAUS,OAC5C,qBAAyBwwB,EAAajxB,UAAY,OAASixB,EAAajxB,WAC5E,EAAGtB,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,SAG/D,GAAoB,gBAAhBia,EAA+B,CACpC,IAAIW,GAAoB,EAAGl9B,EAAqCuI,IAAI+Z,EAAME,eAAgB,QACrF0a,IACDA,EAAoB5a,EAAME,eAAea,WAAWf,EAAMc,cAE1D8Z,IACAA,EAAkBzvB,UAAYyvB,EAAkB16B,UAAUjL,QAAQsI,EAA8ByE,EAAE+E,KAAM,IAAM,SAC9G,EAAGnI,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,QAG3C,SAAhBia,EACAja,EAAMmL,WAIPnL,EAAMgB,WAAWhB,EAAME,eAAe7X,eACtC/M,SAASgoB,YAAY,UAAU,EAAO,KAJtChoB,SAASgoB,YAAY,UAAU,EAAO,IAOrB,UAAhB2W,GAA2C,SAAhBA,GAA0C,iBAAhBA,GAC1DY,GAAWpjB,EAAQuI,EAAOia,IAC1B,EAAGr7B,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5D0a,GAAe,EACf9T,EAAU9oB,UAAU6L,OAAO,0BAI3B+wB,GAAe,EACf9T,EAAU9oB,UAAU6L,OAAO,wBACF,KAArBqW,EAAMxgC,WACNw6C,GAAUha,EAAOvI,EAAQwiB,GAGzB3+B,SAASgoB,YAAY2W,GAAa,EAAO,SAIhD,CAEgD,IAA7CxiB,EAAO4M,QAAQhpB,QAAQ0lB,WAAWniC,SAClC64B,EAAO4M,QAAQhpB,QAAQ6E,UAAY,+BACnC,EAAGtB,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,IAEhE,IAAIf,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAChE,GAAoB,UAAhB+Z,GAIA,GAHKhb,IACDA,EAAee,EAAME,eAAea,WAAWf,EAAMc,cAErD7B,EAAc,CACdyb,GAAe,EACf9T,EAAU9oB,UAAUC,IAAI,wBACxBiiB,EAAMgD,WAAW1nB,SAASI,cAAc,QACxC,IAAI61B,GAAY,EAAG7zB,EAAqCuI,IAAI+Z,EAAME,eAAgB,MAE9EqR,GAAatS,EAAa3W,SAASipB,GACnCA,EAAUrxB,UAAY,8BAAkCqxB,EAAUrxB,UAAY,gBAG9E+e,EAAa9T,UAAY,8BAAkC8T,EAAa9T,UAAY,iBAExF,EAAGvM,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,SAG/D,GAAoB,UAAhBia,GAA2C,SAAhBA,GAA0C,iBAAhBA,EAC1DY,GAAWpjB,EAAQuI,EAAOia,GAAa,IACvC,EAAGr7B,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5D0a,GAAe,EACf/U,EAAqBlO,EAAOoB,QAAQyN,SAAU,CAAC,QAAS,OAAQ,iBAChEM,EAAU9oB,UAAUC,IAAI,6BAEvB,GAAoB,gBAAhBk8B,EAA+B,CACpC,GAAyB,KAArBja,EAAMxgC,WAAmB,CACzB,IAAIovB,EAAOtT,SAASI,cAAc,QAClCkT,EAAKnG,YAAclL,EAA8ByE,EAAE+E,KACnDiZ,EAAMgD,WAAWpU,GACjBoR,EAAMM,SAAS1R,EAAK0d,WAAY,GAChCtM,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,QAEvC,GAAsC,IAAlCA,EAAME,eAAepB,SAAgB,CACtClQ,EAAOtT,SAASI,cAAc,QAClCskB,EAAM8a,iBAAiBlsB,GACvBoR,EAAMgD,WAAWpU,IACjB,EAAGhQ,EAAiC4B,IAAIwf,GAE5C4G,EAAU9oB,UAAUC,IAAI,6BAEvB,GAAoB,SAAhBk8B,EAAwB,CACzBrrB,EAAOtT,SAASI,cAAc,OAClCkT,EAAKxP,UAAY,wBACjBwP,EAAKxN,aAAa,YAAa,cAC/BwN,EAAKxN,aAAa,aAAc,KAChCwN,EAAKxN,aAAa,cAAe,OACR,KAArB4e,EAAMxgC,WACNovB,EAAK1O,UAAY,mCAGjB0O,EAAK1O,UAAY,cAAgB8f,EAAMxgC,WAAa,qBACpDwgC,EAAM+a,kBAEV/a,EAAMgD,WAAWpU,GACbqQ,IACAA,EAAa9T,UAAYsM,EAAO7T,KAAKwU,cAAc6G,EAAa9T,aAEpE,EAAGvM,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5DvI,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,6CAA6ClgB,SAAQ,SAAUgH,GACnGkkC,EAAkBlkC,EAAMq0B,MAE5BmP,EAAU9oB,UAAUC,IAAI,8BAEvB,GAAoB,SAAhBk8B,EAAwB,CAC7B,GAAyB,KAArBja,EAAMxgC,WAAmB,CACzB,IAAIywB,EAAW3U,SAASI,cAAc,KACtCuU,EAASpH,UAAYtL,EAA8ByE,EAAE+E,KACrDiZ,EAAMgD,WAAW/S,GACjB+P,EAAMM,SAASrQ,EAASqc,WAAY,GACpCtM,EAAMO,UAAS,GACf2X,GAAYzgB,EAAQxH,GACpB,IAAI+qB,EAAmBvjB,EAAO4M,QAAQoC,QAAQzqB,cAAc,SAC5Dg/B,EAAiB5lD,MAAQ,GACzB4lD,EAAiB7a,QACjBwa,GAAY,MAEX,CACG/rB,EAAOtT,SAASI,cAAc,KAClCkT,EAAKxN,aAAa,OAAQ,IAC1BwN,EAAK1O,UAAY8f,EAAMxgC,WACvBwgC,EAAM8a,iBAAiBlsB,GACvBoR,EAAMgD,WAAWpU,IACjB,EAAGhQ,EAAiC4B,IAAIwf,GACxCkY,GAAYzgB,EAAQ7I,GACpB,IAAIqsB,EAAoBxjB,EAAO4M,QAAQoC,QAAQnqB,iBAAiB,SAChE2+B,EAAkB,GAAG7lD,MAAQw5B,EAAK/F,UAClCoyB,EAAkB,GAAG9a,QAEzBua,GAAe,EACf9T,EAAU9oB,UAAUC,IAAI,6BAEvB,GAAoB,UAAhBk8B,EAAyB,CAC9B,IAAIiB,EAAc,kMAClB,GAAgC,KAA5Blb,EAAMxgC,WAAWmhB,OACbse,GAAoG,KAApFA,EAAa/e,UAAUS,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,IAC5FkY,EAAa9T,UAAY+vB,EAGzB5/B,SAASgoB,YAAY,cAAc,EAAO4X,GAE9Clb,EAAMgB,WAAWvJ,EAAO4M,QAAQhpB,QAAQW,cAAc,OAAO8mB,iBAC7DrL,EAAO4M,QAAQhpB,QAAQW,cAAc,OAAO2N,UAC5C,EAAG/K,EAAiC4B,IAAIwf,OAEvC,CACDkb,EAAc,oCACd,IAAIC,EAAYnb,EAAMxgC,WAAWqW,MAAM,MACnCulC,EAAcD,EAAU,GAAGtlC,MAAM,KAAKjX,OAASu8C,EAAU,GAAGtlC,MAAM,MAAMjX,OAAS,IAAM,KAC3Fu8C,EAAU/+C,SAAQ,SAAU8K,EAAMqiB,GAChB,IAAVA,GACAriB,EAAK2O,MAAMulC,GAAah/C,SAAQ,SAAUi/C,EAAQC,GAE1CJ,GADa,IAAbI,EACe,OAASD,EAAS,aAGlB,OAASA,EAAS,WAGzCH,GAAe,kBAIXA,GADU,IAAV3xB,EACe,cAGA,OAEnBriB,EAAK2O,MAAMulC,GAAah/C,SAAQ,SAAUm/C,GACtCL,GAAe,OAASK,EAAO,WAEnCL,GAAe,YAGvBA,GAAe,mBACf5/B,SAASgoB,YAAY,cAAc,EAAO4X,IAC1C,EAAGt8B,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAEhE0a,GAAe,EACf9T,EAAU9oB,UAAUC,IAAI,8BAEvB,GAAoB,SAAhBk8B,GACL,GAAIhb,EAAc,CACd,IAAIuc,EAAS,mDACyB,KAAlCvc,EAAa/e,UAAUS,OACvBse,EAAa9T,UAAYqwB,EAGzBvc,EAAaxS,mBAAmB,WAAY+uB,IAEhD,EAAG58B,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,SAUhE,GALA0a,GAAe,EACf9T,EAAU9oB,UAAUC,IAAI,wBACJ,WAAhBk8B,IACAA,EAAc,iBAEO,KAArBja,EAAMxgC,YAAsC,SAAhBy6C,GAA0C,WAAhBA,GAA4C,kBAAhBA,EAoBlF3+B,SAASgoB,YAAY2W,GAAa,EAAO,QApB2E,CACpH,IAAI/sB,EAAU,SACM,WAAhB+sB,EACA/sB,EAAU,KAEW,kBAAhB+sB,IACL/sB,EAAU,KAEV0B,EAAOtT,SAASI,cAAcwR,GAClC0B,EAAKnG,YAAclL,EAA8ByE,EAAE+E,KACnDiZ,EAAMgD,WAAWpU,GACbA,EAAKkU,iBAAmBlU,EAAKkU,gBAAgBra,cAAgBlL,EAA8ByE,EAAE+E,OAE7F6H,EAAKkU,gBAAgBra,YAAc,IAEvCuX,EAAMM,SAAS1R,EAAK0d,WAAY,GAChCtM,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IAOhD0a,GACA3G,GAAwBtc,GAExBkjB,GACAlJ,GAAiBha,KAYrBgkB,GAA0B,WAC1B,SAASA,EAAShkB,EAAQikB,GACtB,IAAIr2B,EACAqf,EAAQ9uC,KACZA,KAAKylB,QAAUC,SAASI,cAAc,OAClCggC,EAASt8B,YACRiG,EAAKzvB,KAAKylB,QAAQyC,WAAWC,IAAIhoB,MAAMsvB,EAAIq2B,EAASt8B,UAAUvJ,MAAM,MAEzE,IAAI6nB,EAASge,EAAShe,OAAS,MAAO,EAAGgI,EAAmCmQ,IAAI6F,EAAShe,QAAU,IAAM,GAClF,IAAnBge,EAAS7U,QACTnJ,EAASge,EAAShe,OAAS,SAAU,EAAGgI,EAAmCmQ,IAAI6F,EAAShe,QAAU,OAAS,IAE/G,IAAI93B,EAAM81C,EAAS91C,IACf81C,EAAS91C,IAAM83B,EAAShW,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM48B,EAASxlD,MAAQwnC,EAC/ExQ,EAA4B,WAAlBwuB,EAASxlD,KAAoB,MAAQ,SACnD,GAAuB,IAAnBwlD,EAAS7U,MACTjxC,KAAKylB,QAAQ6E,UAAY,IAAMgN,EAAU,eAAkBwuB,EAASxlD,KAAO,KAAQ0P,EAAM,KAAOsnB,EAAU,QAEzG,CACDt3B,KAAKylB,QAAQyC,UAAUC,IAAI,wBAC3B,IAAI49B,EAAcrgC,SAASI,cAAcwR,GACzCyuB,EAAYv6B,aAAa,YAAas6B,EAASxlD,MAC/CylD,EAAYv8B,UAAY,wCAA0Cs8B,EAASE,YAC3ED,EAAYv6B,aAAa,aAAcxb,GACvC+1C,EAAYz7B,UAAYw7B,EAAS54B,KACjCltB,KAAKylB,QAAQ6gB,YAAYyf,GAExBD,EAAShkC,QAGd9hB,KAAKylB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC1FA,EAAMyM,iBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,uBAG3E,YAAvBuQ,EAAOQ,YACPuiB,GAAa/iB,EAAQiN,EAAMrpB,QAAQ2b,SAAS,GAAInW,GAEpB,OAAvB4W,EAAOQ,YACZ4jB,GAAuBpkB,EAAQiN,EAAMrpB,QAAQ2b,SAAS,GAAI0kB,EAAShkC,QAAU,GAAIgkC,EAAS/jC,QAAU,IAGpGmkC,GAAerkB,EAAQiN,EAAMrpB,QAAQ2b,SAAS,GAAI0kB,EAAShkC,QAAU,GAAIgkC,EAAS/jC,QAAU,QAIxG,OAAO8jC,EA9CkB,GAmDzBM,GAAkD,WAClD,IAAIC,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAVjC,GA2BlDzM,GAAc,SAAUhY,EAAQr8B,EAAMylB,GACtC,IAAIs7B,EASJ,GARqB,kBAAVt7B,GACPslB,EAAU1O,EAAQ,CAAC,aAAc,SACjC5W,EAAMyM,iBACN6uB,EAAejY,EAAYzM,IAG3B0kB,EAAet7B,EAEf4W,EAAOQ,cAAgB78B,GAAyB,kBAAVylB,EAA1C,CAeA,GAZI4W,EAAOkN,UACPlN,EAAOkN,SAASF,aAAahN,GAEG,SAAhCA,EAAOlV,QAAQnc,QAAQ+c,MAA4B,OAAT/nB,EAC1Cq8B,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,QAGvC6W,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,OAE3CmlB,EAActO,EAAOoB,QAAQyN,SAAU/oB,EAAuCyE,EAAEmF,eAChFwe,EAAqBlO,EAAOoB,QAAQyN,SAAU/oB,EAAuCyE,EAAEmF,eACvF6e,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,WACvC,OAATlrC,EACA6qC,EAAYxO,EAAOoB,QAAQyN,SAAU,CAAC,SACtCJ,EAAYzO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvF7O,EAAO0M,GAAG9oB,QAAQe,MAAMwE,QAAU,OAClC6W,EAAO4M,QAAQhpB,QAAQgN,cAAcjM,MAAMwE,QAAU,OACrD6W,EAAO8M,GAAGlpB,QAAQgN,cAAcjM,MAAMwE,QAAU,QAChD6W,EAAO7T,KAAKw4B,aAAY,GACxB3kB,EAAO7T,KAAKy4B,kBAAiB,GAC7B5kB,EAAO7T,KAAK04B,aAAY,GACxB7kB,EAAOQ,YAAc,KACrBR,EAAO8M,GAAGlpB,QAAQ6E,UAAYuX,EAAO7T,KAAK24B,eAAeJ,GACzDtS,GAA2BpS,EAAQ,CAC/BqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBgG,EAAWvY,GACXA,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,wCAAwClgB,SAAQ,SAAUgH,GACzFkkC,EAAkBlkC,EAAMq0B,MAE5BA,EAAO8M,GAAGlpB,QAAQiB,iBAAiB,eAAelgB,SAAQ,SAAUgH,IAChE,EAAG6Z,EAA2B0I,GAAGviB,EAAM,CACnCqf,IAAKgV,EAAOlV,QAAQE,IACpBQ,KAAMwU,EAAOlV,QAAQnc,QAAQ6c,eAIpC,GAAa,YAAT7nB,EACL6qC,EAAYxO,EAAOoB,QAAQyN,SAAU,CAAC,SACtCJ,EAAYzO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvF7O,EAAO0M,GAAG9oB,QAAQe,MAAMwE,QAAU,OAClC6W,EAAO4M,QAAQhpB,QAAQgN,cAAcjM,MAAMwE,QAAU,QACrD6W,EAAO8M,GAAGlpB,QAAQgN,cAAcjM,MAAMwE,QAAU,OAChD6W,EAAO7T,KAAKw4B,aAAY,GACxB3kB,EAAO7T,KAAKy4B,kBAAiB,GAC7B5kB,EAAO7T,KAAK04B,aAAY,GACxB7kB,EAAOQ,YAAc,UACrB+X,EAAWvY,GACXoiB,GAAcpiB,EAAQ0kB,EAAc,CAChCrS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBvS,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,eAAelgB,SAAQ,SAAUgH,IACrE,EAAG6Z,EAA2B0I,GAAGviB,EAAM,CACnCqf,IAAKgV,EAAOlV,QAAQE,IACpBQ,KAAMwU,EAAOlV,QAAQnc,QAAQ6c,UAGrCwU,EAAO4M,QAAQoC,QAAQrqB,MAAMwE,QAAU,YAEtC,GAAa,OAATxlB,EAAe,CACpB8qC,EAAYzO,EAAOoB,QAAQyN,SAAU,CAAC,SACtCL,EAAYxO,EAAOoB,QAAQyN,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvF7O,EAAO4M,QAAQhpB,QAAQgN,cAAcjM,MAAMwE,QAAU,OACrD6W,EAAO8M,GAAGlpB,QAAQgN,cAAcjM,MAAMwE,QAAU,QACZ,SAAhC6W,EAAOlV,QAAQnc,QAAQ+c,MAGc,WAAhCsU,EAAOlV,QAAQnc,QAAQ+c,QAF5BsU,EAAO0M,GAAG9oB,QAAQe,MAAMwE,QAAU,SAKtC6W,EAAO7T,KAAKw4B,aAAY,GACxB3kB,EAAO7T,KAAKy4B,kBAAiB,GAC7B5kB,EAAO7T,KAAK04B,aAAY,GACxB7kB,EAAOQ,YAAc,KACrB,IAAIukB,EAAStO,GAAuBiO,EAAc1kB,GACnC,+BAAX+kB,IAEAA,EAAS,IAEb/kB,EAAO0M,GAAG9oB,QAAQ6E,UAAYs8B,EAC9B9O,GAAmBjW,EAAQ,CACvBqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBgG,EAAWvY,GAEfA,EAAO8T,KAAKkR,UAAUhlB,GACD,kBAAV5W,IAEP4W,EAAOA,EAAOQ,aAAa5c,QAAQ8kB,QACnCyZ,GAAiBniB,IAErBgQ,EAAUhQ,GACV4Y,EAAsB5Y,GAClBA,EAAOoB,QAAQyN,SAAS,eACxB7O,EAAOoB,QAAQyN,SAAS,aAAahqB,iBAAiB,UAAUlgB,SAAQ,SAAUgH,GAC9EA,EAAK0a,UAAU6L,OAAO,2BAE1B8N,EAAOoB,QAAQyN,SAAS,aAAatqB,cAAc,qBAAwByb,EAAOQ,YAAc,MAAOna,UAAUC,IAAI,yBAEzH0Z,EAAOiQ,QAAQgV,OAAOjlB,EAA+B,OAAvBA,EAAOQ,aAAwBR,EAAOlV,QAAQmlB,QAAQxhC,UAEpFy2C,GAA0B,SAAUC,GAEpC,SAASD,EAASllB,EAAQikB,GACtB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAC/C+wC,EAAerrB,SAASI,cAAc,OAK1C,OAJAirB,EAAavnB,UAAY,eAAoC,IAAnBs8B,EAAS7U,MAAc,GAAK,wBACtEF,EAAazmB,UAAY,+BAAmCwH,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMulB,QAAU,SAAU,EAAGqB,EAAmCmQ,IAAI,OAAS,sCAA0CnuB,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM+9B,iBAAmB,SAAU,EAAGnX,EAAmCmQ,IAAI,OAAS,sCAA0CnuB,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMg+B,UAAY,SAAU,EAAGpX,EAAmCmQ,IAAI,OAAS,aAClenR,EAAMrpB,QAAQ6gB,YAAYyK,GAC1BjC,EAAMqY,WAAWtlB,EAAQkP,EAAc+U,GAChChX,EAwBX,OAhCAqX,GAAUY,EAAUC,GAUpBD,EAASrjD,UAAUyjD,WAAa,SAAUtlB,EAAQkP,EAAc+U,GAC5D,IAAI9U,EAAYhxC,KAAKylB,QAAQ2b,SAAS,GACtC0P,EAAcjP,EAAQkP,EAAcC,EAAW8U,EAAS7U,OACxDF,EAAa3P,SAAS5zB,KAAK,GAAGyY,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAE/F4uB,GAAYhY,EAAQ,UAAW5W,GAC/BA,EAAMyM,iBACNzM,EAAMwM,qBAEVsZ,EAAa3P,SAAS5zB,KAAK,GAAGyY,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAE/F4uB,GAAYhY,EAAQ,KAAM5W,GAC1BA,EAAMyM,iBACNzM,EAAMwM,qBAEVsZ,EAAa3P,SAAS5zB,KAAK,GAAGyY,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAE/F4uB,GAAYhY,EAAQ,KAAM5W,GAC1BA,EAAMyM,iBACNzM,EAAMwM,sBAGPsvB,EAjCkB,CAkC3BlB,IAKEuB,GAAgB,SAAUvc,EAAQT,GAClC,OAAI,EAAGphB,EAA8BqyB,IAAIxQ,EAAQT,GACtCtf,eAAelhB,WAEnB,IAsBPy9C,GAAa,SAAUxlB,EAAQmK,GAC/BA,EAAc/lB,iBAAiB,SAAS,WAChC4b,EAAOlV,QAAQ4d,OACf1I,EAAOlV,QAAQ4d,MAAM+D,EAAYzM,IAErC0O,EAAU1O,EAAQ,CAAC,mBAGvBylB,GAAgB,SAAUzlB,EAAQmK,GAClCA,EAAc/lB,iBAAiB,YAAY,SAAUgF,GACpB,QAAzBA,EAAM7D,OAAOkQ,UACb,EAAG5G,EAAgCI,GAAG7F,EAAM7D,OAAQya,EAAOlV,QAAQzD,KAAM2Y,EAAOlV,QAAQc,WAIhG85B,GAAY,SAAU1lB,EAAQmK,GAC9BA,EAAc/lB,iBAAiB,QAAQ,SAAUgF,GAC7C,GAA2B,OAAvB4W,EAAOQ,YAAsB,CAC7B,IAAImlB,EAAgB3lB,EAAO8M,GAAGlpB,QAAQW,cAAc,4BAChDohC,GACAA,EAAct/B,UAAU6L,OAAO,+BAGP,YAAvB8N,EAAOQ,aACXR,EAAO4M,QAAQgZ,cAAc/0B,SAASzH,EAAMy8B,gBAC7C7lB,EAAO4M,QAAQkZ,cAEnB9lB,EAAOA,EAAOQ,aAAa+H,OAAQ,EAAGphB,EAA8B6sB,IAAIhU,GACpEA,EAAOlV,QAAQ4wB,MACf1b,EAAOlV,QAAQ4wB,KAAKjP,EAAYzM,QAIxC+lB,GAAY,SAAU/lB,EAAQmK,GAC9BA,EAAc/lB,iBAAiB,aAAa,SAAUgF,GAElDA,EAAM48B,aAAa9vB,QAAQpQ,EAAqCyE,EAAEgF,YAAazJ,EAAqCyE,EAAEgF,gBAE1H4a,EAAc/lB,iBAAiB,QAAQ,SAAUgF,GACzCA,EAAM48B,aAAaC,QAAQngC,EAAqCyE,EAAEgF,aAElE8gB,GAAgBrQ,IAEqB,UAAhC5W,EAAM48B,aAAaE,MAAM,IAAkB98B,EAAM48B,aAAaE,MAAMjyB,SAAS,eAElFkyB,GAAMnmB,EAAQ5W,EAAO,CACjBg9B,UAAW,SAAUxW,GACjB/rB,SAASgoB,YAAY,cAAc,EAAO+D,UAM1DyW,GAAY,SAAUrmB,EAAQmK,EAAe/X,GAC7C+X,EAAc/lB,iBAAiB,QAAQ,SAAUgF,GAAS,OAAOgJ,EAAKhJ,EAAO4W,OAE7EsmB,GAAW,SAAUtmB,EAAQmK,EAAe/X,GAC5C+X,EAAc/lB,iBAAiB,OAAO,SAAUgF,GAC5CgJ,EAAKhJ,EAAO4W,GAERA,EAAOlV,QAAQy7B,QAAQ93C,QAAiC,YAAvBuxB,EAAOQ,aACxCR,EAAO4M,QAAQ4Z,YAAYxmB,GAE/Bnc,SAASgoB,YAAY,cAGzB6K,GAAe,SAAU1W,GAIzB,GAH2B,YAAvBA,EAAOQ,aAA6BR,EAAOlV,QAAQy7B,QAAQ93C,QAC3DuxB,EAAOlV,QAAQy7B,QAAQE,UAAUzmB,EAAO4M,QAAQ4Z,YAAYxmB,GAAQ,IAEnEA,EAAOlV,QAAQ+tB,eAApB,CAGA,IAAI1O,EAAgBnK,EAAOA,EAAOQ,aAAa5c,QAC3C8iC,GAAY,EAAGv/B,EAAiCw/B,IAAIxc,GAAezjB,IAClC,kBAA1BsZ,EAAOlV,QAAQzc,QAAwB2xB,EAAOpc,QAAQyC,UAAUwK,SAAS,uBAChFpM,OAAOkK,SAASlK,OAAOmK,QAAS83B,EAAY1mB,EAAOpc,QAAQgD,UAAYoZ,EAAOoB,QAAQxd,QAAQyd,aAAe5c,OAAOC,YAAc,EAAI,KAErG,kBAA1Bsb,EAAOlV,QAAQzc,QAAuB2xB,EAAOpc,QAAQyC,UAAUwK,SAAS,yBAC/EsZ,EAActjB,UAAY6/B,EAAYvc,EAActjB,UAAYsjB,EAAc7G,aAAe,EAAI,MAGrGsjB,GAAc,SAAU5mB,EAAQmK,GAChCA,EAAc/lB,iBAAiB,WAAW,SAAUgF,GAEhD,KAAK4W,EAAOlV,QAAQikB,KAAK8X,OAAO1/C,OAAS,GAAK64B,EAAOoB,QAAQyN,SAASC,SAClE9O,EAAO+O,KAAK6M,OAAOxyB,EAAO4W,GAD9B,CASA,GAJIA,EAAOlV,QAAQy7B,QAAQ93C,QAAiC,YAAvBuxB,EAAOQ,cACzB,cAAdpX,EAAM5rB,KAAuBg1C,EAAY,KAAMppB,KAChD4W,EAAO4M,QAAQ4Z,YAAYxmB,GAEJ,OAAvBA,EAAOQ,aACP,GAAImW,EAA8B3W,EAAQ5W,GACtC,YAGH,GAA2B,YAAvB4W,EAAOQ,aACZ,GAAIib,GAAsCzb,EAAQ5W,GAC9C,YAGH,GAA2B,OAAvB4W,EAAOQ,aACRmT,EAAe3T,EAAQ5W,GACvB,OAGR,GAAI4W,EAAOlV,QAAQg8B,WAAatU,EAAY,SAAUppB,GAGlD,OAFA4W,EAAOlV,QAAQg8B,UAAUra,EAAYzM,SACrC5W,EAAMyM,iBAIV,GAAI2c,EAAY,KAAMppB,KAAW4W,EAAOoB,QAAQyN,SAASiF,KAGrD,OAFA9T,EAAO8T,KAAKA,KAAK9T,QACjB5W,EAAMyM,iBAIV,GAAI2c,EAAY,KAAMppB,KAAW4W,EAAOoB,QAAQyN,SAASkY,KAGrD,OAFA/mB,EAAO8T,KAAKiT,KAAK/mB,QACjB5W,EAAMyM,iBAIV,GAAkB,WAAdzM,EAAM5rB,IAQN,MAP0C,UAAtCwiC,EAAO+O,KAAKnrB,QAAQe,MAAMwE,QAC1B6W,EAAO+O,KAAKnrB,QAAQe,MAAMwE,QAAU,OAE/B6W,EAAOlV,QAAQk8B,MAAQ59B,EAAMyqB,aAClC7T,EAAOlV,QAAQk8B,IAAIva,EAAYzM,SAEnC5W,EAAMyM,iBAIV,IAAI,EAAGoY,EAA0ByE,IAAItpB,IAAUA,EAAMupB,SAAWvpB,EAAMwpB,UAAY,eAAe1M,KAAK9c,EAAMwmB,MAAO,CAC/G,GAA2B,YAAvB5P,EAAOQ,YAA2B,CAClC,IAAI/K,EAAUrM,EAAMwmB,KAAKpyB,QAAQ,QAAS,MACtC,EAAGyI,EAAqCuI,IAAIvF,eAAeI,WAAW,GAAGof,eAAgBhT,GACzF4lB,GAAcrb,GAGdob,GAAWpb,EAAQvK,GAEvBukB,GAAiBha,OAEW,OAAvBA,EAAOQ,YACZymB,GAAejnB,EAAQ,IAAIknB,OAAOx3C,SAAS0Z,EAAMwmB,KAAKpyB,QAAQ,QAAS,IAAK,KAAO,KAEvD,OAAvBwiB,EAAOQ,aACZkV,GAAuB1V,EAAQ,IAAIknB,OAAOx3C,SAAS0Z,EAAMwmB,KAAKpyB,QAAQ,QAAS,IAAK,KAAO,KAG/F,OADA4L,EAAMyM,kBACC,EAGX,IAAI,EAAGoY,EAA0ByE,IAAItpB,IAAUA,EAAMupB,SAAWvpB,EAAMwpB,UAAY,eAAe1M,KAAK9c,EAAMwmB,MAUxG,MATmB,WAAfxmB,EAAMwmB,KACNoI,GAAYhY,EAAQ,UAAW5W,GAEX,WAAfA,EAAMwmB,KACXoI,GAAYhY,EAAQ,KAAM5W,GAEN,WAAfA,EAAMwmB,MACXoI,GAAYhY,EAAQ,KAAM5W,IAEvB,EAGX4W,EAAOlV,QAAQsW,QAAQvgC,MAAK,SAAUojD,GAClC,IAAKA,EAAShe,QAAUge,EAAS7iB,QAAS,CACtC,GAAI6iB,EAAS7iB,QAAS,CAClB,IAAI+lB,EAAMlD,EAAS7iB,QAAQvgC,MAAK,SAAUumD,GACtC,QAAKA,EAAYnhB,SAGbuM,EAAY4U,EAAYnhB,OAAQ7c,IAChC4W,EAAOoB,QAAQyN,SAASuY,EAAY3oD,MAAM8gC,SAAS,GAC9C8nB,cAAc,IAAIrE,aAAY,EAAG/U,EAAgCoB,QACtEjmB,EAAMyM,kBACC,QAJX,MAOJ,QAAOsxB,EAEX,OAAO,EAEX,GAAI3U,EAAYyR,EAAShe,OAAQ7c,GAG7B,OAFA4W,EAAOoB,QAAQyN,SAASoV,EAASxlD,MAAM8gC,SAAS,GAAG8nB,cAAc,IAAIrE,aAAY,EAAG/U,EAAgCoB,QACpHjmB,EAAMyM,kBACC,UAKnByxB,GAAc,SAAUtnB,EAAQmK,GAChCA,EAAc/lB,iBAAiB,eAAe,SAAUgF,GACpD+gB,EAAcod,UAAY,WACtB/mD,YAAW,WACP,IAAIgnD,EAAajC,GAAcvlB,EAAOA,EAAOQ,aAAa5c,SACtD4jC,EAAWt+B,QACgB,YAAvB8W,EAAOQ,aAA6BR,EAAOlV,QAAQy7B,QAAQ93C,UACtD,EAAGwX,EAAsCorB,IAAIjoB,EAAM7D,OAAQ,YAAa,qBACxE,EAAGU,EAAsCorB,IAAIjoB,EAAM7D,OAAQ,YAAa,uBAIzEya,EAAO4M,QAAQkZ,cAHf9lB,EAAO4M,QAAQ6a,eAMnBznB,EAAOlV,QAAQ8wB,QACf5b,EAAOlV,QAAQ8wB,OAAO4L,IAIC,YAAvBxnB,EAAOQ,aAA6BR,EAAOlV,QAAQy7B,QAAQ93C,QAC3DuxB,EAAO4M,QAAQkZ,sBAiBnC4B,GAAe,SAAU1nB,EAAQttB,GACjC,IAAI61B,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GACjDuI,EAAMmP,kBACNnP,EAAMgD,WAAW1nB,SAAS2nB,eAAe5K,KAAK2V,QAC9ChO,EAAMgD,WAAW1nB,SAAS2nB,eAAe94B,IACzC,IAAI80B,GAAe,EAAGvhB,EAAsCorB,IAAI9I,EAAME,eAAgB,aAAc,KAC/FjB,IACDA,EAAexH,EAAO0M,GAAG9oB,SAE7B,IAAIzG,EAAO,uBACP6iB,EAAO7T,KAAKw7B,eAAengB,EAAaxW,aAAaxT,QAAQ,mKAAoK,uLACjO,SACAgqB,EAAavG,YAAYjB,EAAO0M,GAAG9oB,SACnC4jB,EAAa/e,UAAYtL,EAGzBqqB,EAAa9T,UAAYvW,GAE7B,EAAGgK,EAA6BgrB,IAAInS,EAAO0M,GAAG9oB,QAAS2kB,GACvDmO,GAAa1W,IAEboW,GAAgB,SAAUwR,EAAUjkD,EAAMkkD,QACvB,IAAfA,IAAyBA,GAAa,GAC1C,IAAIC,EAAcF,EACW,IAAzBE,EAAYzgB,WACZygB,EAAcA,EAAYl3B,eAE9B,MAAOk3B,EAAa,CAChB,GAAIA,EAAY3jC,aAAa,eAAiBxgB,EAC1C,OAAOmkD,EAGPA,EADAD,EACcC,EAAY3c,uBAGZ2c,EAAY9mB,mBAGlC,OAAO,GAEPyV,GAAyB,SAAUt5B,EAAM6iB,GAMzC,OALAsP,EAAI,kBAAmBnyB,EAAM,WAAY6iB,EAAOlV,QAAQ6mB,UACxDx0B,EAAO,uBACH6iB,EAAO7T,KAAK47B,gBAAgB5qC,GAAMK,QAAQ,mKAAoK,uLAC9M,SACJ8xB,EAAI,kBAAmBnyB,EAAM,SAAU6iB,EAAOlV,QAAQ6mB,UAC/Cx0B,GAEPs6B,GAAyB,SAAUlpB,GACnC,IAAIy5B,EAAWz5B,EAAYpK,aAAa,aACpCq3B,EAAkBjtB,EAAY4c,uBAE9B8c,EAAcD,GAAyB,SAAbA,GAAoC,UAAbA,GAAqC,mBAAbA,GAC5D,YAAbA,GAAuC,kCAAbA,GAA6D,mCAAbA,GAC1D,oBAAbA,GAA+C,4BAAbA,GAAuD,2BAAbA,EAC/Ez5B,EAAYyC,YAAc,GAC1Bk3B,GAAQ,EACK,YAAbF,IACAE,GAAQ,GAEZ,MAAO1M,IAAoB0M,EAAO,CAC9B,IAAIC,EAAe3M,EAAgBr3B,aAAa,aAChD,GAAqB,cAAjBgkC,GAAiD,sBAAjBA,GAAyD,gBAAjBA,GACvD,YAAjBA,EAA4B,CAC5B,IAAIC,EAAe5M,EAAgBxqB,YACnC,GAAqB,cAAjBm3B,GACc,2BAAbH,GAAsD,oBAAbA,EAIzC,GAAiB,4BAAbA,GACLxM,EAAgBxa,mBAAmBoK,WAAW7c,GAAc,CAE5D,IAAI85B,EAAajS,GAAc7nB,EAAa,0BACxC85B,GAAcA,EAAWld,yBACzBqQ,EAAkB6M,EAAWld,uBAC7B8c,EAAaG,EAAeH,QAIhCA,EAAaG,EAAeH,OAZ5BA,EAAaG,EAAa5qC,QAAQ,MAAO,KAAOyqC,MAe9B,YAAjBE,IACLD,GAAQ,GAEZ1M,EAAkBA,EAAgBrQ,uBAEtC,OAAO8c,GAEPhS,GAAqB,SAAUjW,EAAQlV,QACvB,IAAZA,IAAsBA,EAAU,CAChCunB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEbznB,EAAQwnB,YACRtS,EAAO+O,KAAK/tC,OAAOg/B,GAEvBA,EAAOrxB,QAAQ3N,OAAOg/B,GACtB,IAAIttB,EAAO+5B,EAAYzM,GACa,oBAAzBA,EAAOlV,QAAQ/qB,OAAwB+qB,EAAQynB,aACtDvS,EAAOlV,QAAQ/qB,MAAM2S,GAErBstB,EAAOlV,QAAQtc,QAAQC,QACvBuxB,EAAOxxB,QAAQxN,OAAOg/B,EAAQttB,GAE9BstB,EAAOlV,QAAQouB,MAAMzqC,SAAU,EAAGw/B,EAAsC+K,QACxEvT,aAAayU,QAAQla,EAAOlV,QAAQouB,MAAM1yB,GAAI9T,GAC1CstB,EAAOlV,QAAQouB,MAAMpqC,OACrBkxB,EAAOlV,QAAQouB,MAAMpqC,MAAM4D,IAG/BstB,EAAOkN,UACPlN,EAAOkN,SAASF,aAAahN,GAEjCsZ,aAAatZ,EAAO0M,GAAG4b,kBACvBtoB,EAAO0M,GAAG4b,iBAAmB7jC,OAAOjkB,YAAW,WACvCsqB,EAAQunB,qBAAuBrS,EAAO0M,GAAGkH,eACzC5T,EAAO8T,KAAKqG,eAAena,KAEhCA,EAAOlV,QAAQsvB,YAElB6M,GAAiB,SAAUjnB,EAAQriC,GACnC,IAAI4qC,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CtR,GAAiB,EAAGoZ,EAA0ChB,GAAGyB,EAAME,eAAgB,QACvF/Z,GAAwD,KAAtCA,EAAesC,YAAY9H,SAC7CvrB,EAAQ,KAAOA,GAEnB4qC,EAAMO,UAAS,GACfjlB,SAASgoB,YAAY,cAAc,EAAOluC,IAE1C0mD,GAAiB,SAAUrkB,EAAQmP,EAAWlvB,EAAQC,GACtD,IAAIqoB,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CwiB,EAAcrT,EAAUhrB,aAAa,aAEG,IAAxC6b,EAAO0M,GAAG9oB,QAAQ0lB,WAAWniC,SAC7B64B,EAAO0M,GAAG9oB,QAAQ6E,UAAY,2JAC9B,EAAGtB,EAA6BgrB,IAAInS,EAAO0M,GAAG9oB,QAAS2kB,IAE3D,IAAIf,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAC5Dla,GAAc,EAAGuZ,EAA0ChB,GAAGyB,EAAME,eAAgB,QACxF,GAAKjB,EAAL,CAGA,GAAoB,SAAhBgb,EAAwB,CACxB,IAAIrlC,OAAO,EAQX,OANIA,EADqB,KAArBorB,EAAMxgC,WACC,GAAKkY,EAAS2gB,KAAK2V,MAAQr2B,EAG3B,GAAKD,EAASsoB,EAAMxgC,WAAamY,EAAO1C,QAAQ,IAAKojB,KAAK2V,MAAQ,UAE7E1yB,SAASgoB,YAAY,cAAc,EAAO1uB,GAGzC,GAAoB,WAAhBqlC,GAA4C,SAAhBA,GAA0C,WAAhBA,GAC3C,gBAAhBA,GAAiD,SAAhBA,GAA0C,UAAhBA,GAA2C,SAAhBA,EAAwB,CAC1GrlC,OAAO,EAeX,OAZIA,EADqB,KAArBorB,EAAMxgC,WACC,GAAKkY,EAAS2gB,KAAK2V,OAAyB,SAAhBiM,EAAyB,GAAKtiC,GAG1D,GAAKD,EAASsoB,EAAMxgC,WAAa64B,KAAK2V,OAAyB,SAAhBiM,EAAyB,GAAKtiC,GAEpE,UAAhBsiC,GAA4C,SAAhBA,GAA0Bj0B,GAA2C,KAA5BA,EAAYyC,YACjF7T,EAAO,OAASA,EAEK,SAAhBqlC,IACLrlC,EAAO,OAAS8C,EAAS,KAAO2gB,KAAK2V,YAEzC1yB,SAASgoB,YAAY,cAAc,EAAO1uB,GAGzC,IAAoB,UAAhBqlC,GAA2C,SAAhBA,GAA0C,iBAAhBA,GAC1C,UAAhBA,IACIj0B,EAAa,CACb,IAAIujB,EAAS,KACO,UAAhB0Q,EACA1Q,EAAS,SAEY,iBAAhB0Q,EACL1Q,EAAS,MAEY,UAAhB0Q,IACL1Q,EAAS,MAEb,IAAIyW,EAAUnS,GAAc7nB,EAAa,WAQzC,OAPIg6B,EACAA,EAAQC,mBAAmB,WAAY1W,GAGvCtK,EAAaghB,mBAAmB,aAAc1W,QAElDkE,EAAWhW,IAInB,EAAG7Y,EAA6BgrB,IAAInS,EAAO0M,GAAG9oB,QAAS2kB,GACvD0N,GAAmBjW,KAInByoB,GAAa,SAAUzoB,GACvB,OAAQA,EAAOQ,aACX,IAAK,KACD,OAAOR,EAAO8M,GAAGlpB,QACrB,IAAK,UACD,OAAOoc,EAAO4M,QAAQhpB,QAC1B,IAAK,KACD,OAAOoc,EAAO0M,GAAG9oB,UAKzB8kC,GAAa,SAAU1oB,EAAQ2oB,GAC3B3oB,EAAOlV,QAAQgtB,OAAO4Q,aACtB1oB,EAAOlV,QAAQgtB,OAAOxsC,QAAU00B,EAAOlV,QAAQgtB,OAAO4Q,cAEtD1oB,EAAOlV,QAAQgtB,OAAOxsC,SACtB7L,OAAOuI,KAAKg4B,EAAOlV,QAAQgtB,OAAOxsC,SAAS3G,SAAQ,SAAUnH,GACzDmrD,EAAIvkB,iBAAiB5mC,EAAKwiC,EAAOlV,QAAQgtB,OAAOxsC,QAAQ9N,QAMhEosB,GAAkD,SAAUC,EAASC,EAAYC,EAAG3mB,GACpF,SAAS4mB,EAAMrsB,GAAS,OAAOA,aAAiBosB,EAAIpsB,EAAQ,IAAIosB,GAAE,SAAU3sB,GAAWA,EAAQO,MAC/F,OAAO,IAAKosB,IAAMA,EAAIjsB,WAAU,SAAUV,EAASC,GAC/C,SAAS4sB,EAAUtsB,GAAS,IAAMusB,EAAK9mB,EAAU+C,KAAKxI,IAAW,MAAO6D,GAAKnE,EAAOmE,IACpF,SAAS2oB,EAASxsB,GAAS,IAAMusB,EAAK9mB,EAAU,SAASzF,IAAW,MAAO6D,GAAKnE,EAAOmE,IACvF,SAAS0oB,EAAKjlB,GAAUA,EAAOpH,KAAOT,EAAQ6H,EAAOtH,OAASqsB,EAAM/kB,EAAOtH,OAAOI,KAAKksB,EAAWE,GAClGD,GAAM9mB,EAAYA,EAAU9E,MAAMurB,EAASC,GAAc,KAAK3jB,YAGlEikB,GAAsD,SAAUP,EAASjC,GACzE,IAAsGyC,EAAG9S,EAAG+S,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAG5kB,KAAM,WAAa,GAAW,EAAPykB,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOI,KAAM,GAAIC,IAAK,IAChG,OAAOJ,EAAI,CAAEpkB,KAAMykB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAX3oB,SAA0BsoB,EAAEtoB,OAAOE,UAAY,WAAa,OAAOhE,OAAUosB,EACvJ,SAASK,EAAKpM,GAAK,OAAO,SAAUjP,GAAK,OAAO2a,EAAK,CAAC1L,EAAGjP,KACzD,SAAS2a,EAAKzX,GACV,GAAI4X,EAAG,MAAM,IAAIpkB,UAAU,mCAC3B,MAAOukB,EAAG,IACN,GAAIH,EAAI,EAAG9S,IAAM+S,EAAY,EAAR7X,EAAG,GAAS8E,EAAE,UAAY9E,EAAG,GAAK8E,EAAE,YAAc+S,EAAI/S,EAAE,YAAc+S,EAAE1mB,KAAK2T,GAAI,GAAKA,EAAEpR,SAAWmkB,EAAIA,EAAE1mB,KAAK2T,EAAG9E,EAAG,KAAK5U,KAAM,OAAOysB,EAE3J,OADI/S,EAAI,EAAG+S,IAAG7X,EAAK,CAAS,EAARA,EAAG,GAAQ6X,EAAE3sB,QACzB8U,EAAG,IACP,KAAK,EAAG,KAAK,EAAG6X,EAAI7X,EAAI,MACxB,KAAK,EAAc,OAAX+X,EAAEC,QAAgB,CAAE9sB,MAAO8U,EAAG,GAAI5U,MAAM,GAChD,KAAK,EAAG2sB,EAAEC,QAASlT,EAAI9E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK+X,EAAEG,IAAIxiB,MAAOqiB,EAAEE,KAAKviB,MAAO,SACxC,QACI,GAAMmiB,EAAIE,EAAEE,OAAMJ,EAAIA,EAAEnjB,OAAS,GAAKmjB,EAAEA,EAAEnjB,OAAS,MAAkB,IAAVsL,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE+X,EAAI,EAAG,SACjG,GAAc,IAAV/X,EAAG,MAAc6X,GAAM7X,EAAG,GAAK6X,EAAE,IAAM7X,EAAG,GAAK6X,EAAE,IAAM,CAAEE,EAAEC,MAAQhY,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY+X,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAI7X,EAAI,MAC7D,GAAI6X,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEG,IAAI9jB,KAAK4L,GAAK,MACvD6X,EAAE,IAAIE,EAAEG,IAAIxiB,MAChBqiB,EAAEE,KAAKviB,MAAO,SAEtBsK,EAAKmV,EAAKhkB,KAAKimB,EAASW,GAC1B,MAAOhpB,GAAKiR,EAAK,CAAC,EAAGjR,GAAI+V,EAAI,EAAK,QAAU8S,EAAIC,EAAI,EACtD,GAAY,EAAR7X,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE9U,MAAO8U,EAAG,GAAKA,EAAG,QAAK,EAAQ5U,MAAM,KAO9E+qD,GAAwB,WACxB,SAASA,IACLzqD,KAAK0qD,aAAc,EACnB1qD,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,gBAE7B,OAAOihC,EANgB,GAQvBE,GAAe,SAAU9oB,EAAQ+oB,GACjC/oB,EAAO7xB,IAAI66C,OA4CX,IA3CA,IAAIC,EAAiB,GACjBC,EAAW,GACXC,EAAe,GACf9hC,EAAO2Y,EAAOlV,QAAQzD,KACtBqQ,EAAU,SAAU0xB,EAAMtoD,GAC1B,IAAIuoD,EAAON,EAAMjoD,GACbV,GAAW,EACVipD,EAAK5qD,OACNyqD,GAAY,OAASj5B,EAAepb,EAAEwS,GAAMiiC,UAAY,QACxDlpD,GAAW,GAEXipD,EAAKt8C,KAAOizB,EAAOlV,QAAQgtB,OAAOppC,MAClCw6C,GAAY,OAASG,EAAK5qD,KAAO,IAAMwxB,EAAepb,EAAEwS,GAAMkiC,KAAO,IAAMvpB,EAAOlV,QAAQgtB,OAAOppC,IAAM,KAAO,KAAO,SACrHtO,GAAW,GAEf,IAAIigC,EAAYgpB,EAAK5qD,KAAK0gB,YAAY,KAClCqqC,EAAUH,EAAK5qD,KAAKgoB,OAAO4Z,GAC3BopB,EAAWzpB,EAAOlV,QAAQgtB,OAAO2R,SAASJ,EAAK5qD,KAAKgoB,OAAO,EAAG4Z,IAAcmpB,EAChF,GAAIxpB,EAAOlV,QAAQgtB,OAAO4R,OAAQ,CAC9B,IAAIC,EAAW3pB,EAAOlV,QAAQgtB,OAAO4R,OAAOtrC,MAAM,KAAKwrC,MAAK,SAAUj+C,GAClE,IAAIhI,EAAOgI,EAAKud,OAChB,GAA0B,IAAtBvlB,EAAK+J,QAAQ,MACb,GAAI87C,EAAQjkB,gBAAkB5hC,EAAK4hC,cAC/B,OAAO,OAIX,GAAI8jB,EAAK1lD,KAAKya,MAAM,KAAK,KAAOza,EAAKya,MAAM,KAAK,GAC5C,OAAO,EAGf,OAAO,KAENurC,IACDT,GAAY,OAASG,EAAK5qD,KAAO,IAAMwxB,EAAepb,EAAEwS,GAAMwiC,cAAgB,QAC9EzpD,GAAW,GAGfA,IACA6oD,EAAepiD,KAAKwiD,GACpBF,GAAgB,OAASM,EAAW,IAAMx5B,EAAepb,EAAEwS,GAAMyiC,UAAY,UAG5EV,EAAOL,EAAM5hD,OAAQrG,EAAI,EAAGA,EAAIsoD,EAAMtoD,IAC3C42B,EAAQ0xB,EAAMtoD,GAGlB,OADAk/B,EAAO7xB,IAAI0/B,KAAK,OAASqb,EAAWC,EAAe,SAC5CF,GAEPc,GAAmB,SAAUxlB,EAAcvE,GAC3C,IAAImK,EAAgBse,GAAWzoB,GAC/BmK,EAAczB,QACd,IAAIshB,EAAW14B,KAAKC,MAAMgT,GACtB2kB,EAAW,GACO,IAAlBc,EAASpa,OACTsZ,EAAW,GAAKc,EAASC,KAEzBD,EAAS9qD,KAAKgrD,UAAYF,EAAS9qD,KAAKgrD,SAAS/iD,OAAS,IAC1D+hD,EAAW,WAAaA,EAAW,QACnCc,EAAS9qD,KAAKgrD,SAASvlD,SAAQ,SAAUzF,GACrC,IAAImhC,EAAYnhC,EAAKigB,YAAY,KAC7BsqC,EAAWzpB,EAAOlV,QAAQgtB,OAAO2R,SAASvqD,EAAKunB,OAAO,EAAG4Z,IAAcnhC,EAAKunB,OAAO4Z,GACvF6oB,GAAY,OAASO,EAAW,IAAMx5B,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM8iC,YAAc,WAE9FjB,GAAY,SAEZA,EACAlpB,EAAO7xB,IAAI0/B,KAAKqb,GAGhBlpB,EAAO7xB,IAAI66C,OAEf,IAAIoB,EAAe,GACnB3qD,OAAOuI,KAAKgiD,EAAS9qD,KAAKmrD,SAAS1lD,SAAQ,SAAUnH,GACjD,IAAIwwB,EAAOg8B,EAAS9qD,KAAKmrD,QAAQ7sD,GAC7B6iC,EAAY7iC,EAAI2hB,YAAY,KAC5Bxb,EAAOnG,EAAIipB,OAAO4Z,GAClBopB,EAAWzpB,EAAOlV,QAAQgtB,OAAO2R,SAASjsD,EAAIipB,OAAO,EAAG4Z,IAAc18B,EAC1EA,EAAOA,EAAK4hC,cACiB,IAAzB5hC,EAAK+J,QAAQ,SAA0C,IAAzB/J,EAAK+J,QAAQ,SAA0C,IAAzB/J,EAAK+J,QAAQ,QAC9C,YAAvBsyB,EAAOQ,YACP4pB,GAAgB,4HAAuIp8B,EAAO,mCAElI,OAAvBgS,EAAOQ,YACZ4pB,GAAgB,mCAAwCp8B,EAAO,eAG/Do8B,GAAgB,IAAMX,EAAW,KAAOz7B,EAAO,MAGpB,IAA1BrqB,EAAK+J,QAAQ,UACU,IAAzB/J,EAAK+J,QAAQ,SACY,IAAzB/J,EAAK+J,QAAQ,SACY,IAAzB/J,EAAK+J,QAAQ,SAA0C,IAAzB/J,EAAK+J,QAAQ,SAClB,IAAzB/J,EAAK+J,QAAQ,SAA2C,IAA1B/J,EAAK+J,QAAQ,UAA4C,IAA1B/J,EAAK+J,QAAQ,UAA2C,IAAzB/J,EAAK+J,QAAQ,SAA4C,IAA3B/J,EAAK+J,QAAQ,WAC9G,IAAzB/J,EAAK+J,QAAQ,SACY,IAAzB/J,EAAK+J,QAAQ,SACa,IAA1B/J,EAAK+J,QAAQ,SACW,YAAvBsyB,EAAOQ,YACP4pB,GAAgB,aAAgBX,EAAW,UAAcz7B,EAAO,KAGhEo8B,GAAgB,KAAOX,EAAW,KAAOz7B,EAAO,MAIzB,YAAvBgS,EAAOQ,YACP4pB,GAAgB,YAAep8B,EAAO,KAAQy7B,EAAW,OAGzDW,GAAgB,IAAMX,EAAW,KAAOz7B,EAAO,UAI3D,EAAG7G,EAAiC4B,IAAIiX,EAAO8X,OAAOvP,OACtD1kB,SAASgoB,YAAY,cAAc,EAAOue,GAC1CpqB,EAAO8X,OAAOvP,MAAQtf,eAAeI,WAAW,GAAGC,cAEnDghC,GAAc,SAAUtqB,EAAQ+oB,EAAOnlC,GAAW,OAAOgG,QAAU,OAAQ,OAAQ,GAAQ,WAC3F,IAAI2gC,EAAUC,EAAaC,EAAsBC,EAAYvgB,EAAewgB,EAAgBC,EAAUC,EAAW7iB,EAAIpa,EAAIpwB,EAAKsD,EAAGsoD,EAAMT,EACvI,OAAOv+B,GAAYjsB,MAAM,SAAUy4C,GAC/B,OAAQA,EAAGnsB,OACP,KAAK,EAGD,IAFA8/B,EAAW,GACXC,GAA8C,IAAnCxqB,EAAOlV,QAAQgtB,OAAOgT,SAAoB/B,EAAM5hD,OAAS,EAC/DrG,EAAI,EAAGA,EAAI0pD,EAAU1pD,IACtB2pD,EAAW1B,EAAMjoD,GACb2pD,aAAoBM,mBACpBN,EAAWA,EAASO,aAExBT,EAAS1jD,KAAK4jD,GAElB,OAAIzqB,EAAOlV,QAAQgtB,OAAOv4C,SACtBmrD,EAAa1qB,EAAOlV,QAAQgtB,OAAOv4C,QAAQgrD,GACjB,kBAAfG,GACP1qB,EAAO7xB,IAAI0/B,KAAK6c,GACT,CAAC,IAEL,CAAC,IAEP1qB,EAAOlV,QAAQgtB,OAAOjuC,KAAQm2B,EAAO8X,OAOrC9X,EAAOlV,QAAQgtB,OAAOuR,KACpB,CAAC,EAAarpB,EAAOlV,QAAQgtB,OAAOuR,KAAKkB,IADR,CAAC,EAAa,IAN9C3mC,IACAA,EAAQjmB,MAAQ,IAEpBqiC,EAAO7xB,IAAI0/B,KAAK,qCACT,CAAC,IAIhB,KAAK,EACD0c,EAAW3T,EAAG/wC,OACd+wC,EAAGnsB,MAAQ,EACf,KAAK,EACD,GAAIuV,EAAOlV,QAAQgtB,OAAO13C,WACtBsqD,EAAa1qB,EAAOlV,QAAQgtB,OAAO13C,SAASmqD,GAClB,kBAAfG,GAEP,OADA1qB,EAAO7xB,IAAI0/B,KAAK6c,GACT,CAAC,GAMhB,GAHAvgB,EAAgBse,GAAWzoB,GAC3BA,EAAO8X,OAAOvP,OAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC3D2qB,EAAiB7B,GAAa9oB,EAAQuqB,GACR,IAA1BI,EAAexjD,OAIf,OAHIyc,IACAA,EAAQjmB,MAAQ,IAEb,CAAC,GAIZ,IAFAitD,EAAW,IAAIK,SACfJ,EAAY7qB,EAAOlV,QAAQgtB,OAAO+S,UAC7B7iB,EAAK,EAAGpa,EAAKnuB,OAAOuI,KAAK6iD,GAAY7iB,EAAKpa,EAAGzmB,OAAQ6gC,IACtDxqC,EAAMowB,EAAGoa,GACT4iB,EAASxzB,OAAO55B,EAAKqtD,EAAUrtD,IAEnC,IAAKsD,EAAI,EAAGsoD,EAAOuB,EAAexjD,OAAQrG,EAAIsoD,EAAMtoD,IAChD8pD,EAASxzB,OAAO4I,EAAOlV,QAAQgtB,OAAOoT,UAAWP,EAAe7pD,IAqDpE,OAnDA6nD,EAAM,IAAIxkB,eACVwkB,EAAIl7C,KAAK,OAAQuyB,EAAOlV,QAAQgtB,OAAOjuC,KACnCm2B,EAAOlV,QAAQgtB,OAAOqT,OACtBxC,EAAIvkB,iBAAiB,iBAAkBpE,EAAOlV,QAAQgtB,OAAOqT,OAE7DnrB,EAAOlV,QAAQgtB,OAAOsT,kBACtBzC,EAAIyC,iBAAkB,GAE1B1C,GAAW1oB,EAAQ2oB,GACnB3oB,EAAO8X,OAAO+Q,aAAc,EAC5B1e,EAAcxgB,aAAa,kBAAmB,SAC9Cg/B,EAAI0C,mBAAqB,WACrB,GAAI1C,EAAI2C,aAAennB,eAAeonB,KAAM,CAGxC,GAFAvrB,EAAO8X,OAAO+Q,aAAc,EAC5B1e,EAAcxgB,aAAa,kBAAmB,QAC1Cg/B,EAAI6C,QAAU,KAAO7C,EAAI6C,OAAS,IAClC,GAAIxrB,EAAOlV,QAAQgtB,OAAO2T,QACtBzrB,EAAOlV,QAAQgtB,OAAO2T,QAAQthB,EAAewe,EAAIpkB,kBAEhD,CACD,IAAIA,EAAeokB,EAAIpkB,aACnBvE,EAAOlV,QAAQgtB,OAAO4T,SACtBnnB,EAAevE,EAAOlV,QAAQgtB,OAAO4T,OAAO3C,EAAOJ,EAAIpkB,eAE3DwlB,GAAiBxlB,EAAcvE,QAI/BA,EAAOlV,QAAQgtB,OAAOl6C,MACtBoiC,EAAOlV,QAAQgtB,OAAOl6C,MAAM+qD,EAAIpkB,cAGhCvE,EAAO7xB,IAAI0/B,KAAK8a,EAAIpkB,cAGxB3gB,IACAA,EAAQjmB,MAAQ,IAEpBqiC,EAAO8X,OAAOl0B,QAAQe,MAAMwE,QAAU,SAG9Cw/B,EAAI7Q,OAAO6T,WAAa,SAAUviC,GAC9B,GAAKA,EAAMwiC,iBAAX,CAGA,IAAIC,EAAWziC,EAAM0iC,OAAS1iC,EAAM2iC,MAAQ,IAC5C/rB,EAAO8X,OAAOl0B,QAAQe,MAAMwE,QAAU,QACtC,IAAI6iC,EAAchsB,EAAO8X,OAAOl0B,QAChCooC,EAAYrnC,MAAMwa,MAAQ0sB,EAAW,MAEzClD,EAAItkB,KAAKumB,GACF,CAAC,WAepBqB,GAAc,SAAUjsB,EAAQuI,EAAOnf,GACvC,IAAIwE,EACA4Z,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAKhE,GAJKjB,IAEDA,EAAexH,EAAO4M,QAAQhpB,SAE9BwF,GAA6B,iBAApBA,EAAMsoB,WACQ,iBAApBtoB,EAAMsoB,WACc,mBAApBtoB,EAAMsoB,WACc,eAApBtoB,EAAMsoB,WACc,iBAApBtoB,EAAMsoB,WACc,wBAApBtoB,EAAMsoB,WACc,wBAApBtoB,EAAMsoB,WACc,sBAApBtoB,EAAMsoB,WACc,kBAApBtoB,EAAMsoB,WACc,iBAApBtoB,EAAMsoB,WACc,KAApBtoB,EAAMsoB,YACLtoB,EAAO,CACX,IAAI8iC,EAAwB7R,GAAiB9R,EAAME,gBAC/CyjB,GAEAA,EAAsBh6B,SAG1B8N,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUwnD,GAC7DA,EAAIj6B,YAERqW,EAAMgD,WAAW1nB,SAASI,cAAc,QAExCujB,EAAa3iB,iBAAiB,WAAWlgB,SAAQ,SAAUgH,GACvDA,EAAKiZ,gBAAgB,YAGzB4iB,EAAa3iB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC/B,KAA5BA,EAAKqlB,YAAY9H,SACjBvd,EAAK0a,UAAU6L,OAAO,iBAAkB,yBACxCvmB,EAAKiZ,gBAAgB,mBAIkB,QAA9CgJ,EAAK4Z,EAAa2D,8BAA2C,IAAPvd,GAAyBA,EAAG/I,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GACrG,KAA5BA,EAAKqlB,YAAY9H,SACjBvd,EAAK0a,UAAU6L,OAAO,iBAAkB,yBACxCvmB,EAAKiZ,gBAAgB,mBAG7B,IAAIwnC,EAAS,GACkC,wBAA3C5kB,EAAarjB,aAAa,eAE1BqjB,EAAexH,EAAO4M,QAAQhpB,SAElC,IA+EIyoC,EA/EAC,EAAmB9kB,EAAavG,YAAYjB,EAAO4M,QAAQhpB,SAC3DwtB,GAAkB,EAAGnrB,EAAsCorB,IAAI7J,EAAc,YAAa,mBAC9F,GAAK8kB,EAiDDF,EAAS5kB,EAAa/e,cAjDH,CAEnB,IAAIye,GAAiB,EAAGjhB,EAA2BsrB,IAAIhJ,EAAME,gBAC7D,GAAIvB,IAAmBkK,EAAiB,CACpC,IAAIE,GAAoB,EAAGxJ,EAA0ChB,GAAGyB,EAAME,eAAgB,cAG1FjB,EAFA8J,GAEe,EAAGrrB,EAAgC8lB,IAAIxD,EAAME,iBAAmBjB,EAGhEN,EAQvB,GAJIkK,IACA5J,EAAe4J,GAEnBgb,EAAS5kB,EAAa9T,UACO,OAAzB8T,EAAa/R,SAA6C,OAAzB+R,EAAa/R,QAAkB,CAEhE,IAAI+b,EAAkBhK,EAAa2D,uBAC/BsG,EAAkBjK,EAAaxG,oBAC/BwQ,GAAgD,OAA5BA,EAAgB/b,SAAgD,OAA5B+b,EAAgB/b,UACxE22B,EAAS5a,EAAgB9d,UAAY04B,EACrC5a,EAAgBtf,WAEhBuf,GAAgD,OAA5BA,EAAgBhc,SAAgD,OAA5Bgc,EAAgBhc,UACxE22B,GAAkB3a,EAAgB/d,UAClC+d,EAAgBvf,UAGpBk6B,EAASA,EAAO5uC,QAAQ,uBAAwB,6BAGpDwiB,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,qCAAqClgB,SAAQ,SAAUgH,GACvFA,IAAS67B,EAAavG,YAAYt1B,KAClCygD,GAAUzgD,EAAK+nB,UACf/nB,EAAKumB,aAIb8N,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,iCAAiClgB,SAAQ,SAAUgH,GACnFA,IAAS67B,EAAavG,YAAYt1B,KAClCygD,GAAUzgD,EAAK+nB,UACf/nB,EAAKumB,aAiBjB,GATAk6B,EAASA,EAAO5uC,QAAQ,8CAA+C,IAClEA,QAAQ,sCAAuC,IAC/CA,QAAQ,0CAA2C,IACzC,mCAAX4uC,GAA+CpsB,EAAO+O,KAAKiG,iBAC3DoX,EAAS,iCAAiC5uC,QAAQ,MAAO,MAAQwiB,EAAO+O,KAAKiG,iBAEjF1F,EAAI,gBAAiB8c,EAAQ,WAAYpsB,EAAOlV,QAAQ6mB,UACxDya,EAASpsB,EAAO7T,KAAKwU,cAAcyrB,GACnC9c,EAAI,gBAAiB8c,EAAQ,SAAUpsB,EAAOlV,QAAQ6mB,UAClD2a,EACA9kB,EAAa/e,UAAY2jC,OAIzB,GADA5kB,EAAa9T,UAAY04B,EACrBhb,EAAiB,CAEjB,IAAIQ,GAAsB,EAAG3rB,EAAmC61B,IAAI9b,EAAO4M,QAAQhpB,QAAQW,cAAc,OAAQ,MACjH,GAAIqtB,EAAqB,CACrB,IAAIG,EAAqB/R,EAAO4M,QAAQhpB,QAAQW,cAAc,wDAA6DqtB,EAAoBztB,aAAa,eAAiB,MACzK4tB,GACAA,EAAmBpoB,aAAa,aAAcioB,EAAoB5gB,YAAY9H,OAAOzC,OAAO,EAAG,MAM/G,IAcI8lC,EAdAta,EAAwBjS,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,qCACpEotB,EAAsBttC,SAAQ,SAAUgH,EAAMmmB,GAC5B,IAAVA,EACAu6B,EAA2B1gD,GAG3B0gD,EAAyBr3B,mBAAmB,YAAarpB,EAAK8c,WAC9D9c,EAAKumB,aAGT+f,EAAsB9qC,OAAS,GAC/B64B,EAAO4M,QAAQhpB,QAAQiE,sBAAsB,YAAaoqB,EAAsB,IAIpF,IAAIC,EAAqBlS,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,iCACjEqtB,EAAmBvtC,SAAQ,SAAUgH,EAAMmmB,GACzB,IAAVA,EACAy6B,EAAyB5gD,GAGzB4gD,EAAuBv3B,mBAAmB,YAAarpB,EAAK8c,WAC5D9c,EAAKumB,aAGTggB,EAAmB/qC,OAAS,GAC5B64B,EAAO4M,QAAQhpB,QAAQiE,sBAAsB,YAAaqqB,EAAmB,KAGjF,EAAG/qB,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5DvI,EAAO4M,QAAQhpB,QAAQiB,iBAAiB,6CACnClgB,SAAQ,SAAUgH,GACnBkkC,EAAkBlkC,EAAMq0B,MAExB5W,IAA8B,0BAApBA,EAAMsoB,WAA6D,yBAApBtoB,EAAMsoB,YAC/D1R,EAAOlV,QAAQy7B,QAAQ93C,SACvBuxB,EAAO4M,QAAQ4f,qBAAqBxsB,GACpCA,EAAOlV,QAAQy7B,QAAQE,UAAUzmB,EAAO4M,QAAQ4Z,YAAYxmB,GAAQ,KAG5EgQ,EAAUhQ,GACVga,GAAiBha,EAAQ,CACrBqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAKjBka,GAAwE,SAAUC,EAAQC,GAE1F,OADIltD,OAAOiD,eAAkBjD,OAAOiD,eAAegqD,EAAQ,MAAO,CAAE/uD,MAAOgvD,IAAiBD,EAAOC,IAAMA,EAClGD,GAEPE,GAAmE,SAAU/iC,EAASC,EAAYC,EAAG3mB,GACrG,SAAS4mB,EAAMrsB,GAAS,OAAOA,aAAiBosB,EAAIpsB,EAAQ,IAAIosB,GAAE,SAAU3sB,GAAWA,EAAQO,MAC/F,OAAO,IAAKosB,IAAMA,EAAIjsB,WAAU,SAAUV,EAASC,GAC/C,SAAS4sB,EAAUtsB,GAAS,IAAMusB,EAAK9mB,EAAU+C,KAAKxI,IAAW,MAAO6D,GAAKnE,EAAOmE,IACpF,SAAS2oB,EAASxsB,GAAS,IAAMusB,EAAK9mB,EAAU,SAASzF,IAAW,MAAO6D,GAAKnE,EAAOmE,IACvF,SAAS0oB,EAAKjlB,GAAUA,EAAOpH,KAAOT,EAAQ6H,EAAOtH,OAASqsB,EAAM/kB,EAAOtH,OAAOI,KAAKksB,EAAWE,GAClGD,GAAM9mB,EAAYA,EAAU9E,MAAMurB,EAASC,GAAc,KAAK3jB,YAGlE0mD,GAAuE,SAAUhjC,EAASjC,GAC1F,IAAsGyC,EAAG9S,EAAG+S,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAG5kB,KAAM,WAAa,GAAW,EAAPykB,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOI,KAAM,GAAIC,IAAK,IAChG,OAAOJ,EAAI,CAAEpkB,KAAMykB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAX3oB,SAA0BsoB,EAAEtoB,OAAOE,UAAY,WAAa,OAAOhE,OAAUosB,EACvJ,SAASK,EAAKpM,GAAK,OAAO,SAAUjP,GAAK,OAAO2a,EAAK,CAAC1L,EAAGjP,KACzD,SAAS2a,EAAKzX,GACV,GAAI4X,EAAG,MAAM,IAAIpkB,UAAU,mCAC3B,MAAOukB,EAAG,IACN,GAAIH,EAAI,EAAG9S,IAAM+S,EAAY,EAAR7X,EAAG,GAAS8E,EAAE,UAAY9E,EAAG,GAAK8E,EAAE,YAAc+S,EAAI/S,EAAE,YAAc+S,EAAE1mB,KAAK2T,GAAI,GAAKA,EAAEpR,SAAWmkB,EAAIA,EAAE1mB,KAAK2T,EAAG9E,EAAG,KAAK5U,KAAM,OAAOysB,EAE3J,OADI/S,EAAI,EAAG+S,IAAG7X,EAAK,CAAS,EAARA,EAAG,GAAQ6X,EAAE3sB,QACzB8U,EAAG,IACP,KAAK,EAAG,KAAK,EAAG6X,EAAI7X,EAAI,MACxB,KAAK,EAAc,OAAX+X,EAAEC,QAAgB,CAAE9sB,MAAO8U,EAAG,GAAI5U,MAAM,GAChD,KAAK,EAAG2sB,EAAEC,QAASlT,EAAI9E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK+X,EAAEG,IAAIxiB,MAAOqiB,EAAEE,KAAKviB,MAAO,SACxC,QACI,GAAMmiB,EAAIE,EAAEE,OAAMJ,EAAIA,EAAEnjB,OAAS,GAAKmjB,EAAEA,EAAEnjB,OAAS,MAAkB,IAAVsL,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE+X,EAAI,EAAG,SACjG,GAAc,IAAV/X,EAAG,MAAc6X,GAAM7X,EAAG,GAAK6X,EAAE,IAAM7X,EAAG,GAAK6X,EAAE,IAAM,CAAEE,EAAEC,MAAQhY,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY+X,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAI7X,EAAI,MAC7D,GAAI6X,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEG,IAAI9jB,KAAK4L,GAAK,MACvD6X,EAAE,IAAIE,EAAEG,IAAIxiB,MAChBqiB,EAAEE,KAAKviB,MAAO,SAEtBsK,EAAKmV,EAAKhkB,KAAKimB,EAASW,GAC1B,MAAOhpB,GAAKiR,EAAK,CAAC,EAAGjR,GAAI+V,EAAI,EAAK,QAAU8S,EAAIC,EAAI,EACtD,GAAY,EAAR7X,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE9U,MAAO8U,EAAG,GAAKA,EAAG,QAAK,EAAQ5U,MAAM,KAoB9Eo2C,GAAoB,SAAU7qB,EAAO4W,EAAQyI,GAC7C,GAAsB,MAAlBrf,EAAM0pB,SAAkC,KAAf1pB,EAAMwmB,MAA6B,iBAAdxmB,EAAM5rB,KAAiD,OAAvBwiC,EAAOQ,YAAsB,CAC3G,IAAIgH,GAAe,EAAGvhB,EAAgC8lB,IAAItD,GAE1D,GAAIjB,GAAoD,KAApCA,EAAaxW,YAAY9H,OAEzC,OADA8W,EAAOA,EAAOQ,aAAaoT,eAAgB,GACpC,EAGf,OAAO,GAGPM,GAAiB,SAAU3L,EAAOvI,EAAQ5W,GAC1C,KAAkB,UAAdA,EAAM5rB,KAAiC,QAAd4rB,EAAM5rB,KAA+B,cAAd4rB,EAAM5rB,KAAuB4rB,EAAM5rB,IAAIkQ,QAAQ,UAAY,IACxG,EAAGugC,EAA0ByE,IAAItpB,IAAwB,WAAdA,EAAM5rB,KAAoB4rB,EAAMwpB,UAAYxpB,EAAMupB,QADpG,CAIA,IAAIma,GAAa,EAAG7mC,EAAqCuI,IAAI+Z,EAAME,eAAgB,OAC/E,EAAGxiB,EAAqCuI,IAAI+Z,EAAME,eAAgB,MACtE,GAAIqkB,GAAuH,KAAzG,EAAG3lC,EAAiCipB,IAAI0c,EAAY9sB,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,MAAa,CAC1H,IAAIstC,EAAWlpC,SAAS2nB,eAAe1lB,EAA8ByE,EAAE+E,MACvEiZ,EAAMgD,WAAWwhB,GACjBxkB,EAAMuC,cAAciiB,MAIxBhX,GAA0B,SAAUxN,EAAO/qC,GAC3C,GAAY,cAARA,GAA+B,YAARA,EAAmB,CAC1C,IAAIwvD,GAAgB,EAAG/mC,EAAsCorB,IAAI9I,EAAME,eAAgB,YAAa,iBAChG,EAAGxiB,EAAsCorB,IAAI9I,EAAME,eAAgB,YAAa,iBAChF,EAAGxiB,EAAsCorB,IAAI9I,EAAME,eAAgB,YAAa,eAChFukB,IACY,cAARxvD,GACA+qC,EAAMuC,cAAckiB,EAAcp8B,eAE1B,YAARpzB,GACA+qC,EAAMsC,eAAemiB,EAAcp8B,kBAK/Cq8B,GAAmB,SAAUjtB,EAAQ/xB,GACrC,IAAIs6B,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CwH,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAC5DjB,IACAA,EAAaxS,mBAAmB/mB,EAAU,qBAAyB6X,EAA8ByE,EAAE+E,KAAO,gBAC1G,EAAGnI,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE4Z,GAAiBniB,GACjBqQ,GAAgBrQ,KAGpBmV,GAAc,SAAUF,GACxB,IAAIC,GAAe,EAAGjvB,EAAqCuI,IAAIymB,EAAa,SAC5E,SAAIC,IAAgBA,EAAazlC,KAAK,GAAGytC,MAAM,GAAG9R,WAAW6J,KAClDC,GAIXG,GAAa,SAAUJ,GACvB,IAAIC,GAAe,EAAGjvB,EAAqCuI,IAAIymB,EAAa,SAC5E,SAAIC,IAAgBA,EAAapJ,iBAAiBA,iBAAiBA,iBAAiBV,WAAW6J,KACpFC,GAKXgY,GAAiB,SAAUjY,EAAa1M,EAAO4kB,QAC5B,IAAfA,IAAyBA,GAAa,GAC1C,IAAI3R,EAAkBvG,EAAY9J,uBAqBlC,OApBKqQ,IAEGA,EADAvG,EAAYrkB,cAAcua,uBACR8J,EAAYrkB,cAAcua,uBAAuBW,iBAEV,UAApDmJ,EAAYrkB,cAAcA,cAAc6E,SAC7Cwf,EAAYrkB,cAAcA,cAAcua,uBACtB8J,EAAYrkB,cACzBA,cAAcua,uBAAuBW,iBAAiBA,iBAGzC,MAGtB0P,IACAjT,EAAM+B,mBAAmBkR,GACpB2R,GACD5kB,EAAMO,UAAS,IAEnB,EAAG3hB,EAAiC4B,IAAIwf,IAErCiT,GAEPhL,GAAmB,SAAUxQ,EAAQ5W,EAAOmf,EAAO3kB,EAAS4jB,GAC5D,IAAIv5B,GAAW,EAAGkZ,EAAiCipB,IAAIxsB,EAASoc,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACpG,GAAmB,cAAdnf,EAAM5rB,MAAiG,IAA1EomB,EAAQoN,YAAYuf,YAAY9pB,OAAOxY,EAASwR,OAAO/R,QAAQ,OAC9E,eAAd0b,EAAM5rB,KAAwByQ,EAASwR,OAASmE,EAAQoN,YAAYuf,YAAYppC,OAAS,CAC1F,IAAIk1C,EAAc7U,EAAaxG,mBAY/B,OAXKqb,GACAA,IAAwC,UAAxBA,EAAY5mB,SAAuB4mB,EAAYl4B,aAAa,eAC7EqjB,EAAaxS,mBAAmB,WAAY,qBAAyBlP,EAA8ByE,EAAE+E,KAAO,cAC5G,EAAGnI,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,KAGxEA,EAAM+B,mBAAmB+R,GACzB9T,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IAE5Cnf,EAAMyM,kBACC,EAEX,OAAO,GAEPya,GAAoB,SAAUtQ,EAAQ5W,EAAOmf,EAAO3kB,EAAS4jB,GAC7D,IAAIv5B,GAAW,EAAGkZ,EAAiCipB,IAAIxsB,EAASoc,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACpG,GAAmB,YAAdnf,EAAM5rB,MAAsF,IAAjEomB,EAAQoN,YAAYvK,OAAO,EAAGxY,EAASwR,OAAO/R,QAAQ,QAClE,cAAd0b,EAAM5rB,KAAsC,cAAd4rB,EAAM5rB,KAA4C,KAArB+qC,EAAMxgC,aAC5C,IAAnBkG,EAASwR,MAAc,CAC3B,IAAI+7B,EAAkBhU,EAAa2D,uBAanC,OAXKqQ,GACAA,IAAgD,UAA5BA,EAAgB/lB,SAAuB+lB,EAAgBr3B,aAAa,eACzFqjB,EAAaxS,mBAAmB,cAAe,qBAAyBlP,EAA8ByE,EAAE+E,KAAO,cAC/G,EAAGnI,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,KAGxEA,EAAM+B,mBAAmBkR,GACzBjT,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IAE5Cnf,EAAMyM,kBACC,EAEX,OAAO,GAEPutB,GAAa,SAAUpjB,EAAQuI,EAAO5kC,EAAM6kB,QAC7B,IAAXA,IAAqBA,GAAS,GAClC,IAAI4lB,GAAc,EAAGnoB,EAAqCuI,IAAI+Z,EAAME,eAAgB,MAKpF,GAJAzI,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUwnD,GACzEA,EAAIj6B,YAERqW,EAAMgD,WAAW1nB,SAASI,cAAc,QACpCuE,GAAU4lB,EAAa,CAGvB,IADA,IAAIgf,EAAQ,GACHtsD,EAAI,EAAGA,EAAIstC,EAAYxd,cAAc8e,kBAAmB5uC,IAAK,CAClE,IAAIm7C,EAAe7N,EAAYxd,cAAc2O,SAASz+B,GAAGyjB,cAAc,SACnE03B,GACAA,EAAa/pB,SAEjBk7B,GAAS,qBAAyBhf,EAAYxd,cAAc2O,SAASz+B,GAAG2nB,UAAU4kC,WAAa,OAEnGjf,EAAYxd,cAAcoE,mBAAmB,cAAeo4B,GAC5Dhf,EAAYxd,cAAcsB,cAG1B,GAAKkc,EAuBD,GAAa,UAATzqC,EACAyqC,EAAYxd,cAAc/L,iBAAiB,MAAMlgB,SAAQ,SAAUgH,GAC/DA,EAAKqpB,mBAAmB,aAAc,6BAAmE,IAAlCrpB,EAAKqlB,YAAYtjB,QAAQ,KAAa,GAAK,MAClH/B,EAAK0a,UAAUC,IAAI,sBAGtB,CACG8nB,EAAY7pB,cAAc,UAC1B6pB,EAAYxd,cAAc/L,iBAAiB,MAAMlgB,SAAQ,SAAUgH,GAC/DA,EAAK4Y,cAAc,SAAS2N,SAC5BvmB,EAAK0a,UAAU6L,OAAO,kBAG9B,IAAItO,OAAU,EAEVA,EADS,SAATjgB,EACUkgB,SAASI,cAAc,MAGvBJ,SAASI,cAAc,MAErCL,EAAQ6E,UAAY2lB,EAAYxd,cAAcnI,UAC9C2lB,EAAYxd,cAAcsqB,WAAWoS,aAAa1pC,EAASwqB,EAAYxd,mBA5C7D,CAEd,IAAI4W,GAAe,EAAGvhB,EAAsCorB,IAAI9I,EAAME,eAAgB,aAAc,KAC/FjB,IACDxH,EAAOA,EAAOQ,aAAa5c,QAAQW,cAAc,OAAO2N,SACxDsV,EAAexH,EAAOA,EAAOQ,aAAa5c,QAAQW,cAAc,KAChEijB,EAAa/e,UAAY,SAEhB,UAAT9kB,GACA6jC,EAAaxS,mBAAmB,cAAe,wEAAgFwS,EAAa/e,UAAY,cACxJ+e,EAAatV,UAEC,SAATvuB,GACL6jC,EAAaxS,mBAAmB,cAAe,0BAA8BwS,EAAa/e,UAAY,cACtG+e,EAAatV,UAEC,iBAATvuB,IACL6jC,EAAaxS,mBAAmB,cAAe,0BAA8BwS,EAAa/e,UAAY,cACtG+e,EAAatV,YA+BzBq7B,GAAa,SAAUvtB,EAAQ8Z,EAAWvR,GAC1C,IAAIiT,EAAkB1B,EAAU3O,uBAChC,GAAI2O,GAAa0B,EAAiB,CAC9B,IAAIgS,EAAe,CAAC1T,GACpB1jC,MAAM+pB,KAAKoI,EAAMklB,gBAAgBluB,UAAU56B,SAAQ,SAAUgH,EAAMmmB,GACzC,IAAlBnmB,EAAK07B,UAAkByS,GAAyC,KAA5BnuC,EAAKqlB,YAAY9H,QAClD4wB,EAAU31B,aAAa,kBAAoBxY,EAAKwY,aAAa,kBAClD,IAAV2N,GACA07B,EAAa3mD,KAAKizC,GAEtBA,EAAYA,EAAU9Y,uBAG9BhB,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUwnD,GACzEA,EAAIj6B,YAERqW,EAAMgD,WAAW1nB,SAASI,cAAc,QACxC,IAAIypC,EAAkBlS,EAAgB5qB,cAClC+8B,EAAW,GACfH,EAAa7oD,SAAQ,SAAUgH,GAC3B,IAAImmC,EAASnmC,EAAKwY,aAAa,eACT,IAAlB2tB,EAAO3qC,SACP2qC,EAAS,IAAMA,EAAOvpC,OAAO,IAEjColD,GAAY,qBAAwBhiD,EAAKwY,aAAa,gBAAkB,kBAAsB2tB,EAAS,KAAQnmC,EAAK8c,UAAY,QAChI9c,EAAKumB,YAETspB,EAAgBxmB,mBAAmB,YAAa,IAAM04B,EAAgBj4B,QAAU,mBAAuBk4B,EAAW,KAAOD,EAAgBj4B,QAAU,KACxH,YAAvBuK,EAAOQ,YACPktB,EAAgBh6B,UAAYsM,EAAO7T,KAAKwU,cAAc+sB,EAAgBh6B,WAGtEg6B,EAAgBh6B,UAAYsM,EAAO7T,KAAKuU,gBAAgBgtB,EAAgBh6B,YAE5E,EAAGvM,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE,IAAIqlB,GAAqB,EAAG3nC,EAA2BsrB,IAAIhJ,EAAME,gBAC7DmlB,GACAA,EAAmB/oC,iBAAiB,WAAamb,EAAOQ,YAAc,8BACjE77B,SAAQ,SAAUgH,GACnBkkC,EAAkBlkC,EAAMq0B,GACG,YAAvBA,EAAOQ,aACP70B,EAAKw/B,uBAAuBxhB,aAAa,QAAS,mBAI9D0mB,GAAgBrQ,GAChBmiB,GAAiBniB,QAGjBA,EAAOA,EAAOQ,aAAa5c,QAAQ8kB,SAGvCmlB,GAAc,SAAU7tB,EAAQ8Z,EAAWvR,EAAOrB,GAClD,IAAI4mB,GAAoB,EAAG7nC,EAAqCuI,IAAIsrB,EAAUlpB,cAAe,MAC7F,GAAIk9B,EAAmB,CACnB9tB,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUwnD,GACzEA,EAAIj6B,YAERqW,EAAMgD,WAAW1nB,SAASI,cAAc,QACxC,IAAIypC,EAAkB5T,EAAUlpB,cAC5Bm9B,EAAuBL,EAAgBzhB,YACvC+hB,EAAe,CAAClU,GACpB1jC,MAAM+pB,KAAKoI,EAAMklB,gBAAgBluB,UAAU56B,SAAQ,SAAUgH,EAAMmmB,GACzC,IAAlBnmB,EAAK07B,UAAkByS,GAAyC,KAA5BnuC,EAAKqlB,YAAY9H,QACrD4wB,EAAU31B,aAAa,kBAAoBxY,EAAKwY,aAAa,kBAC/C,IAAV2N,GACAk8B,EAAannD,KAAKizC,GAEtBA,EAAYA,EAAU9Y,uBAG9B,IAAIitB,GAAY,EACZC,EAAc,GAClBR,EAAgB7oC,iBAAiB,MAAMlgB,SAAQ,SAAUgH,GACjDsiD,IACAC,GAAeviD,EAAK+nB,UACf/nB,EAAKq1B,oBAAuBr1B,EAAKw/B,uBAIlCx/B,EAAKumB,SAHLvmB,EAAKilB,cAAcsB,UAMvBvmB,EAAKy/B,WAAW4iB,EAAaA,EAAa7mD,OAAS,MACnD8mD,GAAY,MAGpBD,EAAa9lD,UAAUvD,SAAQ,SAAUgH,GACrCmiD,EAAkBjmC,sBAAsB,WAAYlc,MAEpDuiD,IACAH,EAAqBtlC,UAAYylC,EACjCF,EAAa,GAAGnmC,sBAAsB,YAAakmC,IAE5B,YAAvB/tB,EAAOQ,YACP0G,EAAexT,UAAYsM,EAAO7T,KAAKwU,cAAcuG,EAAexT,WAGpEwT,EAAexT,UAAYsM,EAAO7T,KAAKuU,gBAAgBwG,EAAexT,YAE1E,EAAGvM,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE,IAAIqlB,GAAqB,EAAG3nC,EAA2BsrB,IAAIhJ,EAAME,gBAC7DmlB,GACAA,EAAmB/oC,iBAAiB,WAAamb,EAAOQ,YAAc,8BACjE77B,SAAQ,SAAUgH,GACnBkkC,EAAkBlkC,EAAMq0B,GACG,YAAvBA,EAAOQ,aACP70B,EAAKw/B,uBAAuBxhB,aAAa,QAAS,mBAI9D0mB,GAAgBrQ,GAChBmiB,GAAiBniB,QAGjBA,EAAOA,EAAOQ,aAAa5c,QAAQ8kB,SAGvCkV,GAAgB,SAAU1I,EAAcvxC,GAKxC,IAJA,IAAImgD,EAAO76B,eAAeI,WAAW,GAAGof,eAAe7X,cACnDu9B,EAAYjZ,EAAazlC,KAAK,GAAGytC,MAAM/1C,OACvCinD,EAASlZ,EAAazlC,KAAKtI,OAC3BknD,EAAgB,EACXvtD,EAAI,EAAGA,EAAIstD,EAAQttD,IACxB,IAAK,IAAI8U,EAAI,EAAGA,EAAIu4C,EAAWv4C,IAC3B,GAAIs/B,EAAazlC,KAAK3O,GAAGo8C,MAAMtnC,GAAGw1B,WAAW0Y,GAAO,CAChDuK,EAAgBz4C,EAChB,MAIZ,IAAK,IAAIsZ,EAAI,EAAGA,EAAIk/B,EAAQl/B,IACxBgmB,EAAazlC,KAAKyf,GAAGguB,MAAMmR,GAAe1kC,aAAa,QAAShmB,IAGpEgtC,GAAS,SAAUj+B,GAEnB,IAAIo/B,EAASp/B,EAAK69B,YAAYnyB,MAAM,MAAMjW,MAC1C,MAAe,KAAX2pC,KAG+B,KAA/BA,EAAOt0B,QAAQ,OAAQ,KACW,KAA/Bs0B,EAAOt0B,QAAQ,OAAQ,KACS,KAAhCs0B,EAAOt0B,QAAQ,QAAS,OACvBs0B,EAAOt0B,QAAQ,KAAM,IAAIrW,OAAS,MAC9B2qC,EAAOpkC,QAAQ,MAAQ,IAAyC,IAApCokC,EAAOub,WAAW3/C,QAAQ,MACnDgF,EAAK69B,YAAYnyB,MAAM,MAAMjX,OAAS,KAId,IAA3B2qC,EAAOpkC,QAAQ,SAA0C,IAAzBokC,EAAOpkC,QAAQ,WAU3DkjC,GAAc,SAAUl+B,GAExB,IAAI47C,EAAY57C,EAAK69B,YAAYnyB,MAAM,MAEvC,OADA1L,EAAO47C,EAAUnmD,MACY,IAAzBuK,EAAKhF,QAAQ,SAAwC,IAAvBgF,EAAKhF,QAAQ,QAG/CgF,EAAOA,EAAK26C,WACC,KAAT36C,GAAoC,IAArB47C,EAAUnnD,SAGE,KAA3BuL,EAAK8K,QAAQ,KAAM,KACW,KAA3B9K,EAAK8K,QAAQ,KAAM,OAK1B6yB,GAAkB,SAAUrQ,EAAQlV,QACpB,IAAZA,IAAsBA,EAAU,CAChCunB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEU,YAAvBvS,EAAOQ,YACPwZ,GAAiBha,EAAQlV,GAEG,OAAvBkV,EAAOQ,YACZ4R,GAA2BpS,EAAQlV,GAEP,OAAvBkV,EAAOQ,aACZyV,GAAmBjW,EAAQlV,IAG/B2pB,GAAU,SAAUlM,EAAOvI,EAAQuU,EAAUnrB,GAC7C,IAAIwE,EACA6a,EAAiBF,EAAME,eACvBqR,GAAY,EAAG7zB,EAAqCuI,IAAIia,EAAgB,MAC5E,GAAIqR,EAAW,CACX,KAAK,EAAG7L,EAA0ByE,IAAItpB,KAAWA,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,MAEjE4rB,EAAMwpB,UAAY2B,GAAYuF,EAAUjpB,SAAS0jB,IAAaA,EAASvT,mBASzE,OARI8Y,IAAcA,EAAU9oB,YAAYu9B,SAAS,OAE7CzU,EAAU0O,mBAAmB,YAAa,MAE9CjgB,EAAMgD,WAAW1nB,SAAS2nB,eAAe,SACzCjD,EAAMO,UAAS,GACfuH,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAEX,KAAK,EAAGoY,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QAAwB,cAAdvpB,EAAM5rB,MACrFs8C,EAAU3O,wBAA+C,KAArB5C,EAAMxgC,YAC6D,KAAxG,EAAGof,EAAiCipB,IAAI0J,EAAW9Z,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,MAY9F,OAVIq6B,EAAU9Y,oBACV8Y,EAAUlpB,cAAcoE,mBAAmB,cAAe,0BAA8B8kB,EAAUrxB,UAAY,QAC9GqxB,EAAU5nB,UAGV4nB,EAAUlpB,cAAc8C,UAAY,0BAA8BomB,EAAUrxB,UAAY,QAE5F,EAAGtB,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAGX,KAAK,EAAGoY,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QAAwB,cAAdvpB,EAAM5rB,KACH,KAAnFs8C,EAAU9oB,YAAY9H,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,KACtD,KAArBiZ,EAAMxgC,YAAmH,QAAjD,QAA3C6lB,EAAKksB,EAAU3O,8BAA2C,IAAPvd,OAAgB,EAASA,EAAG6H,SAQ5G,OAPAqkB,EAAU3O,uBAAuBqd,mBAAmB,YAAa,QACjEjgB,EAAM+B,mBAAmBwP,EAAU3O,wBACnC5C,EAAMO,UAAS,GACfgR,EAAU5nB,UACV,EAAG/K,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAEX,KAAK,EAAGoY,EAA0ByE,IAAItpB,KAAWA,EAAMupB,QAAwB,QAAdvpB,EAAM5rB,IAAe,CAElF,IAAI85C,GAAU,EAad,IAZ0B,IAAtB/O,EAAMc,cAC2B,IAA5BZ,EAAepB,WAAmBoB,EAAe4C,iBAClB,IAA5B5C,EAAepB,UAA8C,OAA5BoB,EAAe5B,WAInDiT,EAAUzzB,UAAUwK,SAAS,gBAAwC,IAAtB0X,EAAMc,aACX,IAA5CZ,EAAe4C,gBAAgBhE,UACY,UAA3CoB,EAAe4C,gBAAgB5V,WAJlC6hB,GAAU,GAQVA,GAAgC,KAArB/O,EAAMxgC,WAQjB,OAPIqhB,EAAMwpB,SACNib,GAAY7tB,EAAQ8Z,EAAWvR,EAAOuR,EAAUlpB,eAGhD28B,GAAWvtB,EAAQ8Z,EAAWvR,GAElCnf,EAAMyM,kBACC,GAInB,OAAO,GAGP2f,GAAS,SAAUxV,EAAQuI,EAAOnf,GAClC,GAAI4W,EAAOlV,QAAQ0jC,KAAqB,QAAdplC,EAAM5rB,IAkB5B,OAjBI4rB,EAAMwpB,WAImB,KAArBrK,EAAMxgC,YACNwgC,EAAMgD,WAAW1nB,SAAS2nB,eAAexL,EAAOlV,QAAQ0jC,MACxDjmB,EAAMO,UAAS,KAGfP,EAAMmP,kBACNnP,EAAMgD,WAAW1nB,SAAS2nB,eAAexL,EAAOlV,QAAQ0jC,MACxDjmB,EAAMO,UAAS,MAGvB,EAAG3hB,EAAiC4B,IAAIwf,GACxC8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,GAGX2e,GAAc,SAAUprB,EAAO4W,EAAQuU,EAAUhM,GACjD,GAAKgM,EAAL,CAGA,KAAK,EAAGtG,EAA0ByE,IAAItpB,KAAWA,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,IAAiB,CACpF,IAAIixD,EAAQr2C,OAAOu0C,IAAIngB,IAAqBA,EAAmBigB,GAAqB,CAAC,GAAI,IAAK,CAAC,GAAI,MAAOlY,EAASvjB,aAAaxT,QAAQ,QAAS,IAAI0L,OACjJwlC,EAAYD,EAAMrwC,MAAM,KAC5B,GAAIqwC,EAAMtoB,WAAW,MAAQsoB,EAAMF,SAAS,MAAQG,EAAUvnD,OAAS,EAAG,CAEtE,IAAIwnD,EAAgBD,EAAU55B,KAAI,WAAc,MAAO,SAAUtc,KAAK,KAQtE,OAPAm2C,EACIpa,EAASvjB,YAAc,KAAO29B,EAAcn7C,UAAU,EAAGm7C,EAAcxnD,OAAS,GAAK,WACzFotC,EAAS7gB,UAAYsM,EAAO7T,KAAKwU,cAAcguB,IAC/C,EAAGxnC,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB0W,GAAa1W,GACb5W,EAAMyM,kBACC,EAGX,GAAI8a,GAAO4D,EAAS9rB,YAAc8rB,EAASpJ,uBAAwB,CAE/D,IAAIyjB,EAAa,GACbC,EAAgBta,EAAS9rB,UAAU8nB,YAAYnyB,MAAM,MAWzD,OAVIywC,EAAc1nD,OAAS,IACvB0nD,EAAc1mD,MACdymD,EAAa,qBAAyBC,EAAcr2C,KAAK,MAAQ,QAErE+7B,EAASvf,mBAAmB,WAAY45B,EAAa,oDACrDra,EAASriB,UACT,EAAG/K,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB0W,GAAa1W,GACb5W,EAAMyM,kBACC,EAEX,GAAI+a,GAAY2D,EAAS9rB,WAYrB,MAV2B,YAAvBuX,EAAOQ,YACP+T,EAAS7gB,UAAYsM,EAAO7T,KAAKwU,cAAc4T,EAAS9rB,UAAY,iCAGpE8rB,EAAS7gB,UAAYsM,EAAO7T,KAAKuU,gBAAgB6T,EAAS9rB,UAAY,kCAE1E,EAAGtB,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB0W,GAAa1W,GACb5W,EAAMyM,kBACC,EAIf,GAAI0S,EAAMmL,WAAaa,EAASpJ,wBAAwC,cAAd/hB,EAAM5rB,OAC3D,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMupB,SAAWvpB,EAAMwpB,UACpE2B,EAASvjB,YAAYuf,YAAYnyB,MAAM,MAAMjX,OAAS,GACiD,KAAvG,EAAGggB,EAAiCipB,IAAImE,EAAUvU,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,MAAa,CAC1G,IAAIqvC,GAAc,EAAG7oC,EAA4B8oC,IAAIxa,EAASpJ,wBAO9D,OANK2jB,EAAY99B,YAAYu9B,SAAS,QAClCO,EAAY99B,YAAc89B,EAAY99B,YAAc,MAExD89B,EAAYl+B,cAAcoE,mBAAmB,YAAa,QAAUuf,EAAS9rB,WAC7E8rB,EAASriB,UACT,EAAG/K,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,IACjE,EAEX,OAAO,IAEPkW,GAAY,SAAUze,EAAQuI,EAAO0M,GAErC,IADA,IAAIwI,EAAU,GACL76B,EAAI,EAAGA,EAAIqyB,EAAYrkB,cAAc8e,kBAAmB9sB,IAC7D66B,GAAW,cAAiBxI,EAAYrkB,cAAc2O,SAAS3c,GAAGuB,aAAa,SAAW,WAElE,OAAxB8wB,EAAYxf,QACZwf,EAAYrkB,cAAcA,cAAcoE,mBAAmB,WAAY,cAAgByoB,EAAU,iBAGjGxI,EAAYrkB,cAAcoE,mBAAmB,WAAY,OAASyoB,EAAU,SAEhFpN,GAAgBrQ,IAEhB2e,GAAiB,SAAU3e,EAAQuI,EAAO0M,GAE1C,IADA,IAAIwI,EAAU,GACL76B,EAAI,EAAGA,EAAIqyB,EAAYrkB,cAAc8e,kBAAmB9sB,IACjC,OAAxBqyB,EAAYxf,QACZgoB,GAAW,cAAiBxI,EAAYrkB,cAAc2O,SAAS3c,GAAGuB,aAAa,SAAW,WAG1Fs5B,GAAW,cAAiBxI,EAAYrkB,cAAc2O,SAAS3c,GAAGuB,aAAa,SAAW,WAGlG,GAA4B,OAAxB8wB,EAAYxf,QAAkB,CAC9Bwf,EAAYrkB,cAAcA,cAAcoE,mBAAmB,cAAe,cAAgByoB,EAAU,iBACpGlV,EAAMgD,WAAW1nB,SAASI,cAAc,QACxC,IAAI+qC,EAAY/Z,EAAYrkB,cAAcnI,UAAUjL,QAAQ,QAAS,QAAQA,QAAQ,UAAW,SAChGy3B,EAAYrkB,cAAcA,cAAcoQ,mBAAmBhM,mBAAmB,aAAcg6B,GAC5F/Z,EAAYrkB,cAAcA,cAAcsB,UACxC,EAAG/K,EAA6BgrB,IAAInS,EAAO8M,GAAGlpB,QAAS2kB,QAGvD0M,EAAYrkB,cAAcoE,mBAAmB,cAAe,OAASyoB,EAAU,SAEnFpN,GAAgBrQ,IAEhB8e,GAAe,SAAU9e,EAAQkV,EAAcD,EAAatxC,QAC/C,IAATA,IAAmBA,EAAO,YAC9B,IAAImuB,EAAQ,EACR0pB,EAAkBvG,EAAY9J,uBAClC,MAAOqQ,EACH1pB,IACA0pB,EAAkBA,EAAgBrQ,uBAEtC,IAAK,IAAIrqC,EAAI,EAAGA,EAAIo0C,EAAazlC,KAAKtI,OAAQrG,IAChC,IAANA,EACAo0C,EAAazlC,KAAK3O,GAAGo8C,MAAMprB,GAAOkD,mBAAmBrxB,EAAM,cAG3DuxC,EAAazlC,KAAK3O,GAAGo8C,MAAMprB,GAAOkD,mBAAmBrxB,EAAM,cAGnE0sC,GAAgBrQ,IAEhBkf,GAAY,SAAUlf,EAAQuI,EAAO0M,GACrC,GAA4B,OAAxBA,EAAYxf,QAAkB,CAC9B,IAAIw5B,EAAeha,EAAYrkB,cAAcA,cACzCqkB,EAAYrkB,cAAcua,uBAC1B5C,EAAM+B,mBAAmB2K,EAAYrkB,cAAcua,uBAAuBW,kBAG1EvD,EAAM+B,mBAAmB2kB,EAAa9jB,uBAAuBW,iBAAiBA,kBAE3C,IAAnCmjB,EAAavf,kBACbuf,EAAa/8B,SAGb+iB,EAAYrkB,cAAcsB,SAE9BqW,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,GACxC8H,GAAgBrQ,KAGpBof,GAAe,SAAUpf,EAAQuI,EAAO2M,EAAcD,GACtD,IAAInjB,EAAQ,EACR0pB,EAAkBvG,EAAY9J,uBAClC,MAAOqQ,EACH1pB,IACA0pB,EAAkBA,EAAgBrQ,wBAElC8J,EAAY9J,wBAA0B8J,EAAYjU,sBAClDuH,EAAM+B,mBAAmB2K,EAAY9J,wBAA0B8J,EAAYjU,oBAC3EuH,EAAMO,UAAS,IAEnB,IAAK,IAAIhoC,EAAI,EAAGA,EAAIo0C,EAAazlC,KAAKtI,OAAQrG,IAAK,CAC/C,IAAIo8C,EAAQhI,EAAazlC,KAAK3O,GAAGo8C,MACjC,GAAqB,IAAjBA,EAAM/1C,OAAc,CACpB+tC,EAAahjB,SACbiwB,GAAiBniB,GACjB,MAEJkd,EAAMprB,GAAOI,UAEjB,EAAG/K,EAAiC4B,IAAIwf,GACxC8H,GAAgBrQ,IAEhBsV,GAAW,SAAUtV,EAAQ5W,EAAOmf,GACpC,IAAIE,EAAiBF,EAAME,eACvBwM,GAAc,EAAGhvB,EAAqCuI,IAAIia,EAAgB,QAC1E,EAAGxiB,EAAqCuI,IAAIia,EAAgB,MAChE,GAAIwM,EAAa,CAEb,KAAK,EAAGhH,EAA0ByE,IAAItpB,KAAWA,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,IAAiB,CAC/Ey3C,EAAYnJ,oBACZmJ,EAAYnJ,kBAAsBmJ,EAAYnJ,iBAAiBV,WAAW6J,EAAYtN,YAC1C,OAAzCsN,EAAYnJ,iBAAiBrW,UACjCwf,EAAYjgB,mBAAmB,YAAa,QAEhD,IAAIk6B,EAAYrrC,SAASI,cAAc,MAMvC,OALAskB,EAAMgD,WAAW2jB,GACjB3mB,EAAMuC,cAAcokB,GACpB7e,GAAgBrQ,GAChB0W,GAAa1W,GACb5W,EAAMyM,kBACC,EAGX,GAAkB,QAAdzM,EAAM5rB,IAAe,CACrB,GAAI4rB,EAAMwpB,SAIN,OAFAsa,GAAejY,EAAa1M,GAC5Bnf,EAAMyM,kBACC,EAEX,IAAIwmB,EAAcpH,EAAYjU,mBAmB9B,OAlBKqb,IAEGA,EADApH,EAAYrkB,cAAcoQ,mBACZiU,EAAYrkB,cAAcoQ,mBAAmBD,kBAEF,UAApDkU,EAAYrkB,cAAcA,cAAc6E,SAC7Cwf,EAAYrkB,cAAcA,cAAcoQ,mBAEpCiU,EAAYrkB,cAAcA,cAAcoQ,mBAAmBD,kBAAkBA,kBAGnE,MAGlBsb,IACA9T,EAAM+B,mBAAmB+R,IACzB,EAAGl1B,EAAiC4B,IAAIwf,IAE5Cnf,EAAMyM,kBACC,EAEX,IAAIqf,EAAeD,EAAYrkB,cAAcA,cAAcA,cAC3D,GAAkB,YAAdxH,EAAM5rB,IAAmB,CAEzB,GADA4rB,EAAMyM,iBACsB,OAAxBof,EAAYxf,QASZ,OARIyf,EAAa/J,wBACb5C,EAAM+B,mBAAmB4K,EAAa/J,wBACtC5C,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IAGxC0kB,GAAiBjtB,EAAQ,gBAEtB,EAIX,IAFA,IAAIpd,EAAI,EACJusC,EAAYla,EAAYrkB,cACrBhO,EAAIusC,EAAUjS,MAAM/1C,OAAQyb,IAC/B,GAAIusC,EAAUjS,MAAMt6B,GAAGwoB,WAAW6J,GAC9B,MAGR,IAAIuG,EAAkB2T,EAAUhkB,uBAOhC,OANKqQ,IACDA,EAAkB2T,EAAUv+B,cAAcua,uBAAuB0J,YAErEtM,EAAM+B,mBAAmBkR,EAAgB0B,MAAMt6B,IAC/C2lB,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IACjC,EAEX,GAAkB,cAAdnf,EAAM5rB,IAAqB,CAC3B4rB,EAAMyM,iBACFs5B,EAAYla,EAAYrkB,cAC5B,IAAKu+B,EAAUnuB,oBAA8C,OAAxBiU,EAAYxf,QAS7C,OARIyf,EAAalU,oBACbuH,EAAM+B,mBAAmB4K,EAAalU,oBACtCuH,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IAGxC0kB,GAAiBjtB,EAAQ,aAEtB,EAGX,IADIpd,EAAI,EACDA,EAAIusC,EAAUjS,MAAM/1C,OAAQyb,IAC/B,GAAIusC,EAAUjS,MAAMt6B,GAAGwoB,WAAW6J,GAC9B,MAGJoH,EAAc8S,EAAUnuB,mBAO5B,OANKqb,IACDA,EAAc8S,EAAUv+B,cAAcoQ,mBAAmB6T,YAE7DtM,EAAM+B,mBAAmB+R,EAAYa,MAAMt6B,IAC3C2lB,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IACjC,EAGX,GAA2B,YAAvBvI,EAAOQ,eACN,EAAGyN,EAA0ByE,IAAItpB,IAAwB,UAAdA,EAAM5rB,MAAoB4rB,EAAMwpB,UAAYxpB,EAAMupB,OAAQ,CACtG,IAAIsJ,EAAejc,EAAO4M,QAAQoC,QAAQzqB,cAAc,iBAIxD,OAHA03B,EAAavT,QACbuT,EAAaL,SACbxyB,EAAMyM,kBACC,EAGX,KAAK,EAAGoY,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QAAwB,cAAdvpB,EAAM5rB,KAC7D,IAAtB+qC,EAAMc,aAA0C,KAArBd,EAAMxgC,WAAmB,CACvD,IAAIqnD,EAAsBlC,GAAejY,EAAa1M,GAAO,GAa7D,OAZK6mB,GAAuBla,IACgB,KAApCA,EAAalkB,YAAY9H,QACzBgsB,EAAaxhB,UAAY,iCACzB,EAAGvM,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,KAGxEA,EAAMsC,eAAeqK,GACrB3M,EAAMO,UAAS,IAEnBuH,GAAgBrQ,IAEpB5W,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,MAAOppB,GAGnB,OAFAu1B,GAAe3e,EAAQuI,EAAO0M,GAC9B7rB,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,KAAMppB,GAGlB,OAFAq1B,GAAUze,EAAQuI,EAAO0M,GACzB7rB,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,MAAOppB,GAGnB,OAFA01B,GAAa9e,EAAQkV,EAAcD,EAAa,eAChD7rB,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,MAAOppB,GAGnB,OAFA01B,GAAa9e,EAAQkV,EAAcD,GACnC7rB,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,KAAMppB,GAGlB,OAFA81B,GAAUlf,EAAQuI,EAAO0M,GACzB7rB,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,MAAOppB,GAGnB,OAFAg2B,GAAapf,EAAQuI,EAAO2M,EAAcD,GAC1C7rB,EAAMyM,kBACC,EAGX,GAAI2c,EAAY,MAAOppB,GAAQ,CAC3B,GAA2B,OAAvB4W,EAAOQ,YAIP,OAHAod,GAAc1I,EAAc,QAC5B7E,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAGP,IAAIuY,EAAcpO,EAAO4M,QAAQoC,QAAQzqB,cAAc,sBACvD,GAAI6pB,EAGA,OAFAA,EAAY+N,QACZ/yB,EAAMyM,kBACC,EAKnB,GAAI2c,EAAY,MAAOppB,GAAQ,CAC3B,GAA2B,OAAvB4W,EAAOQ,YAIP,OAHAod,GAAc1I,EAAc,UAC5B7E,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAGHuY,EAAcpO,EAAO4M,QAAQoC,QAAQzqB,cAAc,wBACvD,GAAI6pB,EAGA,OAFAA,EAAY+N,QACZ/yB,EAAMyM,kBACC,EAKnB,GAAI2c,EAAY,MAAOppB,GAAQ,CAC3B,GAA2B,OAAvB4W,EAAOQ,YAIP,OAHAod,GAAc1I,EAAc,SAC5B7E,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAGHuY,EAAcpO,EAAO4M,QAAQoC,QAAQzqB,cAAc,uBACvD,GAAI6pB,EAGA,OAFAA,EAAY+N,QACZ/yB,EAAMyM,kBACC,GAKvB,OAAO,GAEPif,GAAe,SAAU9U,EAAQ5W,EAAOwrB,EAAmBrM,GAE3D,GAAkC,QAA9BqM,EAAkBnf,SAAqB+c,EAAY,KAAMppB,GAGzD,OAFAmf,EAAM+B,mBAAmBsK,EAAkB7T,mBAC3C3X,EAAMyM,kBACC,EAIX,GAAImK,EAAOlV,QAAQ0jC,KAAqB,QAAdplC,EAAM5rB,MAAkB4rB,EAAMwpB,UAAiC,KAArBrK,EAAMxgC,WAKtE,OAJAwgC,EAAMgD,WAAW1nB,SAAS2nB,eAAexL,EAAOlV,QAAQ0jC,MACxDjmB,EAAMO,UAAS,GACfuH,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAGX,GAAkB,cAAdzM,EAAM5rB,OAAwB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,OAAQ,CAC3G,IAAI0c,GAAe,EAAGloC,EAAiCipB,IAAIwE,EAAmB5U,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAClH,IAA4B,IAAvB8mB,EAAa5vC,OACU,IAAvB4vC,EAAa5vC,OAA+C,OAAhCm1B,EAAkBxjB,YACvB,KAArBmX,EAAMxgC,WAMT,OALA6sC,EAAkBhkB,cAAc8C,UAC5B,0BAA8BkhB,EAAkB7T,kBAAkBtY,UAAY,QAClF,EAAGtB,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAIf,QAAK,EAAGoY,EAA0ByE,IAAItpB,KAAWA,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,MAC9Do3C,EAAkB7T,kBAAkB/P,YAAYu9B,SAAS,OAC1D3Z,EAAkB7T,kBAAkBynB,mBAAmB,YAAa,MAExEjgB,EAAMmP,kBACNnP,EAAMgD,WAAW1nB,SAAS2nB,eAAe,OACzCjD,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,IACnC,EAAG0F,EAA6B+E,QACN,YAAvBhT,EAAOQ,YACPyrB,GAAYjsB,EAAQuI,GAGpBxoC,EAAMigC,EAAQuI,IAGtBmO,GAAa1W,GACb5W,EAAMyM,kBACC,IAIX6e,GAAgB,SAAU1U,EAAQuI,EAAOnf,EAAOmrB,GAChD,IAAI9L,EAAiBF,EAAME,eACvB6I,GAAoB,EAAGrrB,EAAqCuI,IAAIia,EAAgB,cACpF,GAAI6I,GAA0C,KAArB/I,EAAMxgC,WAAmB,CAC9C,GAAkB,cAAdqhB,EAAM5rB,OAAwB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QACa,KAAhH,EAAGxrB,EAAiCipB,IAAIkB,EAAmBtR,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,MAOtG,OALA8oB,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCqtB,EAAkB5d,UAAY4d,EAAkB7oB,WAChD,EAAGtB,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAEX,GAAI0e,GAA0B,UAAdnrB,EAAM5rB,OAAoB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QACrE,eAAnC4B,EAAS3jB,cAAc6E,QAA0B,CAEpD,IAAI65B,GAAU,EAcd,GAb6E,OAAzE/a,EAAS9rB,UAAUjL,QAAQsI,EAA8ByE,EAAE+E,KAAM,KACQ,KAAzEilB,EAAS9rB,UAAUjL,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAEjEggC,GAAU,EACV/a,EAASriB,UAEJqiB,EAAS9rB,UAAU8lC,SAAS,UACjC,EAAGpnC,EAAiCipB,IAAImE,EAAUvU,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,QACzF80B,EAASvjB,YAAY7pB,OAAS,IAElCotC,EAAS9rB,UAAY8rB,EAAS9rB,UAAUhC,OAAO,EAAG8tB,EAAS9rB,UAAUthB,OAAS,GAC9EmoD,GAAU,GAEVA,EAMA,OAJAhe,EAAkBtc,mBAAmB,WAAY,qBAAyBlP,EAA8ByE,EAAE+E,KAAO,gBACjH,EAAGnI,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAGf,IAAI2R,GAAe,EAAGvhB,EAAgC8lB,IAAItD,GAC1D,GAA2B,YAAvBzI,EAAOQ,aAA6BgH,GAAgBgL,EAAY,MAAOppB,GAOvE,OALAmf,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCujB,EAAa9T,UAAY,8BAAkC8T,EAAa9T,UAAY,iBACpF,EAAGvM,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,GAC5DyR,GAAiBha,GACjB5W,EAAMyM,kBACC,EAEX,GAAI2a,GAAiBxQ,EAAQ5W,EAAOmf,EAAO+I,EAAmBA,GAC1D,OAAO,EAEX,GAAIhB,GAAkBtQ,EAAQ5W,EAAOmf,EAAO+I,EAAmBA,GAC3D,OAAO,EAGf,OAAO,GAEPiE,GAAU,SAAUvV,EAAQuI,EAAOnf,GACnC,IAAIqf,EAAiBF,EAAME,eACvB8mB,GAAkB,EAAGtpC,EAAsCwI,IAAIga,EAAgB,eACnF,GAAI8mB,EAAiB,CACjB,GAAI/c,EAAY,MAAOppB,GAAQ,CAE3B,IAAI6yB,EAAesT,EAAgBxuB,kBASnC,OARIkb,EAAauT,QACbvT,EAAar3B,gBAAgB,WAG7Bq3B,EAAatyB,aAAa,UAAW,WAEzC0mB,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAGX,GAAkB,cAAdzM,EAAM5rB,OAAwB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,QAA+B,KAArBpK,EAAMxgC,YAC1F,IAAtBwgC,EAAMc,cACwB,IAA5BZ,EAAepB,UAAkBoB,EAAe4C,iBACN,UAA3C5C,EAAe4C,gBAAgB5V,SACA,IAA5BgT,EAAepB,UAAiB,CACvC,IAAImU,EAAkB+T,EAAgBpkB,uBAEtC,GADAokB,EAAgBhrC,cAAc,SAAS2N,SACnCspB,EAAiB,CACjB,IAAIiU,GAAW,EAAGxpC,EAA4B8oC,IAAIvT,GAClDiU,EAAS7+B,cAAcoE,mBAAmB,YAAa,QAAUu6B,EAAgB9mC,UAAUS,QAC3FqmC,EAAgBr9B,cAGhBq9B,EAAgB3+B,cAAcoE,mBAAmB,cAAe,2BAA+Bu6B,EAAgB9mC,UAAUS,QAAU,MAAQ,QACvIqmC,EAAgBvuB,mBAChBuuB,EAAgBr9B,SAGhBq9B,EAAgB3+B,cAAcsB,SAMtC,OAHA,EAAG/K,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,EAEX,GAAkB,UAAdzM,EAAM5rB,OAAoB,EAAGywC,EAA0ByE,IAAItpB,KAAWA,EAAMwpB,WAAaxpB,EAAMupB,OAAQ,CACvG,GAA2C,KAAvC4c,EAAgBv+B,YAAY9H,OAE5B,IAAI,EAAGjD,EAAsCwI,IAAI8gC,EAAgB3+B,cAAe,eAAgB,CAE5F,IAAIsW,GAAiB,EAAGjhB,EAA2BsrB,IAAI9I,GACnDvB,GACA2mB,GAAY7tB,EAAQuvB,EAAiBhnB,EAAOrB,QAKhD,GAAIqoB,EAAgBvuB,mBAAoB,CAEpC,IAAI0uB,EAAc,GACdC,EAAe,GACfC,GAAY,EAChBx5C,MAAM+pB,KAAKovB,EAAgB3+B,cAAc2O,UAAU56B,SAAQ,SAAUkrD,GAC7DN,EAAgBnkB,WAAWykB,GAC3BD,GAAY,EAGRA,EACAF,GAAeG,EAASn8B,UAGxBi8B,GAAgBE,EAASn8B,aAIrC,IAAIo8B,EAAgBP,EAAgB3+B,cAAc6E,QAC9Cs6B,EAAuD,OAA1CR,EAAgB3+B,cAAc6E,QAAmB,GAAK,iBAAoB85B,EAAgB3+B,cAAczM,aAAa,eAAiB,IACnJ6rC,EAAiB,GACjBL,IACAK,EAA2D,OAA1CT,EAAgB3+B,cAAc6E,QAAmB,GAAK,aACvEk6B,EAAe,IAAMG,EAAgB,qBAAyBC,EAAa,mBAAuBJ,EAAe,KAAOG,EAAgB,KAI5IP,EAAgB3+B,cAAc8C,UAAYi8B,EAAe,iCAAqCG,EAAgB,uBAA2BC,EAAa,kBAAsBC,EAAiB,IAAMN,EAAc,KAAOI,EAAgB,SAIxOP,EAAgB3+B,cAAcoE,mBAAmB,WAAY,iCACO,IAAhEu6B,EAAgB3+B,cAAc/L,iBAAiB,MAAM1d,OAErDooD,EAAgB3+B,cAAcsB,SAI9Bq9B,EAAgBr9B,cAKK,IAA5BuW,EAAepB,UAAwC,IAAtBkB,EAAMc,aACN,UAAtCZ,EAAeoM,WAAWpf,QAE1B8S,EAAMM,SAASJ,EAAea,WAAW,GAAI,IAI7Cf,EAAMyC,YAAYukB,EAAgB5nB,WAClC4nB,EAAgBv6B,mBAAmB,WAAY,wCAA6Cu6B,EAAgBprC,aAAa,eAAiB,wCAC1IN,SAASU,cAAc,OAAOzV,MAAMy5B,EAAMmP,oBAM9C,OAJA,EAAGvwB,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB0W,GAAa1W,GACb5W,EAAMyM,kBACC,GAGf,OAAO,GAEP8f,GAAY,SAAU3V,EAAQuI,EAAOnf,EAAOmrB,GAC5C,GAAsC,IAAlChM,EAAME,eAAepB,SAAgB,CAErC,IAAI4oB,EAAe1nB,EAAME,eAAelJ,SAASgJ,EAAMc,aACvD,GAAI4mB,GAAyC,OAAzBA,EAAax6B,QAI7B,OAHA8S,EAAM+B,mBAAmB2lB,EAAa9kB,wBACtC5C,EAAMO,UAAS,GACf1f,EAAMyM,kBACC,EAGf,GAAI0e,EAAU,CACV,IAAIiH,EAAkBjH,EAASpJ,uBAC/B,GAAIqQ,GAA0H,KAAvG,EAAGr0B,EAAiCipB,IAAImE,EAAUvU,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GAAO9oB,SAC9G,EAAGwuB,EAA6B+E,OAAqC,OAA5BwI,EAAgB/lB,SAAiD,UAA5B+lB,EAAgB/lB,SAAsB,CACtH,GAAgC,UAA5B+lB,EAAgB/lB,QAAqB,CAErC,IAAIy6B,EAAkB1U,EAAgB1P,iBAAiBA,iBAAiBA,iBACxEokB,EAAgBznC,UACZynC,EAAgBznC,UAAU4kC,WAAa,QAAU9Y,EAASvjB,YAAY9H,OAC1EqrB,EAASriB,cAITspB,EAAgBtpB,SAKpB,OAHA,EAAG/K,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,GACxE8H,GAAgBrQ,GAChB5W,EAAMyM,kBACC,GAGf,OAAO,GAEPse,GAAQ,SAAU5L,IACd,EAAG0F,EAA6B+E,OAA2C,IAAlCzK,EAAME,eAAepB,UAC7B,OAAjCkB,EAAME,eAAehT,SACrB8S,EAAMsC,eAAetC,EAAME,iBAI/BqN,GAAyB,SAAU1sB,EAAOoe,EAAce,GACxD,IAAI3a,EAAIgpB,EACR,KAAK,EAAG3I,EAA6B+E,MACjC,OAAO,EAEX,GAAkB,YAAd5pB,EAAM5rB,KAAqBgqC,GAAiH,WAAjD,QAA9C5Z,EAAK4Z,EAAa2D,8BAA2C,IAAPvd,OAAgB,EAASA,EAAG6H,SAAsB,CACrJ,IAAIyf,EAAe1N,EAAa2D,uBAIhC,OAHA5C,EAAM+B,mBAAmB4K,EAAazlC,KAAKylC,EAAazlC,KAAKtI,OAAS,GAAG2kC,kBACzEvD,EAAMO,UAAS,GACf1f,EAAMyM,kBACC,EAEX,QAAkB,cAAdzM,EAAM5rB,MAAuBgqC,GAA6G,WAAjD,QAA1CoP,EAAKpP,EAAaxG,0BAAuC,IAAP4V,OAAgB,EAASA,EAAGnhB,YAC7H8S,EAAM+B,mBAAmB9C,EAAaxG,mBAAmBvxB,KAAK,GAAGytC,MAAM,IACvE3U,EAAMO,UAAS,GACf1f,EAAMyM,kBACC,IAIXswB,GAAQ,SAAUnmB,EAAQ5W,EAAOve,GAAY,OAAO+hD,QAA2B,OAAQ,OAAQ,GAAQ,WACvG,IAAIuD,EAAUC,EAAWrH,EAAOz7B,EAAW+iC,EAAgBC,EAAKjiD,EAAQuhC,EAAM3d,EAAahkB,EAAUqyB,EAAakH,EAAce,EAC5H3a,EACJ,OAAOi/B,GAA6B1uD,MAAM,SAAUy4C,GAChD,OAAQA,EAAGnsB,OACP,KAAK,EAqGD,OApGArB,EAAMwM,kBACNxM,EAAMyM,iBACF,kBAAmBzM,GACnB+mC,EAAW/mC,EAAM6M,cAAcgwB,QAAQ,aACvCmK,EAAYhnC,EAAM6M,cAAcgwB,QAAQ,cACxC8C,EAAQ3/B,EAAM6M,cAAc8yB,QAG5BoH,EAAW/mC,EAAM48B,aAAaC,QAAQ,aACtCmK,EAAYhnC,EAAM48B,aAAaC,QAAQ,cACH,UAAhC78B,EAAM48B,aAAaE,MAAM,KACzB6C,EAAQ3/B,EAAM48B,aAAauK,QAGnCjjC,EAAY,GACZ+iC,EAAiB,SAAUl5B,EAAMq5B,GAC7B,IAAKA,EACD,MAAO,CAAC,GAAI5vB,KAAK6vB,cAErB,IAAIvsC,EAAMiT,EAAKu5B,YACf,GAA6C,KAAzCv5B,EAAKw5B,oBAAoBC,OAAOC,MAAe3sC,IAAmC,IAA5BA,EAAIxW,QAAQ,YAClEsyB,EAAOlV,QAAQgtB,OAAOgZ,aAAc,CACpC,IAAIC,EAAQ,IAAI5sB,eAChB4sB,EAAMtjD,KAAK,OAAQuyB,EAAOlV,QAAQgtB,OAAOgZ,cACrC9wB,EAAOlV,QAAQgtB,OAAOqT,OACtB4F,EAAM3sB,iBAAiB,iBAAkBpE,EAAOlV,QAAQgtB,OAAOqT,OAE/DnrB,EAAOlV,QAAQgtB,OAAOsT,kBACtB2F,EAAM3F,iBAAkB,GAE5B1C,GAAW1oB,EAAQ+wB,GACnBA,EAAM3sB,iBAAiB,eAAgB,mCACvC2sB,EAAM1F,mBAAqB,WACvB,GAAI0F,EAAMzF,aAAennB,eAAeonB,KAAM,CAC1C,GAAqB,MAAjBwF,EAAMvF,OAAgB,CACtB,IAAIjnB,EAAewsB,EAAMxsB,aACrBvE,EAAOlV,QAAQgtB,OAAOkZ,kBACtBzsB,EAAevE,EAAOlV,QAAQgtB,OAAOkZ,gBAAgBD,EAAMxsB,eAE/D,IAAI0sB,EAAiB3/B,KAAKC,MAAMgT,GAChC,GAA4B,IAAxB0sB,EAAerhB,KAEf,YADA5P,EAAO7xB,IAAI0/B,KAAKojB,EAAehH,KAGnC,IAAIiH,EAAaD,EAAe/xD,KAAKiyD,YACrC,GAA2B,OAAvBnxB,EAAOQ,YACPR,EAAO0M,GAAG9oB,QAAQiB,iBAAiB,4BAC9BlgB,SAAQ,SAAUgH,GACfA,EAAKqlB,cAAgBkgC,IACrBvlD,EAAKqlB,YAAcigC,EAAe/xD,KAAK2K,YAI9C,CACD,IAAIib,EAAakb,EAAOA,EAAOQ,aAAa5c,QAAQW,cAAc,YAAe2sC,EAAa,MAC9FpsC,EAAWZ,IAAM+sC,EAAe/xD,KAAK2K,IACV,OAAvBm2B,EAAOQ,cACP1b,EAAWqmB,uBAAuBA,uBAAuB1iB,UACrDwoC,EAAe/xD,KAAK2K,KAGhCwmC,GAAgBrQ,QAGhBA,EAAO7xB,IAAI0/B,KAAKkjB,EAAMxsB,cAEtBvE,EAAOlV,QAAQgtB,OAAOsZ,mBACtBpxB,EAAOlV,QAAQgtB,OAAOsZ,kBAAkBL,EAAMxsB,gBAI1DwsB,EAAM1sB,KAAK/S,KAAK+/B,UAAU,CAAExnD,IAAKqa,KAErC,MAA2B,OAAvB8b,EAAOQ,YACA,CAAC,2DAA+Dtc,EAAM,UAAW0c,KAAK6vB,cAEjE,YAAvBzwB,EAAOQ,YACL,CAAC,GAAII,KAAK6vB,cAGV,CAAC,yCAA6CvsC,EAAM,UAAW0c,KAAK6vB,eAI/EN,EAAS3yC,QAAQ,SAAU,KAAKA,QAAQ,kCAAmC,IAAI0L,SAC/E,YAAeknC,EAAY,KAAQA,EAAY,QAC/CD,EAAS3yC,QAAQ,SAAU,KAAKA,QAAQ,kCAAmC,IAAI0L,SAC3E,sCAAmCknC,EAAY,KAAQA,EAAY,iCACvED,EAAW,IAEfG,GAAM,IAAIgB,WAAYC,gBAAgBpB,EAAU,aAC5CG,EAAI1oC,OACJuoC,EAAWG,EAAI1oC,KAAKa,WAExBuX,EAAO4M,QAAQ4Z,YAAYxmB,GAC3B3xB,EAAS2xB,EAAOA,EAAOQ,aAAa5c,QAAQyf,aAC5CuM,EAAOJ,EAAiB2gB,EAAUC,EAAWpwB,EAAOQ,aACpDvO,EAAqC,OAAvB+N,EAAOQ,aACjB,EAAGva,EAAsCorB,IAAIjoB,EAAM7D,OAAQ,YAAa,eACxE,EAAGU,EAAqCuI,IAAIpF,EAAM7D,OAAQ,QACzD0M,GAEsB,OAAvB+N,EAAOQ,YACP3c,SAASgoB,YAAY,cAAc,EAAOukB,EAAU5yC,QAAQ,KAAM,SAASA,QAAQ,KAAM,UAGzFvP,GAAW,EAAGkZ,EAAiCipB,IAAIhnB,EAAM7D,OAAQya,EAAOA,EAAOQ,aAAa5c,SAClD,QAAtCqO,EAAYrB,cAAc6E,UAE1B26B,GAAatqC,EAA8ByE,EAAE+E,MAEjD2C,EAAYjB,YAAciB,EAAYjB,YAAYxd,UAAU,EAAGvF,EAASwR,OAClE2wC,EAAYn+B,EAAYjB,YAAYxd,UAAUvF,EAASm8B,MAC7D,EAAGjjB,EAAsCqqC,IAAIvjD,EAASwR,MAAQ2wC,EAAUjpD,OAAQ8G,EAASwR,MAAQ2wC,EAAUjpD,OAAQ8qB,EAAYrB,gBACtF,QAApChD,EAAKqE,EAAYrB,qBAAkC,IAAPhD,OAAgB,EAASA,EAAGoT,mBAAmB3a,UAAUwK,SAAS,UAAYmP,EAAOQ,YAAc,gBAChJvO,EAAYrB,cAAcoQ,mBAAmBvY,UAAYwJ,EAAYyB,UACrEmc,EAAkB5d,EAAYrB,cAAcoQ,mBAAoBhB,KAGjE,CAAC,EAAa,IAnBI,CAAC,EAAa,GAoB3C,KAAK,EACD,OAAK4P,GACL/kC,EAASu7C,UAAUxW,GACZ,CAAC,EAAa,IAFH,CAAC,EAAa,GAGpC,KAAK,EACD,MAA0B,KAApBugB,EAASjnC,OAAuB,CAAC,EAAa,IACpDoX,EAAczc,SAASI,cAAc,OACrCqc,EAAY7X,UAAY0nC,EACxB7vB,EAAYzb,iBAAiB,WAAWlgB,SAAQ,SAAUnD,GACtDA,EAAEojB,gBAAgB,YAEtB0b,EAAYzb,iBAAiB,gBAAgBlgB,SAAQ,SAAUnD,GAC3DA,EAAE0wB,YAEqB,OAAvB8N,EAAOQ,aACPlT,EAAUmkC,iBAAmB,CAAEpB,eAAgBA,GAC/CrwB,EAAO7T,KAAKoB,eAAe,CAAED,UAAWA,KACxC,EAAGnG,EAA0BuqC,IAAI1xB,EAAO7T,KAAKslC,iBAAiBnxB,EAAY7X,WAAYuX,IAE1D,YAAvBA,EAAOQ,aACZlT,EAAUmT,eAAiB,CAAE4vB,eAAgBA,GAC7CrwB,EAAO7T,KAAKoB,eAAe,CAAED,UAAWA,KACxC,EAAGnG,EAA0BuqC,IAAI1xB,EAAO7T,KAAKsU,eAAeH,EAAY7X,WAAYuX,KAGpF1S,EAAUq6B,eAAiB,CAAE0I,eAAgBA,GAC7CrwB,EAAO7T,KAAKoB,eAAe,CAAED,UAAWA,IACxCo6B,GAAa1nB,EAAQA,EAAO7T,KAAKitB,QAAQ9Y,EAAY7X,WAAW8nB,cAEpEvQ,EAAOiQ,QAAQjvC,OAAOg/B,GACf,CAAC,EAAa,IACzB,KAAK,EACD,OAAM+oB,EAAM5hD,OAAS,GAAK64B,EAAOlV,QAAQgtB,OAAOjuC,IACzC,CAAC,EAAaygD,GAAYtqB,EAAQ+oB,IADoB,CAAC,EAAa,GAE/E,KAAK,EAED,OADAnS,EAAG/wC,OACI,CAAC,EAAa,GACzB,KAAK,EACwB,KAArBuqD,EAAUlnC,QAAkC,IAAjB6/B,EAAM5hD,SACN,OAAvB64B,EAAOQ,aACPlT,EAAUw3B,eAAiB,CAAEuL,eAAgBA,GAC7CrwB,EAAO7T,KAAKoB,eAAe,CAAED,UAAWA,KACxC,EAAGnG,EAA0BuqC,IAAI1xB,EAAO7T,KAAK24B,eAAesL,GAAYpwB,IAE5C,YAAvBA,EAAOQ,aACZlT,EAAUg1B,aAAe,CAAE+N,eAAgBA,GAC3CrwB,EAAO7T,KAAKoB,eAAe,CAAED,UAAWA,KACxC,EAAGnG,EAA0BuqC,IAAI1xB,EAAO7T,KAAKm2B,aAAa8N,GAAYpwB,KAGtE1S,EAAUq6B,eAAiB,CAAE0I,eAAgBA,GAC7CrwB,EAAO7T,KAAKoB,eAAe,CAAED,UAAWA,IACxCo6B,GAAa1nB,EAAQowB,IAEzBpwB,EAAOiQ,QAAQjvC,OAAOg/B,IAE1B4W,EAAGnsB,MAAQ,EACf,KAAK,EA4BD,MA3B2B,OAAvBuV,EAAOQ,cACPgH,GAAe,EAAGvhB,EAAgC8lB,KAAI,EAAG5kB,EAA8B6sB,IAAIhU,GAAQyI,gBAC/FjB,IACAe,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CA,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,OAAOlgB,SAAQ,SAAUwnD,GACzEA,EAAIj6B,YAERqW,EAAMgD,WAAW1nB,SAASI,cAAc,QACb,YAAvB+b,EAAOQ,YACPgH,EAAa9T,UAAYsM,EAAO7T,KAAKwU,cAAc6G,EAAa9T,WAGhE8T,EAAa9T,UAAYsM,EAAO7T,KAAKuU,gBAAgB8G,EAAa9T,YAEtE,EAAGvM,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAAS2kB,IAE5EvI,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,WAAamb,EAAOQ,YAAc,8BACjF77B,SAAQ,SAAUgH,GACnBkkC,EAAkBlkC,EAAMq0B,OAGhCA,EAAO4M,QAAQ4f,qBAAqBxsB,GACpCqQ,GAAgBrQ,GACZA,EAAOA,EAAOQ,aAAa5c,QAAQyf,aAAeh1B,EAClD8B,KAAKwI,IAAIqnB,EAAOA,EAAOQ,aAAa5c,QAAQ0f,aAAc7e,OAAOC,aAAe,GAChFgyB,GAAa1W,GAEV,CAAC,WAgBpB2xB,GAAc,SAAU3xB,GACxBA,EAAO+O,KAAK/tC,OAAOg/B,GACnB,IAAIyI,GAAiB,EAAGthB,EAA8B6sB,IAAIhU,GAAQyI,eAE9DsM,GAAmB,EAAG9uB,EAAsCorB,IAAI5I,EAAgB,YAAa,mBACjG,GAAIsM,EACA,GAAuF,KAAnFA,EAAiB/jB,YAAYxT,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAAc0Q,EAAO+O,KAAKiG,eAAgB,CACrHD,EAAiB/jB,YAAclL,EAA8ByE,EAAE+E,KAAO0Q,EAAO+O,KAAKiG,eAClF,IAAIzM,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GACjDuI,EAAM+B,mBAAmByK,OAExB,CACD,IAAI6c,EAAkB,GAClBC,EAAQ9c,EAAiB/jB,YAAYxd,UAAU,GAAG,EAAG2T,EAAiCipB,IAAI2E,EAAkB/U,EAAO8M,GAAGlpB,SAASnE,OAC9HjC,QAAQsI,EAA8ByE,EAAE+E,KAAM,IACnDxJ,EAAgDyE,EAAEqF,eAAejrB,SAAQ,SAAU27C,GAC3EA,EAAQ5yC,QAAQmkD,EAAMtsB,gBAAkB,GACxCqsB,EAAgB/qD,KAAK,CACjBsW,KAAMmjC,EACN3iD,MAAO2iD,OAInBtgB,EAAO+O,KAAKwR,QAAQqR,EAAiBC,EAAO7xB,KAIpDoS,GAA6B,SAAUpS,EAAQlV,QAC/B,IAAZA,IAAsBA,EAAU,CAChCunB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEbznB,EAAQwnB,YACRqf,GAAY3xB,GAEhBsZ,aAAatZ,EAAO8M,GAAGwb,kBACvBtoB,EAAO8M,GAAGwb,iBAAmB7jC,OAAOjkB,YAAW,WAC3C,IAAIw/B,EAAO8M,GAAG8G,cAAd,CAGA,IAAIlhC,EAAO+5B,EAAYzM,GACa,oBAAzBA,EAAOlV,QAAQ/qB,OAAwB+qB,EAAQynB,aACtDvS,EAAOlV,QAAQ/qB,MAAM2S,GAErBstB,EAAOlV,QAAQtc,QAAQC,QACvBuxB,EAAOxxB,QAAQxN,OAAOg/B,EAAQttB,GAE9BstB,EAAOlV,QAAQouB,MAAMzqC,SAAU,EAAGw/B,EAAsC+K,QACxEvT,aAAayU,QAAQla,EAAOlV,QAAQouB,MAAM1yB,GAAI9T,GAC1CstB,EAAOlV,QAAQouB,MAAMpqC,OACrBkxB,EAAOlV,QAAQouB,MAAMpqC,MAAM4D,IAG/BstB,EAAOkN,UACPlN,EAAOkN,SAASF,aAAahN,GAE7BlV,EAAQunB,oBACRrS,EAAO8T,KAAKqG,eAAena,MAEhCA,EAAOlV,QAAQsvB,YAElB1E,GAAyB,SAAU1V,EAAQriC,GAC3C,IAAI4qC,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CtR,GAAiB,EAAGzI,EAAgC8lB,IAAIxD,EAAME,iBAAmBF,EAAME,eAC3F,GAAI/Z,EAAgB,CAChB,IAAI+mB,EAAuB/mB,EAAenK,cAAc,+BACpDkxB,EACAA,EAAqBhtB,UAAY9qB,GAGjC+wB,EAAe85B,mBAAmB,aAAc7qD,GAChD4qC,EAAM+B,mBAAmB5b,GACzB6Z,EAAMO,UAAS,IAEnB/oC,EAAMigC,EAAQuI,EAAMjf,cACpB+vB,EAAmBrZ,KAGvB8xB,GAAe,SAAUvpB,EAAOvI,EAAQr8B,GACxC,IAAIqpD,GAAgB,EAAG/mC,EAAsCorB,IAAI9I,EAAME,eAAgB,YAAa9kC,GACpG,GAAIqpD,EAAe,CACfA,EAAcjsB,kBAAkB7O,SAChC86B,EAAclhB,iBAAiB5Z,SAC/BqW,EAAMgD,WAAW1nB,SAASI,cAAc,QACxC,IAAIqc,EAAczc,SAASI,cAAc,OACzCqc,EAAY7X,UAAYuX,EAAO7T,KAAKuU,gBAAgBssB,EAAct5B,WAClEs5B,EAAct5B,UAAY4M,EAAYS,kBAAkBtY,UAAUS,SAGtEk7B,GAAyB,SAAUpkB,EAAQmP,EAAWlvB,EAAQC,GAC9D,IAAIqoB,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7CwiB,EAAcrT,EAAUhrB,aAAa,aACrCs1B,EAAclR,EAAME,eACK,IAAzBgR,EAAYpS,WACZoS,EAAcA,EAAY7oB,eAE9B,IAAIqyB,GAAe,EAEnB,GAAI9T,EAAU9oB,UAAUwK,SAAS,wBAC7B,GAAoB,UAAhB2xB,EAAyB,CACzB,IAAI9I,GAAe,EAAGzzB,EAAqCuI,IAAIirB,EAAa,cACxEC,IACAnR,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCy1B,EAAahmB,UAA8C,KAAlCgmB,EAAajxB,UAAUS,OAC5C,qBAAyBwwB,EAAajxB,UAAY,OAASixB,EAAajxB,gBAG/E,GAAoB,SAAhB+5B,EAAwB,CAC7B,IAAIhqB,GAAW,EAAGvS,EAAsCorB,IAAI9I,EAAME,eAAgB,YAAa,KAC/F,GAAIjQ,EAAU,CACV,IAAIu5B,GAAe,EAAG9rC,EAAsCwI,IAAI8Z,EAAME,eAAgB,mBAClFspB,GACAxpB,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCuU,EAAS9E,UAAYq+B,EAAatpC,WAGlC+P,EAAS9E,UAAY8E,EAASjU,cAAc,oBAAoBkE,UAAY,aAI/D,WAAhB+5B,EACLsP,GAAavpB,EAAOvI,EAAQ,MAEP,SAAhBwiB,EACLsP,GAAavpB,EAAOvI,EAAQ,UAEP,WAAhBwiB,EACLsP,GAAavpB,EAAOvI,EAAQ,KAEP,gBAAhBwiB,EACLsP,GAAavpB,EAAOvI,EAAQ,QAEP,UAAhBwiB,GAA2C,SAAhBA,GAA0C,iBAAhBA,IAC1DY,GAAWpjB,EAAQuI,EAAOia,GAC1BS,GAAe,EACf9T,EAAU9oB,UAAU6L,OAAO,6BAG9B,CAE2C,IAAxC8N,EAAO8M,GAAGlpB,QAAQ0lB,WAAWniC,SAC7B64B,EAAO8M,GAAGlpB,QAAQ6E,UAAY,+BAC9B,EAAGtB,EAA6BgrB,IAAInS,EAAO8M,GAAGlpB,QAAS2kB,IAE3D,IAAIf,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAChE,GAAoB,SAAhB+Z,GACA,GAAIhb,EAAc,CACd,IAAIuc,EAAS,mDACyB,KAAlCvc,EAAa/e,UAAUS,OACvBse,EAAa9T,UAAYqwB,EAGzBvc,EAAaxS,mBAAmB,WAAY+uB,SAInD,GAAoB,UAAhBvB,EACDhb,IACAe,EAAMgD,WAAW1nB,SAASI,cAAc,QACxCujB,EAAa9T,UAAY,8BAAkC8T,EAAa9T,UAAY,gBACpFuvB,GAAe,EACf9T,EAAU9oB,UAAUC,IAAI,8BAG3B,GAAoB,SAAhBk8B,EAAwB,CAC7B,IAAIrlC,OAAO,EAEPA,EADqB,KAArBorB,EAAMxgC,WACCkY,EAAS,QAAUC,EAGnB,GAAKD,EAASsoB,EAAMxgC,WAAamY,EAAO1C,QAAQ,IAAK,UAEhEqG,SAASgoB,YAAY,cAAc,EAAO1uB,GAC1C8lC,GAAe,EACf9T,EAAU9oB,UAAUC,IAAI,6BAEvB,GAAoB,WAAhBk8B,GAA4C,SAAhBA,GAA0C,WAAhBA,GACxC,gBAAhBA,GAAiD,SAAhBA,GAA0C,UAAhBA,EAAyB,CACnFrlC,OAAO,EACc,KAArBorB,EAAMxgC,WACNoV,EAAO8C,EAAS,QAAUC,GAItB/C,EADgB,SAAhBqlC,GAA0C,UAAhBA,EACnB,GAAKviC,EAASsoB,EAAMxgC,WAAa,QAAUmY,EAG3C,GAAKD,EAASsoB,EAAMxgC,WAAamY,EAAS,QAErDqoB,EAAM+a,kBAEU,UAAhBd,GAA2C,SAAhBA,IAC3BrlC,EAAO,KAAOA,EAAO,QAEzB,IAAIoR,EAAc1K,SAASI,cAAc,QACzCsK,EAAY9F,UAAYtL,EACxBorB,EAAMgD,WAAWhd,GACjBxuB,EAAMigC,EAAQuI,GACM,UAAhBia,IACAja,EAAM+B,mBAAmBrhB,eAAeI,WAAW,GAAGof,eAAe7X,gBACrE,EAAGzJ,EAAiC4B,IAAIwf,QAGvB,UAAhBia,GAA2C,SAAhBA,GAA0C,iBAAhBA,IAC1DY,GAAWpjB,EAAQuI,EAAOia,GAAa,GACvCS,GAAe,EACf/U,EAAqBlO,EAAOoB,QAAQyN,SAAU,CAAC,QAAS,OAAQ,iBAChEM,EAAU9oB,UAAUC,IAAI,0BAGhC,EAAGa,EAA6BgrB,IAAInS,EAAO8M,GAAGlpB,QAAS2kB,GACvD6J,GAA2BpS,GACvBijB,GACA5J,EAAmBrZ,IAavBgyB,GAAsB,WACtB,SAASA,EAAKC,GACV,IAAIhlB,EAAQ9uC,KACZA,KAAK+zD,UAAY,GACjB/zD,KAAKkiC,WAAa,EAClBliC,KAAKg0D,UAAY,SAAUvuC,EAASoc,GAChCiN,EAAMrpB,QAAQe,MAAMwE,QAAU,OAC9B,IAAIxrB,EAAQopB,mBAAmBnD,EAAQO,aAAa,eAChDokB,EAAQ9jB,OAAOwE,eAAeI,WAAW,GAE7C,GAA2B,OAAvB2W,EAAOQ,YAAsB,CAC7B,IAAIuU,GAAmB,EAAG9uB,EAAsCorB,IAAI9I,EAAME,eAAgB,YAAa,mBACvG,GAAIsM,EAUA,OATAA,EAAiB/jB,YAAclL,EAA8ByE,EAAE+E,KAAO3xB,EAAM4yC,YAC5EhI,EAAM+B,mBAAmByK,GACzBxM,EAAMO,UAAS,GACfsJ,GAA2BpS,GAC3B+U,EAAiBnkB,cAAc/L,iBAAiB,QAAQlgB,SAAQ,SAAUgH,GACtEA,EAAKgc,UAAY,YAAchqB,EAAM4yC,eAEzCV,EAAkBkF,EAAiBnkB,cAAcrM,cAAc,uBAAwByb,QACvFiN,EAAM+H,eAAiBr3C,EAAM4yC,aAIrC,GAA2B,YAAvBvQ,EAAOQ,aAA+D,IAAlC+H,EAAME,eAAepB,UACzDkB,EAAME,eAAe1H,kBAAkB1a,UAAUwK,SAAS,gBAAiB,CAC3E,IAAIorB,EAAe1T,EAAME,eAAe1H,kBAMxC,OALAkb,EAAat+C,MAAQA,EAAM4yC,YAC3BhI,EAAM+B,mBAAmB2R,GACzB1T,EAAMO,UAAS,GACfmT,EAAaoL,cAAc,IAAIrE,YAAY,eAC3C/V,EAAM+H,eAAiBr3C,EAAM4yC,aAwBjC,GArBAhI,EAAMM,SAASN,EAAME,eAAgBwE,EAAM5M,WAC3CkI,EAAM+a,iBACFtjB,EAAOlV,QAAQikB,KAAKxd,MACO,OAAvByO,EAAOQ,aACP,EAAGrZ,EAA0BuqC,IAAI1xB,EAAO7T,KAAK47B,gBAAgBpqD,GAAQqiC,GAEzC,YAAvBA,EAAOQ,aACZ,EAAGrZ,EAA0BuqC,IAAI1xB,EAAO7T,KAAKwU,cAAchjC,GAAQqiC,IAGnE,EAAG7Y,EAA0BuqC,IAAI1xB,EAAO7T,KAAKuU,gBAAgB/iC,GAAQqiC,IAIzE,EAAG7Y,EAA0BuqC,IAAI/zD,EAAOqiC,GAEpB,MAApBiN,EAAMilB,WAAqBv0D,EAAM+P,QAAQ,MAAQ,GAA4B,OAAvBsyB,EAAOQ,aAC7D+H,EAAMgD,WAAW1nB,SAAS2nB,eAAe,MAE7CjD,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,GACb,YAAvBvI,EAAOQ,YAA2B,CAClC,IAAI4xB,GAAa,EAAGnsC,EAAsCwI,IAAI8Z,EAAME,eAAgB,yBAChF2pB,GAAcA,EAAWtmB,iBAAiBzlB,UAAUwK,SAAS,6BAC7DuhC,EAAWtmB,iBAAiBrjB,UAAY2pC,EAAWrxB,kBAAkBtY,UACrEonB,EAAkBuiB,EAAWtmB,iBAAkB9L,SAGlD,GAA2B,OAAvBA,EAAOQ,YAAsB,CAC9B4xB,GAAa,EAAGnsC,EAAsCwI,IAAI8Z,EAAME,eAAgB,0BAChF2pB,GAAcA,EAAWpxB,mBAAmB3a,UAAUwK,SAAS,wBAC/DuhC,EAAWpxB,mBAAmBvY,UAAY2pC,EAAW3pC,UACrDonB,EAAkBuiB,EAAWpxB,mBAAoBhB,IAGzDqQ,GAAgBrQ,IAEpB7hC,KAAKk0D,QAAU,EACfl0D,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,cACzBxpB,KAAK62C,eAAiB,GACtBid,EAAYprD,KAAK,CAAErJ,IAAK,MA4K5B,OA1KAw0D,EAAKnwD,UAAUb,OAAS,SAAUg/B,GAC9B,IAAIiN,EAAQ9uC,KACZ,GAAKsmB,OAAOwE,eAAeqpC,UAA3B,CAGA,IAAIC,EACAhqB,EAAQtf,eAAeI,WAAW,GACtCkpC,EAAmBhqB,EAAME,eAAezX,YAAYxd,UAAU,EAAG+0B,EAAMc,cAAgB,GACvF,IAAI7rC,EAAMW,KAAKq0D,OAAOD,EAAkBvyB,EAAOlV,QAAQikB,KAAK8X,QAC5D,GAAmB,qBAARrpD,EACPW,KAAKylB,QAAQe,MAAMwE,QAAU,OAC7BmwB,aAAan7C,KAAKk0D,aAGlB,GAAuB,MAAnBl0D,KAAK+zD,UAAmB,CACxB,IAAIO,EAAsB,KAARj1D,EAAawiC,EAAOlV,QAAQikB,KAAKD,MAAQ9O,EAAO7T,KAAKumC,YACnEC,EAAmB,GACvBlzD,OAAOuI,KAAKyqD,GAAa9tD,SAAQ,SAAU27C,GACI,IAAvCA,EAAQ5yC,QAAQlQ,EAAI+nC,iBAChBktB,EAAYnS,GAAS5yC,QAAQ,MAAQ,EACrCilD,EAAiB9rD,KAAK,CAClBsW,KAAM,aAAgBs1C,EAAYnS,GAAW,aAAiBA,EAAU,SAAYA,EAAU,IAC9F3iD,MAAO,IAAM2iD,EAAU,MAI3BqS,EAAiB9rD,KAAK,CAClBsW,KAAM,oCAAwCs1C,EAAYnS,GAAW,UAAYA,EACjF3iD,MAAO80D,EAAYnS,SAKnCniD,KAAKoiD,QAAQoS,EAAkBn1D,EAAKwiC,QAGpCA,EAAOlV,QAAQikB,KAAK8X,OAAOliD,SAAQ,SAAUgH,GACrCA,EAAKnO,MAAQyvC,EAAMilB,YACnB5Y,aAAarM,EAAMolB,QACnBplB,EAAMolB,OAAS5tC,OAAOjkB,YAAW,WAC7BysC,EAAMsT,QAAQ50C,EAAKojC,KAAKvxC,GAAMA,EAAKwiC,KACpCA,EAAOlV,QAAQikB,KAAK6jB,aAM3CZ,EAAKnwD,UAAU0+C,QAAU,SAAUrhD,EAAM1B,EAAKwiC,GAC1C,IAAIiN,EAAQ9uC,KACZ,GAAoB,IAAhBe,EAAKiI,OAAT,CAIA,IAAIgjC,EAAgBnK,EAAOA,EAAOQ,aAAa5c,QAC3CivC,GAAmB,EAAG1rC,EAAiCw/B,IAAIxc,GAC3D7zB,EAAIu8C,EAAiBppC,MACgB,SAApCuW,EAAOlV,QAAQmlB,QAAQhiC,SAAsB+xB,EAAOiQ,QAAQrsB,QAAQ+0B,YAAc,GACnFphC,EAAIs7C,EAAiBnsC,IACrBosC,EAAY,GAChB5zD,EAAKyF,SAAQ,SAAUouD,EAAUjyD,GAC7B,KAAIA,EAAI,GAAR,CAIA,IAAIqc,EAAO41C,EAAS51C,KACpB,GAAY,KAAR3f,EAAY,CACZ,IAAI6iC,EAAYljB,EAAKgC,YAAY,KAAO,EACpC6zC,EAAc71C,EAAKsJ,OAAO4Z,GAC1B4yB,EAAeD,EAAYztB,cAAc73B,QAAQlQ,EAAI+nC,eACrD0tB,GAAgB,IAChBD,EAAcA,EAAYx/C,UAAU,EAAGy/C,GAAgB,MACnDD,EAAYx/C,UAAUy/C,EAAcA,EAAez1D,EAAI2J,QAAU,OACjE6rD,EAAYx/C,UAAUy/C,EAAez1D,EAAI2J,QAC7CgW,EAAOA,EAAKsJ,OAAO,EAAG4Z,GAAa2yB,GAG3CF,GAAa,uBAA0Bv6B,mBAAmBw6B,EAASp1D,OAAS,QAAiB,IAANmD,EAAU,+BAAiC,IAAM,KAAOqc,EAAO,gBAE1Jhf,KAAKylB,QAAQ6E,UAAYqqC,EACzB,IAAI/9B,EAAarlB,SAASmU,SAASqvC,YAAYx+B,iBAAiByV,EAAe,MAC1EgpB,iBAAiB,eAAgB,IACtCh1D,KAAKylB,QAAQe,MAAM+B,IAAMnP,GAAKwd,GAAc,IAAM,KAClD52B,KAAKylB,QAAQe,MAAM8E,KAAOnT,EAAI,KAC9BnY,KAAKylB,QAAQe,MAAMwE,QAAU,QAC7BhrB,KAAKylB,QAAQe,MAAMopB,MAAQ,OAC3B5vC,KAAKylB,QAAQiB,iBAAiB,UAAUlgB,SAAQ,SAAUif,GACtDA,EAAQQ,iBAAiB,SAAS,SAAUgF,GACxC6jB,EAAMklB,UAAUvuC,EAASoc,GACzB5W,EAAMyM,uBAIV13B,KAAKylB,QAAQ4F,wBAAwBjd,OAASkY,OAAOC,cACrDvmB,KAAKylB,QAAQe,MAAM+B,IAAMnP,EAAIpZ,KAAKylB,QAAQyd,aAAe,MAEzDljC,KAAKylB,QAAQ4F,wBAAwBukB,MAAQtpB,OAAO0e,aACpDhlC,KAAKylB,QAAQe,MAAM8E,KAAO,OAC1BtrB,KAAKylB,QAAQe,MAAMopB,MAAQ,UA/C3B5vC,KAAKylB,QAAQe,MAAMwE,QAAU,QAkDrC6oC,EAAKnwD,UAAU+5C,OAAS,SAAUxyB,EAAO4W,GACrC,GAAuD,IAAnD7hC,KAAKylB,QAAQiB,iBAAiB,UAAU1d,QACT,SAA/BhJ,KAAKylB,QAAQe,MAAMwE,QACnB,OAAO,EAEX,IAAIiqC,EAAqBj1D,KAAKylB,QAAQW,cAAc,yBACpD,GAAkB,cAAd6E,EAAM5rB,IAUN,OATA4rB,EAAMyM,iBACNzM,EAAMwM,kBACNw9B,EAAmBxuC,gBAAgB,SAC9BwuC,EAAmBpyB,mBAIpBoyB,EAAmBpyB,mBAAmBrZ,UAAY,uBAHlDxpB,KAAKylB,QAAQ2b,SAAS,GAAG5X,UAAY,wBAKlC,EAEN,GAAkB,YAAdyB,EAAM5rB,IAAmB,CAI9B,GAHA4rB,EAAMyM,iBACNzM,EAAMwM,kBACNw9B,EAAmBxuC,gBAAgB,SAC9BwuC,EAAmBjoB,uBAKpBioB,EAAmBjoB,uBAAuBxjB,UAAY,2BALV,CAC5C,IAAI0rC,EAAWl1D,KAAKylB,QAAQ2b,SAASp4B,OACrChJ,KAAKylB,QAAQ2b,SAAS8zB,EAAW,GAAG1rC,UAAY,uBAKpD,OAAO,EAEN,SAAK,EAAGsmB,EAA0ByE,IAAItpB,IAAWA,EAAMwpB,UAAaxpB,EAAMupB,QAAwB,UAAdvpB,EAAM5rB,KAAoB4rB,EAAMyqB,eACrHzqB,EAAMyM,iBACNzM,EAAMwM,kBACNz3B,KAAKg0D,UAAUiB,EAAoBpzB,IAC5B,IAIfgyB,EAAKnwD,UAAU2wD,OAAS,SAAUD,EAAkB1L,GAChD,IAUIrpD,EAVAyvC,EAAQ9uC,KAWZ,GAVAA,KAAKkiC,WAAa,EAClBliC,KAAK+zD,UAAY,GACjBrL,EAAOliD,SAAQ,SAAUgH,GACrB,IAAI2nD,EAAmBf,EAAiBpzC,YAAYxT,EAAKnO,KACrDyvC,EAAM5M,UAAYizB,IAClBrmB,EAAMilB,UAAYvmD,EAAKnO,IACvByvC,EAAM5M,UAAYizB,OAIF,IAApBn1D,KAAKkiC,UACL,OAAO7iC,EAEX,IAAI0X,EAAYq9C,EAAiBn0C,MAAMjgB,KAAK+zD,WACxCqB,EAAWr+C,EAAUA,EAAU/N,OAAS,GACxCqsD,EAAY,GAChB,GAAIt+C,EAAU/N,OAAS,GAAKosD,EAASrqC,SAAWqqC,EAC5C,GAAyB,IAArBr+C,EAAU/N,QAAiC,KAAjB+N,EAAU,IAAaA,EAAU,GAAG/N,OAASqsD,EACvEh2D,EAAM0X,EAAU,OAEf,CACD,IAAIu+C,EAAUv+C,EAAUA,EAAU/N,OAAS,GAAGoB,OAAO,GACD,OAAhD,EAAG08B,EAA6B7Y,GAAGqnC,IAAoBF,EAASpsD,OAASqsD,IACzEh2D,EAAM+1D,GAIlB,OAAO/1D,GAEJw0D,EAxPc,GAwQrB0B,GAAoB,WACpB,SAASA,EAAG1zB,GACR7hC,KAAKy1C,eAAgB,EACrB,IAAIzhB,EAAatO,SAASI,cAAc,OACxCkO,EAAWxK,UAAY,YACvBwK,EAAW1J,UAAY,0CAA+CuX,EAAOlV,QAAQ6oC,YAAc,uDACnGx1D,KAAKylB,QAAUuO,EAAW4O,kBAC1B5iC,KAAKy1D,UAAU5zB,GACfwlB,GAAWxlB,EAAQ7hC,KAAKylB,SACxB6hC,GAAczlB,EAAQ7hC,KAAKylB,SAC3B8hC,GAAU1lB,EAAQ7hC,KAAKylB,SACvBgjC,GAAY5mB,EAAQ7hC,KAAKylB,SACzB0jC,GAAYtnB,EAAQ7hC,KAAKylB,SACzBmiC,GAAU/lB,EAAQ7hC,KAAKylB,SACvByiC,GAAUrmB,EAAQ7hC,KAAKylB,QAASzlB,KAAKi0B,MACrCk0B,GAAStmB,EAAQ7hC,KAAKylB,QAASzlB,KAAKi0B,MA6LxC,OA3LAshC,EAAG7xD,UAAUuwB,KAAO,SAAUhJ,EAAO4W,GACjC,IAAIuI,EAAQtf,eAAeI,WAAW,GACtC,GAAyB,KAArBkf,EAAMxgC,WAAV,CAGAqhB,EAAMwM,kBACNxM,EAAMyM,iBACN,IAAIyK,EAAczc,SAASI,cAAc,OACzCqc,EAAYmE,YAAY8D,EAAMklB,iBAC9BrkC,EAAM6M,cAAcC,QAAQ,aAAc8J,EAAO7T,KAAK0gB,eAAevM,EAAY7X,WAAWS,QAC5FE,EAAM6M,cAAcC,QAAQ,YAAa,MAE7Cw9B,EAAG7xD,UAAU+xD,UAAY,SAAU5zB,GAC/B,IAAIiN,EAAQ9uC,KACZA,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C+8B,GAAMnmB,EAAQ5W,EAAO,CACjBg9B,UAAW,SAAUxW,GACjB/rB,SAASgoB,YAAY,cAAc,EAAO+D,SAItDzxC,KAAKylB,QAAQQ,iBAAiB,oBAAoB,SAAUgF,GACxD6jB,EAAM2G,eAAgB,KAE1Bz1C,KAAKylB,QAAQQ,iBAAiB,kBAAkB,SAAUgF,IACjD,EAAG6kB,EAA6B+E,OACjCjzC,EAAMigC,EAAQ/W,eAAeI,WAAW,GAAGC,cAE/C2jB,EAAM2G,eAAgB,KAE1Bz1C,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GACrB,iBAApBA,EAAMsoB,WAAoD,mBAApBtoB,EAAMsoB,YAI5CzE,EAAMrB,aACNqB,EAAMrB,cAAe,EAGrBqB,EAAM2G,eAAgC,MAAfxqB,EAAMlqB,MAA+B,MAAfkqB,EAAMlqB,MAA+B,MAAfkqB,EAAMlqB,MAG7Ea,EAAMigC,EAAQ/W,eAAeI,WAAW,GAAGC,cAAc,EAAOF,OAEpEjrB,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C,GAA6B,UAAzBA,EAAM7D,OAAOkQ,QASb,OARIrM,EAAM7D,OAAOiqC,QACbpmC,EAAM7D,OAAOoE,aAAa,UAAW,WAGrCP,EAAM7D,OAAOX,gBAAgB,WAEjCqoB,EAAMrB,cAAe,OACrBwG,GAA2BpS,GAG/B,IAAIuI,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAE7CrS,GAAiB,EAAG1H,EAAsCwI,IAAIrF,EAAM7D,OAAQ,sBAiBhF,GAhBKoI,IACDA,GAAiB,EAAG1H,EAAsCwI,IAAI8Z,EAAME,eAAgB,uBAEpF9a,IACIA,EAAewd,uBAAuBpK,kBACtCwH,EAAM+B,mBAAmB3c,EAAewd,uBAAuBpK,mBAI/DwH,EAAM+B,mBAAmB3c,EAAewd,wBAE5C5C,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,GACxCmO,GAAa1W,IAGY,QAAzB5W,EAAM7D,OAAOkQ,QAAmB,CAChC,IAAIo+B,EAAczqC,EAAM7D,OAAOqL,cAAcrM,cAAc,4BACvDsvC,IACAtrB,EAAMgB,WAAWsqB,IACjB,EAAG1sC,EAAiC4B,IAAIwf,IAIhD,IAAI/P,GAAW,EAAGvS,EAAsCorB,IAAIjoB,EAAM7D,OAAQ,YAAa,KACvF,IAAIiT,GAAcA,EAASnS,UAAUwK,SAAS,2BAA9C,CAIA,GAAIzH,EAAM7D,OAAO0b,YAAYgM,EAAMrpB,UAAYqpB,EAAMrpB,QAAQkoB,kBAAoBvD,EAAMmL,UAAW,CAC9F,IAAIogB,EAAW7mB,EAAMrpB,QAAQkoB,iBAAiBtiB,wBAC1CJ,EAAM7R,EAAIu8C,EAASptC,IAAMotC,EAASzlD,SACa,MAA3C4+B,EAAMrpB,QAAQkoB,iBAAiBrW,SACyE,KAAxGwX,EAAMrpB,QAAQkoB,iBAAiB9a,YAAY9H,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAChGiZ,EAAM+B,mBAAmB2C,EAAMrpB,QAAQkoB,kBACvCvD,EAAMO,UAAS,KAGfmE,EAAMrpB,QAAQoR,mBAAmB,YAAa,qBAAyBlP,EAA8ByE,EAAE+E,KAAO,cAC9G,EAAGnI,EAA6BgrB,IAAIlF,EAAMrpB,QAAS2kB,KAItC,KAArBA,EAAMxgC,WACNurC,EAAa/K,EAAOvI,GAIpBx/B,YAAW,WACP8yC,GAAa,EAAGnsB,EAA8B6sB,IAAIhU,GAASA,MAGnEkQ,EAAS9mB,EAAO4W,GAChBqZ,EAAmBrZ,QA3Bfvb,OAAOhX,KAAK+qB,EAASjU,cAAc,qCAAqCyM,gBA6BhF7yB,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C,IAAIA,EAAMyqB,eAAe,EAAG5F,EAA0ByE,IAAItpB,GAO1D,GAJkB,UAAdA,EAAM5rB,KACNk5C,GAAa1W,GAEjBqZ,EAAmBrZ,GACA,cAAd5W,EAAM5rB,KAAqC,WAAd4rB,EAAM5rB,KACJ,KAAhCwiC,EAAO8M,GAAGlpB,QAAQ6E,WAA4D,IAAxCuX,EAAO8M,GAAGlpB,QAAQ0lB,WAAWniC,SACnE64B,EAAO8M,GAAGlpB,QAAQmd,mBAAqE,MAAhDf,EAAO8M,GAAGlpB,QAAQmd,kBAAkBtL,SACd,IAA1DuK,EAAO8M,GAAGlpB,QAAQmd,kBAAkB2O,mBACD,KAAlC1P,EAAO8M,GAAGlpB,QAAQoN,aAAwD,OAAlCgP,EAAO8M,GAAGlpB,QAAQoN,YAJlE,CASA,IAAIuX,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC/B,cAAd5W,EAAM5rB,MAEF,EAAGywC,EAA6B+E,OAA8C,OAArCzK,EAAME,eAAezX,aAA8C,IAAtBuX,EAAMc,cAC5Fd,EAAME,eAAezX,YAAc,GACnCsiB,EAAa/K,EAAOvI,IAGxBiN,EAAMrpB,QAAQiB,iBAAiB,kBAAkBlgB,SAAQ,SAAUgH,GAC/D,IAAIujD,EAAYvjD,EAAK4Y,cAAc,MAC/B2qC,GACAA,EAAUh9B,aAIb9I,EAAM5rB,IAAIkQ,QAAQ,UAAY,GACjB,cAAd0b,EAAM5rB,KAAqC,eAAd4rB,EAAM5rB,KACnCm0D,GAAY3xB,GAEhBsT,EAAa/K,EAAOvI,IAEG,MAAlB5W,EAAM0pB,SAAkC,KAAf1pB,EAAMwmB,MAA6B,iBAAdxmB,EAAM5rB,KAEzD81C,EAAa/K,EAAOvI,GAExB,IAAIiR,GAAuB,EAAGhrB,EAAsCwI,IAAI8Z,EAAME,eAAgB,sBAC9F,GAAIwI,EAAsB,CACtB,GAAkB,YAAd7nB,EAAM5rB,KAAmC,cAAd4rB,EAAM5rB,IAUjC,OATIyzC,EAAqB9F,uBAAuBpK,kBAC5CwH,EAAM+B,mBAAmB2G,EAAqB9F,uBAAuBpK,mBAIrEwH,EAAM+B,mBAAmB2G,EAAqB9F,wBAElD5C,EAAMO,UAAS,GACf1f,EAAMyM,kBACC,EAEX,GAAqC,SAAjCob,EAAqBxb,UACN,cAAdrM,EAAM5rB,KAAqC,eAAd4rB,EAAM5rB,KAWpC,MAVqE,gBAAjEyzC,EAAqBrgB,cAAczM,aAAa,cAEhD8sB,EAAqBrgB,cAAc43B,mBAAmB,WAAY1iC,EAA8ByE,EAAE+E,MAClGiZ,EAAMM,SAASoI,EAAqBrgB,cAAcga,YAAa,IAG/DrC,EAAM+B,mBAAmB2G,EAAqBrgB,cAAckb,kBAEhEvD,EAAMO,UAAS,GACf1f,EAAMyM,kBACC,QAtDXmK,EAAO8M,GAAGlpB,QAAQ6E,UAAY,OA2DnCirC,EA5MY,GAkNnB1lD,GAAU,SAAUgyB,GACpB,MAA2B,OAAvBA,EAAOQ,YACAR,EAAO7T,KAAKqB,QAAQif,EAAYzM,IAEX,YAAvBA,EAAOQ,YACLR,EAAO7T,KAAK4nC,eAAe/zB,EAAO4M,QAAQhpB,QAAQ6E,WAE7B,OAAvBuX,EAAOQ,YACLR,EAAO7T,KAAK6nC,iBAAiBh0B,EAAO8M,GAAGlpB,QAAQ6E,gBADrD,GAMLvB,GAAU9D,EAAoB,KAE9BwC,GAAgBxC,EAAoB,KAMpC6wC,GAAyB,WACzB,SAASA,EAAQC,GACb/1D,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,iBACzBxpB,KAAKylB,QAAQ6E,UAAY,sCAA0CyrC,EAAe,sDAoCtF,OAlCAD,EAAQpyD,UAAUb,OAAS,SAAUg/B,GACjC,IAAI7iB,EAAO,GAOX,OALIA,EADyC,UAAzC6iB,EAAOrxB,QAAQiV,QAAQe,MAAMwE,SACtB,EAAGvD,GAAiCsJ,GAAG8Q,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB3tC,KAAKylB,QAAQkoB,iBAAkB9L,IAG/G,EAAGpa,GAAiCsJ,GAAG8Q,EAAOA,EAAOQ,aAAa5c,QAASzlB,KAAKylB,QAAQkoB,iBAAkB9L,GAE9G7iB,GAEX82C,EAAQpyD,UAAUojD,OAAS,SAAUjlB,EAAQ6N,GACzC,IAAIjgB,OACS,IAATigB,IAAmBA,GAAO,GAC9B,IAAItK,EAAwD,QAA1C3V,EAAKoS,EAAOoB,QAAQyN,SAASoB,eAA4B,IAAPriB,OAAgB,EAASA,EAAGmT,kBAUhG,GATI8M,GAAQppB,OAAO0e,YAAcrd,EAAsCyE,EAAEiF,cACrErxB,KAAKylB,QAAQe,MAAMwE,QAAU,QAC7BhrB,KAAK6C,OAAOg/B,GACG,OAAfuD,QAAsC,IAAfA,GAAiCA,EAAWld,UAAUC,IAAI,0BAGjFnoB,KAAKylB,QAAQe,MAAMwE,QAAU,OACd,OAAfoa,QAAsC,IAAfA,GAAiCA,EAAWld,UAAU6L,OAAO,yBAEpFjJ,eAAeuf,WAAa,EAAG,CAC/B,IAAID,EAAQtf,eAAeI,WAAW,GAClC2W,EAAOA,EAAOQ,aAAa5c,QAAQiN,SAAS0X,EAAME,iBAClD,EAAGthB,EAAiC4B,IAAIwf,GAGxCvI,EAAOA,EAAOQ,aAAa5c,QAAQ8kB,QAG3C6P,EAAWvY,IAERi0B,EAxCiB,GA6CxBxuC,GAAcrC,EAAoB,KAoBlC+wC,GAAyB,WACzB,SAASA,EAAQn0B,GACb,IAAIiN,EAAQ9uC,KACZA,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,iBACzB,IAAIgG,EAAiB9J,SAASI,cAAc,OAC5C0J,EAAehG,UAAY,eACvBqY,EAAOlV,QAAQnb,QAAQhB,SACvBgf,EAAetH,UAAUC,IAAI0Z,EAAOlV,QAAQnb,QAAQhB,SAExDgf,EAAehJ,MAAM8zB,SAAWzY,EAAOlV,QAAQnc,QAAQ8pC,SAAW,KAClE9qB,EAAevJ,iBAAiB,QAAQ,SAAUgF,GAC9C,GAA6B,aAAzBA,EAAM7D,OAAOkQ,QAAjB,CAIA,IAAI6K,EAAczc,SAASI,cAAc,OACzCqc,EAAY3Y,UAAY,eACxB2Y,EAAYmE,YAAYxb,eAAeI,WAAW,GAAGokC,iBACrDxgB,EAAMmnB,QAAQp0B,EAAQM,GACtBlX,EAAMyM,qBAEVlI,EAAevJ,iBAAiB,SAAS,SAAUgF,GAC/C,IAAImF,GAAc,EAAGtI,EAAqCuI,IAAIpF,EAAM7D,OAAQ,QAC5E,GAAIgJ,IAAe,EAAGtI,EAAsCwI,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiBf,EAAepJ,cAAc,IAAMgK,EAAYpK,aAAa,mBAC7EuK,IACAue,EAAMrpB,QAAQiD,UAAY6H,EAAe9H,eAIpB,QAAzBwC,EAAM7D,OAAOkQ,UACb,EAAG5G,EAAgCI,GAAG7F,EAAM7D,OAAQya,EAAOlV,QAAQzD,KAAM2Y,EAAOlV,QAAQc,UAGhG,IAAIyoC,EAAUr0B,EAAOlV,QAAQnc,QAAQ0lD,QACjCC,EAAgBzwC,SAASI,cAAc,OAC3CqwC,EAAc3sC,UAAY,yBAE1B,IADA,IAAI4sC,EAAa,GACRzzD,EAAI,EAAGA,EAAIuzD,EAAQltD,OAAQrG,IAAK,CACrC,IAAI0zD,EAASH,EAAQvzD,GACrB,GAAsB,kBAAX0zD,EAIX,OAAQA,GACJ,IAAK,UACDD,EAAW1tD,KAAK,sGAChB,MACJ,IAAK,SACD0tD,EAAW1tD,KAAK,4DAChB,MACJ,IAAK,SACD0tD,EAAW1tD,KAAK,mEAChB,MACJ,IAAK,YACD0tD,EAAW1tD,KAAK,sLAChB,MACJ,IAAK,QACD0tD,EAAW1tD,KAAK,6KAChB,WAlBJ0tD,EAAW1tD,KAAK,oCAAyC2tD,EAAOh3D,IAAM,YAAgBg3D,EAAO7sC,UAAY,KAAQ6sC,EAAOh1B,QAAU,gBAAmBg1B,EAAOh1B,QAAU,IAAO,IAAM,KAAQg1B,EAAO9hD,KAAO,aAqBjN4hD,EAAc7rC,UAAY8rC,EAAW/7C,KAAK,IACnB,IAAnB67C,EAAQltD,SACRmtD,EAAc3vC,MAAMwE,QAAU,QAElChrB,KAAKylB,QAAQ6gB,YAAY6vB,GACzBn2D,KAAKylB,QAAQ6gB,YAAY9W,GACzB2mC,EAAclwC,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC/E,IAAIqrC,GAAM,EAAG3sB,EAA0ChB,GAAG1d,EAAM7D,OAAQ,UACxE,GAAKkvC,EAAL,CAGA,IAAI9wD,EAAO8wD,EAAItwC,aAAa,aACxBuwC,EAAeL,EAAQxzD,MAAK,SAAU8zD,GAAK,OAAc,OAANA,QAAoB,IAANA,OAAe,EAASA,EAAEn3D,OAASmG,KACpG+wD,EACAA,EAAavY,MAAMx4C,GAGV,cAATA,GAAiC,UAATA,GAKxBgqB,EAAehJ,MAAMwa,MADZ,YAATx7B,EAC6B,OAEf,WAATA,EACwB,QAGA,QAE7BgqB,EAAeyV,YAAczV,EAAeiD,cAAcpM,cAC1DmJ,EAAehJ,MAAMwa,MAAQ,QAEjC8N,EAAMjsC,OAAOg/B,GACbs0B,EAAczvC,iBAAiB,UAAUlgB,SAAQ,SAAUgH,GACvDA,EAAK0a,UAAU6L,OAAO,sCAE1BuiC,EAAIpuC,UAAUC,IAAI,oCAnBd2mB,EAAMmnB,QAAQp0B,EAAQiN,EAAMrpB,QAAQkoB,iBAAiBG,WAAU,GAAOtoC,OA4JlF,OAtIAwwD,EAAQtyD,UAAUb,OAAS,SAAUg/B,EAAQriC,GACzC,IAAIsvC,EAAQ9uC,KAEZ,GADAm7C,aAAan7C,KAAKy2D,aACiB,SAA/Bz2D,KAAKylB,QAAQe,MAAMwE,QAMvB,GAAIxrB,EACAQ,KAAKylB,QAAQkoB,iBAAiBrjB,UAAY9qB,OAG9C,GAC2D,KADvD8uC,EAAYzM,GACXxiB,QAAQ,qCAAsC,IADnD,CAKA,IAAIq3C,GAAkB,IAAI5hD,MAAOC,UAC7BwxC,EAAejY,EAAYzM,GAC/B7hC,KAAKy2D,YAAcnwC,OAAOjkB,YAAW,WACjC,GAAIw/B,EAAOlV,QAAQnc,QAAQ9E,IAAK,CAC5B,IAAIknD,EAAQ,IAAI5sB,eAChB4sB,EAAMtjD,KAAK,OAAQuyB,EAAOlV,QAAQnc,QAAQ9E,KAC1CknD,EAAM3sB,iBAAiB,eAAgB,kCACvC2sB,EAAM1F,mBAAqB,WACvB,GAAI0F,EAAMzF,aAAennB,eAAeonB,KACpC,GAAqB,MAAjBwF,EAAMvF,OAAgB,CACtB,IAAIsJ,EAAexjC,KAAKC,MAAMw/B,EAAMxsB,cACpC,GAA0B,IAAtBuwB,EAAallB,KAEb,YADA5P,EAAO7xB,IAAI0/B,KAAKinB,EAAa7K,KAG7BjqB,EAAOlV,QAAQnc,QAAQkf,YACvBinC,EAAa51D,KAAO8gC,EAAOlV,QAAQnc,QAAQkf,UAAUinC,EAAa51D,OAEtE+tC,EAAMrpB,QAAQkoB,iBAAiBrjB,UAAYqsC,EAAa51D,KACxD+tC,EAAMgL,YAAYjY,EAAQ60B,OAEzB,CACD,IAAI13C,EAAO6iB,EAAO7T,KAAKqB,QAAQk3B,GAC3B1kB,EAAOlV,QAAQnc,QAAQkf,YACvB1Q,EAAO6iB,EAAOlV,QAAQnc,QAAQkf,UAAU1Q,IAE5C8vB,EAAMrpB,QAAQkoB,iBAAiBrjB,UAAYtL,EAC3C8vB,EAAMgL,YAAYjY,EAAQ60B,KAItC9D,EAAM1sB,KAAK/S,KAAK+/B,UAAU,CAAE3M,aAAcA,SAEzC,CACD,IAAIvnC,EAAO6iB,EAAO7T,KAAKqB,QAAQk3B,GAC3B1kB,EAAOlV,QAAQnc,QAAQkf,YACvB1Q,EAAO6iB,EAAOlV,QAAQnc,QAAQkf,UAAU1Q,IAE5C8vB,EAAMrpB,QAAQkoB,iBAAiBrjB,UAAYtL,EAC3C8vB,EAAMgL,YAAYjY,EAAQ60B,MAE/B70B,EAAOlV,QAAQnc,QAAQikD,YA5CtBz0D,KAAKylB,QAAQkoB,iBAAiBrjB,UAAY,OAXK,sBAA3CtqB,KAAKylB,QAAQO,aAAa,cAC1B6b,EAAO7xB,IAAI66C,QAwDvBmL,EAAQtyD,UAAUo2C,YAAc,SAAUjY,EAAQ+0B,GAC1C/0B,EAAOlV,QAAQnc,QAAQ4iB,OACvByO,EAAOlV,QAAQnc,QAAQ4iB,MAAMpzB,KAAKylB,SAEtC,IAAIoxC,GAAQ,IAAI/hD,MAAOC,UAAY6hD,GAC9B,IAAI9hD,MAAOC,UAAY6hD,EAAa,MAErC/0B,EAAO7xB,IAAI0/B,KAAK5d,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM4tC,eAAez3C,QAAQ,OAAQw3C,EAAKjtD,aAC1Fi4B,EAAOrxB,QAAQiV,QAAQ+F,aAAa,YAAa,sBAES,sBAArDqW,EAAOrxB,QAAQiV,QAAQO,aAAa,eACzC6b,EAAO7xB,IAAI66C,OACXhpB,EAAOrxB,QAAQiV,QAAQgB,gBAAgB,cAE3C,IAAIswC,EAAkBl1B,EAAOrxB,QAAQiV,QAAQW,cAAc,0BACvD2wC,GACAA,EAAgB7uC,UAAU6L,OAAO,0BAErC,EAAG3O,EAA2B0K,GAAG+R,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQzD,OACzF,EAAG3D,EAAqC/E,GAAGqhB,EAAOlV,QAAQnc,QAAQC,KAAMoxB,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,MAChI,EAAGtF,EAAiC5kB,GAAGk/B,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,IAAKgV,EAAOlV,QAAQc,QACnH,EAAGpI,EAAqCuG,GAAGiW,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,MACnG,EAAGvH,EAAmClU,GAAGywB,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,MACjG,EAAG1H,EAA6B6K,GAAG6R,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,IAAKgV,EAAOlV,QAAQc,QAC/G,EAAGjG,EAAiCoE,GAAGiW,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,IAAKgV,EAAOlV,QAAQc,QACnH,EAAG/F,EAAmCuI,GAAG4R,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,MACjG,EAAG3H,EAAyBgL,GAAG2R,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB9L,EAAOlV,QAAQE,MACvF,EAAGvF,GAA6B6I,GAAG0R,EAAOrxB,QAAQiV,QAAQkoB,kBAE1D,IAAI3B,EAAgBnK,EAAOrxB,QAAQiV,QAC/Bqc,EAAUD,EAAOiQ,QAAQjvC,OAAOg/B,GACpB,KAAZC,IACAA,EAAU,SAEdkK,EAActlB,iBAAiB,2BAA2BlgB,SAAQ,SAAUgH,GACxEA,EAAK8c,UAAYwX,GACjB,EAAGza,EAA2B0I,GAAGviB,EAAM,CACnCqf,IAAKgV,EAAOlV,QAAQE,IACpBQ,KAAMwU,EAAOlV,QAAQnc,QAAQ6c,WAGrC,EAAGhG,EAA2B0I,GAAG8R,EAAOrxB,QAAQiV,QAAQkoB,iBAAkB,CACtE9gB,IAAKgV,EAAOlV,QAAQE,IACpBQ,KAAMwU,EAAOlV,QAAQnc,QAAQ6c,QAGrC2oC,EAAQtyD,UAAUuyD,QAAU,SAAUp0B,EAAQm1B,EAAaxxD,QAC1C,IAATA,IAAmBA,EAAO,aAEjB,UAATA,EACAwxD,EAAYtwC,iBAAiB,qBAAqBlgB,SAAQ,SAAUgH,GAChEA,EAAKgZ,MAAMwE,QAAU,aAIzBgsC,EAAYtwC,iBAAiB,kBAAkBlgB,SAAQ,SAAUgH,GAC7DA,EAAK+nB,UAAY,yFAAkG/nB,EAAKwY,aAAa,aAAe,mEAI5JgxC,EAAYxwC,MAAMma,gBAAkB,OAEpCq2B,EAAYtwC,iBAAiB,QAAQlgB,SAAQ,SAAUgH,GACnDA,EAAKgZ,MAAMywC,gBAAkB,UAEjCj3D,KAAKylB,QAAQwT,OAAO+9B,GACpB,IAAI5sB,EAAQ4sB,EAAYxsB,cAAcC,cACtCL,EAAMgB,WAAW4rB,IACjB,EAAGhuC,EAAiC4B,IAAIwf,GACxC1kB,SAASgoB,YAAY,QACrB1tC,KAAKylB,QAAQkoB,iBAAiB5Z,SAC9B8N,EAAO7xB,IAAI0/B,KAAK,UAAmD,UAATlqC,EAAmB,KAAO,WAAa,SAE9FwwD,EA7OiB,GAkPxBkB,GAAwB,WACxB,SAASA,EAAOr1B,GACZ7hC,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,gCAAkCqY,EAAOlV,QAAQkjB,OAAO//B,SACjF9P,KAAKylB,QAAQ6E,UAAY,qEACzBtqB,KAAKy1D,UAAU5zB,GA0CnB,OAxCAq1B,EAAOxzD,UAAU+xD,UAAY,SAAU5zB,GACnC,IAAIiN,EAAQ9uC,KACZA,KAAKylB,QAAQQ,iBAAiB,aAAa,SAAUgF,GACjD,IAAIksC,EAAezxC,SACftM,EAAI6R,EAAMmsC,QACVlnD,EAAS2xB,EAAOpc,QAAQyd,aACxBnxB,EAAY,GAAK8vB,EAAOpc,QAAQW,cAAc,mBAAmB+e,aACrEgyB,EAAaE,YAAc,WAAc,OAAO,GAC5C/wC,OAAOgxC,eACPhxC,OAAOgxC,gBAEXxoB,EAAMrpB,QAAQyC,UAAUC,IAAI,2BAC5BgvC,EAAaI,YAAc,SAAUC,GACM,QAAnC31B,EAAOlV,QAAQkjB,OAAO//B,SACtB+xB,EAAOpc,QAAQe,MAAMtW,OAAS8B,KAAKzB,IAAIwB,EAAW7B,GAAUkJ,EAAIo+C,EAAUJ,UAAY,KAGtFv1B,EAAOpc,QAAQe,MAAMtW,OAAS8B,KAAKzB,IAAIwB,EAAW7B,GAAUsnD,EAAUJ,QAAUh+C,IAAM,KAEtFyoB,EAAOlV,QAAQ+tB,iBACf7Y,EAAO0M,GAAG9oB,QAAQe,MAAMixC,cACpB51B,EAAO0M,GAAG9oB,QAAQgN,cAAcyQ,aAAe,EAAI,OAG/Di0B,EAAa/N,UAAY,WACjBvnB,EAAOlV,QAAQkjB,OAAOl/B,OACtBkxB,EAAOlV,QAAQkjB,OAAOl/B,MAAMkxB,EAAOpc,QAAQyd,aAAehzB,GAE1DoW,OAAOgxC,eACPhxC,OAAOgxC,gBAEXH,EAAaI,YAAc,KAC3BJ,EAAa/N,UAAY,KACzB+N,EAAaE,YAAc,KAC3BF,EAAaO,cAAgB,KAC7BP,EAAaQ,SAAW,KACxB7oB,EAAMrpB,QAAQyC,UAAU6L,OAAO,gCAIpCmjC,EA/CgB,GAyDvBU,GAAwB,WACxB,SAASA,EAAO/1B,GACZ7hC,KAAKy1C,eAAgB,EACrBz1C,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,yBACzBxpB,KAAKylB,QAAQ+F,aAAa,cAAeqW,EAAOlV,QAAQ6oC,aACxDx1D,KAAKylB,QAAQ+F,aAAa,kBAAmB,QAC7CxrB,KAAKylB,QAAQ+F,aAAa,aAAc,SACxCxrB,KAAKy1D,UAAU5zB,GACfwlB,GAAWxlB,EAAQ7hC,KAAKylB,SACxB8hC,GAAU1lB,EAAQ7hC,KAAKylB,SACvBgjC,GAAY5mB,EAAQ7hC,KAAKylB,SACzB0jC,GAAYtnB,EAAQ7hC,KAAKylB,SACzBmiC,GAAU/lB,EAAQ7hC,KAAKylB,SACvByiC,GAAUrmB,EAAQ7hC,KAAKylB,QAASzlB,KAAKi0B,MACrCk0B,GAAStmB,EAAQ7hC,KAAKylB,QAASzlB,KAAKi0B,MA0ExC,OAxEA2jC,EAAOl0D,UAAUuwB,KAAO,SAAUhJ,EAAO4W,GACrC5W,EAAMwM,kBACNxM,EAAMyM,iBACNzM,EAAM6M,cAAcC,QAAQ,aAAcqvB,GAAcvlB,EAAOA,EAAOQ,aAAa5c,WAEvFmyC,EAAOl0D,UAAU+xD,UAAY,SAAU5zB,GACnC,IAAIiN,EAAQ9uC,KACZA,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C+8B,GAAMnmB,EAAQ5W,EAAO,CACjBg9B,UAAW,SAAUxW,GACjB/rB,SAASgoB,YAAY,cAAc,EAAO+D,SAItDzxC,KAAKylB,QAAQQ,iBAAiB,UAAU,WACpC,GAA6C,UAAzC4b,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAjC,CAGA,IAAI6sC,EAAgB/oB,EAAMrpB,QAAQiD,UAC9BovC,EAAahpB,EAAMrpB,QAAQ0f,aAC3B4yB,EAAmBjpB,EAAMrpB,QAAQyf,aAAe7zB,WAAWy9B,EAAMrpB,QAAQe,MAAMixC,eAAiB,KAChGjnD,EAAUqxB,EAAOrxB,QAAQiV,QAEzBjV,EAAQkY,UADPmvC,EAAgBC,EAAa,IACTD,EAAgBC,GACjCtnD,EAAQ00B,aAAe6yB,EAAmBD,EAG1BD,EAChBrnD,EAAQ00B,aAAe6yB,MAGnC/3D,KAAKylB,QAAQQ,iBAAiB,oBAAoB,SAAUgF,GACxD6jB,EAAM2G,eAAgB,KAE1Bz1C,KAAKylB,QAAQQ,iBAAiB,kBAAkB,SAAUgF,IACjD,EAAG6kB,EAA6B+E,OACjCgD,EAAWhW,EAAQ5W,GAEvB6jB,EAAM2G,eAAgB,KAE1Bz1C,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GACrB,iBAApBA,EAAMsoB,WAAoD,mBAApBtoB,EAAMsoB,YAI5CzE,EAAM2G,eAAgC,MAAfxqB,EAAMlqB,MAA+B,MAAfkqB,EAAMlqB,MAA+B,MAAfkqB,EAAMlqB,OAGzE+tC,EAAMrB,aACNqB,EAAMrB,cAAe,EAGzBoK,EAAWhW,EAAQ5W,QAEvBjrB,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GACzCA,EAAMyqB,cAAe,EAAG5F,EAA0ByE,IAAItpB,KAGvC,cAAdA,EAAM5rB,KAAqC,WAAd4rB,EAAM5rB,KACJ,KAAhCwiC,EAAO0M,GAAG9oB,QAAQ6E,WAA4D,IAAxCuX,EAAO0M,GAAG9oB,QAAQ0lB,WAAWniC,SACnE64B,EAAO0M,GAAG9oB,QAAQmd,mBAAqE,QAAhDf,EAAO0M,GAAG9oB,QAAQmd,kBAAkBtL,SACd,IAA1DuK,EAAO0M,GAAG9oB,QAAQmd,kBAAkB2O,mBACiB,KAApD1P,EAAO0M,GAAG9oB,QAAQmd,kBAAkB/P,aAAwD,OAAlCgP,EAAO0M,GAAG9oB,QAAQoN,YAKlE,UAAd5H,EAAM5rB,KACNk5C,GAAa1W,GAJbA,EAAO0M,GAAG9oB,QAAQ6E,UAAY,QAQnCstC,EAzFgB,GA8FvBI,GAAqB,WACrB,SAASA,IACLh4D,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,aAsB7B,OApBAwuC,EAAIt0D,UAAUgsC,KAAO,SAAUn7B,EAAMsiD,GACjC,IAAI/nB,EAAQ9uC,KAGZ,QAFa,IAAT62D,IAAmBA,EAAO,KAC9B72D,KAAKylB,QAAQ+D,UAAY,8BACZ,IAATqtC,EAKA,OAJA72D,KAAKylB,QAAQ6E,UAAY,oCAAwC/V,EAAO,sDACxEvU,KAAKylB,QAAQW,cAAc,sBAAsBH,iBAAiB,SAAS,WACvE6oB,EAAM+b,UAId7qD,KAAKylB,QAAQ6E,UAAY,oCAAwC/V,EAAO,SACxElS,YAAW,WACPysC,EAAM+b,SACPgM,IAEPmB,EAAIt0D,UAAUmnD,KAAO,WACjB7qD,KAAKylB,QAAQ+D,UAAY,2BACzBxpB,KAAKylB,QAAQ6E,UAAY,IAEtB0tC,EAzBa,GAgCpBC,GAAiB,SAAU1qC,EAAMsU,GACjC,GAAIA,EAAOlV,QAAQnc,QAAQ+c,OAASA,EAApC,CAIA,OADAsU,EAAOlV,QAAQnc,QAAQ+c,KAAOA,EACtBA,GACJ,IAAK,OACDsU,EAAO0M,GAAG9oB,QAAQe,MAAMwE,QAAU,QAClC6W,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,QACvC6W,EAAOrxB,QAAQ3N,OAAOg/B,GACtBqO,EAAkBrO,EAAOoB,QAAQyN,SAAU,CAAC,SAC5C,MACJ,IAAK,SACD7O,EAAO0M,GAAG9oB,QAAQe,MAAMwE,QAAU,QAClC6W,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,OACvC+kB,EAAqBlO,EAAOoB,QAAQyN,SAAU,CAAC,SAC/C,MACJ,QACI,MAEJ7O,EAAOkN,UACPlN,EAAOkN,SAASF,aAAahN,KAKjCq2B,GAAqD,WACrD,IAAI9R,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV9B,GAiBrD6R,GAAsB,SAAUnR,GAEhC,SAASmR,EAAKt2B,EAAQikB,GAClB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAoBnD,MAnBoC,SAAhC6hC,EAAOlV,QAAQnc,QAAQ+c,MACvBuhB,EAAMrpB,QAAQ2b,SAAS,GAAGlZ,UAAUC,IAAI,wBAE5C2mB,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3F,IAAIma,EAAa0J,EAAMrpB,QAAQmd,kBAC3BwC,EAAWld,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,uBAGjFrG,EAAMyM,iBACqB,OAAvBmK,EAAOQ,cAGyB,SAAhCR,EAAOlV,QAAQnc,QAAQ+c,KACvB0qC,GAAe,SAAUp2B,GAGzBo2B,GAAe,OAAQp2B,QAGxBiN,EAEX,OAxBAopB,GAAaC,EAAMnR,GAwBZmR,EAzBc,CA0BvBtS,IAIEuS,GAAoB,WACpB,SAASA,IACLp4D,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,qBAE7B,OAAO4uC,EALY,GAUnBznC,GAAe1L,EAAoB,KAEnCozC,GAA0D,WAC1D,IAAIjS,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAVzB,GAkB1DgS,GAA2B,SAAUtR,GAErC,SAASsR,EAAUz2B,EAAQikB,GACvB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAC/CgxC,EAAYlC,EAAMrpB,QAAQ2b,SAAS,GACnC2P,EAAerrB,SAASI,cAAc,OAC1CirB,EAAavnB,UAAY,eAAoC,IAAnBs8B,EAAS7U,MAAc,GAAK,wBACtE,IAAI3mB,EAAY,GAiBhB,OAhBA3C,EAA4CyE,EAAEoF,WAAWhrB,SAAQ,SAAUinB,GACvEnD,GAAa,WAAamD,EAAQ,eAEtCsjB,EAAazmB,UACT,yCAA4ChE,OAAOC,YAAc,EAAI,OAAU+D,EAAY,SAC/FymB,EAAa9qB,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GACjD,WAAzBA,EAAM7D,OAAOkQ,UACbiZ,EAAU1O,EAAQ,CAAC,eACnBA,EAAOlV,QAAQnc,QAAQC,KAAK+V,MAAQyE,EAAM7D,OAAOyL,aACjD,EAAGlC,GAA+BR,GAAGlF,EAAM7D,OAAOyL,YAAagP,EAAOlV,QAAQE,KAC9E5B,EAAMyM,iBACNzM,EAAMwM,sBAGdqX,EAAMrpB,QAAQ6gB,YAAYyK,GAC1BD,EAAcjP,EAAQkP,EAAcC,EAAW8U,EAAS7U,OACjDnC,EAEX,OAzBAupB,GAAkBC,EAAWtR,GAyBtBsR,EA1BmB,CA2B5BzS,IAIE0S,GAA6D,WAC7D,IAAInS,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAVtB,GAiB7DkS,GAA8B,SAAUxR,GAExC,SAASwR,EAAa32B,EAAQikB,GAC1B,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAC/CgxC,EAAYlC,EAAMrpB,QAAQ2b,SAAS,GACnC2P,EAAerrB,SAASI,cAAc,OAC1CirB,EAAavnB,UAAY,eAAoC,IAAnBs8B,EAAS7U,MAAc,GAAK,wBACtE,IAAI3mB,EAAY,GAiBhB,OAhBAhpB,OAAOuI,KAAKg4B,EAAOlV,QAAQnc,QAAQid,MAAMmE,MAAMprB,SAAQ,SAAUnH,GAC7DirB,GAAa,sBAAyBjrB,EAAM,KAAQwiC,EAAOlV,QAAQnc,QAAQid,MAAMmE,KAAKvyB,GAAO,eAEjG0xC,EAAazmB,UACT,yCAA4ChE,OAAOC,YAAc,EAAI,OAAU+D,EAAY,SAC/FymB,EAAa9qB,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GACjD,WAAzBA,EAAM7D,OAAOkQ,UACbiZ,EAAU1O,EAAQ,CAAC,eACnBA,EAAOlV,QAAQnc,QAAQid,MAAMmC,QAAU3E,EAAM7D,OAAOpB,aAAa,cACjE,EAAG4B,EAAqC+H,GAAGkS,EAAOlV,QAAQnc,QAAQid,MAAMmC,QAASiS,EAAOlV,QAAQnc,QAAQid,MAAMoC,MAC9G5E,EAAMyM,iBACNzM,EAAMwM,sBAGdqX,EAAMrpB,QAAQ6gB,YAAYyK,GAC1BD,EAAcjP,EAAQkP,EAAcC,EAAW8U,EAAS7U,OACjDnC,EAEX,OAzBAypB,GAAqBC,EAAcxR,GAyB5BwR,EA1BsB,CA2B/B3S,IAIE4S,GAAyB,WACzB,SAASA,EAAQ52B,GACb7hC,KAAKylB,QAAUC,SAASI,cAAc,QACtC9lB,KAAKylB,QAAQ+D,UAAY,yDACzBxpB,KAAK6C,OAAOg/B,EAAQ,IAgCxB,OA9BA42B,EAAQ/0D,UAAUb,OAAS,SAAUg/B,EAAQhU,GACzC,IAAI7kB,EAAS6kB,EAAOuiC,SAAS,MAAQviC,EAAO7kB,OAAS,EAAI6kB,EAAO7kB,OAChE,GAAoC,SAAhC64B,EAAOlV,QAAQtc,QAAQ7K,MAAmBq8B,EAAOA,EAAOQ,aAAc,CACtE,IAAIF,EAAcN,EAAOA,EAAOQ,aAAa5c,QAAQqoB,WAAU,GAC/D3L,EAAYzb,iBAAiB,4BAA4BlgB,SAAQ,SAAUgH,GACvEA,EAAKumB,YAET/qB,EAASm5B,EAAYtP,YAAY7pB,OAEK,kBAA/B64B,EAAOlV,QAAQtc,QAAQE,KAC1BvH,EAAS64B,EAAOlV,QAAQtc,QAAQE,IAChCvQ,KAAKylB,QAAQ+D,UAAY,uCAGzBxpB,KAAKylB,QAAQ+D,UAAY,iBAE7BxpB,KAAKylB,QAAQ6E,UAAYthB,EAAS,IAAM64B,EAAOlV,QAAQtc,QAAQE,KAG/DvQ,KAAKylB,QAAQ6E,UAAY,GAAKthB,EAElChJ,KAAKylB,QAAQ+F,aAAa,aAAcqW,EAAOlV,QAAQtc,QAAQ7K,MAC3Dq8B,EAAOlV,QAAQtc,QAAQM,OACvBkxB,EAAOlV,QAAQtc,QAAQM,MAAM3H,EAAQ,CACjCsH,OAAQuxB,EAAOlV,QAAQtc,QAAQC,OAC/BC,IAAKsxB,EAAOlV,QAAQtc,QAAQE,IAC5B/K,KAAMq8B,EAAOlV,QAAQtc,QAAQ7K,QAIlCizD,EApCiB,GAyCxBC,GAAuD,WACvD,IAAItS,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV5B,GAgBvDqS,GAAwB,SAAU3R,GAElC,SAAS2R,EAAO92B,EAAQikB,GACpB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KASnD,OARA8uC,EAAMrpB,QAAQ2b,SAAS,GAAG9W,UAAYw7B,EAAS54B,KAC/C4hB,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACFzM,EAAM2M,cAAc1P,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAG1Fw0B,EAAS9H,MAAM/yB,EAAO4W,MAEnBiN,EAEX,OAbA4pB,GAAeC,EAAQ3R,GAahB2R,EAdgB,CAezB9S,IAIE+S,GAAyD,WACzD,IAAIxS,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV1B,GAiBzDuS,GAA0B,SAAU7R,GAEpC,SAAS6R,EAASh3B,EAAQikB,GACtB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAmBnD,OAlBA8uC,EAAMrpB,QAAQmd,kBAAkB3c,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GACjG,IAAIma,EAAa0J,EAAMrpB,QAAQmd,kBAC3BwC,EAAWld,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,uBAGjFrG,EAAMyM,iBACF0N,EAAWld,UAAUwK,SAAS,yBAC9B0S,EAAWld,UAAU6L,OAAO,wBAC5B8N,EAAOkN,SAAStpB,QAAQe,MAAMwE,QAAU,OACxCovB,EAAWvY,KAGXuD,EAAWld,UAAUC,IAAI,wBACzB0Z,EAAOkN,SAAStpB,QAAQe,MAAMwE,QAAU,QACxCovB,EAAWvY,GACXA,EAAOkN,SAASF,aAAahN,QAG9BiN,EAEX,OAvBA8pB,GAAiBC,EAAU7R,GAuBpB6R,EAxBkB,CAyB3BhT,IAIEiT,GAAyB,WACzB,SAASA,IACL94D,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,0BAE7B,OAAOsvC,EALiB,GAUxBC,GAAsD,WACtD,IAAI3S,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV7B,GAkBtD0S,GAAuB,SAAUhS,GAEjC,SAASgS,EAAMn3B,EAAQikB,GACnB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAC/C+wC,EAAerrB,SAASI,cAAc,OAC1CirB,EAAavnB,UAAY,mCACzB,IAAIyvC,EAAkB,GACtB33D,OAAOuI,KAAKg4B,EAAOlV,QAAQikB,KAAKD,OAAOnqC,SAAQ,SAAUnH,GACrD,IAAI65D,EAAar3B,EAAOlV,QAAQikB,KAAKD,MAAMtxC,GACvC65D,EAAW3pD,QAAQ,MAAQ,EAC3B0pD,GAAmB,wBAA2B55D,EAAM,kBAAsBA,EAAM,yBAA6BA,EAAM,kBAAsBA,EAAM,uCAA6C65D,EAAa,eAGzMD,GAAmB,uBAA0BC,EAAa,kBAAsB75D,EAAM,uCAA4C65D,EAAa,sBAGvJ,IAAIC,EAAW,yFAA+Ft3B,EAAOlV,QAAQikB,KAAKwoB,WAAa,IAAM,kBAKrJ,OAJAroB,EAAazmB,UAAY,kDAAiF,SAA1BuX,EAAOlV,QAAQzc,OAAoB,OAAS2xB,EAAOlV,QAAQzc,OAAS,IAAM,OAAU+oD,EAAkB,SAAWE,EACjMrqB,EAAMrpB,QAAQ6gB,YAAYyK,GAC1BD,EAAcjP,EAAQkP,EAAcjC,EAAMrpB,QAAQ2b,SAAS,GAAI0kB,EAAS7U,OACxEnC,EAAMqY,WAAWtlB,EAAQkP,GAClBjC,EAsCX,OA1DAiqB,GAAcC,EAAOhS,GAsBrBgS,EAAMt1D,UAAUyjD,WAAa,SAAUtlB,EAAQkP,GAC3CA,EAAarqB,iBAAiB,yBAAyBlgB,SAAQ,SAAUif,GACrEA,EAAQQ,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GACzEA,EAAMyM,iBACN,IAAIl4B,EAAQimB,EAAQO,aAAa,cAC7BokB,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7C7iB,EAAOxf,EAOX,GAN2B,YAAvBqiC,EAAOQ,YACPrjB,EAAO6iB,EAAO7T,KAAKwU,cAAchjC,GAEL,OAAvBqiC,EAAOQ,cACZrjB,EAAO6iB,EAAO7T,KAAKuU,gBAAgB/iC,IAEnCA,EAAM+P,QAAQ,MAAQ,GAA4B,OAAvBsyB,EAAOQ,YAAsB,CACxD,IAAIF,EAAczc,SAASI,cAAc,OACzCqc,EAAY7X,UAAYtL,EACxBA,EAAOmjB,EAAYS,kBAAkBA,kBAAkBrN,UAAY,KACnE,EAAGvM,EAA0BuqC,IAAIv0C,EAAM6iB,QAGvCuI,EAAMmP,kBACNnP,EAAMgD,WAAW1nB,SAAS2nB,eAAe7tC,IAE7C4qC,EAAMO,UAAS,IACf,EAAG3hB,EAAiC4B,IAAIwf,GACxC2G,EAAavqB,MAAMwE,QAAU,OAC7BknB,GAAgBrQ,MAEpBpc,EAAQQ,iBAAiB,aAAa,SAAUgF,GACf,WAAzBA,EAAM7D,OAAOkQ,UACbyZ,EAAa3qB,cAAc,uBAAuBkE,UAC9CW,EAAM7D,OAAOpB,aAAa,oBAKvCgzC,EA3De,CA4DxBnT,IAOEwT,GAAW,SAAUx3B,EAAQ5yB,EAASq8C,GACtC,IAAIjxB,EAAW3U,SAASI,cAAc,KAClC,aAAcuU,GACdA,EAASg/B,SAAW/N,EACpBjxB,EAAS7T,MAAMwE,QAAU,OACzBqP,EAASrE,KAAOjB,IAAIG,gBAAgB,IAAIJ,KAAK,CAAC7lB,KAC9CyW,SAAS+D,KAAK6c,YAAYjM,GAC1BA,EAAS2jB,QACT3jB,EAAStG,UAGT8N,EAAO7xB,IAAI0/B,KAAK5d,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMowC,YAAa,IAGvEC,GAAiB,SAAU13B,GAC3B,IAAI5yB,EAAUq/B,EAAYzM,GAC1Bw3B,GAASx3B,EAAQ5yB,EAASA,EAAQqZ,OAAO,EAAG,IAAM,QAElDkxC,GAAY,SAAU33B,GACtBA,EAAO7xB,IAAI0/B,KAAK5d,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMuwC,SAAU,MAChE,IAAIC,EAASh0C,SAASU,cAAc,UACpCszC,EAAOC,gBAAgBrqD,OACvBoqD,EAAOC,gBAAgBC,MAAM,gCAAqC/3B,EAAOlV,QAAQE,IAAM,oCAAwCgV,EAAOlV,QAAQE,IAAM,yPAA8PgV,EAAOlV,QAAQnc,QAAQid,MAAQ,yCAA6CoU,EAAOlV,QAAQnc,QAAQC,KAAK+V,MAAQ,yGAClgBkzC,EAAOC,gBAAgB/rD,QACvBvL,YAAW,WACPq3D,EAAOG,cAAcC,YAAYxrB,EAAYzM,GAAS,OACvD,MAEHk4B,GAAa,SAAUl4B,GACvB,IAAI5yB,EAAUY,GAAQgyB,GAClB7iB,EAAO,4DAAmE6iB,EAAOlV,QAAQE,IAAM,oCAAwCgV,EAAOlV,QAAQE,IAAM,wFAA8F5d,EAAU,gHAAkH4yB,EAAOlV,QAAQnc,QAAQid,MAAMmC,QAAU,OAASiS,EAAOlV,QAAQnc,QAAQid,MAAMoC,KAAO,+CAAiDgS,EAAOlV,QAAQzD,KAAO,mCAAqCiK,KAAK+/B,UAAUrxB,EAAOlV,QAAQnc,QAAQC,MAAQ,sBAAwBoxB,EAAOlV,QAAQE,IAAM,+DAAiEgV,EAAOlV,QAAQE,IAAM,qBAAuBsG,KAAK+/B,UAAUrxB,EAAOlV,QAAQnc,QAAQ6c,MAAQ,yDAA2DwU,EAAOlV,QAAQE,IAAM,OAASgV,EAAOlV,QAAQc,MAAQ,oDAAsDoU,EAAOlV,QAAQE,IAAM,mDAAqDgV,EAAOlV,QAAQE,IAAM,gDAAkDgV,EAAOlV,QAAQE,IAAM,OAASgV,EAAOlV,QAAQc,MAAQ,kDAAoDoU,EAAOlV,QAAQE,IAAM,OAASgV,EAAOlV,QAAQc,MAAQ,8CAAgDoU,EAAOlV,QAAQE,IAAM,yEAC10CwsC,GAASx3B,EAAQ7iB,EAAM/P,EAAQqZ,OAAO,EAAG,IAAM,UAI/C0xC,GAAuD,WACvD,IAAI5T,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV5B,GAiBvD2T,GAAwB,SAAUjT,GAElC,SAASiT,EAAOp4B,EAAQikB,GACpB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAC/CgxC,EAAYlC,EAAMrpB,QAAQ2b,SAAS,GACnC2P,EAAerrB,SAASI,cAAc,OA0B1C,OAzBAirB,EAAavnB,UAAY,eAAoC,IAAnBs8B,EAAS7U,MAAc,GAAK,wBACtEF,EAAazmB,UAAY,+HACzBymB,EAAa9qB,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC9E,IAAIma,EAAana,EAAM7D,OACvB,GAA2B,WAAvBge,EAAW9N,QAAsB,CACjC,OAAQ8N,EAAWpf,aAAa,cAC5B,IAAK,WACDuzC,GAAe13B,GACf,MACJ,IAAK,MACD23B,GAAU33B,GACV,MACJ,IAAK,OACDk4B,GAAWl4B,GACX,MACJ,QACI,MAER0O,EAAU1O,EAAQ,CAAC,eACnB5W,EAAMyM,iBACNzM,EAAMwM,sBAGdqX,EAAMrpB,QAAQ6gB,YAAYyK,GAC1BD,EAAcjP,EAAQkP,EAAcC,EAAW8U,EAAS7U,OACjDnC,EAEX,OAhCAkrB,GAAeC,EAAQjT,GAgChBiT,EAjCgB,CAkCzBpU,IAIEqU,GAA2D,WAC3D,IAAI9T,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAVxB,GAgB3D6T,GAA4B,SAAUnT,GAEtC,SAASmT,EAAWt4B,EAAQikB,GACxB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAEnD,OADA8uC,EAAMqY,WAAWtlB,EAAQikB,GAClBhX,EAiDX,OArDAorB,GAAmBC,EAAYnT,GAM/BmT,EAAWz2D,UAAUyjD,WAAa,SAAUtlB,EAAQikB,GAChD9lD,KAAKylB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC1FA,EAAMyM,iBACFmK,EAAOpc,QAAQ+D,UAAUsM,SAAS,uBAC7BgwB,EAAS7U,QACVjxC,KAAKsqB,UAAYw7B,EAAS54B,MAE9B2U,EAAOpc,QAAQe,MAAM4zC,OAAS,GAC9B10C,SAAS+D,KAAKjD,MAAMse,SAAW,GAC/BjD,EAAOpc,QAAQyC,UAAU6L,OAAO,sBAChCzyB,OAAOuI,KAAKg4B,EAAOoB,QAAQyN,UAAUlqC,SAAQ,SAAUnH,GACnD,IAAIg7D,EAAax4B,EAAOoB,QAAQyN,SAASrxC,GAAKq3C,WAC1C2jB,IACAA,EAAW7wC,UAAY6wC,EAAW7wC,UAAUnK,QAAQ,MAAO,WAG/DwiB,EAAOxxB,UACPwxB,EAAOxxB,QAAQoV,QAAQ+D,UAAYqY,EAAOxxB,QAAQoV,QAAQ+D,UAAUnK,QAAQ,MAAO,UAIlFymC,EAAS7U,QACVjxC,KAAKsqB,UAAY,6DAErBuX,EAAOpc,QAAQe,MAAM4zC,OAASv4B,EAAOlV,QAAQ2tC,WAAW3mC,MAAM/pB,WAC9D8b,SAAS+D,KAAKjD,MAAMse,SAAW,SAC/BjD,EAAOpc,QAAQyC,UAAUC,IAAI,sBAC7B7mB,OAAOuI,KAAKg4B,EAAOoB,QAAQyN,UAAUlqC,SAAQ,SAAUnH,GACnD,IAAIg7D,EAAax4B,EAAOoB,QAAQyN,SAASrxC,GAAKq3C,WAC1C2jB,IACAA,EAAW7wC,UAAY6wC,EAAW7wC,UAAUnK,QAAQ,MAAO,WAG/DwiB,EAAOxxB,UACPwxB,EAAOxxB,QAAQoV,QAAQ+D,UAAYqY,EAAOxxB,QAAQoV,QAAQ+D,UAAUnK,QAAQ,MAAO,SAGvFwiB,EAAOkN,UACPlN,EAAOkN,SAASF,aAAahN,GAE7BikB,EAAS9H,OACT8H,EAAS9H,MAAM/yB,EAAO4W,GAE1BuY,EAAWvY,GACX4Y,EAAsB5Y,OAGvBs4B,EAtDoB,CAuD7BtU,IAIE0U,GAAyD,WACzD,IAAInU,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV1B,GAqBzDkU,GAA0B,SAAUxT,GAEpC,SAASwT,EAAS34B,EAAQikB,GACtB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAC/C+wC,EAAerrB,SAASI,cAAc,OAK1C,OAJAirB,EAAavnB,UAAY,kCACzBunB,EAAazmB,UAAY,oDAAyD,EAAGwlB,EAAmCmQ,IAAI,YAAc,oEAAyE,EAAGnQ,EAAmCmQ,IAAI,OAAS,sEAA2E,EAAGnQ,EAAmCmQ,IAAI,OAAS,uEAA4E,EAAGnQ,EAAmCmQ,IAAI,OAAS,wEAA6E,EAAGnQ,EAAmCmQ,IAAI,OAAS,yEAA8E,EAAGnQ,EAAmCmQ,IAAI,OAAS,aACpwBnR,EAAMrpB,QAAQ6gB,YAAYyK,GAC1BjC,EAAMqY,WAAWtlB,EAAQkP,GAClBjC,EA4CX,OApDAyrB,GAAiBC,EAAUxT,GAU3BwT,EAAS92D,UAAUyjD,WAAa,SAAUtlB,EAAQkP,GAC9C,IAAIC,EAAYhxC,KAAKylB,QAAQ2b,SAAS,GACtC4P,EAAU/qB,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3EA,EAAMyM,iBACFsZ,EAAU9oB,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,uBAGhF0f,EAAUuM,OACNvM,EAAU9oB,UAAUwK,SAAS,yBACF,YAAvBmP,EAAOQ,aACP6a,GAAcrb,GACdga,GAAiBha,IAEW,OAAvBA,EAAOQ,aACZkV,GAAuB1V,EAAQ,IAEnCmP,EAAU9oB,UAAU6L,OAAO,0BAG3Bwc,EAAU1O,EAAQ,CAAC,eACnBkP,EAAavqB,MAAMwE,QAAU,aAGrC,IAAK,IAAIroB,EAAI,EAAGA,EAAI,EAAGA,IACnBouC,EAAa3P,SAAS5zB,KAAK7K,GAAGsjB,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC/FA,EAAMyM,iBACqB,YAAvBmK,EAAOQ,aACP4a,GAAWpb,EAAQ5W,EAAM7D,OAAOpB,aAAa,aAC7C61B,GAAiBha,GACjBmP,EAAU9oB,UAAUC,IAAI,yBAEI,OAAvB0Z,EAAOQ,aACZkV,GAAuB1V,EAAQ5W,EAAM7D,OAAOpB,aAAa,eACzDgrB,EAAU9oB,UAAUC,IAAI,yBAGxB2gC,GAAejnB,EAAQ5W,EAAM7D,OAAOpB,aAAa,eAErD+qB,EAAavqB,MAAMwE,QAAU,WAIlCwvC,EArDkB,CAsD3B3U,IAIE4U,GAAqD,WACrD,IAAIrU,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV9B,GAerDoU,GAAsB,SAAU1T,GAEhC,SAAS0T,EAAK74B,EAAQikB,GAClB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAKnD,OAJA8uC,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACNmK,EAAO7xB,IAAI0/B,KAAK,+kCAAwzC,MAEr0CZ,EAEX,OATA2rB,GAAaC,EAAM1T,GASZ0T,EAVc,CAWvB7U,IAIE8U,GAAuD,WACvD,IAAIvU,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV5B,GAmBvDsU,GAAwB,SAAU5T,GAElC,SAAS4T,EAAO/4B,EAAQikB,GACpB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAanD,OAZA8uC,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAE3F,GADAA,EAAMyM,kBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAC3E,OAAvBuQ,EAAOQ,YADX,CAIA,IAAI+H,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7C8Z,GAAY,EAAG7zB,EAAqCuI,IAAI+Z,EAAME,eAAgB,MAC9EqR,GACAyT,GAAWvtB,EAAQ8Z,EAAWvR,OAG/B0E,EAEX,OAjBA6rB,GAAeC,EAAQ5T,GAiBhB4T,EAlBgB,CAmBzB/U,IAIEgV,GAAqD,WACrD,IAAIzU,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV9B,GAgBrDwU,GAAsB,SAAU9T,GAEhC,SAAS8T,EAAKj5B,EAAQikB,GAClB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAKnD,OAJA8uC,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACNmK,EAAO7xB,IAAI0/B,KAAK,8gCAAm9C/nB,EAA8BoI,EAAI,YAAc0S,KAAKs4B,QAAU,0KAAwM,MAEvuDjsB,EAEX,OATA+rB,GAAaC,EAAM9T,GASZ8T,EAVc,CAWvBjV,IAIEmV,GAA4D,WAC5D,IAAI5U,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAVvB,GAiB5D2U,GAA6B,SAAUjU,GAEvC,SAASiU,EAAYp5B,EAAQikB,GACzB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KASnD,OARA8uC,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAC3E,OAAvBuQ,EAAOQ,aAGXysB,GAAiBjtB,EAAQ,eAEtBiN,EAEX,OAbAksB,GAAoBC,EAAajU,GAa1BiU,EAdqB,CAe9BpV,IAIEqV,GAA6D,WAC7D,IAAI9U,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAVtB,GAiB7D6U,GAA8B,SAAUnU,GAExC,SAASmU,EAAat5B,EAAQikB,GAC1B,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KASnD,OARA8uC,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAC3E,OAAvBuQ,EAAOQ,aAGXysB,GAAiBjtB,EAAQ,kBAEtBiN,EAEX,OAbAosB,GAAqBC,EAAcnU,GAa5BmU,EAdsB,CAe/BtV,IAIEuV,GAAwD,WACxD,IAAIhV,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV3B,GAmBxD+U,GAAyB,SAAUrU,GAEnC,SAASqU,EAAQx5B,EAAQikB,GACrB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAanD,OAZA8uC,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAE3F,GADAA,EAAMyM,kBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAC3E,OAAvBuQ,EAAOQ,YADX,CAIA,IAAI+H,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7C8Z,GAAY,EAAG7zB,EAAqCuI,IAAI+Z,EAAME,eAAgB,MAC9EqR,GACA+T,GAAY7tB,EAAQ8Z,EAAWvR,EAAOuR,EAAUlpB,mBAGjDqc,EAEX,OAjBAssB,GAAgBC,EAASrU,GAiBlBqU,EAlBiB,CAmB1BxV,IAIEyV,GAAwD,WACxD,IAAIlV,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV3B,GAgBxDiV,GAAiC,SAAUvU,GAE3C,SAAS8O,EAAQj0B,EAAQikB,GACrB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAanD,OAZI6hC,EAAOlV,QAAQmlB,SACfhD,EAAMrpB,QAAQmd,kBAAkB1a,UAAUC,IAAI,wBAElD2mB,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACN,IAAI0N,EAAavD,EAAOoB,QAAQyN,SAASoB,QAAQlP,kBAC7CwC,EAAWld,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,uBAGjFuQ,EAAOlV,QAAQmlB,QAAQxhC,QAAUw+B,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS,wBACpFmP,EAAOiQ,QAAQgV,OAAOjlB,EAAQA,EAAOlV,QAAQmlB,QAAQxhC,YAElDw+B,EAEX,OAjBAwsB,GAAgBxF,EAAS9O,GAiBlB8O,EAlByB,CAmBlCjQ,IAIE2V,GAAwD,WACxD,IAAIpV,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV3B,GAkBxDmV,GAAiC,SAAUzU,GAE3C,SAASgP,EAAQn0B,EAAQikB,GACrB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAEnD,OADA8uC,EAAMqY,WAAWtlB,GACViN,EAgDX,OApDA0sB,GAAgBxF,EAAShP,GAMzBgP,EAAQtyD,UAAUyjD,WAAa,SAAUtlB,GACrC,IAAIiN,EAAQ9uC,KACZA,KAAKylB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC1FA,EAAMyM,iBACN,IAAI0N,EAAa0J,EAAMrpB,QAAQmd,kBAC/B,IAAIwC,EAAWld,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,qBAAjF,CAGA,IAAIoqC,EAAW/zC,EAA8CyE,EAAEmF,cAAchb,OAAO,CAAC,OAAQ,YAAa,aACtG6uB,EAAWld,UAAUwK,SAAS,yBAC9B0S,EAAWld,UAAU6L,OAAO,wBACD,OAAvB8N,EAAOQ,aACPR,EAAO0M,GAAG9oB,QAAQe,MAAMwE,QAAU,QACE,SAAhC6W,EAAOlV,QAAQnc,QAAQ+c,KACvBsU,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,QAGvC6W,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,SAI3C6W,EAAOA,EAAOQ,aAAa5c,QAAQgN,cAAcjM,MAAMwE,QAAU,QACjE6W,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,QAE3CmlB,EAActO,EAAOoB,QAAQyN,SAAUgrB,GACvC75B,EAAOiQ,QAAQjvC,OAAOg/B,KAGtBuO,EAAevO,EAAOoB,QAAQyN,SAAUgrB,GACxC75B,EAAOrxB,QAAQiV,QAAQe,MAAMwE,QAAU,QACZ,OAAvB6W,EAAOQ,YACPR,EAAO0M,GAAG9oB,QAAQe,MAAMwE,QAAU,OAGlC6W,EAAOA,EAAOQ,aAAa5c,QAAQgN,cAAcjM,MAAMwE,QAAU,OAErE6W,EAAOrxB,QAAQ3N,OAAOg/B,GACtBuD,EAAWld,UAAUC,IAAI,wBACzBooB,EAAU1O,EAAQ,CAAC,aAAc,OAAQ,YACzCx/B,YAAW,WACPw/B,EAAOiQ,QAAQjvC,OAAOg/B,KACvBA,EAAOlV,QAAQnc,QAAQikD,MAAQ,KAEtCra,EAAWvY,QAGZm0B,EArDyB,CAsDlCnQ,IAIE8V,GAA6B,WAC7B,SAASA,EAAYt4D,GAOjB,IAAI8B,EAEJ,GARAnF,KAAK47D,YAAc,IACnB57D,KAAK67D,aAAc,EACnB77D,KAAK87D,WAAY,EACjB97D,KAAK+7D,YAAc,GACnB/7D,KAAKg8D,aAAe,GACpBh8D,KAAKi8D,gBAAkB,EAGK,qBAAjBC,aACP/2D,EAAU,IAAI+2D,iBAEb,KAAIC,mBAIL,OAHAh3D,EAAU,IAAIg3D,mBAKlBn8D,KAAKo8D,oBAAsBj3D,EAAQk3D,WAEnC,IAAIC,EAASn3D,EAAQo3D,aAEjBC,EAAar3D,EAAQs3D,wBAAwBp5D,GAEjDm5D,EAAWE,QAAQJ,GAKnBt8D,KAAK28D,SAAWx3D,EAAQy3D,sBAAsB,KAAM,EAAG,GAEvD58D,KAAK28D,SAASE,eAAiB,KAE/BP,EAAOI,QAAQ18D,KAAK28D,UACpB38D,KAAK28D,SAASD,QAAQv3D,EAAQ23D,aAC9B98D,KAAK87D,WAAY,EAyGrB,OAtGAH,EAAYj4D,UAAUq5D,iBAAmB,SAAUC,EAAiBC,GAChEj9D,KAAK+7D,YAAYrzD,KAAK,IAAIw0D,aAAaF,IACvCh9D,KAAKg8D,aAAatzD,KAAK,IAAIw0D,aAAaD,IACxCj9D,KAAKi8D,iBAAmB,MAE5BN,EAAYj4D,UAAUy5D,yBAA2B,WACzCn9D,KAAK87D,YACL97D,KAAK67D,aAAc,EACnB77D,KAAK+7D,YAAY/yD,OAAShJ,KAAKg8D,aAAahzD,OAAS,EACrDhJ,KAAKi8D,gBAAkB,IAG/BN,EAAYj4D,UAAU05D,cAAgB,WAClCp9D,KAAK67D,aAAc,GAEvBF,EAAYj4D,UAAU25D,iBAAmB,WAMrC,IAJA,IAAIC,EAAat9D,KAAKu9D,aAAav9D,KAAK+7D,aACpCyB,EAAcx9D,KAAKu9D,aAAav9D,KAAKg8D,cAErCyB,EAAc,IAAIP,aAAaI,EAAWt0D,QACrCrG,EAAI,EAAGA,EAAI26D,EAAWt0D,SAAUrG,EACrC86D,EAAY96D,GAAK,IAAO26D,EAAW36D,GAAK66D,EAAY76D,IAGpD3C,KAAKo8D,oBAAsBp8D,KAAK47D,cAChC6B,EAAcz9D,KAAK09D,iBAAiBD,EAAaz9D,KAAK47D,cAE1D,IAAI+B,EAAkB,GAA0B,EAArBF,EAAYz0D,OACnC40D,EAAS,IAAIC,YAAYF,GACzBG,EAAO,IAAIC,SAASH,GAExB59D,KAAKg+D,cAAcF,EAAM,EAAG,QAC5BA,EAAKG,UAAU,EAAGN,GAAgB,GAClC39D,KAAKg+D,cAAcF,EAAM,EAAG,QAE5B99D,KAAKg+D,cAAcF,EAAM,GAAI,QAC7BA,EAAKG,UAAU,GAAI,IAAI,GACvBH,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKG,UAAU,GAAIj+D,KAAK47D,aAAa,GACrCkC,EAAKG,UAAU,GAAuB,EAAnBj+D,KAAK47D,aAAiB,GACzCkC,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKI,UAAU,GAAI,IAAI,GAEvB,IAAIC,EAA0C,EAArBV,EAAYz0D,OACrChJ,KAAKg+D,cAAcF,EAAM,GAAI,QAC7BA,EAAKG,UAAU,GAAIE,GAAoB,GAKvC,IAHA,IAAIC,EAAMX,EAAYz0D,OAClB2qB,EAAQ,GACR2oC,EAAS,EACJ7kD,EAAI,EAAGA,EAAI2mD,EAAK3mD,IACrBqmD,EAAKO,SAAS1qC,EAAO8pC,EAAYhmD,IAAM,MAAS6kD,IAAS,GACzD3oC,GAAS,EAEb,OAAO,IAAImB,KAAK,CAACgpC,GAAO,CAAEt4D,KAAM,eAEpCm2D,EAAYj4D,UAAUg6D,iBAAmB,SAAUE,EAAQU,GACvD,GAAIA,IAASt+D,KAAKo8D,oBACd,OAAOwB,EAEX,GAAIU,EAAOt+D,KAAKo8D,oBAEZ,OAAOwB,EAEX,IAAIW,EAAkBv+D,KAAKo8D,oBAAsBkC,EAC7CE,EAAYxsD,KAAKysD,MAAMb,EAAO50D,OAASu1D,GACvCz3D,EAAS,IAAIo2D,aAAasB,GAC1BE,EAAe,EACfC,EAAe,EACnB,MAAOD,EAAe53D,EAAOkC,OAAQ,CAIjC,IAHA,IAAI41D,EAAmB5sD,KAAKysD,OAAOC,EAAe,GAAKH,GACnDM,EAAQ,EACRC,EAAQ,EACHn8D,EAAIg8D,EAAch8D,EAAIi8D,GAAoBj8D,EAAIi7D,EAAO50D,OAAQrG,IAClEk8D,GAASjB,EAAOj7D,GAChBm8D,IAEJh4D,EAAO43D,GAAgBG,EAAQC,EAC/BJ,IACAC,EAAeC,EAEnB,OAAO93D,GAEX60D,EAAYj4D,UAAU65D,aAAe,SAAUwB,GAI3C,IAHA,IAAIj4D,EAAS,IAAIo2D,aAAal9D,KAAKi8D,iBAC/Bn7B,EAAS,EACTs9B,EAAMW,EAAqB/1D,OACtBrG,EAAI,EAAGA,EAAIy7D,IAAOz7D,EAAG,CAC1B,IAAIi7D,EAASmB,EAAqBp8D,GAClCmE,EAAOk4D,IAAIpB,EAAQ98B,GACnBA,GAAU88B,EAAO50D,OAErB,OAAOlC,GAEX60D,EAAYj4D,UAAUs6D,cAAgB,SAAUF,EAAMh9B,EAAQthC,GAE1D,IADA,IAAI4+D,EAAM5+D,EAAMwJ,OACPrG,EAAI,EAAGA,EAAIy7D,EAAKz7D,IACrBm7D,EAAKmB,SAASn+B,EAASn+B,EAAGnD,EAAM4a,WAAWzX,KAG5Cg5D,EA7IqB,GAkJ5BuD,GAAuD,WACvD,IAAI9Y,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV5B,GAmBvD6Y,GAAwB,SAAUnY,GAElC,SAASmY,EAAOt9B,EAAQikB,GACpB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAEnD,OADA8uC,EAAMqY,WAAWtlB,GACViN,EAgDX,OApDAowB,GAAeC,EAAQnY,GAMvBmY,EAAOz7D,UAAUyjD,WAAa,SAAUtlB,GACpC,IACIu9B,EADAtwB,EAAQ9uC,KAEZA,KAAKylB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAE1F,GADAA,EAAMyM,kBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,qBAAtG,CAGA,IAAI0a,EAAgBnK,EAAOA,EAAOQ,aAAa5c,QAC/C,GAAK25C,EAsBL,GAAIA,EAAcvD,YAAa,CAC3BuD,EAAchC,gBACdv7B,EAAO7xB,IAAI66C,OACX,IAAIK,EAAO,IAAImU,KAAK,CAACD,EAAc/B,oBAAqB,UAAW,IAAKvoD,MAAQC,UAAY,OAAQ,CAAEvP,KAAM,eAC5G2mD,GAAYtqB,EAAQ,CAACqpB,IACrBpc,EAAMrpB,QAAQ2b,SAAS,GAAGlZ,UAAU6L,OAAO,6BAG3C8N,EAAO7xB,IAAI0/B,KAAK5d,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMo2C,WACtDtzB,EAAcxgB,aAAa,kBAAmB,SAC9C4zC,EAAcjC,2BACdruB,EAAMrpB,QAAQ2b,SAAS,GAAGlZ,UAAUC,IAAI,6BAhCxC8e,UAAUs4B,aAAaC,aAAa,CAAEC,OAAO,IAAQ7/D,MAAK,SAAU8/D,GAChEN,EAAgB,IAAIzD,GAAY+D,GAChCN,EAAczC,SAASE,eAAiB,SAAUx5D,GAE9C,GAAK+7D,EAAcvD,YAAnB,CAIA,IAAIvwC,EAAOjoB,EAAEs8D,YAAYC,eAAe,GACpChwB,EAAQvsC,EAAEs8D,YAAYC,eAAe,GACzCR,EAAcrC,iBAAiBzxC,EAAMskB,KAEzCwvB,EAAcjC,2BACdt7B,EAAO7xB,IAAI0/B,KAAK5d,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMo2C,WACtDtzB,EAAcxgB,aAAa,kBAAmB,SAC9CsjB,EAAMrpB,QAAQ2b,SAAS,GAAGlZ,UAAUC,IAAI,2BACzCqN,OAAM,WACLqM,EAAO7xB,IAAI0/B,KAAK5d,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAM,uBAmB/Di2C,EArDgB,CAsDzBtZ,IAIEga,GAAqD,WACrD,IAAIzZ,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV9B,GAiBrDwZ,GAAsB,SAAU9Y,GAEhC,SAAS8Y,EAAKj+B,EAAQikB,GAClB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KASnD,OARAowC,EAAe,CAAEwY,KAAM9Z,EAAMrpB,SAAW,CAAC,SACzCqpB,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAGtGuQ,EAAO8T,KAAKiT,KAAK/mB,MAEdiN,EAEX,OAbA+wB,GAAaC,EAAM9Y,GAaZ8Y,EAdc,CAevBja,IAIEka,GAAqD,WACrD,IAAI3Z,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV9B,GAiBrD0Z,GAAsB,SAAUhZ,GAEhC,SAASgZ,EAAKn+B,EAAQikB,GAClB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KASnD,OARAowC,EAAe,CAAEuF,KAAM7G,EAAMrpB,SAAW,CAAC,SACzCqpB,EAAMrpB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC3FA,EAAMyM,iBACFoX,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,sBAGtGuQ,EAAO8T,KAAKA,KAAK9T,MAEdiN,EAEX,OAbAixB,GAAaC,EAAMhZ,GAaZgZ,EAdc,CAevBna,IAIEoa,GAAuD,WACvD,IAAI7Z,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV5B,GAiBvD4Z,GAA+B,SAAUlZ,GAEzC,SAASyD,EAAO5oB,EAAQikB,GACpB,IAAIhX,EAAQkY,EAAOvhD,KAAKzF,KAAM6hC,EAAQikB,IAAa9lD,KAC/CmgE,EAAY,qBAShB,OARIt+B,EAAOlV,QAAQgtB,OAAOgT,WACtBwT,GAAa,wBAEbt+B,EAAOlV,QAAQgtB,OAAO4R,SACtB4U,GAAa,YAAet+B,EAAOlV,QAAQgtB,OAAO4R,OAAS,KAE/Dzc,EAAMrpB,QAAQ2b,SAAS,GAAG9W,UAAY,IAAMw7B,EAAS54B,MAAQ,2DAA6DizC,EAAY,IACtIrxB,EAAMqY,WAAWtlB,GACViN,EAuBX,OAnCAmxB,GAAexV,EAAQzD,GAcvByD,EAAO/mD,UAAUyjD,WAAa,SAAUtlB,GACpC,IAAIiN,EAAQ9uC,KACZA,KAAKylB,QAAQ2b,SAAS,GAAGnb,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAC1F,GAAI6jB,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,qBAGlG,OAFArG,EAAMwM,uBACNxM,EAAMyM,oBAId13B,KAAKylB,QAAQW,cAAc,SAASH,iBAAiB,UAAU,SAAUgF,GACrE,GAAI6jB,EAAMrpB,QAAQmd,kBAAkB1a,UAAUwK,SAAS/K,EAA6CyE,EAAEkF,qBAGlG,OAFArG,EAAMwM,uBACNxM,EAAMyM,iBAGwB,IAA9BzM,EAAM7D,OAAOwjC,MAAM5hD,QAGvBmjD,GAAYtqB,EAAQ5W,EAAM7D,OAAOwjC,MAAO3/B,EAAM7D,YAG/CqjC,EApCuB,CAqChC5E,IAgCEua,GAAyB,WACzB,SAASA,EAAQv+B,GACb,IAAIiN,EAAQ9uC,KACR2sB,EAAUkV,EAAOlV,QACrB3sB,KAAK0wC,SAAW,GAChB1wC,KAAKylB,QAAUC,SAASI,cAAc,OACtC9lB,KAAKylB,QAAQ+D,UAAY,iBACzBmD,EAAQsW,QAAQz8B,SAAQ,SAAUs/C,EAAUnjD,GACxC,IAAIstC,EAAcnB,EAAMuxB,QAAQx+B,EAAQikB,EAAUnjD,GAElD,GADAmsC,EAAMrpB,QAAQ6gB,YAAY2J,GACtB6V,EAAS7iB,QAAS,CAClB,IAAIq9B,EAAiB56C,SAASI,cAAc,OAC5Cw6C,EAAe92C,UAAY,kCAC3B82C,EAAer6C,kBAAiB,EAAG6pB,EAAgCoB,OAAO,SAAUjmB,GAChFq1C,EAAe95C,MAAMwE,QAAU,UAEnC86B,EAAS7iB,QAAQz8B,SAAQ,SAAUyiD,EAAasX,GAC5CtX,EAAYhY,MAAQ,EACpBqvB,EAAeh6B,YAAYwI,EAAMuxB,QAAQx+B,EAAQonB,EAAatmD,EAAI49D,OAEtEtwB,EAAY3J,YAAYg6B,GACxBxvB,EAAcjP,EAAQy+B,EAAgBrwB,EAAY7O,SAAS,GAAI,OAGnES,EAAOlV,QAAQxc,cAAc06C,MAC7B7qD,KAAKylB,QAAQyC,UAAUC,IAAI,wBAE3B0Z,EAAOlV,QAAQxc,cAAcC,KAC7BpQ,KAAKylB,QAAQyC,UAAUC,IAAI,uBAE3B0Z,EAAOlV,QAAQtc,QAAQC,SACvBuxB,EAAOxxB,QAAU,IAAIooD,GAAQ52B,GAC7B7hC,KAAKylB,QAAQ6gB,YAAYzE,EAAOxxB,QAAQoV,UAwGhD,OArGA26C,EAAQ18D,UAAU28D,QAAU,SAAUx+B,EAAQikB,EAAUnyB,GACpD,IAAI6sC,EACJ,OAAQ1a,EAASxlD,MACb,IAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,OACL,IAAK,eACL,IAAK,QACL,IAAK,OACL,IAAK,cACL,IAAK,OACL,IAAK,QACDkgE,EAAc,IAAI3a,GAAShkB,EAAQikB,GACnC,MACJ,IAAK,QACD0a,EAAc,IAAIxH,GAAMn3B,EAAQikB,GAChC,MACJ,IAAK,WACD0a,EAAc,IAAIhG,GAAS34B,EAAQikB,GACnC,MACJ,IAAK,IACD0a,EAAc,IAAI1H,GAClB,MACJ,IAAK,KACD0H,EAAc,IAAIpI,GAClB,MACJ,IAAK,OACDoI,EAAc,IAAIR,GAAKn+B,EAAQikB,GAC/B,MACJ,IAAK,OACD0a,EAAc,IAAIV,GAAKj+B,EAAQikB,GAC/B,MACJ,IAAK,OACD0a,EAAc,IAAI9F,GAAK74B,EAAQikB,GAC/B,MACJ,IAAK,OACD0a,EAAc,IAAIrI,GAAKt2B,EAAQikB,GAC/B,MACJ,IAAK,UACD0a,EAAc,IAAI/E,GAAgB55B,EAAQikB,GAC1C,MACJ,IAAK,aACD0a,EAAc,IAAIrG,GAAWt4B,EAAQikB,GACrC,MACJ,IAAK,SACD0a,EAAc,IAAIN,GAAcr+B,EAAQikB,GACxC,MACJ,IAAK,SACD0a,EAAc,IAAIrB,GAAOt9B,EAAQikB,GACjC,MACJ,IAAK,OACD0a,EAAc,IAAI1F,GAAKj5B,EAAQikB,GAC/B,MACJ,IAAK,YACD0a,EAAc,IAAIzZ,GAASllB,EAAQikB,GACnC,MACJ,IAAK,WACD0a,EAAc,IAAI3H,GAASh3B,EAAQikB,GACnC,MACJ,IAAK,UACD0a,EAAc,IAAInF,GAAQx5B,EAAQikB,GAClC,MACJ,IAAK,SACD0a,EAAc,IAAI5F,GAAO/4B,EAAQikB,GACjC,MACJ,IAAK,UACD0a,EAAc,IAAIjF,GAAgB15B,EAAQikB,GAC1C,MACJ,IAAK,eACD0a,EAAc,IAAIvF,GAAYp5B,EAAQikB,GACtC,MACJ,IAAK,gBACD0a,EAAc,IAAIrF,GAAat5B,EAAQikB,GACvC,MACJ,IAAK,aACD0a,EAAc,IAAIlI,GAAUz2B,EAAQikB,GACpC,MACJ,IAAK,gBACD0a,EAAc,IAAIhI,GAAa32B,EAAQikB,GACvC,MACJ,IAAK,SACD0a,EAAc,IAAIvG,GAAOp4B,EAAQikB,GACjC,MACJ,QACI0a,EAAc,IAAI7H,GAAO92B,EAAQikB,GACjC,MAER,GAAK0a,EAAL,CAGA,IAAInhE,EAAMymD,EAASxlD,KAKnB,MAJY,OAARjB,GAAwB,MAARA,IAChBA,GAAYs0B,GAEhB3zB,KAAK0wC,SAASrxC,GAAOmhE,EAAY/6C,QAC1B+6C,EAAY/6C,UAEhB26C,EAxIiB,GA6IxB1sD,GAAmBuR,EAAoB,KAUvCw7C,GAA2B,WAC3B,SAAST,IACLhgE,KAAK0gE,UAAY,GACjB1gE,KAAK2gE,aAEL3gE,KAAKib,IAAM,IAAIvH,GAuNnB,OArNAssD,EAAKt8D,UAAUk9D,WAAa,SAAU/+B,GAClC7hC,KAAK2gE,aACL3gE,KAAK6mD,UAAUhlB,IAEnBm+B,EAAKt8D,UAAUmjD,UAAY,SAAUhlB,GAC5BA,EAAOoB,UAGRjjC,KAAK6hC,EAAOQ,aAAaw+B,UAAU73D,OAAS,EAC5CmnC,EAActO,EAAOoB,QAAQyN,SAAU,CAAC,SAGxCN,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,SAEK,IAA9C1wC,KAAK6hC,EAAOQ,aAAay+B,UAAU93D,OACnCmnC,EAActO,EAAOoB,QAAQyN,SAAU,CAAC,SAGxCN,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,WAGjDsvB,EAAKt8D,UAAUiyC,KAAO,SAAU9T,GAC5B,GAA2E,UAAvEA,EAAOA,EAAOQ,aAAa5c,QAAQO,aAAa,sBAGhDhmB,KAAK6hC,EAAOQ,aAAaw+B,UAAU73D,OAAS,GAAhD,CAGA,IAAI5B,EAAQpH,KAAK6hC,EAAOQ,aAAaw+B,UAAU72D,MAC1C5C,IAGLpH,KAAK6hC,EAAOQ,aAAay+B,UAAUp4D,KAAKtB,GACxCpH,KAAK+gE,WAAW35D,EAAOy6B,GACvB7hC,KAAK6hC,EAAOQ,aAAa2+B,SAAU,EAEnCzwB,EAAU1O,EAAQ,CAAC,YAEvBm+B,EAAKt8D,UAAUklD,KAAO,SAAU/mB,GAC5B,GAA2E,UAAvEA,EAAOA,EAAOQ,aAAa5c,QAAQO,aAAa,mBAApD,CAGA,IAAI5e,EAAQpH,KAAK6hC,EAAOQ,aAAay+B,UAAU92D,MAC1C5C,IAGLpH,KAAK6hC,EAAOQ,aAAaw+B,UAAUn4D,KAAKtB,GACxCpH,KAAK+gE,WAAW35D,EAAOy6B,GAAQ,MAEnCm+B,EAAKt8D,UAAUkyC,oBAAsB,SAAU/T,EAAQ5W,GACnD,GAAkC,IAA9BH,eAAeuf,cAG+B,IAA9CrqC,KAAK6hC,EAAOQ,aAAaw+B,UAAU73D,QAAiE,IAAjDhJ,KAAK6hC,EAAOQ,aAAaw+B,UAAU,GAAG73D,QACzFhJ,KAAK6hC,EAAOQ,aAAay+B,UAAU93D,OAAS,OAG5C,EAAG8mC,EAA6B+E,OAAuB,cAAd5pB,EAAM5rB,QAI/C,EAAGywC,EAA4BmxB,MAAnC,CAIA,IAAI1sD,EAAOvU,KAAKkhE,SAASr/B,GACrBttB,EAAK8K,QAAQ,QAAS,IAAIA,QAAQ,2BAA4B,MAC1Drf,KAAK6hC,EAAOQ,aAAaw+B,UAAU,GAAG,GAAGrrD,MAAM,GAAG,GAAG6J,QAAQ,QAAS,MAI9Erf,KAAK6hC,EAAOQ,aAAaw+B,UAAU,GAAG,GAAGrrD,MAAM,GAAG,GAAKjB,EACvDvU,KAAK6hC,EAAOQ,aAAa8+B,SAAW5sD,KAGxCyrD,EAAKt8D,UAAUs4C,eAAiB,SAAUna,GAEtC,IAAIttB,EAAOvU,KAAKkhE,SAASr/B,GAAQ,GAC7Bu/B,EAAOphE,KAAKib,IAAIzG,UAAUD,EAAMvU,KAAK6hC,EAAOQ,aAAa8+B,UAAU,GACnEE,EAAYrhE,KAAKib,IAAIiH,WAAW3N,EAAMvU,KAAK6hC,EAAOQ,aAAa8+B,SAAUC,GACpD,IAArBC,EAAUr4D,QAAgBhJ,KAAK6hC,EAAOQ,aAAaw+B,UAAU73D,OAAS,IAG1EhJ,KAAK6hC,EAAOQ,aAAa8+B,SAAW5sD,EACpCvU,KAAK6hC,EAAOQ,aAAaw+B,UAAUn4D,KAAK24D,GACpCrhE,KAAK6hC,EAAOQ,aAAaw+B,UAAU73D,OAAShJ,KAAK0gE,WACjD1gE,KAAK6hC,EAAOQ,aAAaw+B,UAAU38C,QAEnClkB,KAAK6hC,EAAOQ,aAAa2+B,UACzBhhE,KAAK6hC,EAAOQ,aAAay+B,UAAY,GACrC9gE,KAAK6hC,EAAOQ,aAAa2+B,SAAU,EACnC5wB,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,UAEzC1wC,KAAK6hC,EAAOQ,aAAaw+B,UAAU73D,OAAS,GAC5CmnC,EAActO,EAAOoB,QAAQyN,SAAU,CAAC,WAGhDsvB,EAAKt8D,UAAUq9D,WAAa,SAAU35D,EAAOy6B,EAAQy/B,GAEjD,IAAI/sD,EACJ,QAFe,IAAX+sD,IAAqBA,GAAS,GAE9BA,EAAQ,CACR,IAAIC,EAAgBvhE,KAAKib,IAAI6H,eAAe1b,GAAO2C,UACnDw3D,EAAc/6D,SAAQ,SAAUkb,GAC5BA,EAAMlM,MAAMhP,SAAQ,SAAU46D,GAC1BA,EAAK,IAAMA,EAAK,SAGxB7sD,EAAOvU,KAAKib,IAAIgI,YAAYs+C,EAAevhE,KAAK6hC,EAAOQ,aAAa8+B,UAAU,QAG9E5sD,EAAOvU,KAAKib,IAAIgI,YAAY7b,EAAOpH,KAAK6hC,EAAOQ,aAAa8+B,UAAU,GAU1E,GARAnhE,KAAK6hC,EAAOQ,aAAa8+B,SAAW5sD,EACpCstB,EAAOA,EAAOQ,aAAa5c,QAAQ6E,UAAY/V,EACpB,OAAvBstB,EAAOQ,aACPR,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,WAAamb,EAAOQ,YAAc,8BACjF77B,SAAQ,SAAU6iC,GACnBqI,EAAkBrI,EAAcxH,MAGnCA,EAAOA,EAAOQ,aAAa5c,QAAQW,cAAc,QAOlD,EAAG4C,EAA6BgrB,IAAInS,EAAOA,EAAOQ,aAAa5c,QAASoc,EAAOA,EAAOQ,aAAa5c,QAAQ+kB,cAAcC,eACzH8N,GAAa1W,OAR6C,CAE1D,IAAIuI,EAAQtf,eAAeI,WAAW,GACtCkf,EAAMwC,aAAa/K,EAAOA,EAAOQ,aAAa5c,SAC9C2kB,EAAMO,UAAS,GAMnBuH,GAAgBrQ,EAAQ,CACpBqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB4P,GAAiBniB,GACjBA,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,WAAamb,EAAOQ,YAAc,8BACjF77B,SAAQ,SAAUgH,GACnBkkC,EAAkBlkC,EAAMq0B,MAExB7hC,KAAK6hC,EAAOQ,aAAaw+B,UAAU73D,OAAS,EAC5CmnC,EAActO,EAAOoB,QAAQyN,SAAU,CAAC,SAGxCN,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,SAEK,IAA9C1wC,KAAK6hC,EAAOQ,aAAay+B,UAAU93D,OACnCmnC,EAActO,EAAOoB,QAAQyN,SAAU,CAAC,SAGxCN,EAAevO,EAAOoB,QAAQyN,SAAU,CAAC,UAGjDsvB,EAAKt8D,UAAUi9D,WAAa,WACxB3gE,KAAK2uC,GAAK,CACNqyB,SAAS,EACTG,SAAU,GACVL,UAAW,GACXD,UAAW,IAEf7gE,KAAKuuC,GAAK,CACNyyB,SAAS,EACTG,SAAU,GACVL,UAAW,GACXD,UAAW,IAEf7gE,KAAKyuC,QAAU,CACXuyB,SAAS,EACTG,SAAU,GACVL,UAAW,GACXD,UAAW,KAGnBb,EAAKt8D,UAAUw9D,SAAW,SAAUr/B,EAAQ2/B,GAExC,IAAIr2C,EACJ,QAFiB,IAAbq2C,IAAuBA,GAAW,GAEJ,IAA9B12C,eAAeuf,aAAqBxI,EAAOA,EAAOQ,aAAa5c,QAAQW,cAAc,OAAQ,CAC7F,IAAIgkB,EAAQtf,eAAeI,WAAW,GACtC,GAAI2W,EAAOA,EAAOQ,aAAa5c,QAAQiN,SAAS0X,EAAME,gBAAiB,CACnEnf,EAAaif,EAAMjf,aACnB,IAAI4hB,EAAarnB,SAASI,cAAc,QACxCinB,EAAWvjB,UAAY,aACvB4gB,EAAMgD,WAAWL,IAIzB,IAAI00B,EAAe5/B,EAAO8M,GAAGlpB,QAAQqoB,WAAU,GAC/C2zB,EAAa/6C,iBAAiB,WAAamb,EAAOQ,YAAc,8BAC3D77B,SAAQ,SAAUgH,IACfA,EAAKo1B,kBAAkB1a,UAAUwK,SAAS,qBAC1CllB,EAAKo1B,kBAAkB1a,UAAUwK,SAAS,sBAC1CllB,EAAKo1B,kBAAkB1a,UAAUwK,SAAS,uBAC1CllB,EAAKo1B,kBAAkBnc,gBAAgB,sBACvCjZ,EAAKo1B,kBAAkBnc,gBAAgB,kBACvCjZ,EAAKo1B,kBAAkBtY,UAAY9c,EAAKw/B,uBAAuBpK,kBAAkBtY,UACjF9c,EAAKge,aAAa,cAAe,MAEjChe,EAAKo1B,kBAAkB1a,UAAUwK,SAAS,mBAC1CllB,EAAKge,aAAa,cAAe,KACjChe,EAAKo1B,kBAAkB/P,YAAcrlB,EAAKo1B,kBAAkB5c,aAAa,aACzExY,EAAKo1B,kBAAkBnc,gBAAgB,iBAG/C,IAAIlS,EAAOstB,EAAOA,EAAOQ,aAAa5c,QAAQ6E,UAQ9C,OAPAuX,EAAOA,EAAOQ,aAAa5c,QAAQiB,iBAAiB,eAAelgB,SAAQ,SAAUgH,GACjFA,EAAKumB,YAGLytC,GAAYr2C,IACZ,EAAGnC,EAAiC4B,IAAIO,GAErC5W,EAAK8K,QAAQ,mCAAoC,UAErD2gD,EA5NmB,GAiO1Bj4C,GAAQ9C,EAAoB,KAI5By8C,GAAyB,WACzB,SAASA,EAAQ/0C,GACb3sB,KAAKi3B,eAAiB,CAClBtmB,WAAOtQ,EACP06C,MAAO,CACHzqC,QAAQ,GAEZuc,IAAKlF,EAA6ByE,EAAEU,IACpCtb,QAAS,CACLhB,QAAS,IAEb43C,QAAS,CACL93C,QAAQ,GAEZD,QAAS,CACLC,QAAQ,EACR9K,KAAM,YAEVguC,UAAU,EACV8mB,WAAY,CACR3mC,MAAO,IAEXzjB,OAAQ,OACR0gC,KAAM,CACF6jB,MAAO,IACP9jB,MAAO,CACH,KAAM,KACN,KAAM,KACN,SAAY,KACZ,KAAQ,MACR,MAAS,KACT,OAAU,MACV,MAAS,KACT,KAAQ,OAEZ3jB,UAAWrF,EAA6ByE,EAAEU,IAAM,qBAChD47B,OAAQ,GACRt1B,OAAO,GAEXlG,KAAM,MACNhE,KAAM,QACNqE,KAAM,KACNukB,QAAS,CACLxhC,QAAQ,EACRR,SAAU,QAEd0lD,YAAa,GACbhlD,QAAS,CACL0lD,QAAS,CAAC,UAAW,SAAU,SAAU,YAAa,SACtDzB,MAAO,IACPhkD,KAAMkX,EAAsCyE,EAAEa,aAC9CE,SAAUxF,EAA0CyE,EAAEgB,iBACtDC,KAAM1F,EAAsCyE,EAAEkB,aAC9CgtB,SAAU,IACV/sB,KAAM,OACNE,MAAO9F,EAAuCyE,EAAEsB,eAEpDmiB,OAAQ,CACJv/B,QAAQ,EACRR,SAAU,UAEd2d,MAAO,UACPwV,QAAS,CACL,QACA,WACA,OACA,SACA,SACA,OACA,IACA,OACA,eACA,QACA,UACA,SACA,IACA,QACA,OACA,OACA,cACA,gBACA,eACA,IACA,SACA,SACA,QACA,IACA,OACA,OACA,IACA,aACA,YACA,CACI3iC,KAAM,OACN2iC,QAAS,CACL,OACA,aACA,gBACA,SACA,UACA,UACA,WACA,OACA,UAIZ9yB,cAAe,CACX06C,MAAM,EACNz6C,KAAK,GAETsqC,gBAAgB,EAChBuB,UAAW,IACXtC,OAAQ,CACJ+S,UAAW,GACXK,UAAW,SACXzB,SAAU,SAAUhrD,GAAQ,OAAOA,EAAK+e,QAAQ,MAAO,KACvDszC,aAAc,GACdpiD,IAAK,SACLo8C,UAAU,EACVjhD,IAAK,GACLuhD,iBAAiB,GAErBztD,MAAO,GACPwhC,MAAO,QAEXhhC,KAAK2sB,QAAUA,EA6OnB,OA3OA+0C,EAAQh+D,UAAUqkB,MAAQ,WACtB,IAAI0H,EAAIgpB,EAAIlsC,EACRvM,KAAK2sB,UACD3sB,KAAK2sB,QAAQsW,QACbjjC,KAAK2sB,QAAQsW,QAAUjjC,KAAK2hE,aAAa3hE,KAAK2sB,QAAQsW,SAGtDjjC,KAAK2sB,QAAQsW,QAAUjjC,KAAK2hE,aAAa3hE,KAAKi3B,eAAegM,UAEwB,QAApFwV,EAAqC,QAA/BhpB,EAAKzvB,KAAK2sB,QAAQnc,eAA4B,IAAPif,OAAgB,EAASA,EAAGhC,aAA0B,IAAPgrB,OAAgB,EAASA,EAAG7mB,QACzH5xB,KAAKi3B,eAAezmB,QAAQid,MAAMmE,KAAO5xB,KAAK2sB,QAAQnc,QAAQid,MAAMmE,OAEvC,QAA5BrlB,EAAKvM,KAAK2sB,QAAQikB,YAAyB,IAAPrkC,OAAgB,EAASA,EAAGokC,SACjE3wC,KAAKi3B,eAAe2Z,KAAKD,MAAQ3wC,KAAK2sB,QAAQikB,KAAKD,OAEnD3wC,KAAK2sB,QAAQy7B,UACbpoD,KAAKi3B,eAAemxB,QAAUpoD,KAAK2sB,QAAQy7B,UAGnD,IAAIt6B,GAAgB,EAAG/F,GAAiB4F,GAAG3tB,KAAKi3B,eAAgBj3B,KAAK2sB,SACrE,GAAImB,EAAcitB,MAAMzqC,SAAWwd,EAAcitB,MAAM1yB,GACnD,MAAM,IAAIhhB,MAAM,8EAEpB,OAAOymB,GAEX4zC,EAAQh+D,UAAUi+D,aAAe,SAAU1+B,GACvC,IAAI6L,EAAQ9uC,KACR4hE,EAAc,CAAC,CACX10C,KAAM,0DACN5sB,KAAM,SACN0lD,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,yDACN5sB,KAAM,QACN0lD,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,4DACN5sB,KAAM,WACN0lD,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,wDACN5sB,KAAM,OACNwhB,OAAQ,KACRC,OAAQ,KACRikC,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,0DACN5sB,KAAM,SACNwhB,OAAQ,IACRC,OAAQ,IACRikC,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,0DACN5sB,KAAM,SACNwhB,OAAQ,KACRC,OAAQ,KACRikC,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,wDACN5sB,KAAM,OACNwhB,OAAQ,IACRC,OAAQ,cACRikC,YAAa,KACd,CACC1lD,KAAM,KACP,CACCwnC,OAAQ,KACR5a,KAAM,wDACN5sB,KAAM,OACNwhB,OAAQ,KACRkkC,YAAa,KACd,CACCle,OAAQ,KACR5a,KAAM,gEACN5sB,KAAM,eACNwhB,OAAQ,MACRkkC,YAAa,KACd,CACCle,OAAQ,KACR5a,KAAM,yDACN5sB,KAAM,QACNwhB,OAAQ,SACRkkC,YAAa,KACd,CACCle,OAAQ,MACR5a,KAAM,2DACN5sB,KAAM,UACN0lD,YAAa,KACd,CACCle,OAAQ,MACR5a,KAAM,0DACN5sB,KAAM,SACN0lD,YAAa,KACd,CACC1lD,KAAM,KACP,CACCwnC,OAAQ,KACR5a,KAAM,yDACN5sB,KAAM,QACNwhB,OAAQ,KACRkkC,YAAa,KACd,CACCle,OAAQ,MACR5a,KAAM,wDACN5sB,KAAM,OACNwhB,OAAQ,MACRkkC,YAAa,KACd,CACCle,OAAQ,KACR5a,KAAM,wDACN5sB,KAAM,OACNwhB,OAAQ,MACRC,OAAQ,QACRikC,YAAa,KACd,CACCle,OAAQ,KACR5a,KAAM,+DACN5sB,KAAM,cACNwhB,OAAQ,IACRC,OAAQ,IACRikC,YAAa,KACd,CACCle,OAAQ,MACR5a,KAAM,0DACN5sB,KAAM,gBACN0lD,YAAa,KACd,CACCle,OAAQ,MACR5a,KAAM,yDACN5sB,KAAM,eACN0lD,YAAa,KACd,CACC1lD,KAAM,KACP,CACC4sB,KAAM,0DACN5sB,KAAM,SACN0lD,YAAa,KACd,CACC94B,KAAM,0DACN5sB,KAAM,SACN0lD,YAAa,KACd,CACCle,OAAQ,KACR5a,KAAM,yDACN5sB,KAAM,QACNwhB,OAAQ,SACRC,OAAQ,gEACRikC,YAAa,KACd,CACC1lD,KAAM,KACP,CACCwnC,OAAQ,KACR5a,KAAM,wDACN5sB,KAAM,OACN0lD,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,wDACN5sB,KAAM,OACN0lD,YAAa,MACd,CACC1lD,KAAM,KACP,CACC4sB,KAAM,wDACN5sB,KAAM,OACN0lD,YAAa,KACd,CACCle,OAAQ,KACR5a,KAAM,8DACN5sB,KAAM,aACN0lD,YAAa,MACd,CACC94B,KAAM,wDACN5sB,KAAM,YACN0lD,YAAa,MACd,CACCle,OAAQ,KACR5a,KAAM,wDACN5sB,KAAM,OACN0lD,YAAa,MACd,CACC94B,KAAM,2DACN5sB,KAAM,UACN0lD,YAAa,MACd,CACC94B,KAAM,gEACN5sB,KAAM,UACN0lD,YAAa,MACd,CACC94B,KAAM,yDACN5sB,KAAM,gBACN0lD,YAAa,MACd,CACC94B,KAAM,8DACN5sB,KAAM,aACN0lD,YAAa,MACd,CACC94B,KAAM,uDACN5sB,KAAM,WACN0lD,YAAa,MACd,CACC94B,KAAM,wDACN5sB,KAAM,OACN0lD,YAAa,MACd,CACC94B,KAAM,wDACN5sB,KAAM,OACN0lD,YAAa,MACd,CACC1lD,KAAM,OAEVuhE,EAAgB,GAgBpB,OAfA5+B,EAAQz8B,SAAQ,SAAUs/C,GACtB,IAAIgc,EAAkBhc,EACtB8b,EAAYp7D,SAAQ,SAAUu7D,GACF,kBAAbjc,GAAyBic,EAAgBzhE,OAASwlD,IACzDgc,EAAkBC,GAEE,kBAAbjc,GAAyBic,EAAgBzhE,OAASwlD,EAASxlD,OAClEwhE,EAAkBxgE,OAAOkO,OAAO,GAAIuyD,EAAiBjc,OAGzDA,EAAS7iB,UACT6+B,EAAgB7+B,QAAU6L,EAAM6yB,aAAa7b,EAAS7iB,UAE1D4+B,EAAcn5D,KAAKo5D,MAEhBD,GAEJH,EA3WiB,GA+XxBM,GAAyB,WACzB,SAASA,EAAQngC,GACb,IAAIiN,EAAQ9uC,KACZA,KAAKy1C,eAAgB,EACrBz1C,KAAKiiE,WAAa,GAClB,IAAIjuC,EAAatO,SAASI,cAAc,OACxCkO,EAAWxK,UAAY,iBACvBwK,EAAW1J,UAAY,0CAA+CuX,EAAOlV,QAAQ6oC,YAAc,mMAAiN1jC,EAAepb,EAAEmrB,EAAOlV,QAAQzD,MAAMk/B,QAAU,yJACpWpoD,KAAKylB,QAAUuO,EAAW4O,kBAC1B5iC,KAAK6wC,QAAU7c,EAAW4O,kBAAkBC,mBAC5C7iC,KAAKynD,cAAgBzzB,EAAW2Z,iBAChC3tC,KAAKy1D,UAAU5zB,GACfwlB,GAAWxlB,EAAQ7hC,KAAKylB,SACxB6hC,GAAczlB,EAAQ7hC,KAAKylB,SAC3B8hC,GAAU1lB,EAAQ7hC,KAAKylB,SACvBgjC,GAAY5mB,EAAQ7hC,KAAKylB,SACzB0jC,GAAYtnB,EAAQ7hC,KAAKylB,SACzBmiC,GAAU/lB,EAAQ7hC,KAAKylB,SACvByiC,GAAUrmB,EAAQ7hC,KAAKylB,QAASzlB,KAAKi0B,MACrCk0B,GAAStmB,EAAQ7hC,KAAKylB,QAASzlB,KAAKi0B,MAChC4N,EAAOlV,QAAQy7B,QAAQ93C,SACvBtQ,KAAKynD,cAAcrhC,cAAc,UAAUgC,QAAU,WACjD,IAII85C,EACAC,EALA95C,EAAKoa,KAAK2/B,YACVh4B,EAAQtf,eAAeI,WAAW,GAClCm3C,EAAaj4B,EAAMjf,aACnBm3C,EAAWl4B,EAAMmP,kBAGjBgpB,GAAc,EACdC,GAAY,EAChBF,EAASn3B,WAAW3kC,SAAQ,SAAUgH,EAAMmmB,GACxC,IAAIhvB,GAAO,EAUX,GATsB,IAAlB6I,EAAK07B,SACLvkC,GAAO,EAED6I,EAAK0a,UAAUwK,SAAS,kBAGzBllB,EAAK0a,UAAUwK,SAAS,mBAC7BllB,EAAKge,aAAa,cAAehe,EAAKwY,aAAa,eAAiB,IAAMqC,GAH1E1jB,GAAO,EAKPA,EACA,GAAsB,IAAlB6I,EAAK07B,UAAsD,MAApC17B,EAAKwY,aAAa,eAC5B,IAAV2N,GAAe0uC,EAAWn3B,YAAc,EAC3C19B,EAAK8c,UACD,6CAAkDjC,EAAK,KAAQ7a,EAAK8c,UAAY,UACpF43C,EAAoB10D,OAEnB,GAAsB,IAAlBA,EAAK07B,UAAsD,MAApC17B,EAAKwY,aAAa,eAC3C2N,IAAU2uC,EAASn3B,WAAWniC,OAAS,GACvCq5D,EAAW92B,UAAY82B,EAAW/2B,aAAazY,YAAY7pB,OAC9DwE,EAAK8c,UACD,6CAAkDjC,EAAK,KAAQ7a,EAAK8c,UAAY,UACpF63C,EAAkB30D,OAEjB,GAAsB,IAAlBA,EAAK07B,UAAsD,MAApC17B,EAAKwY,aAAa,cAChC,IAAV2N,EACA4uC,GAAc,EAET5uC,IAAU2uC,EAASn3B,WAAWniC,OAAS,IAC5Cw5D,GAAY,GAEhBh1D,EAAK8c,UACD,6CAAkDjC,EAAK,KAAQ7a,EAAK8c,UAAY,cAEnF,CACD,IAAIi0B,EAAiB74B,SAASI,cAAc,QAC5Cy4B,EAAer2B,UAAUC,IAAI,kBAC7Bo2B,EAAe/yB,aAAa,cAAenD,GAC3C7a,EAAKuvC,WAAWC,aAAauB,EAAgB/wC,GAC7C+wC,EAAejY,YAAY94B,OAIvC,IAAIi1D,GAAe,EAAG36C,EAAgC8lB,IAAIy0B,EAAW/3B,gBACjEm4B,IACIP,GACAO,EAAa5rC,mBAAmB,YAAaqrC,EAAkB53C,WAC/D43C,EAAkBnuC,UAEyE,KAAtF0uC,EAAa5vC,YAAY9H,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAAcoxC,GACjGE,EAAa1uC,UAGrB,IAAI2uC,GAAa,EAAG56C,EAAgC8lB,IAAIy0B,EAAW/2B,cAC/Do3B,IACIP,GACAO,EAAW7rC,mBAAmB,aAAcsrC,EAAgB73C,WAC5D63C,EAAgBpuC,UAEyE,KAApF2uC,EAAW7vC,YAAY9H,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAAcqxC,GAC/FE,EAAW3uC,UAGnBqW,EAAMgD,WAAWk1B,GACjBzgC,EAAOlV,QAAQy7B,QAAQjgC,IAAIE,EAAI+hB,EAAMxgC,WAAYklC,EAAMuZ,YAAYxmB,GAAQ,IAC3Ega,GAAiBha,EAAQ,CACrBqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBtF,EAAM6Y,gBAqXlB,OAjXAqa,EAAQt+D,UAAU2kD,YAAc,SAAUxmB,EAAQimB,GAC9C,IAAIhZ,EAAQ9uC,KAEZ,QADgB,IAAZ8nD,IAAsBA,GAAU,GACT,YAAvBjmB,EAAOQ,cAA6BR,EAAOlV,QAAQy7B,QAAQ93C,OAmB3D,MAAO,GAlBPtQ,KAAKiiE,WAAa,GAClBjiE,KAAKylB,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC/DshC,EAAMmzB,WACFnzB,EAAMmzB,WAAW1rD,OAAO/I,EAAKwY,aAAa,eAAe/F,MAAM,SAEvEjgB,KAAKiiE,WAAahqD,MAAM+pB,KAAK,IAAI2gC,IAAI3iE,KAAKiiE,aAC1C,IAAIW,EAAa,GACjB,OAAI9a,GACA9nD,KAAKiiE,WAAWz7D,SAAQ,SAAU6hB,GAC9Bu6C,EAAWl6D,KAAK,CACZ2f,GAAIA,EACJE,IAAKumB,EAAMrpB,QAAQW,cAAc,gCAAmCiC,EAAK,MAAOI,eAGjFm6C,QAPX,GAcRZ,EAAQt+D,UAAU2qD,qBAAuB,SAAUxsB,GAC/C,IAAIghC,EAAa,SAAUnsD,EAAG2vC,GAC1B,IAAI7lC,EAAI,IAAImiD,IAAItc,GAChB,OAAO3vC,EAAExU,QAAO,SAAUiW,GAAK,OAAQqI,EAAEsiD,IAAI3qD,OAEjD,GAA2B,YAAvB0pB,EAAOQ,aAA6BR,EAAOlV,QAAQy7B,QAAQ93C,QAAUuxB,EAAO4M,QAAQwzB,WAAWj5D,OAAS,EAAG,CAC3G,IAAI+5D,EAAS5vC,KAAKC,MAAMD,KAAK+/B,UAAUlzD,KAAKiiE,aAC5CjiE,KAAKqoD,YAAYxmB,GACjB,IAAImhC,EAAaH,EAAWE,EAAQ/iE,KAAKiiE,YACrCe,EAAWh6D,OAAS,GACpB64B,EAAOlV,QAAQy7B,QAAQr0B,OAAOivC,KAI1ChB,EAAQt+D,UAAU4lD,YAAc,WAC5B,IAAIx5C,GAAW,EAAGkZ,EAAiCw/B,IAAIxoD,KAAKylB,SAC5DzlB,KAAKynD,cAAcj8B,aAAa,QAAS,QAAU1b,EAASwb,KAAO,wBAA0BtZ,KAAKzB,KAAK,EAAGT,EAASyY,IAAM,IAAM,OAEnIy5C,EAAQt+D,UAAUikD,YAAc,WAC5B3nD,KAAKynD,cAAcj8B,aAAa,QAAS,iBAE7Cw2C,EAAQt+D,UAAUuwB,KAAO,SAAUhJ,EAAO4W,GACtC,IAAIuI,EAAQtf,eAAeI,WAAW,GACtC,GAAyB,KAArBkf,EAAMxgC,WAAV,CAGAqhB,EAAMwM,kBACNxM,EAAMyM,iBACN,IAAI5D,GAAc,EAAGhM,EAAqCuI,IAAI+Z,EAAME,eAAgB,QAChF24B,GAAiB,EAAGn7C,EAAqCuI,IAAI+Z,EAAMkB,aAAc,QACrF,GAAIxX,GAAemvC,GAAkBA,EAAeh2B,WAAWnZ,GAAc,CACzE,IAAID,EAAW,GASf,OAPIA,EADsC,QAAtCC,EAAYrB,cAAc6E,QACf8S,EAAMxgC,WAGN,IAAMwgC,EAAMxgC,WAAa,IAExCqhB,EAAM6M,cAAcC,QAAQ,aAAclE,QAC1C5I,EAAM6M,cAAcC,QAAQ,YAAa,IAG7C,IAAIsC,GAAW,EAAGvS,EAAqCuI,IAAI+Z,EAAME,eAAgB,KAC7E44B,GAAc,EAAGp7C,EAAqCuI,IAAI+Z,EAAMkB,aAAc,KAClF,GAAIjR,GAAY6oC,GAAeA,EAAYj2B,WAAW5S,GAAW,CAC7D,IAAI8oC,EAAS9oC,EAASrU,aAAa,UAAY,GAM/C,OALIm9C,IACAA,EAAS,KAAQA,EAAS,KAE9Bl4C,EAAM6M,cAAcC,QAAQ,aAAc,IAAMqS,EAAMxgC,WAAa,KAAOywB,EAASrU,aAAa,QAAUm9C,EAAS,UACnHl4C,EAAM6M,cAAcC,QAAQ,YAAa,IAG7C,IAAIoK,EAAczc,SAASI,cAAc,OACzCqc,EAAYmE,YAAY8D,EAAMklB,iBAC9BrkC,EAAM6M,cAAcC,QAAQ,aAAc8J,EAAO7T,KAAKwgB,aAAarM,EAAY7X,WAAWS,QAC1FE,EAAM6M,cAAcC,QAAQ,YAAa,MAE7CiqC,EAAQt+D,UAAU+xD,UAAY,SAAU5zB,GACpC,IAAIiN,EAAQ9uC,KACZsmB,OAAOL,iBAAiB,UAAU,WAE9B,GADAsqB,EAAU1O,EAAQ,CAAC,SACiB,UAAhCiN,EAAM+B,QAAQrqB,MAAMwE,SAA6D,UAAtC8jB,EAAM2Y,cAAcjhC,MAAMwE,QAAzE,CAGA,IAAIzC,EAAMhX,SAASu9B,EAAM+B,QAAQ7qB,aAAa,YAAa,IAC3D,GAA8B,SAA1B6b,EAAOlV,QAAQzc,QAYd,GAAK2xB,EAAOlV,QAAQxc,cAAcC,IAAlC,CAGL,IAAIgzD,EAAcpxD,KAAKzB,IAAIgY,EAAMjC,OAAO6c,QAAUtB,EAAOpc,QAAQgD,UAAY,GAAM,KAC/C,UAAhCqmB,EAAM+B,QAAQrqB,MAAMwE,UACpB8jB,EAAM+B,QAAQrqB,MAAM+B,IAAM66C,GAEY,UAAtCt0B,EAAM2Y,cAAcjhC,MAAMwE,UAC1B8jB,EAAM2Y,cAAcjhC,MAAM+B,IAAM66C,SAnBhC,GAAIvhC,EAAOlV,QAAQxc,cAAcC,KAA8D,IAAvDyxB,EAAOoB,QAAQxd,QAAQ4F,wBAAwB9C,IAAW,CAC9F,IAAI86C,EAAarxD,KAAKzB,IAAI+V,OAAO6c,QAAUtB,EAAOpc,QAAQgD,UAAY,EAAGzW,KAAKwI,IAAI+N,EAAMsZ,EAAO4M,QAAQhpB,QAAQiD,UAAWomB,EAAMrpB,QAAQ0f,aAAe,KAAO,KAC1H,UAAhC2J,EAAM+B,QAAQrqB,MAAMwE,UACpB8jB,EAAM+B,QAAQrqB,MAAM+B,IAAM86C,GAEY,UAAtCv0B,EAAM2Y,cAAcjhC,MAAMwE,UAC1B8jB,EAAM2Y,cAAcjhC,MAAM+B,IAAM86C,QAgBhDrjE,KAAKylB,QAAQQ,iBAAiB,UAAU,WAKpC,GAJAsqB,EAAU1O,EAAQ,CAAC,SACfA,EAAOlV,QAAQy7B,SAAWvmB,EAAOlV,QAAQy7B,QAAQ93C,QAAUuxB,EAAOlV,QAAQy7B,QAAQkb,QAClFzhC,EAAOlV,QAAQy7B,QAAQkb,OAAOzhC,EAAO4M,QAAQhpB,QAAQiD,WAErB,UAAhComB,EAAM+B,QAAQrqB,MAAMwE,QAAxB,CAGA,IAAIzC,EAAMhX,SAASu9B,EAAM+B,QAAQ7qB,aAAa,YAAa,IAAM6b,EAAO4M,QAAQhpB,QAAQiD,UACpFnY,GAAO,EACPsxB,EAAOlV,QAAQxc,cAAcC,KAA8D,IAAvDyxB,EAAOoB,QAAQxd,QAAQ4F,wBAAwB9C,MACnFhY,EAAM+V,OAAO6c,QAAUtB,EAAOpc,QAAQgD,UAAYlY,GAEtD,IAAIgzD,EAAQvxD,KAAKzB,IAAIA,EAAKyB,KAAKwI,IAAI+N,EAAKumB,EAAMrpB,QAAQ0f,aAAe,KAAO,KAC5E2J,EAAM+B,QAAQrqB,MAAM+B,IAAMg7C,EAC1Bz0B,EAAM2Y,cAAcjhC,MAAM+B,IAAMg7C,MAEpCvjE,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C+8B,GAAMnmB,EAAQ5W,EAAO,CACjBg9B,UAAW,SAAUxW,GACjB,IAAIrH,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAC7C7I,EAAOtT,SAASI,cAAc,YAClCkT,EAAK1O,UAAYmnB,EACjBrH,EAAMgD,WAAWpU,EAAK/pB,QAAQ6+B,WAAU,IACxC,IAAIzE,GAAe,EAAGvhB,EAAsCorB,IAAI9I,EAAME,eAAgB,aAAc,KAChGjB,EACAA,EAAa9T,UAAYsM,EAAO7T,KAAKwU,cAAc6G,EAAa9T,WAGhEsM,EAAO4M,QAAQhpB,QAAQ6E,UAAYuX,EAAO7T,KAAKwU,cAAcX,EAAO4M,QAAQhpB,QAAQ6E,YAExF,EAAGtB,EAA6BgrB,IAAInS,EAAO4M,QAAQhpB,QAAS2kB,SAKxEpqC,KAAKylB,QAAQQ,iBAAiB,oBAAoB,WAC9C6oB,EAAM2G,eAAgB,KAE1Bz1C,KAAKylB,QAAQQ,iBAAiB,kBAAkB,SAAUgF,GACtD,IAAIsF,GAAiB,EAAGoZ,EAA+C1H,GAAGnX,eAAeI,WAAW,GAAGof,gBACnG/Z,GAAiD,KAA/BA,EAAesC,YAEjCgf,EAAUhQ,KAGT,EAAGiO,EAA6B+E,OACjCiZ,GAAYjsB,EAAQ/W,eAAeI,WAAW,GAAGC,aAAcF,GAEnE6jB,EAAM2G,eAAgB,MAE1Bz1C,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C,GAAwB,iBAApBA,EAAMsoB,WAAoD,mBAApBtoB,EAAMsoB,UAIhD,GAAIzE,EAAMrB,aACNqB,EAAMrB,cAAe,OAGzB,IAAIqB,EAAM2G,eAAgC,MAAfxqB,EAAMlqB,MAA+B,MAAfkqB,EAAMlqB,MAA+B,MAAfkqB,EAAMlqB,KAA7E,CAGA,IAAIqpC,EAAQtf,eAAeI,WAAW,GAClCme,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,gBAMhE,GALKjB,IAEDwT,GAAUhb,EAAQuI,GAClBf,GAAe,EAAGvhB,EAAgC8lB,IAAIxD,EAAME,iBAE3DjB,EAAL,CAOA,IAHA,IAAI6B,GAAc,EAAGliB,EAAiCipB,IAAI5I,EAAcxH,EAAO4M,QAAQhpB,QAAS2kB,GAAO9oB,MAEnGoxB,GAAa,EACR/vC,EAAIuoC,EAAc,EAAGvoC,EAAI0mC,EAAaxW,YAAYvK,OAAO,EAAG4iB,GAAalqB,YAAY,MAAOre,IACjG,GAA2C,MAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,IAEO,OAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,GAAa,CAC7C+vC,GAAa,EACb,MAGY,IAAhBxH,IACAwH,GAAa,GAGjB,IAAIC,GAAW,EACf,IAAShwC,EAAIuoC,EAAc,EAAGvoC,EAAI0mC,EAAaxW,YAAY7pB,OAAQrG,IAC/D,GAA2C,MAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,IAAqD,OAAvC0mC,EAAaxW,YAAY1oB,OAAOxH,GAAa,CAC3FgwC,GAAW,EACX,MAGR,IAAIpiB,GAAiB,EAAGoZ,EAA+C1H,GAAGnX,eAAeI,WAAW,GAAGof,gBACnG/Z,GAAiD,KAA/BA,EAAesC,cAEjCgf,EAAUhQ,GACVtR,EAAewD,UAEd2e,GAAyD,eAA3CrJ,EAAarjB,aAAa,cACtC2sB,GAAYF,GAAYpJ,EAAa/e,YACvCkoB,GAAOnJ,EAAa/e,YAAc+e,EAAa2D,wBAGpD8gB,GAAYjsB,EAAQuI,EAAOnf,QAE/BjrB,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C,GAA6B,UAAzBA,EAAM7D,OAAOkQ,QAAqB,CAClC,IAAIksC,EAAev4C,EAAM7D,OASzB,OARIo8C,EAAanS,QACbmS,EAAah4C,aAAa,UAAW,WAGrCg4C,EAAa/8C,gBAAgB,WAEjCqoB,EAAMrB,cAAe,OACrBoO,GAAiBha,GAGrB,GAA6B,QAAzB5W,EAAM7D,OAAOkQ,SAEZrM,EAAM7D,OAAOqL,cAAcvK,UAAUwK,SAAS,2BAFnD,CAY6B,MAAzBzH,EAAM7D,OAAOkQ,SACbhR,OAAOhX,KAAK2b,EAAM7D,OAAOpB,aAAa,SAE1C,IAAIokB,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GACjD,GAAI5W,EAAM7D,OAAO0b,YAAYgM,EAAMrpB,UAAYqpB,EAAMrpB,QAAQkoB,kBAAoBvD,EAAMmL,UAAW,CAC9F,IAAIogB,EAAW7mB,EAAMrpB,QAAQkoB,iBAAiBtiB,wBAC1CJ,EAAM7R,EAAIu8C,EAASptC,IAAMotC,EAASzlD,SACa,MAA3C4+B,EAAMrpB,QAAQkoB,iBAAiBrW,SACyE,KAAxGwX,EAAMrpB,QAAQkoB,iBAAiB9a,YAAY9H,OAAO1L,QAAQsI,EAA8ByE,EAAE+E,KAAM,KAChGiZ,EAAM+B,mBAAmB2C,EAAMrpB,QAAQkoB,kBACvCvD,EAAMO,UAAS,KAGfmE,EAAMrpB,QAAQoR,mBAAmB,YAAa,qBAAyBlP,EAA8ByE,EAAE+E,KAAO,cAC9G,EAAGnI,EAA6BgrB,IAAIlF,EAAMrpB,QAAS2kB,KAI/D+T,GAAwBtc,GAExB,IAAIrS,GAAiB,EAAG1H,EAAsCwI,IAAIrF,EAAM7D,OAAQ,2BAC3EoI,IACDA,GACI,EAAG1H,EAAsCwI,KAAI,EAAGtH,EAA8B6sB,IAAIhU,GAAQyI,eAAgB,4BAE9G9a,GACA2tB,GAAS3tB,EAAgBqS,GAE7BkQ,EAAS9mB,EAAO4W,OArCmC,aAA3C5W,EAAM7D,OAAOpB,aAAa,aAC1Bw7B,GAAkB3f,EAAQ5W,EAAM7D,QAGhCo8B,GAAgBv4B,EAAO4W,MAmCnC7hC,KAAKylB,QAAQQ,iBAAiB,SAAS,SAAUgF,GAC7C,IAAIA,EAAMyqB,eAAe,EAAG5F,EAA0ByE,IAAItpB,GAA1D,CAKkB,UAAdA,EAAM5rB,KACNk5C,GAAa1W,GAEE,cAAd5W,EAAM5rB,KAAqC,WAAd4rB,EAAM5rB,KACC,KAArCwiC,EAAO4M,QAAQhpB,QAAQ6E,WAAiE,IAA7CuX,EAAO4M,QAAQhpB,QAAQ0lB,WAAWniC,SAC7E64B,EAAO4M,QAAQhpB,QAAQmd,mBAA0E,MAArDf,EAAO4M,QAAQhpB,QAAQmd,kBAAkBtL,SACnB,IAA/DuK,EAAO4M,QAAQhpB,QAAQmd,kBAAkB2O,mBACD,KAAvC1P,EAAO4M,QAAQhpB,QAAQoN,aAA6D,OAAvCgP,EAAO4M,QAAQhpB,QAAQoN,cAExEgP,EAAO4M,QAAQhpB,QAAQ6E,UAAY,IAEvC,IAAI8f,GAAQ,EAAGphB,EAA8B6sB,IAAIhU,GAUjD,GATkB,cAAd5W,EAAM5rB,MAEF,EAAGywC,EAA6B+E,OAA8C,OAArCzK,EAAME,eAAezX,aAA8C,IAAtBuX,EAAMc,cAC5Fd,EAAME,eAAezX,YAAc,IAI3CgqB,GAAUhb,EAAQuI,GAClB+T,GAAwBtc,GACN,cAAd5W,EAAM5rB,KAAqC,eAAd4rB,EAAM5rB,KAAsC,cAAd4rB,EAAM5rB,KAChD,cAAd4rB,EAAM5rB,KAAqC,YAAd4rB,EAAM5rB,IAD1C,CAIkB,cAAd4rB,EAAM5rB,KAAqC,eAAd4rB,EAAM5rB,KACnCwiC,EAAO+O,KAAK/tC,OAAOg/B,GAGvB,IAAIrS,GAAiB,EAAG1H,EAAsCwI,IAAI8Z,EAAME,eAAgB,2BACxF,IAAK9a,GAAoD,IAAlC4a,EAAME,eAAepB,UAAkBkB,EAAMc,YAAc,EAAG,CAEjF,IAAI0W,EAAqBxX,EAAME,eAC3BsX,EAAmB15B,UAAUwK,SAAS,2BACtClD,EAAiBoyB,EAAmBjU,kBAG5C,GAAKne,EAAL,CAGA,IAAI6tB,EAAkB7tB,EAAewd,uBACrC,GAAsC,SAAlCqQ,EAAgB72B,MAAMwE,QAA1B,CASA,IAAI8I,EAActE,EAAewd,uBAIjC,GAH4B,QAAxBlZ,EAAYwD,UACZxD,EAAcA,EAAY8O,mBAEZ,cAAd3X,EAAM5rB,KAAqC,eAAd4rB,EAAM5rB,IAAsB,CACrDuiD,EAAqBpyB,EAAeiD,cAAxC,IACIuiB,EAAWsH,GAAyBsF,GACxC,GAAI5M,GAAkC,IAAtBA,EAAS9L,SAAgB,CAErC,IAAIu6B,EAAoBzuB,EAAS5uB,cAAc,4BAC/C,GAAIq9C,EAEA,YADAtmB,GAASsmB,EAAmB5hC,GAKpC,GAA0B,IAAtBmT,EAAS9L,SAAgB,CAEzB,MAAuC,IAAhC8L,EAASniB,YAAY7pB,QAAgBgsC,EAASvI,YAEjDuI,EAAWA,EAASvI,YAExBrC,EAAMM,SAASsK,EAAU,QAIzB5K,EAAMM,SAASsK,EAAS0B,WAAY,QAIxCtM,EAAM+B,mBAAmBrY,GACzBsW,EAAMO,UAAS,OAvCG,cAAd1f,EAAM5rB,KAAqC,eAAd4rB,EAAM5rB,IACnC89C,GAAS3tB,EAAgBqS,GAGzBsb,GAAS3tB,EAAgBqS,GAAQ,UAuC1CmgC,EA1diB,GA+dxB0B,GAAoD,WACpD,IAAItd,EAAgB,SAAU1tC,EAAG2tC,GAI7B,OAHAD,EAAgB9kD,OAAOiI,gBAClB,CAAEC,UAAW,cAAgByO,OAAS,SAAUS,EAAG2tC,GAAK3tC,EAAElP,UAAY68C,IACvE,SAAU3tC,EAAG2tC,GAAK,IAAK,IAAIr2B,KAAKq2B,EAAOA,EAAEziD,eAAeosB,KAAItX,EAAEsX,GAAKq2B,EAAEr2B,KAClEo2B,EAAc1tC,EAAG2tC,IAE5B,OAAO,SAAU3tC,EAAG2tC,GAEhB,SAASC,IAAOtmD,KAAKiJ,YAAcyP,EADnC0tC,EAAc1tC,EAAG2tC,GAEjB3tC,EAAEhV,UAAkB,OAAN2iD,EAAa/kD,OAAO4D,OAAOmhD,IAAMC,EAAG5iD,UAAY2iD,EAAE3iD,UAAW,IAAI4iD,IAV/B,GAmDpD11B,GAAwB,SAAUo2B,GAMlC,SAASp2B,EAAOvI,EAAIsE,GAChB,IAAImiB,EAAQkY,EAAOvhD,KAAKzF,OAASA,KACjC8uC,EAAM60B,QAAUh8C,EAA8BoI,EAC5B,kBAAP1H,IACFsE,EAOKA,EAAQouB,MAGRpuB,EAAQouB,MAAM1yB,KACpBsE,EAAQouB,MAAM1yB,GAAK,SAAWA,GAH9BsE,EAAQouB,MAAQ,CAAE1yB,GAAI,SAAWA,GAPjCsE,EAAU,CACNouB,MAAO,CACH1yB,GAAI,SAAWA,IAU3BA,EAAK3C,SAAS8C,eAAeH,IAEjC,IAAIu7C,EAAa,IAAIlC,GAAQ/0C,GACzBmB,EAAgB81C,EAAW77C,QAC/B,IAAK,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,SAAS+N,SAAShI,EAAc5E,MAC/E,MAAM,IAAI7hB,MAAM,2EAwDpB,OAtDAynC,EAAMjN,OAAS,CACXQ,YAAavU,EAAcP,KAC3B9H,QAAS4C,EACTuoB,KAAM,IAAIijB,GAAK/lC,EAAc8iB,KAAK8X,QAClC16B,UAAM3tB,EACNssB,QAASmB,EACTktB,kBAAmB3yB,EAAGiC,UACtBwnB,QAAS,IAAIgkB,GAAQhkC,EAAepb,EAAEoX,EAAc5E,MAAM4oB,SAC1D9hC,IAAK,IAAIgoD,IAEblpB,EAAMjN,OAAO0M,GAAK,IAAIqpB,GAAO9oB,EAAMjN,QACnCiN,EAAMjN,OAAO8T,KAAO,IAAI8qB,GACxB3xB,EAAMjN,OAAO4M,QAAU,IAAIuzB,GAAQlzB,EAAMjN,QACzCiN,EAAMjN,OAAO8M,GAAK,IAAI4mB,GAAGzmB,EAAMjN,QAC/BiN,EAAMjN,OAAOoB,QAAU,IAAIm9B,GAAQtxB,EAAMjN,QACrC/T,EAAc+hB,OAAOv/B,SACrBw+B,EAAMjN,OAAOgO,OAAS,IAAIqnB,GAAOpoB,EAAMjN,SAEvCiN,EAAMjN,OAAOoB,QAAQyN,SAAS3B,WAC9BD,EAAMjN,OAAOkN,SAAW,IAAIH,IAE5B9gB,EAAc6rB,OAAOjuC,KAAOoiB,EAAc6rB,OAAOv4C,WACjD0tC,EAAMjN,OAAO8X,OAAS,IAAI8Q,KAE9B,EAAG5iC,EAAyBkG,GAAGpB,EAAQk3C,WAAa/1C,EAAcjB,IAAM,4BAA6B,oBAChGjtB,MAAK,WACNkvC,EAAMjN,OAAO7T,MAAO,EAAGjF,GAAqBkF,GAAG,CAC3CC,UAAW4gB,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAASe,UACjDC,iBAAkB2gB,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAASgB,iBACxDC,UAAW0gB,EAAMjN,OAAOlV,QAAQikB,KAAK5jB,UACrCqB,OAAQygB,EAAMjN,OAAOlV,QAAQikB,KAAKD,MAClCriB,YAAawgB,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAASmB,YACnDC,UAAWugB,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAASoB,UACjDC,eAAe,EACfC,gBAAiBqgB,EAAMjN,OAAOlV,QAAQnc,QAAQ6c,KAAKqB,YACnDE,SAAUkgB,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAASyB,SAChDC,WAAYigB,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAAS0B,WAClDC,UAAWggB,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAAS2B,UACjDxlB,KAAMwlC,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAAS7jB,KAC5CylB,iBAAkB+f,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAAS4B,iBACxDC,wBAAyB8f,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAAS6B,wBAC/DC,SAAU6f,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAAS8B,SAChDC,IAAK4f,EAAMjN,OAAOlV,QAAQnc,QAAQ2c,SAAS+B,MAE/C4f,EAAMjN,OAAOrxB,QAAU,IAAIwlD,GAAQlnB,EAAMjN,QACzC6X,EAAO5K,EAAMjN,QACT/T,EAAcnd,OACdmd,EAAcnd,QAEdmd,EAAcZ,OAEd,EAAGrF,EAA6B8Q,GAAG7K,EAAcjB,IAAM,kBAAoBiB,EAAcZ,KAAO,MAAO,uBAGxG4hB,EA0SX,OA7XA40B,GAAY9yC,EAAQo2B,GAsFpBp2B,EAAOltB,UAAU+1C,SAAW,SAAUhsB,EAAOiY,EAAcH,EAAWu+B,GAClE9jE,KAAK6hC,OAAOlV,QAAQc,MAAQA,EAC5BgsB,EAASz5C,KAAK6hC,QACV6D,IACA1lC,KAAK6hC,OAAOlV,QAAQnc,QAAQid,MAAMmC,QAAU8V,GAC5C,EAAG9d,EAAqC+H,GAAG+V,EAAco+B,GAAoB9jE,KAAK6hC,OAAOlV,QAAQnc,QAAQid,MAAMoC,OAE/G0V,IACAvlC,KAAK6hC,OAAOlV,QAAQnc,QAAQC,KAAK+V,MAAQ+e,GACzC,EAAG5U,GAA+BR,GAAGoV,EAAWvlC,KAAK6hC,OAAOlV,QAAQE,OAI5E+D,EAAOltB,UAAUqgE,SAAW,WACxB,OAAOz1B,EAAYtuC,KAAK6hC,SAG5BjR,EAAOltB,UAAUsgE,eAAiB,WAC9B,OAAOhkE,KAAK6hC,OAAOQ,aAGvBzR,EAAOltB,UAAU6mC,MAAQ,WACW,OAA5BvqC,KAAK6hC,OAAOQ,YACZriC,KAAK6hC,OAAO0M,GAAG9oB,QAAQ8kB,QAEU,YAA5BvqC,KAAK6hC,OAAOQ,YACjBriC,KAAK6hC,OAAO4M,QAAQhpB,QAAQ8kB,QAEK,OAA5BvqC,KAAK6hC,OAAOQ,aACjBriC,KAAK6hC,OAAO8M,GAAGlpB,QAAQ8kB,SAI/B3Z,EAAOltB,UAAU65C,KAAO,WACY,OAA5Bv9C,KAAK6hC,OAAOQ,YACZriC,KAAK6hC,OAAO0M,GAAG9oB,QAAQ83B,OAEU,YAA5Bv9C,KAAK6hC,OAAOQ,YACjBriC,KAAK6hC,OAAO4M,QAAQhpB,QAAQ83B,OAEK,OAA5Bv9C,KAAK6hC,OAAOQ,aACjBriC,KAAK6hC,OAAO8M,GAAGlpB,QAAQ83B,QAI/B3sB,EAAOltB,UAAU/C,SAAW,WACxB4vC,EAAUvwC,KAAK6hC,OAAQ,CAAC,aAAc,OAAQ,YAC9CuO,EAAepwC,KAAK6hC,OAAOoB,QAAQyN,SAAU/oB,EAA8CyE,EAAEmF,cAAchb,OAAO,CAAC,OAAQ,OAAQ,aAC/H,eACJvW,KAAK6hC,OAAO7hC,KAAK6hC,OAAOQ,aAAa5c,QAAQ+F,aAAa,kBAAmB,UAGjFoF,EAAOltB,UAAU4M,OAAS,WACtB6/B,EAAcnwC,KAAK6hC,OAAOoB,QAAQyN,SAAU/oB,EAA8CyE,EAAEmF,cAAchb,OAAO,CAAC,OAAQ,OAAQ,aAC9H,eACJvW,KAAK6hC,OAAO8T,KAAKkR,UAAU7mD,KAAK6hC,QAChC7hC,KAAK6hC,OAAO7hC,KAAK6hC,OAAOQ,aAAa5c,QAAQ+F,aAAa,kBAAmB,SAGjFoF,EAAOltB,UAAUonB,aAAe,WAC5B,MAAgC,YAA5B9qB,KAAK6hC,OAAOQ,YACL+kB,GAAcpnD,KAAK6hC,OAAO4M,QAAQhpB,SAER,OAA5BzlB,KAAK6hC,OAAOQ,YACV+kB,GAAcpnD,KAAK6hC,OAAO0M,GAAG9oB,SAEH,OAA5BzlB,KAAK6hC,OAAOQ,YACV+kB,GAAcpnD,KAAK6hC,OAAO8M,GAAGlpB,cADnC,GAKTmL,EAAOltB,UAAUugE,cAAgB,SAAUzkE,GACvCQ,KAAK6hC,OAAOrxB,QAAQ3N,OAAO7C,KAAK6hC,OAAQriC,IAG5CoxB,EAAOltB,UAAUknC,kBAAoB,WACjC,OAAO,EAAG5hB,EAAiCw/B,IAAIxoD,KAAK6hC,OAAO7hC,KAAK6hC,OAAOQ,aAAa5c,UAGxFmL,EAAOltB,UAAUgnD,YAAc,WAC3B,OAAO1qD,KAAK6hC,OAAO8X,OAAO+Q,aAG9B95B,EAAOltB,UAAUwgE,WAAa,WAC1B58B,aAAa68B,WAAWnkE,KAAK6hC,OAAOlV,QAAQouB,MAAM1yB,KAGtDuI,EAAOltB,UAAU0gE,cAAgB,WAC7BpkE,KAAK6hC,OAAOlV,QAAQouB,MAAMzqC,QAAS,GAGvCsgB,EAAOltB,UAAU2gE,YAAc,WAC3B,IAAKrkE,KAAK6hC,OAAOlV,QAAQouB,MAAM1yB,GAC3B,MAAM,IAAIhhB,MAAM,8EAGpBrH,KAAK6hC,OAAOlV,QAAQouB,MAAMzqC,QAAS,GAGvCsgB,EAAOltB,UAAU4gE,QAAU,SAAU9kE,GACjC,OAAOQ,KAAK6hC,OAAO7T,KAAKitB,QAAQz7C,IAGpCoxB,EAAOltB,UAAUmM,QAAU,WACvB,OAAOA,GAAQ7P,KAAK6hC,SAGxBjR,EAAOltB,UAAUsM,IAAM,SAAUuE,EAAMsiD,GACnC72D,KAAK6hC,OAAO7xB,IAAI0/B,KAAKn7B,EAAMsiD,IAG/BjmC,EAAOltB,UAAUu0D,eAAiB,SAAU1qC,GACxC0qC,GAAe1qC,EAAMvtB,KAAK6hC,SAG9BjR,EAAOltB,UAAU6gE,YAAc,WACvBj+C,OAAOwE,eAAe05C,aAG1B9+C,SAASgoB,YAAY,UAAU,IAGnC9c,EAAOltB,UAAU+gE,YAAc,SAAUjlE,GACrCkmB,SAASgoB,YAAY,cAAc,EAAOluC,IAG9CoxB,EAAOltB,UAAUghE,YAAc,SAAUllE,EAAOqD,QAC7B,IAAXA,IAAqBA,GAAS,GAClC,IAAIunC,GAAQ,EAAGphB,EAA8B6sB,IAAI71C,KAAK6hC,QACtDuI,EAAMO,UAAS,GACf,IAAIg6B,EAAaj/C,SAASI,cAAc,YACxC6+C,EAAWr6C,UAAY9qB,EACvB4qC,EAAMgD,WAAWu3B,EAAW11D,QAAQ6+B,WAAU,IACd,OAA5B9tC,KAAK6hC,OAAOQ,aACZriC,KAAK6hC,OAAO0M,GAAGd,cAAe,EAC1B5qC,GACAg1C,EAAW73C,KAAK6hC,SAGa,YAA5B7hC,KAAK6hC,OAAOQ,aACjBriC,KAAK6hC,OAAO4M,QAAQhB,cAAe,EAC/B5qC,GACAirD,GAAY9tD,KAAK6hC,OAAQ/W,eAAeI,WAAW,KAGtB,OAA5BlrB,KAAK6hC,OAAOQ,cACjBriC,KAAK6hC,OAAO8M,GAAGlB,cAAe,EAC1B5qC,GACAjB,EAAM5B,KAAK6hC,OAAQ/W,eAAeI,WAAW,IAAI,KAK7D0F,EAAOltB,UAAUkhE,SAAW,SAAUz3C,EAAUyzC,GAC5C,IAAI9xB,EAAQ9uC,UACO,IAAf4gE,IAAyBA,GAAa,GACV,OAA5B5gE,KAAK6hC,OAAOQ,aACZriC,KAAK6hC,OAAO0M,GAAG9oB,QAAQ6E,UAAYtqB,KAAK6hC,OAAO7T,KAAK47B,gBAAgBz8B,GACpE2qB,GAAmB93C,KAAK6hC,OAAQ,CAC5BqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAGgB,YAA5Bp0C,KAAK6hC,OAAOQ,YACjB4hB,GAAcjkD,KAAK6hC,OAAQ1U,EAAU,CACjC+mB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAIjBp0C,KAAK6hC,OAAO8M,GAAGlpB,QAAQ6E,UAAYtqB,KAAK6hC,OAAO7T,KAAK24B,eAAex5B,GACnEntB,KAAK6hC,OAAO8M,GAAGlpB,QAAQiB,iBAAiB,wCAAwClgB,SAAQ,SAAUgH,GAC9FkkC,EAAkBlkC,EAAMshC,EAAMjN,WAElCoS,GAA2Bj0C,KAAK6hC,OAAQ,CACpCqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAGrBp0C,KAAK6hC,OAAOiQ,QAAQjvC,OAAO7C,KAAK6hC,QAC3B1U,IACDojB,EAAUvwC,KAAK6hC,OAAQ,CAAC,QAAS,WAAY,UAAW,SACpD7hC,KAAK6hC,OAAO4M,QAAQoC,UACpB7wC,KAAK6hC,OAAO4M,QAAQoC,QAAQrqB,MAAMwE,QAAU,QAEhDhrB,KAAKkkE,cAELtD,GACA5gE,KAAK4gE,cAIbhwC,EAAOltB,UAAUk9D,WAAa,WAC1B5gE,KAAK6hC,OAAO8T,KAAKirB,WAAW5gE,KAAK6hC,QACjC7hC,KAAK6hC,OAAO8T,KAAKqG,eAAeh8C,KAAK6hC,SAGzCjR,EAAOltB,UAAUmhE,QAAU,WACvB7kE,KAAK6hC,OAAOpc,QAAQ6E,UAAYtqB,KAAK6hC,OAAOmZ,kBAC5Ch7C,KAAK6hC,OAAOpc,QAAQyC,UAAU6L,OAAO,UACrC/zB,KAAK6hC,OAAOpc,QAAQgB,gBAAgB,SACpCf,SAAS8C,eAAe,oBAAoBuL,SAC5C/zB,KAAKkkE,cAGTtzC,EAAOltB,UAAUohE,cAAgB,WAC7B,MAAgC,YAA5B9kE,KAAK6hC,OAAOQ,YACL,GAEJriC,KAAK6hC,OAAO4M,QAAQ4Z,YAAYroD,KAAK6hC,QAAQ,IAGxDjR,EAAOltB,UAAUqhE,aAAe,SAAUhjC,GACtC,GAAgC,YAA5B/hC,KAAK6hC,OAAOQ,YAAhB,CAGA,IAAI2iC,EAAS,SAAUx3D,GACnBA,EAAK0a,UAAU6L,OAAO,yBACtBgO,EAAIv7B,SAAQ,SAAU6hB,GACd7a,EAAKwY,aAAa,eAAezW,QAAQ8Y,IAAO,GAChD7a,EAAK0a,UAAUC,IAAI,6BAI/BnoB,KAAK6hC,OAAO4M,QAAQhpB,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC9Ew3D,EAAOx3D,MAEuC,SAA9CxN,KAAK6hC,OAAOrxB,QAAQiV,QAAQe,MAAMwE,SAClChrB,KAAK6hC,OAAOrxB,QAAQiV,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC9Ew3D,EAAOx3D,QAKnBojB,EAAOltB,UAAUuhE,eAAiB,SAAUljC,GACxC,GAAgC,YAA5B/hC,KAAK6hC,OAAOQ,YAAhB,CAGA,IAAI6iC,EAAW,SAAU13D,GACrBu0B,EAAIv7B,SAAQ,SAAU6hB,GACd7a,EAAKwY,aAAa,eAAezW,QAAQ8Y,IAAO,GAChD7a,EAAK0a,UAAU6L,OAAO,6BAIlC/zB,KAAK6hC,OAAO4M,QAAQhpB,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC9E03D,EAAS13D,MAEqC,SAA9CxN,KAAK6hC,OAAOrxB,QAAQiV,QAAQe,MAAMwE,SAClChrB,KAAK6hC,OAAOrxB,QAAQiV,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC9E03D,EAAS13D,QAKrBojB,EAAOltB,UAAUyhE,iBAAmB,SAAUC,GAC1C,IAAIt2B,EAAQ9uC,KACZ,GAAgC,YAA5BA,KAAK6hC,OAAOQ,YAAhB,CAGA,IAAI8hC,EAAa,SAAU32D,EAAM63D,GAC7B,IAAItjC,EAAMv0B,EAAKwY,aAAa,eAAe/F,MAAM,KACjD8hB,EAAIr/B,MAAK,SAAU2lB,EAAIsL,GACnB,GAAItL,IAAOg9C,EAEP,OADAtjC,EAAIxqB,OAAOoc,EAAO,IACX,KAGI,IAAfoO,EAAI/4B,QACJwE,EAAK+nB,UAAY/nB,EAAK8c,WACtB,EAAGtB,EAA8B6sB,IAAI/G,EAAMjN,QAAQ8I,UAAS,IAG5Dn9B,EAAKge,aAAa,cAAeuW,EAAI1nB,KAAK,OAGlD+qD,EAAU5+D,SAAQ,SAAU6+D,GACxBv2B,EAAMjN,OAAO4M,QAAQhpB,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC/E22D,EAAW32D,EAAM63D,MAE8B,SAA/Cv2B,EAAMjN,OAAOrxB,QAAQiV,QAAQe,MAAMwE,SACnC8jB,EAAMjN,OAAOrxB,QAAQiV,QAAQiB,iBAAiB,mBAAmBlgB,SAAQ,SAAUgH,GAC/E22D,EAAW32D,EAAM63D,SAI7BxpB,GAAiB77C,KAAK6hC,OAAQ,CAC1BqS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,MAGdxjB,EA9XgB,CA+XzBnqB,EAAOyK,SACoB,MAAM6U,GAAM,IAnmUzC,GAumUAf,EAAsBA,EAAoB9T,QACzB8T,GA9reD","file":"js/chunk-1ea95049.3021c76e.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","// Components\nimport VInput from '../VInput/VInput'\n\n// Mixins\nimport mixins from '../../util/mixins'\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport { provide as RegistrableProvide } from '../../mixins/registrable'\n\n// Helpers\nimport { VNode } from 'vue'\n\ntype ErrorBag = Record<number, boolean>\ntype VInputInstance = InstanceType<typeof VInput>\ntype Watchers = {\n  _uid: number\n  valid: () => void\n  shouldValidate: () => void\n}\n\n/* @vue/component */\nexport default mixins(\n  BindsAttrs,\n  RegistrableProvide('form')\n  /* @vue/component */\n).extend({\n  name: 'v-form',\n\n  provide (): object {\n    return { form: this }\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    disabled: Boolean,\n    lazyValidation: Boolean,\n    readonly: Boolean,\n    value: Boolean,\n  },\n\n  data: () => ({\n    inputs: [] as VInputInstance[],\n    watchers: [] as Watchers[],\n    errorBag: {} as ErrorBag,\n  }),\n\n  watch: {\n    errorBag: {\n      handler (val) {\n        const errors = Object.values(val).includes(true)\n\n        this.$emit('input', !errors)\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n\n  methods: {\n    watchInput (input: any): Watchers {\n      const watcher = (input: any): (() => void) => {\n        return input.$watch('hasError', (val: boolean) => {\n          this.$set(this.errorBag, input._uid, val)\n        }, { immediate: true })\n      }\n\n      const watchers: Watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {},\n      }\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', (val: boolean) => {\n          if (!val) return\n\n          // Only watch if we're not already doing it\n          if (this.errorBag.hasOwnProperty(input._uid)) return\n\n          watchers.valid = watcher(input)\n        })\n      } else {\n        watchers.valid = watcher(input)\n      }\n\n      return watchers\n    },\n    /** @public */\n    validate (): boolean {\n      return this.inputs.filter(input => !input.validate(true)).length === 0\n    },\n    /** @public */\n    reset (): void {\n      this.inputs.forEach(input => input.reset())\n      this.resetErrorBag()\n    },\n    resetErrorBag () {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {}\n        }, 0)\n      }\n    },\n    /** @public */\n    resetValidation () {\n      this.inputs.forEach(input => input.resetValidation())\n      this.resetErrorBag()\n    },\n    register (input: VInputInstance) {\n      this.inputs.push(input)\n      this.watchers.push(this.watchInput(input))\n    },\n    unregister (input: VInputInstance) {\n      const found = this.inputs.find(i => i._uid === input._uid)\n\n      if (!found) return\n\n      const unwatch = this.watchers.find(i => i._uid === found._uid)\n      if (unwatch) {\n        unwatch.valid()\n        unwatch.shouldValidate()\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid)\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid)\n      this.$delete(this.errorBag, found._uid)\n    },\n  },\n\n  render (h): VNode {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$,\n      },\n      on: {\n        submit: (e: Event) => this.$emit('submit', e),\n      },\n    }, this.$slots.default)\n  },\n})\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import request from '@/plugins/axios'\r\n\r\n/**\r\n * GET /category : \r\n *\r\n * @return \r\n */\r\nexport function findAllCategories () {\r\n  return request({\r\n    method: 'get',\r\n    url: '/category'\r\n  })\r\n}\r\n\r\n/**\r\n * GET /category/{page}/{size} : \r\n *\r\n * @param page  (required)\r\n * @param size  (required)\r\n * @return  ()\r\n */\r\nexport function findAllByPage (page, size) {\r\n  return request({\r\n    method: 'get',\r\n    url: `/category/${page}/${size}`\r\n  })\r\n}\r\n\r\n/**\r\n * GET /category/{cid} : id\r\n *\r\n * @param cid id (required)\r\n * @return \r\n */\r\nexport function findAllByCid (cid) {\r\n  return request({\r\n    method: 'get',\r\n    url: `/category/${cid}`\r\n  })\r\n}\r\n\r\n/**\r\n * POST /category : \r\n *\r\n * @param category \r\n */\r\nexport function createOrUpdateCategory (category) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/category',\r\n    data: category\r\n  })\r\n}\r\n\r\n/**\r\n * DELETE /category/{cid}\r\n *\r\n * @param cid id\r\n */\r\nexport function deleteCategory (cid) {\r\n  return request({\r\n    method: 'delete',\r\n    url: `/category/${cid}`\r\n  })\r\n}\r\n","import request from '@/plugins/axios'\r\n\r\n/**\r\n * GET /tag : \r\n *\r\n * @return \r\n */\r\nexport function findAllTags () {\r\n  return request({\r\n    method: 'get',\r\n    url: '/tag'\r\n  })\r\n}\r\n\r\n/**\r\n * GET /tag/{page}/{size} : \r\n *\r\n * @param page  (required)\r\n * @param size  (required)\r\n * @return  ()\r\n */\r\nexport function findAllByPage (page, size) {\r\n  return request({\r\n    method: 'get',\r\n    url: `/tag/${page}/${size}`\r\n  })\r\n}\r\n\r\n/**\r\n * GET /tag/{tid} : id\r\n *\r\n * @param tid id (required)\r\n * @return \r\n */\r\nexport function findByTid (tid) {\r\n  return request({\r\n    method: 'get',\r\n    url: `/tag/${tid}`\r\n  })\r\n}\r\n\r\n/**\r\n * POST /tag : \r\n *\r\n * @param tag \r\n */\r\nexport function createOrUpdateTag (tag) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/tag',\r\n    data: tag\r\n  })\r\n}\r\n\r\n/**\r\n * DELETE /tag/{tid}\r\n *\r\n * @param tid id\r\n */\r\nexport function deleteTag (tid) {\r\n  return request({\r\n    method: 'delete',\r\n    url: `/tag/${tid}`\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-title',{staticClass:\"pt-3 pl-3 pr-3 pt-sm-4 pl-sm-4 pr-sm-2\"},[_c('v-text-field',{attrs:{\"hide-details\":\"\",\"background-color\":\"white\",\"outlined\":\"\",\"clearable\":\"\",\"dense\":\"\",\"label\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}},[_c('v-btn',{staticClass:\"ml-2\",attrs:{\"slot\":\"append-outer\",\"height\":\"40\",\"color\":\"primary\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.createItem()}},slot:\"append-outer\"},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)],1)],1),_c('v-data-table',{staticClass:\"mx-sm-4\",attrs:{\"items\":_vm.articles,\"headers\":_vm.headers,\"search\":_vm.search,\"options\":{itemsPerPage:15}},scopedSlots:_vm._u([{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{staticClass:\"mr-2\",attrs:{\"icon\":\"\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_c('v-icon',[_vm._v(\" mdi-pencil \")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_c('v-icon',[_vm._v(\" mdi-delete \")])],1)]}}])}),(_vm.dialog)?_c('v-dialog',{attrs:{\"fullscreen\":\"\",\"hide-overlay\":\"\",\"transition\":\"dialog-bottom-transition\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',{attrs:{\"tile\":\"\"}},[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.close()}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.formTitle))]),_c('v-spacer'),_c('v-toolbar-items',[_c('v-btn',{attrs:{\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"  \")])],1)],1),_c('v-container',{attrs:{\"id\":\"edit\",\"fluid\":\"\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"}},[_c('v-text-field',{attrs:{\"background-color\":\"white\",\"outlined\":\"\",\"clearable\":\"\",\"dense\":\"\",\"label\":\"\",\"rules\":_vm.titleRules,\"counter\":\"50\"},model:{value:(_vm.editedItem.title),callback:function ($$v) {_vm.$set(_vm.editedItem, \"title\", $$v)},expression:\"editedItem.title\"}}),_c('v-textarea',{attrs:{\"height\":\"80\",\"no-resize\":\"\",\"background-color\":\"white\",\"outlined\":\"\",\"clearable\":\"\",\"dense\":\"\",\"label\":\"\",\"rules\":_vm.descriptionRules,\"counter\":\"200\",\"hide-details\":\"auto\"},model:{value:(_vm.editedItem.description),callback:function ($$v) {_vm.$set(_vm.editedItem, \"description\", $$v)},expression:\"editedItem.description\"}}),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-select',{attrs:{\"return-object\":\"\",\"items\":_vm.category,\"item-text\":\"name\",\"item-value\":\"cid\",\"menu-props\":{ bottom: true, offsetY: true },\"label\":\"\",\"outlined\":\"\",\"dense\":\"\",\"clearable\":\"\",\"hide-details\":\"auto\",\"rules\":_vm.categoryRules},model:{value:(_vm.editedItem.category),callback:function ($$v) {_vm.$set(_vm.editedItem, \"category\", $$v)},expression:\"editedItem.category\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-select',{attrs:{\"return-object\":\"\",\"items\":_vm.tags,\"item-text\":\"name\",\"item-value\":\"tid\",\"menu-props\":{ bottom: true, offsetY: true },\"label\":\"\",\"small-chips\":\"\",\"outlined\":\"\",\"dense\":\"\",\"clearable\":\"\",\"multiple\":\"\",\"rules\":_vm.tagRules},model:{value:(_vm.editedItem.tags),callback:function ($$v) {_vm.$set(_vm.editedItem, \"tags\", $$v)},expression:\"editedItem.tags\"}})],1)],1),_c('div',{attrs:{\"id\":\"vditor\"}})],1)],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card flat>\r\n    <v-card-title class=\"pt-3 pl-3 pr-3 pt-sm-4 pl-sm-4 pr-sm-2\">\r\n      <!--  -->\r\n      <v-text-field\r\n        v-model=\"search\"\r\n        hide-details\r\n        background-color=\"white\"\r\n        outlined\r\n        clearable\r\n        dense\r\n        label=\"\"\r\n      >\r\n        <!--  -->\r\n        <v-btn\r\n          class=\"ml-2\"\r\n          height=\"40\"\r\n          slot=\"append-outer\"\r\n          color=\"primary\"\r\n          dark\r\n          @click=\"createItem()\"\r\n        >\r\n          <v-icon>mdi-plus</v-icon>\r\n        </v-btn>\r\n      </v-text-field>\r\n    </v-card-title>\r\n    <!--  -->\r\n    <v-data-table\r\n      class=\"mx-sm-4\"\r\n      :items=\"articles\"\r\n      :headers=\"headers\"\r\n      :search=\"search\"\r\n      :options=\"{itemsPerPage:15}\"\r\n    ><!--  -->\r\n      <template v-slot:item.actions=\"{item}\">\r\n        <v-btn\r\n          icon\r\n          class=\"mr-2\"\r\n          color=\"success\"\r\n          @click=\"editItem(item)\"\r\n        ><!--  -->\r\n          <v-icon>\r\n            mdi-pencil\r\n          </v-icon>\r\n        </v-btn>\r\n        <v-btn\r\n          icon\r\n          color=\"error\"\r\n          @click=\"deleteItem(item)\"\r\n        ><!--  -->\r\n          <v-icon>\r\n            mdi-delete\r\n          </v-icon>\r\n        </v-btn>\r\n      </template>\r\n    </v-data-table>\r\n    <v-dialog\r\n      v-model=\"dialog\"\r\n      v-if=\"dialog\"\r\n      fullscreen\r\n      hide-overlay\r\n      transition=\"dialog-bottom-transition\"\r\n    >\r\n      <v-card tile>\r\n        <v-toolbar\r\n          dark\r\n          color=\"primary\"\r\n        >\r\n          <v-btn\r\n            icon\r\n            dark\r\n            @click=\"close()\"\r\n          >\r\n            <v-icon>mdi-close</v-icon>\r\n          </v-btn>\r\n          <v-toolbar-title>{{ formTitle }}</v-toolbar-title>\r\n          <v-spacer></v-spacer>\r\n          <v-toolbar-items>\r\n            <v-btn\r\n              dark\r\n              text\r\n              @click=\"save()\"\r\n            >\r\n              \r\n            </v-btn>\r\n          </v-toolbar-items>\r\n        </v-toolbar>\r\n\r\n        <v-container id=\"edit\" fluid>\r\n          <v-form\r\n            ref=\"form\"\r\n            lazy-validation\r\n          >\r\n            <v-text-field\r\n              v-model=\"editedItem.title\"\r\n              background-color=\"white\"\r\n              outlined\r\n              clearable\r\n              dense\r\n              label=\"\"\r\n              :rules=\"titleRules\"\r\n              counter=\"50\"\r\n            >\r\n            </v-text-field>\r\n            <v-textarea\r\n              v-model=\"editedItem.description\"\r\n              height=\"80\"\r\n              no-resize\r\n              background-color=\"white\"\r\n              outlined\r\n              clearable\r\n              dense\r\n              label=\"\"\r\n              :rules=\"descriptionRules\"\r\n              counter=\"200\"\r\n              hide-details=\"auto\"\r\n            ></v-textarea>\r\n            <v-row>\r\n              <v-col\r\n                cols=\"12\"\r\n                md=\"6\"\r\n              >\r\n                <v-select\r\n                  v-model=\"editedItem.category\"\r\n                  return-object\r\n                  :items=\"category\"\r\n                  item-text=\"name\"\r\n                  item-value=\"cid\"\r\n                  :menu-props=\"{ bottom: true, offsetY: true }\"\r\n                  label=\"\"\r\n                  outlined\r\n                  dense\r\n                  clearable\r\n                  hide-details=\"auto\"\r\n                  :rules=\"categoryRules\"\r\n                ></v-select>\r\n              </v-col>\r\n              <v-col\r\n                cols=\"12\"\r\n                md=\"6\"\r\n              >\r\n                <v-select\r\n                  v-model=\"editedItem.tags\"\r\n                  return-object\r\n                  :items=\"tags\"\r\n                  item-text=\"name\"\r\n                  item-value=\"tid\"\r\n                  :menu-props=\"{ bottom: true, offsetY: true }\"\r\n                  label=\"\"\r\n                  small-chips\r\n                  outlined\r\n                  dense\r\n                  clearable\r\n                  multiple\r\n                  :rules=\"tagRules\"\r\n                ></v-select>\r\n              </v-col>\r\n            </v-row>\r\n            <div id=\"vditor\"></div>\r\n          </v-form>\r\n        </v-container>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport { createOrUpdateArticle, deleteArticle, findAllArticles, getArticleByAid } from '@/api/article'\r\nimport { findAllCategories } from '@/api/category'\r\nimport { findAllTags } from '@/api/tag'\r\n\r\nimport Vditor from 'vditor'\r\nimport 'vditor/dist/index.css'\r\n\r\nexport default {\r\n  name: 'Article',\r\n  data () {\r\n    return {\r\n      // \r\n      headers:\r\n        [\r\n          {\r\n            text: '',\r\n            value: 'aid'\r\n          },\r\n          {\r\n            text: '',\r\n            sortable: false,\r\n            value: 'title'\r\n          },\r\n          {\r\n            text: '',\r\n            value: 'created'\r\n          },\r\n          {\r\n            text: '',\r\n            value: 'updated'\r\n          },\r\n          {\r\n            text: '',\r\n            value: 'actions',\r\n            sortable: false\r\n          }\r\n        ],\r\n      articles: [],\r\n      page: 1,\r\n      size: 10,\r\n      search: '',\r\n      titleRules: [\r\n        v => !!v || '',\r\n        v => v.length <= 50 || '50'\r\n      ],\r\n      descriptionRules: [\r\n        v => !!v || '',\r\n        v => v.length <= 200 || '200'\r\n      ],\r\n      categoryRules: [\r\n        v => !!v || ''\r\n      ],\r\n      tagRules: [\r\n        v => (!!v && v.length > 0) || ''\r\n      ],\r\n      category: [],\r\n      tags: [],\r\n      contentEditor: '',\r\n      dialog: false,\r\n      editedIndex: -1,\r\n      editedItem: {\r\n        title: '',\r\n        description: '',\r\n        content: '',\r\n        category: null,\r\n        tags: []\r\n      },\r\n      defaultItem: {\r\n        title: '',\r\n        description: '',\r\n        content: '',\r\n        category: null,\r\n        tags: []\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getArticles()\r\n  },\r\n  computed: {\r\n    formTitle () {\r\n      return this.editedIndex === -1 ? '' : ''\r\n    }\r\n  },\r\n  watch: {\r\n    dialog (val) {\r\n      val || this.close()\r\n    }\r\n  },\r\n  methods: {\r\n    // \r\n    getArticles () {\r\n      findAllArticles().then((response) => {\r\n        this.articles = response.data\r\n      })\r\n    },\r\n    // \r\n    async deleteItem (item) {\r\n      const res = await this.$dialog.confirm({\r\n        title: '',\r\n        text: '',\r\n        actions:\r\n          [\r\n            {\r\n              text: '',\r\n              color: 'blue',\r\n              key: 'false'\r\n            },\r\n            {\r\n              text: '',\r\n              color: 'red',\r\n              key: 'true'\r\n            }\r\n          ]\r\n      })\r\n      // \r\n      if (res) {\r\n        deleteArticle(item.aid)\r\n        this.articles.splice(this.editedIndex, 1)\r\n        this.getArticles()\r\n      }\r\n    },\r\n\r\n    createItem () {\r\n      this.open()\r\n    },\r\n\r\n    editItem (item) {\r\n      this.editedIndex = this.articles.indexOf(item)\r\n      this.editedItem = Object.assign({}, item)\r\n      this.getArticle(item.aid)\r\n      this.open()\r\n    },\r\n\r\n    open () {\r\n      this.getCategoriesAndTags()\r\n      this.dialog = true\r\n      this.$nextTick(() => {\r\n        this.initEditor()\r\n      })\r\n    },\r\n\r\n    close () {\r\n      this.dialog = false\r\n      this.$nextTick(() => {\r\n        this.editedItem = Object.assign({}, this.defaultItem)\r\n        this.editedIndex = -1\r\n      })\r\n    },\r\n\r\n    save () {\r\n      this.editedItem.content = this.contentEditor.getHTML()\r\n      if (!(this.editedItem.content.length - 1)) {\r\n        this.contentEditor.tip('', 1000)\r\n      } else if (this.$refs.form.validate()) {\r\n        createOrUpdateArticle(this.editedItem).then(() => {\r\n          this.$dialog.message.success('', {\r\n            position: 'top',\r\n            timeout: 5000\r\n          })\r\n          this.getArticles()\r\n        })\r\n      }\r\n      if (this.editedIndex > -1) {\r\n        Object.assign(this.articles[this.editedIndex], this.editedItem)\r\n      } else {\r\n        this.articles.push(this.editedItem)\r\n      }\r\n      this.close()\r\n    },\r\n\r\n    getCategoriesAndTags () {\r\n      findAllCategories().then((response) => {\r\n        this.category = response.data\r\n      })\r\n      findAllTags().then((response) => {\r\n        this.tags = response.data\r\n      })\r\n    },\r\n\r\n    getArticle (aid) {\r\n      if (aid) {\r\n        getArticleByAid(aid).then((response) => {\r\n          this.article = response.data\r\n        })\r\n      }\r\n    },\r\n\r\n    initEditor () {\r\n      // id\r\n      this.contentEditor = new Vditor('vditor', {\r\n        height: 300,\r\n        toolbarConfig: {\r\n          pin: true\r\n        },\r\n        counter: {\r\n          enable: true,\r\n          max: 100000\r\n        },\r\n        preview: {\r\n          hljs: {\r\n            lineNumber: true\r\n          }\r\n        },\r\n        after: () => {\r\n          this.contentEditor.setValue(this.contentEditor.html2md(this.editedItem.content))\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=164d7264&\"\nimport script from \"./Article.vue?vue&type=script&lang=js&\"\nexport * from \"./Article.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarItems } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardTitle,VCol,VContainer,VDataTable,VDialog,VForm,VIcon,VRow,VSelect,VSpacer,VTextField,VTextarea,VToolbar,VToolbarItems,VToolbarTitle})\n","/*!\n * Vditor v3.8.5 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log , b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vditor\"] = factory();\n\telse\n\t\troot[\"Vditor\"] = factory();\n})(this, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 694:\n/***/ ((module) => {\n\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function () {\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0; // Cost of an empty edit operation in terms of edit characters.\n\n  this.Diff_EditCost = 4; // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n\n  this.Match_Threshold = 0.5; // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n\n  this.Match_Distance = 1000; // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n\n  this.Patch_DeleteThreshold = 0.5; // Chunk size for context length.\n\n  this.Patch_Margin = 4; // The number of bits in an int.\n\n  this.Match_MaxBits = 32;\n}; //  DIFF FUNCTIONS\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\n\n\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\n\ndiff_match_patch.Diff = function (op, text) {\n  return [op, text];\n};\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_main = function (text1, text2, opt_checklines, opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = new Date().getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n\n  var deadline = opt_deadline; // Check for null inputs.\n\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  } // Check for equality (speedup).\n\n\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n\n  var checklines = opt_checklines; // Trim off common prefix (speedup).\n\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength); // Trim off common suffix (speedup).\n\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength); // Compute the diff on the middle block.\n\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline); // Restore the prefix and suffix.\n\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)), new diff_match_patch.Diff(DIFF_EQUAL, shorttext), new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(i + shorttext.length))]; // Swap insertions for deletions if diff is reversed.\n\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  } // Check to see if the problem can be split in two.\n\n\n  var hm = this.diff_halfMatch_(text1, text2);\n\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4]; // Send both pairs off for separate processing.\n\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline); // Merge the results.\n\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)], diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n  var diffs = this.diff_main(text1, text2, false, deadline); // Convert the diff back to original text.\n\n  this.diff_charsToLines_(diffs, linearray); // Eliminate freak matches (e.g. blank lines)\n\n  this.diff_cleanupSemantic(diffs); // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert, count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff = this.diff_main(text_delete, text_insert, false, deadline);\n\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n\n          pointer = pointer + subDiff.length;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n\n    pointer++;\n  }\n\n  diffs.pop(); // Remove the dummy entry at the end.\n\n  return diffs;\n};\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length); // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length; // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n\n  var front = delta % 2 != 0; // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if (new Date().getTime() > deadline) {\n      break;\n    } // Walk the front path one step.\n\n\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n\n      if (k1 == -d || k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1]) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n\n      var y1 = x1 - k1;\n\n      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n\n      v1[k1_offset] = x1;\n\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    } // Walk the reverse path one step.\n\n\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n\n      if (k2 == -d || k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1]) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n\n      var y2 = x2 - k2;\n\n      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n\n      v2[k2_offset] = x2;\n\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset; // Mirror x2 onto top-left coordinate system.\n\n          x2 = text1_length - x2;\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  } // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n\n\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y); // Compute both diffs serially.\n\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n  return diffs.concat(diffsb);\n};\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_linesToChars_ = function (text1, text2) {\n  var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n\n  var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n\n  lineArray[0] = '';\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n\n  function diff_linesToCharsMunge_(text) {\n    var chars = ''; // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n\n    var lineStart = 0;\n    var lineEnd = -1; // Keeping our own length variable is faster than looking it up.\n\n    var lineArrayLength = lineArray.length;\n\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n\n      lineStart = lineEnd + 1;\n    }\n\n    return chars;\n  } // Allocate 2/3rds of the space for text1, the rest for text2.\n\n\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  };\n};\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n\n    diffs[i][1] = text.join('');\n  }\n};\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\n\n\ndiff_match_patch.prototype.diff_commonPrefix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) == text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\n\n\ndiff_match_patch.prototype.diff_commonSuffix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) == text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_commonOverlap_ = function (text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length; // Eliminate the null case.\n\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  } // Truncate the longer string.\n\n\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n\n  var text_length = Math.min(text1_length, text2_length); // Quick check for the worst case.\n\n  if (text1 == text2) {\n    return text_length;\n  } // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n\n\n  var best = 0;\n  var length = 1;\n\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n\n    if (found == -1) {\n      return best;\n    }\n\n    length += found;\n\n    if (found == 0 || text1.substring(text_length - length) == text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_halfMatch_ = function (text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  } // First check if the second quarter is the seed for a half-match.\n\n\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4)); // Check again based on the third quarter.\n\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  } // A half-match was found, sort out the return data.\n\n\n  var text1_a, text1_b, text2_a, text2_b;\n\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemantic = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n\n  var length_insertions1 = 0;\n  var length_deletions1 = 0; // Number of characters that changed after the equality.\n\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      } // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n\n\n      if (lastEquality && lastEquality.length <= Math.max(length_insertions1, length_deletions1) && lastEquality.length <= Math.max(length_insertions2, length_deletions2)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT; // Throw away the equality we just deleted.\n\n        equalitiesLength--; // Throw away the previous equality (it needs to be reevaluated).\n\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // Normalize the diff.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n\n  this.diff_cleanupSemanticLossless(diffs); // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n\n  pointer = 1;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE && diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 || overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 || overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n\n      pointer++;\n    }\n\n    pointer++;\n  }\n};\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    } // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n\n\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n\n    return 0;\n  }\n\n  var pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1]; // First, shift the edit as far left as possible.\n\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      } // Second, step character by character right, looking for the best fit.\n\n\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2); // The >= encourages trailing rather than leading whitespace on edits.\n\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n\n        diffs[pointer][1] = bestEdit;\n\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n\n    pointer++;\n  }\n}; // Define some regex patterns for matching boundaries.\n\n\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\ndiff_match_patch.prototype.diff_cleanupEfficiency = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Is there an insertion operation before the last equality.\n\n  var pre_ins = false; // Is there a deletion operation before the last equality.\n\n  var pre_del = false; // Is there an insertion operation after the last equality.\n\n  var post_ins = false; // Is there a deletion operation after the last equality.\n\n  var post_del = false;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost && (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n\n      post_ins = post_del = false;\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n\n\n      if (lastEquality && (pre_ins && pre_del && post_ins && post_del || lastEquality.length < this.Diff_EditCost / 2 && pre_ins + pre_del + post_ins + post_del == 3)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--; // Throw away the equality we just deleted;\n\n        lastEquality = null;\n\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--; // Throw away the previous equality.\n\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n\n        changes = true;\n      }\n    }\n\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupMerge = function (diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              if (pointer - count_delete - count_insert > 0 && diffs[pointer - count_delete - count_insert - 1][0] == DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL, text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            } // Factor out any common suffixies.\n\n\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          } // Delete the offending records and add the merged ones.\n\n\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n\n          if (text_delete.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n\n          if (text_insert.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop(); // Remove the dummy entry at the end.\n  } // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n\n\n  var changes = false;\n  pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) == diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // If shifts were made, the diff needs reordering and another shift sweep.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\n\n\ndiff_match_patch.prototype.diff_xIndex = function (diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n\n    if (chars1 > loc) {\n      // Overshot the location.\n      break;\n    }\n\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  } // Was the location was deleted?\n\n\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  } // Add the remaining character length.\n\n\n  return last_chars2 + (loc - last_chars1);\n};\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\n\n\ndiff_match_patch.prototype.diff_prettyHtml = function (diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0]; // Operation (insert, delete, equal)\n\n    var data = diffs[x][1]; // Text of change.\n\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;').replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n\n  return html.join('');\n};\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\n\n\ndiff_match_patch.prototype.diff_text1 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\n\n\ndiff_match_patch.prototype.diff_text2 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\n\n\ndiff_match_patch.prototype.diff_levenshtein = function (diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\n\n\ndiff_match_patch.prototype.diff_toDelta = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.diff_fromDelta = function (text1, delta) {\n  var diffs = [];\n  var diffsLength = 0; // Keeping our own length var is faster in JS.\n\n  var pointer = 0; // Cursor in text1\n\n  var tokens = delta.split(/\\t/g);\n\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n\n        break;\n\n      case '-': // Fall through.\n\n      case '=':\n        var n = parseInt(param, 10);\n\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n\n        var text = text1.substring(pointer, pointer += n);\n\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n\n        break;\n\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' + tokens[x]);\n        }\n\n    }\n  }\n\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer + ') does not equal source text length (' + text1.length + ').');\n  }\n\n  return diffs;\n}; //  MATCH FUNCTIONS\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\n\n\ndiff_match_patch.prototype.match_main = function (text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_bitap_ = function (text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  } // Initialise the alphabet.\n\n\n  var s = this.match_alphabet_(pattern);\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n\n    return accuracy + proximity / dmp.Match_Distance;\n  } // Highest score beyond which we give up.\n\n\n  var score_threshold = this.Match_Threshold; // Is there a nearby exact match? (speedup)\n\n  var best_loc = text.indexOf(pattern, loc);\n\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold); // What about in the other direction? (speedup)\n\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  } // Initialise the bit arrays.\n\n\n  var matchmask = 1 << pattern.length - 1;\n  best_loc = -1;\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    } // Use the result from this iteration as the maximum for the next.\n\n\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch;\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch | ((last_rd[j + 1] | last_rd[j]) << 1 | 1) | last_rd[j + 1];\n      }\n\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1); // This match will almost certainly be better than any existing match.\n        // But check anyway.\n\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    } // No hope for a (better) match at greater error levels.\n\n\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n\n    last_rd = rd;\n  }\n\n  return best_loc;\n};\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_alphabet_ = function (pattern) {\n  var s = {};\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << pattern.length - i - 1;\n  }\n\n  return s;\n}; //  PATCH FUNCTIONS\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\n\n\ndiff_match_patch.prototype.patch_addContext_ = function (patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0; // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) && pattern.length < this.Match_MaxBits - this.Patch_Margin - this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n  } // Add one chunk for good luck.\n\n\n  padding += this.Patch_Margin; // Add the prefix.\n\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  } // Add the suffix.\n\n\n  var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  } // Roll back the start points.\n\n\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length; // Extend the lengths.\n\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_make = function (a, opt_b, opt_c) {\n  var text1, diffs;\n\n  if (typeof a == 'string' && typeof opt_b == 'string' && typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs = this.diff_main(text1,\n    /** @type {string} */\n    opt_b, true);\n\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' && typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' && typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' && opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return []; // Get rid of the null case.\n  }\n\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n\n  var char_count1 = 0; // Number of characters into the text1 string.\n\n  var char_count2 = 0; // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text + postpatch_text.substring(char_count2);\n        break;\n\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) + postpatch_text.substring(char_count2 + diff_text.length);\n        break;\n\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin && patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0; // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n\n        break;\n    } // Update the current character count.\n\n\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  } // Pick up the leftover patch if not empty.\n\n\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_deepCopy = function (patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n\n  return patchesCopy;\n};\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\n\n\ndiff_match_patch.prototype.patch_apply = function (patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  } // Deep copy the patches so that no changes are made to originals.\n\n\n  patches = this.patch_deepCopy(patches);\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n  this.patch_splitMax(patches); // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n\n  var delta = 0;\n  var results = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits), expected_loc);\n\n      if (start_loc != -1) {\n        end_loc = this.match_main(text, text1.substring(text1.length - this.Match_MaxBits), expected_loc + text1.length - this.Match_MaxBits);\n\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false; // Subtract the delta for this failed patch from subsequent patches.\n\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) + this.diff_text2(patches[x].diffs) + text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n\n        if (text1.length > this.Match_MaxBits && this.diff_levenshtein(diffs) / text1.length > this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] + text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text = text.substring(0, start_loc + index2) + text.substring(start_loc + this.diff_xIndex(diffs, index1 + mod[1].length));\n            }\n\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  } // Strip the padding off.\n\n\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\n\n\ndiff_match_patch.prototype.patch_addPadding = function (patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  } // Bump all the patches forward.\n\n\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  } // Add some padding on start of first diff.\n\n\n  var patch = patches[0];\n  var diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength; // Should be 0.\n\n    patch.start2 -= paddingLength; // Should be 0.\n\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  } // Add some padding on end of last diff.\n\n\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_splitMax = function (patches) {\n  var patch_size = this.Match_MaxBits;\n\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n\n    var bigpatch = patches[x]; // Remove the big old patch.\n\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 && patch.diffs[0][0] == DIFF_EQUAL && diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0, patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      } // Compute the head context for the next patch.\n\n\n      precontext = this.diff_text2(patch.diffs);\n      precontext = precontext.substring(precontext.length - this.Patch_Margin); // Append the end context for this patch.\n\n      var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.Patch_Margin);\n\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\n\n\ndiff_match_patch.prototype.patch_toText = function (patches) {\n  var text = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n\n  return text.join('');\n};\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.patch_fromText = function (textline) {\n  var patches = [];\n\n  if (!textline) {\n    return patches;\n  }\n\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {// Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n\n      textPointer++;\n    }\n  }\n\n  return patches;\n};\n/**\n * Class representing one patch operation.\n * @constructor\n */\n\n\ndiff_match_patch.patch_obj = function () {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n\n  this.start1 = null;\n  /** @type {?number} */\n\n  this.start2 = null;\n  /** @type {number} */\n\n  this.length1 = 0;\n  /** @type {number} */\n\n  this.length2 = 0;\n};\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\n\n\ndiff_match_patch.patch_obj.prototype.toString = function () {\n  var coords1, coords2;\n\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = this.start1 + 1 + ',' + this.length1;\n  }\n\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = this.start2 + 1 + ',' + this.length2;\n  }\n\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op; // Escape the body of the patch with %xx notation.\n\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n\n      case DIFF_DELETE:\n        op = '-';\n        break;\n\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n\n  return text.join('').replace(/%20/g, ' ');\n}; // The following export code was added by @ForbesLindesay\n\n\nmodule.exports = diff_match_patch;\nmodule.exports.diff_match_patch = diff_match_patch;\nmodule.exports.DIFF_DELETE = DIFF_DELETE;\nmodule.exports.DIFF_INSERT = DIFF_INSERT;\nmodule.exports.DIFF_EQUAL = DIFF_EQUAL;\n\n/***/ }),\n\n/***/ 157:\n/***/ (() => {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 857:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ method)\n});\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n;// CONCATENATED MODULE: ./src/ts/markdown/lazyLoadImageRender.ts\nvar lazyLoadImageRender = function (element) {\n    if (element === void 0) { element = document; }\n    var loadImg = function (it) {\n        var testImage = document.createElement(\"img\");\n        testImage.src = it.getAttribute(\"data-src\");\n        testImage.addEventListener(\"load\", function () {\n            if (!it.getAttribute(\"style\") && !it.getAttribute(\"class\") &&\n                !it.getAttribute(\"width\") && !it.getAttribute(\"height\")) {\n                if (testImage.naturalHeight > testImage.naturalWidth &&\n                    testImage.naturalWidth / testImage.naturalHeight <\n                        document.querySelector(\".vditor-reset\").clientWidth / (window.innerHeight - 40) &&\n                    testImage.naturalHeight > (window.innerHeight - 40)) {\n                    it.style.height = (window.innerHeight - 40) + \"px\";\n                }\n            }\n            it.src = testImage.src;\n        });\n        it.removeAttribute(\"data-src\");\n    };\n    if (!(\"IntersectionObserver\" in window)) {\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            if (imgElement.getAttribute(\"data-src\")) {\n                loadImg(imgElement);\n            }\n        });\n        return false;\n    }\n    if (window.vditorImageIntersectionObserver) {\n        window.vditorImageIntersectionObserver.disconnect();\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n    else {\n        window.vditorImageIntersectionObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entrie) {\n                if ((typeof entrie.isIntersecting === \"undefined\"\n                    ? entrie.intersectionRatio !== 0\n                    : entrie.isIntersecting)\n                    && entrie.target.getAttribute(\"data-src\")) {\n                    loadImg(entrie.target);\n                }\n            });\n        });\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/markdown/anchorRender.ts\nvar anchorRender = function (type) {\n    document.querySelectorAll(\".vditor-anchor\").forEach(function (anchor) {\n        if (type === 1) {\n            anchor.classList.add(\"vditor-anchor--left\");\n        }\n        anchor.onclick = function () {\n            var id = anchor.getAttribute(\"href\").substr(1);\n            var top = document.getElementById(\"vditorAnchor-\" + id).offsetTop;\n            document.querySelector(\"html\").scrollTop = top;\n        };\n    });\n    window.onhashchange = function () {\n        var element = document.getElementById(\"vditorAnchor-\" + decodeURIComponent(window.location.hash.substr(1)));\n        if (element) {\n            document.querySelector(\"html\").scrollTop = element.offsetTop;\n        }\n    };\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/markdown/speechRender.ts\n\nvar speechRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (typeof speechSynthesis === \"undefined\" || typeof SpeechSynthesisUtterance === \"undefined\") {\n        return;\n    }\n    var playSVG = '<svg><use xlink:href=\"#vditor-icon-play\"></use></svg>';\n    var pauseSVG = '<svg><use xlink:href=\"#vditor-icon-pause\"></use></svg>';\n    var speechDom = document.querySelector(\".vditor-speech\");\n    if (!speechDom) {\n        speechDom = document.createElement(\"div\");\n        speechDom.className = \"vditor-speech\";\n        document.body.insertAdjacentElement(\"beforeend\", speechDom);\n        var getVoice = function () {\n            var voices = speechSynthesis.getVoices();\n            var currentVoice;\n            var defaultVoice;\n            voices.forEach(function (item) {\n                if (item.lang === lang.replace(\"_\", \"-\")) {\n                    currentVoice = item;\n                }\n                if (item.default) {\n                    defaultVoice = item;\n                }\n            });\n            if (!currentVoice) {\n                currentVoice = defaultVoice;\n            }\n            return currentVoice;\n        };\n        if (speechSynthesis.onvoiceschanged !== undefined) {\n            speechSynthesis.onvoiceschanged = getVoice;\n        }\n        var voice_1 = getVoice();\n        speechDom.onclick = function () {\n            if (speechDom.className === \"vditor-speech\") {\n                var utterThis = new SpeechSynthesisUtterance(speechDom.getAttribute(\"data-text\"));\n                utterThis.voice = voice_1;\n                utterThis.onend = function () {\n                    speechDom.className = \"vditor-speech\";\n                    speechSynthesis.cancel();\n                    speechDom.innerHTML = playSVG;\n                };\n                speechSynthesis.speak(utterThis);\n                speechDom.className = \"vditor-speech vditor-speech--current\";\n                speechDom.innerHTML = pauseSVG;\n            }\n            else {\n                if (speechSynthesis.speaking) {\n                    if (speechSynthesis.paused) {\n                        speechSynthesis.resume();\n                        speechDom.innerHTML = pauseSVG;\n                    }\n                    else {\n                        speechSynthesis.pause();\n                        speechDom.innerHTML = playSVG;\n                    }\n                }\n            }\n            (0,selection/* setSelectionFocus */.Hc)(window.vditorSpeechRange);\n        };\n        document.body.addEventListener(\"click\", function () {\n            if (getSelection().toString().trim() === \"\" && speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechSynthesis.cancel();\n                speechDom.style.display = \"none\";\n            }\n        });\n    }\n    element.addEventListener(\"mouseup\", function (event) {\n        var text = getSelection().toString().trim();\n        speechSynthesis.cancel();\n        if (getSelection().toString().trim() === \"\") {\n            if (speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechDom.style.display = \"none\";\n            }\n            return;\n        }\n        window.vditorSpeechRange = getSelection().getRangeAt(0).cloneRange();\n        var rect = getSelection().getRangeAt(0).getBoundingClientRect();\n        speechDom.innerHTML = playSVG;\n        speechDom.style.display = \"block\";\n        speechDom.style.top = (rect.top + rect.height + document.querySelector(\"html\").scrollTop - 20) + \"px\";\n        speechDom.style.left = (event.screenX + 2) + \"px\";\n        speechDom.setAttribute(\"data-text\", text);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/markdown/previewRender.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mergeOptions = function (options) {\n    var defaultOption = {\n        anchor: 0,\n        cdn: constants/* Constants.CDN */.g.CDN,\n        customEmoji: {},\n        emojiPath: ((options && options.emojiPath) || constants/* Constants.CDN */.g.CDN) + \"/dist/images/emoji\",\n        hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n        icon: \"ant\",\n        lang: \"zh_CN\",\n        markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n        math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n        mode: \"light\",\n        speech: {\n            enable: false,\n        },\n        theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n    };\n    return (0,merge/* merge */.T)(defaultOption, options);\n};\nvar md2html = function (mdText, options) {\n    var mergedOptions = mergeOptions(options);\n    return (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n        var lute = (0,setLute/* setLute */.X)({\n            autoSpace: mergedOptions.markdown.autoSpace,\n            codeBlockPreview: mergedOptions.markdown.codeBlockPreview,\n            emojiSite: mergedOptions.emojiPath,\n            emojis: mergedOptions.customEmoji,\n            fixTermTypo: mergedOptions.markdown.fixTermTypo,\n            footnotes: mergedOptions.markdown.footnotes,\n            headingAnchor: mergedOptions.anchor !== 0,\n            inlineMathDigit: mergedOptions.math.inlineDigit,\n            lazyLoadImage: mergedOptions.lazyLoadImage,\n            linkBase: mergedOptions.markdown.linkBase,\n            linkPrefix: mergedOptions.markdown.linkPrefix,\n            listStyle: mergedOptions.markdown.listStyle,\n            mark: mergedOptions.markdown.mark,\n            mathBlockPreview: mergedOptions.markdown.mathBlockPreview,\n            paragraphBeginningSpace: mergedOptions.markdown.paragraphBeginningSpace,\n            sanitize: mergedOptions.markdown.sanitize,\n            toc: mergedOptions.markdown.toc,\n        });\n        if (options === null || options === void 0 ? void 0 : options.renderers) {\n            lute.SetJSRenderers({\n                renderers: {\n                    Md2HTML: options.renderers,\n                },\n            });\n        }\n        lute.SetHeadingID(true);\n        return lute.Md2HTML(mdText);\n    });\n};\nvar previewRender = function (previewElement, markdown, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var mergedOptions, html;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                mergedOptions = mergeOptions(options);\n                return [4 /*yield*/, md2html(markdown, mergedOptions)];\n            case 1:\n                html = _a.sent();\n                if (mergedOptions.transform) {\n                    html = mergedOptions.transform(html);\n                }\n                previewElement.innerHTML = html;\n                previewElement.classList.add(\"vditor-reset\");\n                (0,setContentTheme/* setContentTheme */.Z)(mergedOptions.theme.current, mergedOptions.theme.path);\n                if (mergedOptions.anchor === 1) {\n                    previewElement.classList.add(\"vditor-reset--anchor\");\n                }\n                (0,codeRender/* codeRender */.O)(previewElement, mergedOptions.lang);\n                (0,highlightRender/* highlightRender */.s)(mergedOptions.hljs, previewElement, mergedOptions.cdn);\n                (0,mathRender/* mathRender */.H)(previewElement, {\n                    cdn: mergedOptions.cdn,\n                    math: mergedOptions.math,\n                });\n                (0,mermaidRender/* mermaidRender */.i)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,flowchartRender/* flowchartRender */.P)(previewElement, mergedOptions.cdn);\n                (0,graphvizRender/* graphvizRender */.v)(previewElement, mergedOptions.cdn);\n                (0,chartRender/* chartRender */.p)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,mindmapRender/* mindmapRender */.P)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,plantumlRender/* plantumlRender */.B)(previewElement, mergedOptions.cdn);\n                (0,abcRender/* abcRender */.Q)(previewElement, mergedOptions.cdn);\n                (0,mediaRender/* mediaRender */.Y)(previewElement);\n                if (mergedOptions.speech.enable) {\n                    speechRender(previewElement, mergedOptions.lang);\n                }\n                if (mergedOptions.anchor !== 0) {\n                    anchorRender(mergedOptions.anchor);\n                }\n                if (mergedOptions.after) {\n                    mergedOptions.after();\n                }\n                if (mergedOptions.lazyLoadImage) {\n                    lazyLoadImageRender(previewElement);\n                }\n                if (mergedOptions.icon) {\n                    (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n                }\n                previewElement.addEventListener(\"click\", function (event) {\n                    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n                    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                        var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                        if (headingElement) {\n                            window.scrollTo(window.scrollX, headingElement.offsetTop);\n                        }\n                        return;\n                    }\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/method.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function () {\n    function Vditor() {\n    }\n    /**  */\n    Vditor.previewImage = preview_image/* previewImage */.E;\n    /**  element  */\n    Vditor.codeRender = codeRender/* codeRender */.O;\n    /**  graphviz  */\n    Vditor.graphvizRender = graphvizRender/* graphvizRender */.v;\n    /**  element  */\n    Vditor.highlightRender = highlightRender/* highlightRender */.s;\n    /**  */\n    Vditor.mathRender = mathRender/* mathRender */.H;\n    /** // */\n    Vditor.mermaidRender = mermaidRender/* mermaidRender */.i;\n    /** flowchart.js  */\n    Vditor.flowchartRender = flowchartRender/* flowchartRender */.P;\n    /**  */\n    Vditor.chartRender = chartRender/* chartRender */.p;\n    /**  */\n    Vditor.abcRender = abcRender/* abcRender */.Q;\n    /**  */\n    Vditor.mindmapRender = mindmapRender/* mindmapRender */.P;\n    /** plantuml */\n    Vditor.plantumlRender = plantumlRender/* plantumlRender */.B;\n    /**  */\n    Vditor.outlineRender = outlineRender/* outlineRender */.k;\n    /** [](https://github.com/Vanessa219/vditor/issues/7) iframe */\n    Vditor.mediaRender = mediaRender/* mediaRender */.Y;\n    /**  */\n    Vditor.speechRender = speechRender;\n    /**  */\n    Vditor.lazyLoadImageRender = lazyLoadImageRender;\n    /** Markdown  HTML[](https://ld246.com/article/1546828434083?r=Vaness) */\n    Vditor.md2html = md2html;\n    /**  Markdown  */\n    Vditor.preview = previewRender;\n    /**  */\n    Vditor.setCodeTheme = setCodeTheme/* setCodeTheme */.Y;\n    /**  */\n    Vditor.setContentTheme = setContentTheme/* setContentTheme */.Z;\n    return Vditor;\n}());\n/* harmony default export */ const method = (Vditor);\n\n\n/***/ }),\n\n/***/ 260:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ _VDITOR_VERSION),\n/* harmony export */   \"g\": () => (/* binding */ Constants)\n/* harmony export */ });\nvar _VDITOR_VERSION = \"3.8.5\";\n\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.ZWSP = \"\\u200b\";\n    Constants.DROP_EDITOR = \"application/editor\";\n    Constants.MOBILE_WIDTH = 520;\n    Constants.CLASS_MENU_DISABLED = \"vditor-menu--disabled\";\n    Constants.EDIT_TOOLBARS = [\"emoji\", \"headings\", \"bold\", \"italic\", \"strike\", \"link\", \"list\",\n        \"ordered-list\", \"outdent\", \"indent\", \"check\", \"line\", \"quote\", \"code\", \"inline-code\", \"insert-after\",\n        \"insert-before\", \"upload\", \"record\", \"table\"];\n    Constants.CODE_THEME = [\"abap\", \"algol\", \"algol_nu\", \"arduino\", \"autumn\", \"borland\", \"bw\",\n        \"colorful\", \"dracula\", \"emacs\", \"friendly\", \"fruity\", \"github\", \"igor\", \"lovelace\", \"manni\", \"monokai\",\n        \"monokailight\", \"murphy\", \"native\", \"paraiso-dark\", \"paraiso-light\", \"pastie\", \"perldoc\", \"pygments\",\n        \"rainbow_dash\", \"rrt\", \"solarized-dark\", \"solarized-dark256\", \"solarized-light\", \"swapoff\", \"tango\", \"trac\",\n        \"vim\", \"vs\", \"xcode\", \"ant-design\"];\n    Constants.CODE_LANGUAGES = [\"mermaid\", \"echarts\", \"mindmap\", \"plantuml\", \"abc\", \"graphviz\", \"flowchart\", \"apache\",\n        \"js\", \"ts\", \"html\",\n        // common\n        \"properties\", \"apache\", \"bash\", \"c\", \"csharp\", \"cpp\", \"css\", \"coffeescript\", \"diff\", \"go\", \"xml\", \"http\",\n        \"json\", \"java\", \"javascript\", \"kotlin\", \"less\", \"lua\", \"makefile\", \"markdown\", \"nginx\", \"objectivec\", \"php\",\n        \"php-template\", \"perl\", \"plaintext\", \"python\", \"python-repl\", \"r\", \"ruby\", \"rust\", \"scss\", \"sql\", \"shell\",\n        \"swift\", \"ini\", \"typescript\", \"vbnet\", \"yaml\",\n        \"ada\", \"clojure\", \"dart\", \"erb\", \"fortran\", \"gradle\", \"haskell\", \"julia\", \"julia-repl\", \"lisp\", \"matlab\",\n        \"pgsql\", \"powershell\", \"sql_more\", \"stata\", \"cmake\", \"mathematica\"];\n    Constants.CDN = \"https://cdn.jsdelivr.net/npm/vditor@\" + \"3.8.5\";\n    Constants.MARKDOWN_OPTIONS = {\n        autoSpace: false,\n        codeBlockPreview: true,\n        fixTermTypo: false,\n        footnotes: true,\n        linkBase: \"\",\n        linkPrefix: \"\",\n        listStyle: false,\n        mark: false,\n        mathBlockPreview: true,\n        paragraphBeginningSpace: false,\n        sanitize: true,\n        toc: false,\n    };\n    Constants.HLJS_OPTIONS = {\n        enable: true,\n        lineNumber: false,\n        style: \"github\",\n    };\n    Constants.MATH_OPTIONS = {\n        engine: \"KaTeX\",\n        inlineDigit: false,\n        macros: {},\n    };\n    Constants.THEME_OPTIONS = {\n        current: \"light\",\n        list: {\n            \"ant-design\": \"Ant Design\",\n            \"dark\": \"Dark\",\n            \"light\": \"Light\",\n            \"wechat\": \"WeChat\",\n        },\n        path: Constants.CDN + \"/dist/css/content-theme\",\n    };\n    return Constants;\n}());\n\n\n\n/***/ }),\n\n/***/ 577:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"a\": () => (/* binding */ i18n)\n/* harmony export */ });\nvar i18n = {\n    en_US: {\n        \"alignCenter\": \"Center\",\n        \"alignLeft\": \"Left\",\n        \"alignRight\": \"Right\",\n        \"alternateText\": \"Alternate text\",\n        \"bold\": \"Blod\",\n        \"both\": \"editor & preview\",\n        \"check\": \"Task List\",\n        \"close\": \"Close\",\n        \"code\": \"Code Block\",\n        \"code-theme\": \"Code Block Theme Preview\",\n        \"column\": \"Column\",\n        \"comment\": \"Comment\",\n        \"confirm\": \"Confirm\",\n        \"content-theme\": \"Content Theme Preview\",\n        \"copied\": \"Copied\",\n        \"copy\": \"Copy\",\n        \"delete-column\": \"Delete Row\",\n        \"delete-row\": \"Delete Column\",\n        \"devtools\": \"DevTools\",\n        \"down\": \"Down\",\n        \"downloadTip\": \"The browser does not support the download function\",\n        \"edit\": \"Edit\",\n        \"edit-mode\": \"Toggle Edit Mode\",\n        \"emoji\": \"Emoji\",\n        \"export\": \"Export\",\n        \"fileTypeError\": \"file type is error\",\n        \"footnoteRef\": \"Footnote Ref\",\n        \"fullscreen\": \"Toggle Fullscreen\",\n        \"generate\": \"Generating\",\n        \"headings\": \"Headings\",\n        \"help\": \"Help\",\n        \"imageURL\": \"image URL\",\n        \"indent\": \"Indent\",\n        \"info\": \"Info\",\n        \"inline-code\": \"Inline Code\",\n        \"insert-after\": \"Insert line after\",\n        \"insert-before\": \"Insert line Before\",\n        \"insertColumnLeft\": \"Insert 1 left\",\n        \"insertColumnRight\": \"Insert 1 right\",\n        \"insertRowAbove\": \"Insert 1 above\",\n        \"insertRowBelow\": \"Insert 1 below\",\n        \"instantRendering\": \"Instant Rendering\",\n        \"italic\": \"Italic\",\n        \"language\": \"Language\",\n        \"line\": \"Line\",\n        \"link\": \"Link\",\n        \"linkRef\": \"Link Ref\",\n        \"list\": \"List\",\n        \"more\": \"More\",\n        \"nameEmpty\": \"Name is empty\",\n        \"ordered-list\": \"Order List\",\n        \"outdent\": \"Outdent\",\n        \"outline\": \"Outline\",\n        \"over\": \"over\",\n        \"performanceTip\": \"Real-time preview requires ${x}ms, you can close it\",\n        \"preview\": \"Preview\",\n        \"quote\": \"Quote\",\n        \"record\": \"Start Record/End Record\",\n        \"record-tip\": \"The device does not support recording\",\n        \"recording\": \"recording...\",\n        \"redo\": \"Redo\",\n        \"remove\": \"Remove\",\n        \"row\": \"Row\",\n        \"spin\": \"Spin\",\n        \"splitView\": \"Split View\",\n        \"strike\": \"Strike\",\n        \"table\": \"Table\",\n        \"textIsNotEmpty\": \"text(no empty)\",\n        \"title\": \"Title\",\n        \"tooltipText\": \"Tooltip text\",\n        \"undo\": \"Undo\",\n        \"up\": \"Up\",\n        \"update\": \"Update\",\n        \"upload\": \"Upload image or file\",\n        \"uploadError\": \"upload error\",\n        \"uploading\": \"uploading...\",\n        \"wysiwyg\": \"WYSIWYG\",\n    },\n    ja_JP: {\n        \"alignCenter\": \"\",\n        \"alignLeft\": \"\",\n        \"alignRight\": \"\",\n        \"alternateText\": \"\",\n        \"bold\": \"\",\n        \"both\": \" & \",\n        \"check\": \"\",\n        \"close\": \"\",\n        \"code\": \"\",\n        \"code-theme\": \"\",\n        \"column\": \"\",\n        \"comment\": \"\",\n        \"confirm\": \"\",\n        \"content-theme\": \"\",\n        \"copied\": \"\",\n        \"copy\": \"\",\n        \"delete-column\": \" \",\n        \"delete-row\": \" \",\n        \"devtools\": \"\",\n        \"down\": \"\",\n        \"downloadTip\": \"\",\n        \"edit\": \"\",\n        \"edit-mode\": \"\",\n        \"emoji\": \"\",\n        \"export\": \"\",\n        \"fileTypeError\": \"\",\n        \"footnoteRef\": \"\",\n        \"fullscreen\": \"\",\n        \"generate\": \"\",\n        \"headings\": \"\",\n        \"help\": \"\",\n        \"imageURL\": \" URL\",\n        \"indent\": \"\",\n        \"info\": \"\",\n        \"inline-code\": \"\",\n        \"insert-after\": \"\",\n        \"insert-before\": \"\",\n        \"insertColumnLeft\": \"\",\n        \"insertColumnRight\": \"\",\n        \"insertRowAbove\": \"\",\n        \"insertRowBelow\": \"\",\n        \"instantRendering\": \"\",\n        \"italic\": \"\",\n        \"language\": \"\",\n        \"line\": \"\",\n        \"link\": \"\",\n        \"linkRef\": \"\",\n        \"list\": \"\",\n        \"more\": \"\",\n        \"nameEmpty\": \"\",\n        \"ordered-list\": \"\",\n        \"outdent\": \"\",\n        \"outline\": \"\",\n        \"over\": \"\",\n        \"performanceTip\": \"${x}ms/\",\n        \"preview\": \"\",\n        \"quote\": \"\",\n        \"record\": \"/\",\n        \"record-tip\": \"\",\n        \"recording\": \"...\",\n        \"redo\": \"\",\n        \"remove\": \"\",\n        \"row\": \"\",\n        \"spin\": \"\",\n        \"splitView\": \"\",\n        \"strike\": \"\",\n        \"table\": \" \",\n        \"textIsNotEmpty\": \"(no empty)\",\n        \"title\": \"\",\n        \"tooltipText\": \"\",\n        \"undo\": \"\",\n        \"up\": \"\",\n        \"update\": \"\",\n        \"upload\": \"\",\n        \"uploadError\": \"\",\n        \"uploading\": \"\",\n        \"wysiwyg\": \"\",\n    },\n    ko_KR: {\n        \"alignCenter\": \"\",\n        \"alignLeft\": \"\",\n        \"alignRight\": \"\",\n        \"alternateText\": \" \",\n        \"bold\": \"\",\n        \"both\": \" & \",\n        \"check\": \"\",\n        \"close\": \"\",\n        \"code\": \"\",\n        \"code-theme\": \"\",\n        \"column\": \"\",\n        \"comment\": \"\",\n        \"confirm\": \"\",\n        \"content-theme\": \"\",\n        \"copied\": \"\",\n        \"copy\": \"\",\n        \"delete-column\": \" \",\n        \"delete-row\": \" \",\n        \"devtools\": \"\",\n        \"down\": \"\",\n        \"downloadTip\": \"    \",\n        \"edit\": \"\",\n        \"edit-mode\": \"\",\n        \"emoji\": \"\",\n        \"export\": \"\",\n        \"fileTypeError\": \".\",\n        \"footnoteRef\": \"\",\n        \"fullscreen\": \"\",\n        \"generate\": \"\",\n        \"headings\": \"\",\n        \"help\": \"\",\n        \"imageURL\": \" URL\",\n        \"indent\": \"\",\n        \"info\": \"\",\n        \"inline-code\": \"\",\n        \"insert-after\": \"  \",\n        \"insert-before\": \"  \",\n        \"insertColumnLeft\": \"  \",\n        \"insertColumnRight\": \"  \",\n        \"insertRowAbove\": \"  \",\n        \"insertRowBelow\": \"  \",\n        \"instantRendering\": \"\",\n        \"italic\": \"\",\n        \"language\": \"\",\n        \"line\": \"\",\n        \"link\": \"\",\n        \"linkRef\": \" \",\n        \"list\": \" \",\n        \"more\": \"\",\n        \"nameEmpty\": \" .\",\n        \"ordered-list\": \" \",\n        \"outdent\": \"\",\n        \"outline\": \"\",\n        \"over\": \"\",\n        \"performanceTip\": \"  ${x}ms  /     .\",\n        \"preview\": \"\",\n        \"quote\": \"\",\n        \"record\": \"/\",\n        \"record-tip\": \"  .\",\n        \"recording\": \"...\",\n        \"redo\": \"\",\n        \"remove\": \"\",\n        \"row\": \"\",\n        \"spin\": \"\",\n        \"splitView\": \"\",\n        \"strike\": \"\",\n        \"table\": \"\",\n        \"textIsNotEmpty\": \"(no empty)\",\n        \"title\": \"\",\n        \"tooltipText\": \"\",\n        \"undo\": \"\",\n        \"up\": \"\",\n        \"update\": \"\",\n        \"upload\": \" \",\n        \"uploadError\": \" \",\n        \"uploading\": \"...\",\n        \"wysiwyg\": \"\",\n    },\n    ru_RU: {\n        \"alignCenter\": \"  \",\n        \"alignLeft\": \"   \",\n        \"alignRight\": \"   \",\n        \"alternateText\": \" \",\n        \"bold\": \" \",\n        \"both\": \"  \",\n        \"check\": \" \",\n        \"close\": \"\",\n        \"code\": \" \",\n        \"code-theme\": \"   \",\n        \"column\": \" \",\n        \"comment\": \"\",\n        \"confirm\": \"\",\n        \"content-theme\": \"  \",\n        \"copied\": \"\",\n        \"copy\": \"\",\n        \"delete-column\": \" \",\n        \"delete-row\": \" \",\n        \"devtools\": \" \",\n        \"down\": \" \",\n        \"downloadTip\": \"    \",\n        \"edit\": \"\",\n        \"edit-mode\": \"  \",\n        \"emoji\": \"\",\n        \"export\": \"\",\n        \"fileTypeError\": \"  \",\n        \"footnoteRef\": \"\",\n        \"fullscreen\": \"   \",\n        \"generate\": \"\",\n        \"headings\": \"\",\n        \"help\": \"\",\n        \"imageURL\": \"  \",\n        \"indent\": \"\",\n        \"info\": \"  \",\n        \"inline-code\": \"  \",\n        \"insert-after\": \"    \",\n        \"insert-before\": \"    \",\n        \"insertColumnLeft\": \"  \",\n        \"insertColumnRight\": \"  \",\n        \"insertRowAbove\": \"  \",\n        \"insertRowBelow\": \"  \",\n        \"instantRendering\": \" \",\n        \"italic\": \"\",\n        \"language\": \"\",\n        \"line\": \"\",\n        \"link\": \"\",\n        \"linkRef\": \" \",\n        \"list\": \"\",\n        \"more\": \"\",\n        \"nameEmpty\": \" \",\n        \"ordered-list\": \" \",\n        \"outdent\": \"\",\n        \"outline\": \"\",\n        \"over\": \"\",\n        \"performanceTip\": \"      ${x},    \",\n        \"preview\": \"\",\n        \"quote\": \"\",\n        \"record\": \" / \",\n        \"record-tip\": \"   \",\n        \"recording\": \"...\",\n        \"redo\": \"\",\n        \"remove\": \"\",\n        \"row\": \" \",\n        \"spin\": \"\",\n        \"splitView\": \" \",\n        \"strike\": \" \",\n        \"table\": \"\",\n        \"textIsNotEmpty\": \" ()\",\n        \"title\": \"\",\n        \"tooltipText\": \"  \",\n        \"undo\": \"\",\n        \"up\": \" \",\n        \"update\": \"\",\n        \"upload\": \"   \",\n        \"uploadError\": \" \",\n        \"uploading\": \"...\",\n        \"wysiwyg\": \" WYSIWYG\",\n    },\n    zh_CN: {\n        \"alignCenter\": \"\",\n        \"alignLeft\": \"\",\n        \"alignRight\": \"\",\n        \"alternateText\": \"\",\n        \"bold\": \"\",\n        \"both\": \" & \",\n        \"check\": \"\",\n        \"close\": \"\",\n        \"code\": \"\",\n        \"code-theme\": \"\",\n        \"column\": \"\",\n        \"comment\": \"\",\n        \"confirm\": \"\",\n        \"content-theme\": \"\",\n        \"copied\": \"\",\n        \"copy\": \"\",\n        \"delete-column\": \"\",\n        \"delete-row\": \"\",\n        \"devtools\": \"\",\n        \"down\": \"\",\n        \"downloadTip\": \"\",\n        \"edit\": \"\",\n        \"edit-mode\": \"\",\n        \"emoji\": \"\",\n        \"export\": \"\",\n        \"fileTypeError\": \"\",\n        \"footnoteRef\": \"\",\n        \"fullscreen\": \"\",\n        \"generate\": \"\",\n        \"headings\": \"\",\n        \"help\": \"\",\n        \"imageURL\": \"\",\n        \"indent\": \"\",\n        \"info\": \"\",\n        \"inline-code\": \"\",\n        \"insert-after\": \"\",\n        \"insert-before\": \"\",\n        \"insertColumnLeft\": \"\",\n        \"insertColumnRight\": \"\",\n        \"insertRowAbove\": \"\",\n        \"insertRowBelow\": \"\",\n        \"instantRendering\": \"\",\n        \"italic\": \"\",\n        \"language\": \"\",\n        \"line\": \"\",\n        \"link\": \"\",\n        \"linkRef\": \"\",\n        \"list\": \"\",\n        \"more\": \"\",\n        \"nameEmpty\": \"\",\n        \"ordered-list\": \"\",\n        \"outdent\": \"\",\n        \"outline\": \"\",\n        \"over\": \"\",\n        \"performanceTip\": \" ${x}ms & \",\n        \"preview\": \"\",\n        \"quote\": \"\",\n        \"record\": \"/\",\n        \"record-tip\": \"\",\n        \"recording\": \"...\",\n        \"redo\": \"\",\n        \"remove\": \"\",\n        \"row\": \"\",\n        \"spin\": \"\",\n        \"splitView\": \"\",\n        \"strike\": \"\",\n        \"table\": \"\",\n        \"textIsNotEmpty\": \"\",\n        \"title\": \"\",\n        \"tooltipText\": \"\",\n        \"undo\": \"\",\n        \"up\": \"\",\n        \"update\": \"\",\n        \"upload\": \"\",\n        \"uploadError\": \"\",\n        \"uploading\": \"...\",\n        \"wysiwyg\": \"\",\n    },\n    zh_TW: {\n        \"alignCenter\": \"\",\n        \"alignLeft\": \"\",\n        \"alignRight\": \"\",\n        \"alternateText\": \"\",\n        \"bold\": \"\",\n        \"both\": \" & \",\n        \"check\": \"\",\n        \"close\": \"\",\n        \"code\": \"\",\n        \"code-theme\": \"\",\n        \"column\": \"\",\n        \"comment\": \"\",\n        \"confirm\": \"\",\n        \"content-theme\": \"\",\n        \"copied\": \"\",\n        \"copy\": \"\",\n        \"delete-column\": \"\",\n        \"delete-row\": \"\",\n        \"devtools\": \"\",\n        \"down\": \"\",\n        \"downloadTip\": \"\",\n        \"edit\": \"\",\n        \"edit-mode\": \"\",\n        \"emoji\": \"\",\n        \"export\": \"\",\n        \"fileTypeError\": \"\",\n        \"footnoteRef\": \"\",\n        \"fullscreen\": \"\",\n        \"generate\": \"\",\n        \"headings\": \"\",\n        \"help\": \"\",\n        \"imageURL\": \"\",\n        \"indent\": \"\",\n        \"info\": \"\",\n        \"inline-code\": \"\",\n        \"insert-after\": \"\",\n        \"insert-before\": \"\",\n        \"insertColumnLeft\": \"\",\n        \"insertColumnRight\": \"\",\n        \"insertRowAbove\": \"\",\n        \"insertRowBelow\": \"\",\n        \"instantRendering\": \"\",\n        \"italic\": \"\",\n        \"language\": \"\",\n        \"line\": \"\",\n        \"link\": \"\",\n        \"linkRef\": \"\",\n        \"list\": \"\",\n        \"more\": \"\",\n        \"nameEmpty\": \"\",\n        \"ordered-list\": \"\",\n        \"outdent\": \"\",\n        \"outline\": \"\",\n        \"over\": \"\",\n        \"performanceTip\": \" ${x}ms & \",\n        \"preview\": \"\",\n        \"quote\": \"\",\n        \"record\": \"/\",\n        \"record-tip\": \"\",\n        \"recording\": \"...\",\n        \"redo\": \"\",\n        \"remove\": \"\",\n        \"row\": \"\",\n        \"spin\": \"\",\n        \"splitView\": \"\",\n        \"strike\": \"\",\n        \"table\": \"\",\n        \"textIsNotEmpty\": \"\",\n        \"title\": \"\",\n        \"tooltipText\": \"\",\n        \"undo\": \"\",\n        \"up\": \"\",\n        \"update\": \"\",\n        \"upload\": \"\",\n        \"uploadError\": \"\",\n        \"uploading\": \"...\",\n        \"wysiwyg\": \"\",\n    }\n};\n\n\n/***/ }),\n\n/***/ 369:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": () => (/* binding */ abcRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar abcRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var abcElements = element.querySelectorAll(\".language-abc\");\n    if (abcElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/abcjs/abcjs_basic.min.js\", \"vditorAbcjsScript\").then(function () {\n            abcElements.forEach(function (item) {\n                if (item.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    item.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (item.getAttribute(\"data-processed\") === \"true\") {\n                    return;\n                }\n                ABCJS.renderAbc(item, item.textContent.trim());\n                item.style.overflowX = \"auto\";\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 726:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"p\": () => (/* binding */ chartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar chartRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var echartsElements = element.querySelectorAll(\".language-echarts\");\n    if (echartsElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            echartsElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = e.innerText.trim();\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    var option = JSON.parse(text);\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption(option);\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"echarts render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 23:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"O\": () => (/* binding */ codeRender)\n/* harmony export */ });\n/* harmony import */ var _i18n_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(577);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(769);\n\n\nvar codeRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    element.querySelectorAll(\"pre > code\").forEach(function (e, index) {\n        if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n            e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n            return;\n        }\n        if (e.classList.contains(\"language-mermaid\") || e.classList.contains(\"language-flowchart\") ||\n            e.classList.contains(\"language-echarts\") || e.classList.contains(\"language-mindmap\") ||\n            e.classList.contains(\"language-plantuml\") ||\n            e.classList.contains(\"language-abc\") || e.classList.contains(\"language-graphviz\") ||\n            e.classList.contains(\"language-math\")) {\n            return;\n        }\n        if (e.style.maxHeight.indexOf(\"px\") > -1) {\n            return;\n        }\n        //  https://github.com/b3log/vditor/issues/67\n        if (element.classList.contains(\"vditor-preview\") && index > 5) {\n            return;\n        }\n        var codeText = e.innerText;\n        if (e.classList.contains(\"highlight-chroma\")) {\n            var codeElement = document.createElement(\"code\");\n            codeElement.innerHTML = e.innerHTML;\n            codeElement.querySelectorAll(\".highlight-ln\").forEach(function (item) {\n                item.remove();\n            });\n            codeText = codeElement.innerText;\n        }\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-copy\";\n        divElement.innerHTML = \"<span aria-label=\\\"\" + _i18n_index__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].copy + \"\\\"\\nonmouseover=\\\"this.setAttribute('aria-label', '\" + _i18n_index__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].copy + \"')\\\"\\nclass=\\\"vditor-tooltipped vditor-tooltipped__w\\\"\\nonclick=\\\"this.previousElementSibling.select();document.execCommand('copy');\" +\n            (\"this.setAttribute('aria-label', '\" + _i18n_index__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].copied + \"')\\\"><svg><use xlink:href=\\\"#vditor-icon-copy\\\"></use></svg></span>\");\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_1__/* .code160to32 */ .X)(codeText);\n        divElement.insertAdjacentElement(\"afterbegin\", textarea);\n        e.before(divElement);\n        e.style.maxHeight = (window.outerHeight - 40) + \"px\";\n    });\n};\n\n\n/***/ }),\n\n/***/ 383:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ flowchartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar flowchartRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var flowchartElements = element.querySelectorAll(\".language-flowchart\");\n    if (flowchartElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/flowchart.js/flowchart.min.js\", \"vditorFlowchartScript\").then(function () {\n        flowchartElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\") {\n                return;\n            }\n            var flowchartObj = flowchart.parse(item.textContent);\n            item.innerHTML = \"\";\n            flowchartObj.drawSVG(item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 890:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": () => (/* binding */ graphvizRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar graphvizRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var graphvizElements = element.querySelectorAll(\".language-graphviz\");\n    if (graphvizElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/graphviz/viz.js\", \"vditorGraphVizScript\").then(function () {\n        graphvizElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            if (e.getAttribute(\"data-processed\") === \"true\" || e.textContent.trim() === \"\") {\n                return;\n            }\n            try {\n                var blob = new Blob([\"importScripts('\" + document.getElementById(\"vditorGraphVizScript\").src.replace(\"viz.js\", \"full.render.js\") + \"');\"], { type: \"application/javascript\" });\n                var url = window.URL || window.webkitURL;\n                var blobUrl = url.createObjectURL(blob);\n                var worker = new Worker(blobUrl);\n                new Viz({ worker: worker })\n                    .renderSVGElement(e.textContent).then(function (result) {\n                    e.innerHTML = result.outerHTML;\n                }).catch(function (error) {\n                    e.innerHTML = \"graphviz render error: <br>\" + error;\n                    e.className = \"vditor-reset--error\";\n                });\n            }\n            catch (e) {\n                console.error(\"graphviz error\", e);\n            }\n            e.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 93:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s\": () => (/* binding */ highlightRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\n\nvar highlightRender = function (hljsOption, element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var style = hljsOption.style;\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(style)) {\n        style = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\";\n    if (vditorHljsStyle && vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n    }\n    (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\", \"vditorHljsStyle\");\n    if (hljsOption.enable === false) {\n        return;\n    }\n    var codes = element.querySelectorAll(\"pre > code\");\n    if (codes.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/highlight.js/highlight.pack.js\", \"vditorHljsScript\").then(function () {\n        element.querySelectorAll(\"pre > code\").forEach(function (block) {\n            // ir & wysiwyg \n            if (block.parentElement.classList.contains(\"vditor-ir__marker--pre\") ||\n                block.parentElement.classList.contains(\"vditor-wysiwyg__pre\")) {\n                return;\n            }\n            if (block.classList.contains(\"language-mermaid\") || block.classList.contains(\"language-flowchart\") ||\n                block.classList.contains(\"language-echarts\") || block.classList.contains(\"language-mindmap\") ||\n                block.classList.contains(\"language-plantuml\") ||\n                block.classList.contains(\"language-abc\") || block.classList.contains(\"language-graphviz\") ||\n                block.classList.contains(\"language-math\")) {\n                return;\n            }\n            hljs.highlightElement(block);\n            if (!hljsOption.lineNumber) {\n                return;\n            }\n            block.classList.add(\"vditor-linenumber\");\n            var linenNumberTemp = block.querySelector(\".vditor-linenumber__temp\");\n            if (!linenNumberTemp) {\n                linenNumberTemp = document.createElement(\"div\");\n                linenNumberTemp.className = \"vditor-linenumber__temp\";\n                block.insertAdjacentElement(\"beforeend\", linenNumberTemp);\n            }\n            var whiteSpace = getComputedStyle(block).whiteSpace;\n            var isSoftWrap = false;\n            if (whiteSpace === \"pre-wrap\" || whiteSpace === \"pre-line\") {\n                isSoftWrap = true;\n            }\n            var lineNumberHTML = \"\";\n            var lineList = block.textContent.split(/\\r\\n|\\r|\\n/g);\n            lineList.pop();\n            lineList.map(function (line) {\n                var lineHeight = \"\";\n                if (isSoftWrap) {\n                    linenNumberTemp.textContent = line || \"\\n\";\n                    lineHeight = \" style=\\\"height:\" + linenNumberTemp.getBoundingClientRect().height + \"px\\\"\";\n                }\n                lineNumberHTML += \"<span\" + lineHeight + \"></span>\";\n            });\n            linenNumberTemp.style.display = \"none\";\n            lineNumberHTML = \"<span class=\\\"vditor-linenumber__rows\\\">\" + lineNumberHTML + \"</span>\";\n            block.insertAdjacentHTML(\"beforeend\", lineNumberHTML);\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 323:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ mathRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(769);\n\n\n\n\nvar mathRender = function (element, options) {\n    var mathElements = element.querySelectorAll(\".language-math\");\n    if (mathElements.length === 0) {\n        return;\n    }\n    var defaultOptions = {\n        cdn: _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN,\n        math: {\n            engine: \"KaTeX\",\n            inlineDigit: false,\n            macros: {},\n        },\n    };\n    if (options && options.math) {\n        options.math =\n            Object.assign({}, defaultOptions.math, options.math);\n    }\n    options = Object.assign({}, defaultOptions, options);\n    if (options.math.engine === \"KaTeX\") {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(options.cdn + \"/dist/js/katex/katex.min.css\", \"vditorKatexStyle\");\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(options.cdn + \"/dist/js/katex/katex.min.js\", \"vditorKatexScript\").then(function () {\n            mathElements.forEach(function (mathElement) {\n                if (mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (mathElement.getAttribute(\"data-math\")) {\n                    return;\n                }\n                var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_3__/* .code160to32 */ .X)(mathElement.textContent);\n                mathElement.setAttribute(\"data-math\", math);\n                try {\n                    mathElement.innerHTML = katex.renderToString(math, {\n                        displayMode: mathElement.tagName === \"DIV\",\n                        output: \"html\",\n                    });\n                }\n                catch (e) {\n                    mathElement.innerHTML = e.message;\n                    mathElement.className = \"language-math vditor-reset--error\";\n                }\n                mathElement.addEventListener(\"copy\", function (event) {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    var vditorMathElement = event.currentTarget.closest(\".language-math\");\n                    event.clipboardData.setData(\"text/html\", vditorMathElement.innerHTML);\n                    event.clipboardData.setData(\"text/plain\", vditorMathElement.getAttribute(\"data-math\"));\n                });\n            });\n        });\n    }\n    else if (options.math.engine === \"MathJax\") {\n        var chainAsync_1 = function (fns) {\n            if (fns.length === 0) {\n                return;\n            }\n            var curr = 0;\n            var last = fns[fns.length - 1];\n            var next = function () {\n                var fn = fns[curr++];\n                fn === last ? fn() : fn(next);\n            };\n            next();\n        };\n        if (!window.MathJax) {\n            window.MathJax = {\n                loader: {\n                    paths: { mathjax: options.cdn + \"/dist/js/mathjax\" },\n                },\n                startup: {\n                    typeset: false,\n                },\n                tex: {\n                    macros: options.math.macros,\n                },\n            };\n        }\n        // \n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScriptSync */ .J)(options.cdn + \"/dist/js/mathjax/tex-svg-full.js\", \"protyleMathJaxScript\");\n        var renderMath_1 = function (mathElement, next) {\n            var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_3__/* .code160to32 */ .X)(mathElement.textContent).trim();\n            var mathOptions = window.MathJax.getMetricsFor(mathElement);\n            mathOptions.display = mathElement.tagName === \"DIV\";\n            window.MathJax.tex2svgPromise(math, mathOptions).then(function (node) {\n                mathElement.innerHTML = \"\";\n                mathElement.setAttribute(\"data-math\", math);\n                mathElement.append(node);\n                window.MathJax.startup.document.clear();\n                window.MathJax.startup.document.updateDocument();\n                var errorTextElement = node.querySelector('[data-mml-node=\"merror\"]');\n                if (errorTextElement && errorTextElement.textContent.trim() !== \"\") {\n                    mathElement.innerHTML = errorTextElement.textContent.trim();\n                    mathElement.className = \"vditor-reset--error\";\n                }\n                if (next) {\n                    next();\n                }\n            });\n        };\n        window.MathJax.startup.promise.then(function () {\n            var chains = [];\n            var _loop_1 = function (i) {\n                var mathElement = mathElements[i];\n                if (!mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") &&\n                    !mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\") &&\n                    !mathElement.getAttribute(\"data-math\") && (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_3__/* .code160to32 */ .X)(mathElement.textContent).trim()) {\n                    chains.push(function (next) {\n                        if (i === mathElements.length - 1) {\n                            renderMath_1(mathElement);\n                        }\n                        else {\n                            renderMath_1(mathElement, next);\n                        }\n                    });\n                }\n            };\n            for (var i = 0; i < mathElements.length; i++) {\n                _loop_1(i);\n            }\n            chainAsync_1(chains);\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 207:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ mediaRender)\n/* harmony export */ });\nvar videoRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<video controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></video>\");\n    element.remove();\n};\nvar audioRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<audio controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></audio>\");\n    element.remove();\n};\nvar iframeRender = function (element, url) {\n    var youtubeMatch = url.match(/\\/\\/(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([\\w|-]{11})(?:(?:[\\?&]t=)(\\S+))?/);\n    var youkuMatch = url.match(/\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/);\n    var qqMatch = url.match(/\\/\\/v\\.qq\\.com\\/x\\/cover\\/.*\\/([^\\/]+)\\.html\\??.*/);\n    var coubMatch = url.match(/(?:www\\.|\\/\\/)coub\\.com\\/view\\/(\\w+)/);\n    var facebookMatch = url.match(/(?:www\\.|\\/\\/)facebook\\.com\\/([^\\/]+)\\/videos\\/([0-9]+)/);\n    var dailymotionMatch = url.match(/.+dailymotion.com\\/(video|hub)\\/(\\w+)\\?/);\n    var bilibiliMatch = url.match(/(?:www\\.|\\/\\/)bilibili\\.com\\/video\\/(\\w+)/);\n    var tedMatch = url.match(/(?:www\\.|\\/\\/)ted\\.com\\/talks\\/(\\w+)/);\n    if (youtubeMatch && youtubeMatch[1].length === 11) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//www.youtube.com/embed/\" + (youtubeMatch[1] +\n            (youtubeMatch[2] ? \"?start=\" + youtubeMatch[2] : \"\")) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (youkuMatch && youkuMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//player.youku.com/embed/\" + youkuMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (qqMatch && qqMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"https://v.qq.com/txp/iframe/player.html?vid=\" + qqMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (coubMatch && coubMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//coub.com/embed/\" + coubMatch[1] + \"?muted=false&autostart=false&originalSize=true&startWithHD=true\\\"></iframe>\");\n        element.remove();\n    }\n    else if (facebookMatch && facebookMatch[0]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.facebook.com/plugins/video.php?href=\" + encodeURIComponent(facebookMatch[0]) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (dailymotionMatch && dailymotionMatch[2]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.dailymotion.com/embed/video/\" + dailymotionMatch[2] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (bilibiliMatch && bilibiliMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//player.bilibili.com/player.html?bvid=\" + bilibiliMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (tedMatch && tedMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//embed.ted.com/talks/\" + tedMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n};\nvar mediaRender = function (element) {\n    if (!element) {\n        return;\n    }\n    element.querySelectorAll(\"a\").forEach(function (aElement) {\n        var url = aElement.getAttribute(\"href\");\n        if (!url) {\n            return;\n        }\n        if (url.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)) {\n            videoRender(aElement, url);\n        }\n        else if (url.match(/^.+.(mp3|wav|flac)$/)) {\n            audioRender(aElement, url);\n        }\n        else {\n            iframeRender(aElement, url);\n        }\n    });\n};\n\n\n/***/ }),\n\n/***/ 765:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ mermaidRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar mermaidRender = function (element, cdn, theme) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mermaidElements = element.querySelectorAll(\".language-mermaid\");\n    if (mermaidElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/mermaid/mermaid.min.js\", \"vditorMermaidScript\").then(function () {\n        var config = {\n            altFontFamily: \"sans-serif\",\n            flowchart: {\n                htmlLabels: true,\n                useMaxWidth: true,\n            },\n            fontFamily: \"sans-serif\",\n            gantt: {\n                leftPadding: 75,\n                rightPadding: 20,\n            },\n            securityLevel: \"loose\",\n            sequence: {\n                boxMargin: 8,\n                diagramMarginX: 8,\n                diagramMarginY: 8,\n                useMaxWidth: true,\n            },\n            startOnLoad: false,\n        };\n        if (theme === \"dark\") {\n            config.theme = \"dark\";\n            config.themeVariables = {\n                activationBkgColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                activationBorderColor: \"#81B1DB\",\n                activeTaskBkgColor: \"#81B1DB\",\n                activeTaskBorderColor: \"#ffffff\",\n                actorBkg: \"#1f2020\",\n                actorBorder: \"#81B1DB\",\n                actorLineColor: \"lightgrey\",\n                actorTextColor: \"lightgrey\",\n                altBackground: \"hsl(0, 0%, 40%)\",\n                altSectionBkgColor: \"#333\",\n                arrowheadColor: \"lightgrey\",\n                background: \"#333\",\n                border1: \"#81B1DB\",\n                border2: \"rgba(255, 255, 255, 0.25)\",\n                classText: \"#e0dfdf\",\n                clusterBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                clusterBorder: \"rgba(255, 255, 255, 0.25)\",\n                critBkgColor: \"#E83737\",\n                critBorderColor: \"#E83737\",\n                darkTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                defaultLinkColor: \"lightgrey\",\n                doneTaskBkgColor: \"lightgrey\",\n                doneTaskBorderColor: \"grey\",\n                edgeLabelBackground: \"hsl(0, 0%, 34.4117647059%)\",\n                errorBkgColor: \"#a44141\",\n                errorTextColor: \"#ddd\",\n                fillType0: \"#1f2020\",\n                fillType1: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                fillType2: \"hsl(244, 1.5873015873%, 12.3529411765%)\",\n                fillType3: \"hsl(244, 1.5873015873%, 28.3529411765%)\",\n                fillType4: \"hsl(116, 1.5873015873%, 12.3529411765%)\",\n                fillType5: \"hsl(116, 1.5873015873%, 28.3529411765%)\",\n                fillType6: \"hsl(308, 1.5873015873%, 12.3529411765%)\",\n                fillType7: \"hsl(308, 1.5873015873%, 28.3529411765%)\",\n                fontFamily: \"\\\"trebuchet ms\\\", verdana, arial\",\n                fontSize: \"16px\",\n                gridColor: \"lightgrey\",\n                labelBackground: \"#181818\",\n                labelBoxBkgColor: \"#1f2020\",\n                labelBoxBorderColor: \"#81B1DB\",\n                labelColor: \"#ccc\",\n                labelTextColor: \"lightgrey\",\n                lineColor: \"lightgrey\",\n                loopTextColor: \"lightgrey\",\n                mainBkg: \"#1f2020\",\n                mainContrastColor: \"lightgrey\",\n                nodeBkg: \"#1f2020\",\n                nodeBorder: \"#81B1DB\",\n                noteBkgColor: \"#fff5ad\",\n                noteBorderColor: \"rgba(255, 255, 255, 0.25)\",\n                noteTextColor: \"#1f2020\",\n                primaryBorderColor: \"hsl(180, 0%, 2.3529411765%)\",\n                primaryColor: \"#1f2020\",\n                primaryTextColor: \"#e0dfdf\",\n                secondBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryBorderColor: \"hsl(180, 0%, 18.3529411765%)\",\n                secondaryColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryTextColor: \"rgb(183.8476190475, 181.5523809523, 181.5523809523)\",\n                sectionBkgColor: \"hsl(52.9411764706, 28.813559322%, 58.431372549%)\",\n                sectionBkgColor2: \"#EAE8D9\",\n                sequenceNumberColor: \"black\",\n                signalColor: \"lightgrey\",\n                signalTextColor: \"lightgrey\",\n                taskBkgColor: \"hsl(180, 1.5873015873%, 35.3529411765%)\",\n                taskBorderColor: \"#ffffff\",\n                taskTextClickableColor: \"#003163\",\n                taskTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextDarkColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextLightColor: \"lightgrey\",\n                taskTextOutsideColor: \"lightgrey\",\n                tertiaryBorderColor: \"hsl(20, 0%, 2.3529411765%)\",\n                tertiaryColor: \"hsl(20, 1.5873015873%, 12.3529411765%)\",\n                tertiaryTextColor: \"rgb(222.9999999999, 223.6666666666, 223.9999999999)\",\n                textColor: \"#ccc\",\n                titleColor: \"#F9FFFE\",\n                todayLineColor: \"#DB5757\",\n            };\n        }\n        mermaid.initialize(config);\n        mermaidElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\" || item.textContent.trim() === \"\") {\n                return;\n            }\n            mermaid.init(undefined, item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 894:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ mindmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar mindmapRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mindmapElements = element.querySelectorAll(\".language-mindmap\");\n    if (mindmapElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            mindmapElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = e.getAttribute(\"data-code\");\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption({\n                        series: [\n                            {\n                                data: [JSON.parse(decodeURIComponent(text))],\n                                initialTreeDepth: -1,\n                                itemStyle: {\n                                    borderWidth: 0,\n                                    color: \"#4285f4\",\n                                },\n                                label: {\n                                    backgroundColor: \"#f6f8fa\",\n                                    borderColor: \"#d1d5da\",\n                                    borderRadius: 5,\n                                    borderWidth: 0.5,\n                                    color: \"#586069\",\n                                    lineHeight: 20,\n                                    offset: [-5, 0],\n                                    padding: [0, 5],\n                                    position: \"insideRight\",\n                                },\n                                lineStyle: {\n                                    color: \"#d1d5da\",\n                                    width: 1,\n                                },\n                                roam: true,\n                                symbol: function (value, params) {\n                                    var _a;\n                                    if ((_a = params === null || params === void 0 ? void 0 : params.data) === null || _a === void 0 ? void 0 : _a.children) {\n                                        return \"circle\";\n                                    }\n                                    else {\n                                        return \"path://\";\n                                    }\n                                },\n                                type: \"tree\",\n                            },\n                        ],\n                        tooltip: {\n                            trigger: \"item\",\n                            triggerOn: \"mousemove\",\n                        },\n                    });\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"mindmap render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 198:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"k\": () => (/* binding */ outlineRender)\n/* harmony export */ });\n/* harmony import */ var _util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(615);\n/* harmony import */ var _mathRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);\n\n\nvar outlineRender = function (contentElement, targetElement, vditor) {\n    var tocHTML = \"\";\n    var ids = [];\n    Array.from(contentElement.children).forEach(function (item, index) {\n        if ((0,_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByHeadings */ .W)(item)) {\n            if (vditor) {\n                var lastIndex = item.id.lastIndexOf(\"_\");\n                item.id = item.id.substring(0, lastIndex === -1 ? undefined : lastIndex) + \"_\" + index;\n            }\n            ids.push(item.id);\n            tocHTML += item.outerHTML.replace(\"<wbr>\", \"\");\n        }\n    });\n    if (tocHTML === \"\") {\n        targetElement.innerHTML = \"\";\n        return \"\";\n    }\n    var tempElement = document.createElement(\"div\");\n    if (vditor) {\n        vditor.lute.SetToC(true);\n        if (vditor.currentMode === \"wysiwyg\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else if (vditor.currentMode === \"ir\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else {\n            tempElement.innerHTML = vditor.lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        vditor.lute.SetToC(vditor.options.preview.markdown.toc);\n    }\n    else {\n        targetElement.classList.add(\"vditor-outline\");\n        var lute = Lute.New();\n        lute.SetToC(true);\n        tempElement.innerHTML = lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n    }\n    var headingsElement = tempElement.firstElementChild.querySelectorAll(\"li > span[data-target-id]\");\n    headingsElement.forEach(function (item, index) {\n        if (item.nextElementSibling && item.nextElementSibling.tagName === \"UL\") {\n            item.innerHTML = \"<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        else {\n            item.innerHTML = \"<svg></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        item.setAttribute(\"data-target-id\", ids[index]);\n    });\n    tocHTML = tempElement.firstElementChild.innerHTML;\n    if (headingsElement.length === 0) {\n        targetElement.innerHTML = \"\";\n        return tocHTML;\n    }\n    targetElement.innerHTML = tocHTML;\n    if (vditor) {\n        (0,_mathRender__WEBPACK_IMPORTED_MODULE_0__/* .mathRender */ .H)(targetElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    }\n    targetElement.firstElementChild.addEventListener(\"click\", function (event) {\n        var target = event.target;\n        while (target && !target.isEqualNode(targetElement)) {\n            if (target.classList.contains(\"vditor-outline__action\")) {\n                if (target.classList.contains(\"vditor-outline__action--close\")) {\n                    target.classList.remove(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:block\");\n                }\n                else {\n                    target.classList.add(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            }\n            else if (target.getAttribute(\"data-target-id\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                var idElement = document.getElementById(target.getAttribute(\"data-target-id\"));\n                if (!idElement) {\n                    return;\n                }\n                if (vditor) {\n                    if (vditor.options.height === \"auto\") {\n                        var windowScrollY = idElement.offsetTop + vditor.element.offsetTop;\n                        if (!vditor.options.toolbarConfig.pin) {\n                            windowScrollY += vditor.toolbar.element.offsetHeight;\n                        }\n                        window.scrollTo(window.scrollX, windowScrollY);\n                    }\n                    else {\n                        if (vditor.element.offsetTop < window.scrollY) {\n                            window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                        }\n                        if (vditor.preview.element.contains(contentElement)) {\n                            contentElement.parentElement.scrollTop = idElement.offsetTop;\n                        }\n                        else {\n                            contentElement.scrollTop = idElement.offsetTop;\n                        }\n                    }\n                }\n                else {\n                    window.scrollTo(window.scrollX, idElement.offsetTop);\n                }\n                break;\n            }\n            target = target.parentElement;\n        }\n    });\n    return tocHTML;\n};\n\n\n/***/ }),\n\n/***/ 583:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"B\": () => (/* binding */ plantumlRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar plantumlRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var plantumlElements = element.querySelectorAll(\".language-plantuml\");\n    if (plantumlElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/plantuml/plantuml-encoder.min.js\", \"vditorPlantumlScript\").then(function () {\n        plantumlElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            var text = e.textContent.trim();\n            if (!text) {\n                return;\n            }\n            try {\n                e.innerHTML = \"<img src=\\\"http://www.plantuml.com/plantuml/svg/~1\" + plantumlEncoder.encode(text) + \"\\\">\";\n            }\n            catch (error) {\n                e.className = \"vditor-reset--error\";\n                e.innerHTML = \"plantuml render error: <br>\" + error;\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 792:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ setLute)\n/* harmony export */ });\nvar setLute = function (options) {\n    var lute = Lute.New();\n    lute.PutEmojis(options.emojis);\n    lute.SetEmojiSite(options.emojiSite);\n    lute.SetHeadingAnchor(options.headingAnchor);\n    lute.SetInlineMathAllowDigitAfterOpenMarker(options.inlineMathDigit);\n    lute.SetAutoSpace(options.autoSpace);\n    lute.SetToC(options.toc);\n    lute.SetFootnotes(options.footnotes);\n    lute.SetFixTermTypo(options.fixTermTypo);\n    lute.SetVditorCodeBlockPreview(options.codeBlockPreview);\n    lute.SetVditorMathBlockPreview(options.mathBlockPreview);\n    lute.SetSanitize(options.sanitize);\n    lute.SetChineseParagraphBeginningSpace(options.paragraphBeginningSpace);\n    lute.SetRenderListStyle(options.listStyle);\n    lute.SetLinkBase(options.linkBase);\n    lute.SetLinkPrefix(options.linkPrefix);\n    lute.SetMark(options.mark);\n    if (options.lazyLoadImage) {\n        lute.SetImageLazyLoading(options.lazyLoadImage);\n    }\n    return lute;\n};\n\n\n/***/ }),\n\n/***/ 264:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E\": () => (/* binding */ previewImage)\n/* harmony export */ });\n/* harmony import */ var _i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(577);\n\nvar previewImage = function (oldImgElement, lang, theme) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (theme === void 0) { theme = \"classic\"; }\n    var oldImgRect = oldImgElement.getBoundingClientRect();\n    var height = 36;\n    document.body.insertAdjacentHTML(\"beforeend\", \"<div class=\\\"vditor vditor-img\" + (theme === \"dark\" ? \" vditor--dark\" : \"\") + \"\\\">\\n    <div class=\\\"vditor-img__bar\\\">\\n      <span class=\\\"vditor-img__btn\\\" data-deg=\\\"0\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-redo\\\"></use></svg>\\n        \" + _i18n__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].spin + \"\\n      </span>\\n      <span class=\\\"vditor-img__btn\\\"  onclick=\\\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n        X &nbsp;\" + _i18n__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].close + \"\\n      </span>\\n    </div>\\n    <div class=\\\"vditor-img__img\\\" onclick=\\\"this.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n      <img style=\\\"width: \" + oldImgElement.width + \"px;height:\" + oldImgElement.height + \"px;transform: translate3d(\" + oldImgRect.left + \"px, \" + (oldImgRect.top - height) + \"px, 0)\\\" src=\\\"\" + oldImgElement.getAttribute(\"src\") + \"\\\">\\n    </div>\\n</div>\");\n    document.body.style.overflow = \"hidden\";\n    // \n    var imgElement = document.querySelector(\".vditor-img img\");\n    var translate3d = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + Math.max(0, window.innerHeight - height - oldImgElement.naturalHeight) / 2 + \"px, 0)\";\n    setTimeout(function () {\n        imgElement.setAttribute(\"style\", \"transition: transform .3s ease-in-out;transform: \" + translate3d);\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n    // \n    var btnElement = document.querySelector(\".vditor-img__btn\");\n    btnElement.addEventListener(\"click\", function () {\n        var deg = parseInt(btnElement.getAttribute(\"data-deg\"), 10) + 90;\n        if ((deg / 90) % 2 === 1 && oldImgElement.naturalWidth > imgElement.parentElement.clientHeight) {\n            imgElement.style.transform = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + (oldImgElement.naturalWidth / 2 - oldImgElement.naturalHeight / 2) + \"px, 0) rotateZ(\" + deg + \"deg)\";\n        }\n        else {\n            imgElement.style.transform = translate3d + \" rotateZ(\" + deg + \"deg)\";\n        }\n        btnElement.setAttribute(\"data-deg\", deg.toString());\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n};\n\n\n/***/ }),\n\n/***/ 968:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ setCodeTheme)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\nvar setCodeTheme = function (codeTheme, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(codeTheme)) {\n        codeTheme = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + codeTheme + \".css\";\n    if (!vditorHljsStyle) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n    else if (vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 958:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (/* binding */ setContentTheme)\n/* harmony export */ });\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(946);\n\nvar setContentTheme = function (contentTheme, path) {\n    if (!contentTheme || !path) {\n        return;\n    }\n    var vditorContentTheme = document.getElementById(\"vditorContentTheme\");\n    var cssPath = path + \"/\" + contentTheme + \".css\";\n    if (!vditorContentTheme) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n    else if (vditorContentTheme.href !== cssPath) {\n        vditorContentTheme.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 228:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"J\": () => (/* binding */ addScriptSync),\n/* harmony export */   \"G\": () => (/* binding */ addScript)\n/* harmony export */ });\nvar addScriptSync = function (path, id) {\n    if (document.getElementById(id)) {\n        return false;\n    }\n    var xhrObj = new XMLHttpRequest();\n    xhrObj.open(\"GET\", path, false);\n    xhrObj.setRequestHeader(\"Accept\", \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01\");\n    xhrObj.send(\"\");\n    var scriptElement = document.createElement(\"script\");\n    scriptElement.type = \"text/javascript\";\n    scriptElement.text = xhrObj.responseText;\n    scriptElement.id = id;\n    document.head.appendChild(scriptElement);\n};\nvar addScript = function (path, id) {\n    return new Promise(function (resolve, reject) {\n        if (document.getElementById(id)) {\n            // \n            resolve();\n            return false;\n        }\n        var scriptElement = document.createElement(\"script\");\n        scriptElement.src = path;\n        scriptElement.async = true;\n        //  Chrome  js\n        document.head.appendChild(scriptElement);\n        scriptElement.onload = function () {\n            if (document.getElementById(id)) {\n                //  DOM  script \n                scriptElement.remove();\n                resolve();\n                return false;\n            }\n            scriptElement.id = id;\n            resolve();\n        };\n    });\n};\n\n\n/***/ }),\n\n/***/ 946:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c\": () => (/* binding */ addStyle)\n/* harmony export */ });\nvar addStyle = function (url, id) {\n    if (!document.getElementById(id)) {\n        var styleElement = document.createElement(\"link\");\n        styleElement.id = id;\n        styleElement.rel = \"stylesheet\";\n        styleElement.type = \"text/css\";\n        styleElement.href = url;\n        document.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n    }\n};\n\n\n/***/ }),\n\n/***/ 769:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ code160to32)\n/* harmony export */ });\nvar code160to32 = function (text) {\n    // \n    return text.replace(/\\u00a0/g, \" \");\n};\n\n\n/***/ }),\n\n/***/ 931:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G6\": () => (/* binding */ isSafari),\n/* harmony export */   \"vU\": () => (/* binding */ isFirefox),\n/* harmony export */   \"pK\": () => (/* binding */ accessLocalStorage),\n/* harmony export */   \"Le\": () => (/* binding */ getEventName),\n/* harmony export */   \"yl\": () => (/* binding */ isCtrl),\n/* harmony export */   \"ns\": () => (/* binding */ updateHotkeyTip),\n/* harmony export */   \"i7\": () => (/* binding */ isChrome)\n/* harmony export */ });\nvar isSafari = function () {\n    return navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1;\n};\nvar isFirefox = function () {\n    return navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n};\nvar accessLocalStorage = function () {\n    try {\n        return typeof localStorage !== \"undefined\";\n    }\n    catch (e) {\n        return false;\n    }\n};\n//  iPhone /\nvar getEventName = function () {\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1) {\n        return \"touchstart\";\n    }\n    else {\n        return \"click\";\n    }\n};\n//  mac  ctrl  meta\nvar isCtrl = function (event) {\n    if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0) {\n        // mac\n        if (event.metaKey && !event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n    else {\n        if (!event.metaKey && event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n};\n// MacWindows \nvar updateHotkeyTip = function (hotkey) {\n    if (/Mac/.test(navigator.platform) || navigator.platform === \"iPhone\") {\n        if (hotkey.indexOf(\"\") > -1 && isFirefox()) {\n            // Mac Firefox  shift key  windows \n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    else {\n        if (hotkey.startsWith(\"\")) {\n            hotkey = hotkey.replace(\"\", \"+\");\n        }\n        else if (hotkey.startsWith(\"\") && hotkey.substr(1, 1) !== \"\") {\n            hotkey = hotkey.replace(\"\", \"+\");\n        }\n        else {\n            hotkey = hotkey.replace(\"\", \"++\").replace(\"\", \"++\");\n        }\n        hotkey = hotkey.replace(\"\", \"Ctrl\").replace(\"\", \"Shift\")\n            .replace(\"\", \"Alt\");\n        if (hotkey.indexOf(\"Shift\") > -1) {\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    return hotkey;\n};\nvar isChrome = function () {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n\n\n/***/ }),\n\n/***/ 713:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JQ\": () => (/* binding */ hasTopClosestByClassName),\n/* harmony export */   \"E2\": () => (/* binding */ hasTopClosestByTag),\n/* harmony export */   \"O9\": () => (/* binding */ getTopList),\n/* harmony export */   \"a1\": () => (/* binding */ hasClosestByAttribute),\n/* harmony export */   \"F9\": () => (/* binding */ hasClosestBlock),\n/* harmony export */   \"lG\": () => (/* binding */ hasClosestByMatchTag),\n/* harmony export */   \"fb\": () => (/* binding */ hasClosestByClassName),\n/* harmony export */   \"DX\": () => (/* binding */ getLastNode)\n/* harmony export */ });\n/* unused harmony export hasTopClosestByAttribute */\n/* harmony import */ var _hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(615);\n\nvar hasTopClosestByClassName = function (element, className) {\n    var closest = hasClosestByClassName(element, className);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByClassName(closest.parentElement, className);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByAttribute = function (element, attr, value) {\n    var closest = hasClosestByAttribute(element, attr, value);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByAttribute(closest.parentElement, attr, value);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByTag = function (element, nodeName) {\n    var closest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(element, nodeName);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(closest.parentElement, nodeName);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar getTopList = function (element) {\n    var topUlElement = hasTopClosestByTag(element, \"UL\");\n    var topOlElement = hasTopClosestByTag(element, \"OL\");\n    var topListElement = topUlElement;\n    if (topOlElement && (!topUlElement || (topUlElement && topOlElement.contains(topUlElement)))) {\n        topListElement = topOlElement;\n    }\n    return topListElement;\n};\nvar hasClosestByAttribute = function (element, attr, value) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.getAttribute(attr) === value) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestBlock = function (element) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    var blockElement = hasClosestByAttribute(element, \"data-block\", \"0\");\n    if (blockElement) {\n        return blockElement;\n    }\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.tagName === \"H1\" ||\n            e.tagName === \"H2\" ||\n            e.tagName === \"H3\" ||\n            e.tagName === \"H4\" ||\n            e.tagName === \"H5\" ||\n            e.tagName === \"H6\" ||\n            e.tagName === \"P\" ||\n            e.tagName === \"BLOCKQUOTE\" ||\n            e.tagName === \"OL\" ||\n            e.tagName === \"UL\") {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByMatchTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName === nodeName) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByClassName = function (element, className) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.classList.contains(className)) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar getLastNode = function (node) {\n    while (node && node.lastChild) {\n        node = node.lastChild;\n    }\n    return node;\n};\n\n\n/***/ }),\n\n/***/ 615:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"S\": () => (/* binding */ hasClosestByTag),\n/* harmony export */   \"W\": () => (/* binding */ hasClosestByHeadings)\n/* harmony export */ });\n// NOTE:  method.ts  hasClosest.ts \nvar hasClosestByTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName.indexOf(nodeName) === 0) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByHeadings = function (element) {\n    var headingElement = hasClosestByTag(element, \"H\");\n    if (headingElement && headingElement.tagName.length === 2 && headingElement.tagName !== \"HR\") {\n        return headingElement;\n    }\n    return false;\n};\n\n\n/***/ }),\n\n/***/ 224:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"T\": () => (/* binding */ merge)\n/* harmony export */ });\nvar merge = function () {\n    var options = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        options[_i] = arguments[_i];\n    }\n    var target = {};\n    var merger = function (obj) {\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (Object.prototype.toString.call(obj[prop]) === \"[object Object]\") {\n                    target[prop] = merge(target[prop], obj[prop]);\n                }\n                else {\n                    target[prop] = obj[prop];\n                }\n            }\n        }\n    };\n    for (var i = 0; i < options.length; i++) {\n        merger(options[i]);\n    }\n    return target;\n};\n\n\n/***/ }),\n\n/***/ 187:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"zh\": () => (/* binding */ getEditorRange),\n/* harmony export */   \"Ny\": () => (/* binding */ getCursorPosition),\n/* harmony export */   \"Gb\": () => (/* binding */ selectIsEditor),\n/* harmony export */   \"Hc\": () => (/* binding */ setSelectionFocus),\n/* harmony export */   \"im\": () => (/* binding */ getSelectPosition),\n/* harmony export */   \"$j\": () => (/* binding */ setSelectionByPosition),\n/* harmony export */   \"ib\": () => (/* binding */ setRangeByWbr),\n/* harmony export */   \"oC\": () => (/* binding */ insertHTML)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _compatibility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);\n/* harmony import */ var _hasClosest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(713);\n\n\n\nvar getEditorRange = function (vditor) {\n    var range;\n    var element = vditor[vditor.currentMode].element;\n    if (getSelection().rangeCount > 0) {\n        range = getSelection().getRangeAt(0);\n        if (element.isEqualNode(range.startContainer) || element.contains(range.startContainer)) {\n            return range;\n        }\n    }\n    if (vditor[vditor.currentMode].range) {\n        return vditor[vditor.currentMode].range;\n    }\n    element.focus();\n    range = element.ownerDocument.createRange();\n    range.setStart(element, 0);\n    range.collapse(true);\n    return range;\n};\nvar getCursorPosition = function (editor) {\n    var range = window.getSelection().getRangeAt(0);\n    if (!editor.contains(range.startContainer) && !(0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByClassName */ .fb)(range.startContainer, \"vditor-panel--none\")) {\n        return {\n            left: 0,\n            top: 0,\n        };\n    }\n    var parentRect = editor.parentElement.getBoundingClientRect();\n    var cursorRect;\n    if (range.getClientRects().length === 0) {\n        if (range.startContainer.nodeType === 3) {\n            //  br  <p> \n            var parent_1 = range.startContainer.parentElement;\n            if (parent_1 && parent_1.getClientRects().length > 0) {\n                cursorRect = parent_1.getClientRects()[0];\n            }\n            else {\n                return {\n                    left: 0,\n                    top: 0,\n                };\n            }\n        }\n        else {\n            var children = range.startContainer.children;\n            if (children[range.startOffset] &&\n                children[range.startOffset].getClientRects().length > 0) {\n                // markdown \n                cursorRect = children[range.startOffset].getClientRects()[0];\n            }\n            else if (range.startContainer.childNodes.length > 0) {\n                // in table or code block\n                var cloneRange = range.cloneRange();\n                range.selectNode(range.startContainer.childNodes[Math.max(0, range.startOffset - 1)]);\n                cursorRect = range.getClientRects()[0];\n                range.setEnd(cloneRange.endContainer, cloneRange.endOffset);\n                range.setStart(cloneRange.startContainer, cloneRange.startOffset);\n            }\n            else {\n                cursorRect = range.startContainer.getClientRects()[0];\n            }\n            if (!cursorRect) {\n                var parentElement = range.startContainer.childNodes[range.startOffset];\n                while (!parentElement.getClientRects ||\n                    (parentElement.getClientRects && parentElement.getClientRects().length === 0)) {\n                    parentElement = parentElement.parentElement;\n                }\n                cursorRect = parentElement.getClientRects()[0];\n            }\n        }\n    }\n    else {\n        cursorRect = range.getClientRects()[0];\n    }\n    return {\n        left: cursorRect.left - parentRect.left,\n        top: cursorRect.top - parentRect.top,\n    };\n};\nvar selectIsEditor = function (editor, range) {\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return false;\n        }\n        else {\n            range = getSelection().getRangeAt(0);\n        }\n    }\n    var container = range.commonAncestorContainer;\n    return editor.isEqualNode(container) || editor.contains(container);\n};\nvar setSelectionFocus = function (range) {\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nvar getSelectPosition = function (selectElement, editorElement, range) {\n    var position = {\n        end: 0,\n        start: 0,\n    };\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return position;\n        }\n        range = window.getSelection().getRangeAt(0);\n    }\n    if (selectIsEditor(editorElement, range)) {\n        var preSelectionRange = range.cloneRange();\n        if (selectElement.childNodes[0] && selectElement.childNodes[0].childNodes[0]) {\n            preSelectionRange.setStart(selectElement.childNodes[0].childNodes[0], 0);\n        }\n        else {\n            preSelectionRange.selectNodeContents(selectElement);\n        }\n        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n        position.start = preSelectionRange.toString().length;\n        position.end = position.start + range.toString().length;\n    }\n    return position;\n};\nvar setSelectionByPosition = function (start, end, editor) {\n    var charIndex = 0;\n    var line = 0;\n    var pNode = editor.childNodes[line];\n    var foundStart = false;\n    var stop = false;\n    start = Math.max(0, start);\n    end = Math.max(0, end);\n    var range = editor.ownerDocument.createRange();\n    range.setStart(pNode || editor, 0);\n    range.collapse(true);\n    while (!stop && pNode) {\n        var nextCharIndex = charIndex + pNode.textContent.length;\n        if (!foundStart && start >= charIndex && start <= nextCharIndex) {\n            if (start === 0) {\n                range.setStart(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setStart(pNode.childNodes[0], start - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setStartBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setStartAfter(pNode);\n                }\n            }\n            foundStart = true;\n            if (start === end) {\n                stop = true;\n                break;\n            }\n        }\n        if (foundStart && end >= charIndex && end <= nextCharIndex) {\n            if (end === 0) {\n                range.setEnd(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setEnd(pNode.childNodes[0], end - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setEndBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setEndAfter(pNode);\n                }\n            }\n            stop = true;\n        }\n        charIndex = nextCharIndex;\n        pNode = editor.childNodes[++line];\n    }\n    if (!stop && editor.childNodes[line - 1]) {\n        range.setStartBefore(editor.childNodes[line - 1]);\n    }\n    setSelectionFocus(range);\n    return range;\n};\nvar setRangeByWbr = function (element, range) {\n    var wbrElement = element.querySelector(\"wbr\");\n    if (!wbrElement) {\n        return;\n    }\n    if (!wbrElement.previousElementSibling) {\n        if (wbrElement.previousSibling) {\n            // text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n        else if (wbrElement.nextSibling) {\n            if (wbrElement.nextSibling.nodeType === 3) {\n                // <wbr>text\n                range.setStart(wbrElement.nextSibling, 0);\n            }\n            else {\n                // <wbr><br> https://github.com/Vanessa219/vditor/issues/400\n                range.setStartBefore(wbrElement.nextSibling);\n            }\n        }\n        else {\n            // \n            range.setStart(wbrElement.parentElement, 0);\n        }\n    }\n    else {\n        if (wbrElement.previousElementSibling.isSameNode(wbrElement.previousSibling)) {\n            if (wbrElement.previousElementSibling.lastChild) {\n                // <em>text</em><wbr>\n                range.setStartBefore(wbrElement);\n                range.collapse(true);\n                setSelectionFocus(range);\n                // fix Chrome set range bug: **c**\n                if ((0,_compatibility__WEBPACK_IMPORTED_MODULE_2__/* .isChrome */ .i7)() && (wbrElement.previousElementSibling.tagName === \"EM\" ||\n                    wbrElement.previousElementSibling.tagName === \"STRONG\" ||\n                    wbrElement.previousElementSibling.tagName === \"S\")) {\n                    range.insertNode(document.createTextNode(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP));\n                    range.collapse(false);\n                }\n                wbrElement.remove();\n                return;\n            }\n            else {\n                // <br><wbr>\n                range.setStartAfter(wbrElement.previousElementSibling);\n            }\n        }\n        else {\n            // <em>text</em>text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n    }\n    range.collapse(true);\n    wbrElement.remove();\n    setSelectionFocus(range);\n};\nvar insertHTML = function (html, vditor) {\n    //  lute  p  p \n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var tempBlockElement = tempElement.querySelectorAll(\"p\");\n    if (tempBlockElement.length === 1 && !tempBlockElement[0].previousSibling && !tempBlockElement[0].nextSibling &&\n        vditor[vditor.currentMode].element.children.length > 0 && tempElement.firstElementChild.tagName === \"P\") {\n        html = tempBlockElement[0].innerHTML.trim();\n    }\n    var pasteElement = document.createElement(\"div\");\n    pasteElement.innerHTML = html;\n    var range = getEditorRange(vditor);\n    if (range.toString() !== \"\") {\n        vditor[vditor.currentMode].preventInput = true;\n        document.execCommand(\"delete\", false, \"\");\n    }\n    if (pasteElement.firstElementChild &&\n        pasteElement.firstElementChild.getAttribute(\"data-block\") === \"0\") {\n        // \n        pasteElement.lastElementChild.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        var blockElement = (0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestBlock */ .F9)(range.startContainer);\n        if (!blockElement) {\n            vditor[vditor.currentMode].element.insertAdjacentHTML(\"beforeend\", pasteElement.innerHTML);\n        }\n        else {\n            blockElement.insertAdjacentHTML(\"afterend\", pasteElement.innerHTML);\n        }\n        setRangeByWbr(vditor[vditor.currentMode].element, range);\n    }\n    else {\n        var pasteTemplate = document.createElement(\"template\");\n        pasteTemplate.innerHTML = html;\n        range.insertNode(pasteTemplate.content.cloneNode(true));\n        range.collapse(false);\n        setSelectionFocus(range);\n    }\n};\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src)\n});\n\n// EXTERNAL MODULE: ./src/assets/scss/index.scss\nvar scss = __webpack_require__(157);\n// EXTERNAL MODULE: ./src/method.ts + 4 modules\nvar method = __webpack_require__(857);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/util/code160to32.ts\nvar code160to32 = __webpack_require__(769);\n;// CONCATENATED MODULE: ./src/ts/markdown/getMarkdown.ts\n\nvar getMarkdown = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return (0,code160to32/* code160to32 */.X)((vditor.sv.element.textContent + \"\\n\").replace(/\\n\\n$/, \"\\n\"));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2Md(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2Md(vditor.ir.element.innerHTML);\n    }\n    return \"\";\n};\n\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n;// CONCATENATED MODULE: ./src/ts/devtools/index.ts\n\n\nvar DevTools = /** @class */ (function () {\n    function DevTools() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-devtools\";\n        this.element.innerHTML = '<div class=\"vditor-reset--error\"></div><div style=\"height: 100%;\"></div>';\n    }\n    DevTools.prototype.renderEchart = function (vditor) {\n        var _this = this;\n        if (vditor.devtools.element.style.display !== \"block\") {\n            return;\n        }\n        (0,addScript/* addScript */.G)(vditor.options.cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            if (!_this.ASTChart) {\n                _this.ASTChart = echarts.init(vditor.devtools.element.lastElementChild);\n            }\n            try {\n                _this.element.lastElementChild.style.display = \"block\";\n                _this.element.firstElementChild.innerHTML = \"\";\n                _this.ASTChart.setOption({\n                    series: [\n                        {\n                            data: JSON.parse(vditor.lute.RenderEChartsJSON(getMarkdown(vditor))),\n                            initialTreeDepth: -1,\n                            label: {\n                                align: \"left\",\n                                backgroundColor: \"rgba(68, 77, 86, .68)\",\n                                borderRadius: 3,\n                                color: \"#d1d5da\",\n                                fontSize: 12,\n                                lineHeight: 12,\n                                offset: [9, 12],\n                                padding: [2, 4, 2, 4],\n                                position: \"top\",\n                                verticalAlign: \"middle\",\n                            },\n                            lineStyle: {\n                                color: \"#4285f4\",\n                                type: \"curve\",\n                                width: 1,\n                            },\n                            orient: \"vertical\",\n                            roam: true,\n                            type: \"tree\",\n                        },\n                    ],\n                    toolbox: {\n                        bottom: 25,\n                        emphasis: {\n                            iconStyle: {\n                                color: \"#4285f4\",\n                            },\n                        },\n                        feature: {\n                            restore: {\n                                show: true,\n                            },\n                            saveAsImage: {\n                                show: true,\n                            },\n                        },\n                        right: 15,\n                        show: true,\n                    },\n                });\n                _this.ASTChart.resize();\n            }\n            catch (e) {\n                _this.element.lastElementChild.style.display = \"none\";\n                _this.element.firstElementChild.innerHTML = e;\n            }\n        });\n    };\n    return DevTools;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/compatibility.ts\nvar compatibility = __webpack_require__(931);\n;// CONCATENATED MODULE: ./src/ts/toolbar/setToolbar.ts\n\n\nvar removeCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.remove(\"vditor-menu--current\");\n        }\n    });\n};\nvar setCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.add(\"vditor-menu--current\");\n        }\n    });\n};\nvar enableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.remove(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar disableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.add(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar hideToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"none\";\n        }\n    });\n};\nvar showToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"block\";\n        }\n    });\n};\n// \"subToolbar\", \"hint\", \"popover\"\nvar hidePanel = function (vditor, panels, exceptElement) {\n    if (panels.includes(\"subToolbar\")) {\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint\").forEach(function (item) {\n            if (exceptElement && item.isEqualNode(exceptElement)) {\n                return;\n            }\n            item.style.display = \"none\";\n        });\n        if (vditor.toolbar.elements.emoji) {\n            vditor.toolbar.elements.emoji.lastElementChild.style.display = \"none\";\n        }\n    }\n    if (panels.includes(\"hint\")) {\n        vditor.hint.element.style.display = \"none\";\n    }\n    if (vditor.wysiwyg.popover && panels.includes(\"popover\")) {\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n};\nvar toggleSubMenu = function (vditor, panelElement, actionBtn, level) {\n    actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            return;\n        }\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint--current\").forEach(function (item) {\n            item.classList.remove(\"vditor-hint--current\");\n        });\n        if (panelElement.style.display === \"block\") {\n            panelElement.style.display = \"none\";\n        }\n        else {\n            hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"], actionBtn.parentElement.parentElement);\n            if (!actionBtn.classList.contains(\"vditor-tooltipped\")) {\n                actionBtn.classList.add(\"vditor-hint--current\");\n            }\n            panelElement.style.display = \"block\";\n            if (vditor.toolbar.element.getBoundingClientRect().right - actionBtn.getBoundingClientRect().right < 250) {\n                panelElement.classList.add(\"vditor-panel--left\");\n            }\n            else {\n                panelElement.classList.remove(\"vditor-panel--left\");\n            }\n        }\n    });\n};\n\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/hasClosestByHeadings.ts\nvar hasClosestByHeadings = __webpack_require__(615);\n;// CONCATENATED MODULE: ./src/ts/util/log.ts\nvar log = function (method, content, type, print) {\n    if (print) {\n        // @ts-ignore\n        console.log(method + \" - \" + type + \": \" + content);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n;// CONCATENATED MODULE: ./src/ts/util/processCode.ts\n\n\n\n\n\n\n\n\n\n\nvar processPasteCode = function (html, text, type) {\n    if (type === void 0) { type = \"sv\"; }\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var isCode = false;\n    if (tempElement.childElementCount === 1 &&\n        tempElement.lastElementChild.style.fontFamily.indexOf(\"monospace\") > -1) {\n        // VS Code\n        isCode = true;\n    }\n    var pres = tempElement.querySelectorAll(\"pre\");\n    if (tempElement.childElementCount === 1 && pres.length === 1\n        && pres[0].className !== \"vditor-wysiwyg\"\n        && pres[0].className !== \"vditor-sv\") {\n        // IDE\n        isCode = true;\n    }\n    if (html.indexOf('\\n<p class=\"p1\">') === 0) {\n        // Xcode\n        isCode = true;\n    }\n    if (tempElement.childElementCount === 1 && tempElement.firstElementChild.tagName === \"TABLE\" &&\n        tempElement.querySelector(\".line-number\") && tempElement.querySelector(\".line-content\")) {\n        // \n        isCode = true;\n    }\n    if (isCode) {\n        var code = text || html;\n        if (/\\n/.test(code) || pres.length === 1) {\n            if (type === \"wysiwyg\") {\n                return \"<div class=\\\"vditor-wysiwyg__block\\\" data-block=\\\"0\\\" data-type=\\\"code-block\\\"><pre><code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"<wbr></code></pre></div>\";\n            }\n            return \"\\n```\\n\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"\\n```\";\n        }\n        else {\n            if (type === \"wysiwyg\") {\n                return \"<code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"</code><wbr>\";\n            }\n            return \"`\" + code + \"`\";\n        }\n    }\n    return false;\n};\nvar processCodeRender = function (previewPanel, vditor) {\n    if (!previewPanel) {\n        return;\n    }\n    if (previewPanel.parentElement.getAttribute(\"data-type\") === \"html-block\") {\n        previewPanel.setAttribute(\"data-render\", \"1\");\n        return;\n    }\n    var language = previewPanel.firstElementChild.className.replace(\"language-\", \"\");\n    if (!language) {\n        return;\n    }\n    if (language === \"abc\") {\n        (0,abcRender/* abcRender */.Q)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"mermaid\") {\n        (0,mermaidRender/* mermaidRender */.i)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"flowchart\") {\n        (0,flowchartRender/* flowchartRender */.P)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"echarts\") {\n        (0,chartRender/* chartRender */.p)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"mindmap\") {\n        (0,mindmapRender/* mindmapRender */.P)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"plantuml\") {\n        (0,plantumlRender/* plantumlRender */.B)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"graphviz\") {\n        (0,graphvizRender/* graphvizRender */.v)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"math\") {\n        (0,mathRender/* mathRender */.H)(previewPanel, { cdn: vditor.options.cdn, math: vditor.options.preview.math });\n    }\n    else {\n        (0,highlightRender/* highlightRender */.s)(Object.assign({}, vditor.options.preview.hljs), previewPanel, vditor.options.cdn);\n        (0,codeRender/* codeRender */.O)(previewPanel, vditor.options.lang);\n    }\n    previewPanel.setAttribute(\"data-render\", \"1\");\n};\n\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/util/toc.ts\n\n\n\n\nvar renderToc = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var tocHTML = vditor.outline.render(vditor);\n    if (tocHTML === \"\") {\n        tocHTML = \"[ToC]\";\n    }\n    editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n        item.innerHTML = tocHTML;\n        (0,mathRender/* mathRender */.H)(item, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    });\n};\nvar clickToc = function (event, vditor) {\n    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n        var headingElement = vditor[vditor.currentMode].element.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n        if (headingElement) {\n            if (vditor.options.height === \"auto\") {\n                var windowScrollY = headingElement.offsetTop + vditor.element.offsetTop;\n                if (!vditor.options.toolbarConfig.pin) {\n                    windowScrollY += vditor.toolbar.element.offsetHeight;\n                }\n                window.scrollTo(window.scrollX, windowScrollY);\n            }\n            else {\n                if (vditor.element.offsetTop < window.scrollY) {\n                    window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                }\n                vditor[vditor.currentMode].element.scrollTop = headingElement.offsetTop;\n            }\n        }\n        return;\n    }\n};\nvar keydownToc = function (blockElement, vditor, event, range) {\n    // toc \n    if (blockElement.previousElementSibling &&\n        blockElement.previousElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Backspace\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start === 0) {\n            blockElement.previousElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockElement, blockElement.previousElementSibling)) {\n            return true;\n        }\n    }\n    // toc \n    if (blockElement.nextElementSibling &&\n        blockElement.nextElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Delete\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start\n                >= blockElement.textContent.trimRight().length) {\n            blockElement.nextElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockElement, blockElement.nextElementSibling)) {\n            return true;\n        }\n    }\n    // toc \n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-toc\");\n        if (tocElement) {\n            tocElement.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/input.ts\n\n\n\n\n\n\n\n\n\nvar input = function (vditor, range, ignoreSpace, event) {\n    if (ignoreSpace === void 0) { ignoreSpace = false; }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    // \n    if (blockElement && !ignoreSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\") {\n        if ((isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling) ||\n            isHeadingMD(blockElement.innerHTML)) {\n            return;\n        }\n        // \n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n        // \n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // \n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                //  tab  https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        // \n        var endSpace = true;\n        for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n            if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                endSpace = false;\n                break;\n            }\n        }\n        if (startSpace) {\n            return;\n        }\n        if (endSpace) {\n            var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker\");\n            if (markerElement) {\n                // inline marker space https://github.com/Vanessa219/vditor/issues/239\n            }\n            else {\n                var previousNode = range.startContainer.previousSibling;\n                if (previousNode && previousNode.nodeType !== 3 && previousNode.classList.contains(\"vditor-ir__node--expand\")) {\n                    // FireFox https://github.com/Vanessa219/vditor/issues/239\n                    previousNode.classList.remove(\"vditor-ir__node--expand\");\n                }\n                return;\n            }\n        }\n    }\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    if (!blockElement) {\n        //  innerHTML\n        blockElement = vditor.ir.element;\n    }\n    // document.exeComment insertHTML  wbr\n    if (!blockElement.querySelector(\"wbr\")) {\n        var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n        if (previewRenderElement) {\n            previewRenderElement.previousElementSibling.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        }\n        else {\n            range.insertNode(document.createElement(\"wbr\"));\n        }\n    }\n    // \n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n        // \n        blockElement = vditor.ir.element;\n    }\n    var isIRElement = blockElement.isEqualNode(vditor.ir.element);\n    var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n    var html = \"\";\n    if (!isIRElement) {\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n        // \n        var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (topListElement) {\n            blockElement = topListElement;\n        }\n        //  > ---  front-matter blockquote  blockquoteblockquote \n        if (blockquoteElement && (!topListElement || (topListElement && !blockquoteElement.contains(topListElement)))) {\n            blockElement = blockquoteElement;\n        }\n        // \n        if (footnoteElement) {\n            blockElement = footnoteElement;\n        }\n        html = blockElement.outerHTML;\n        if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n            // \n            var listPrevElement = blockElement.previousElementSibling;\n            var listNextElement = blockElement.nextElementSibling;\n            if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                html = listPrevElement.outerHTML + html;\n                listPrevElement.remove();\n            }\n            if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                html = html + listNextElement.outerHTML;\n                listNextElement.remove();\n            }\n            // firefox  list item https://github.com/Vanessa219/vditor/issues/194\n            html = html.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n        }\n        else if (blockElement.previousElementSibling &&\n            blockElement.previousElementSibling.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") !== \"\" &&\n            event && event.inputType === \"insertParagraph\") {\n            // \n            html = blockElement.previousElementSibling.outerHTML + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // \n        vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n        // \n        vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n    }\n    else {\n        html = blockElement.innerHTML;\n    }\n    log(\"SpinVditorIRDOM\", html, \"argument\", vditor.options.debugger);\n    html = vditor.lute.SpinVditorIRDOM(html);\n    log(\"SpinVditorIRDOM\", html, \"result\", vditor.options.debugger);\n    if (isIRElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n        //  tip\n        if (footnoteElement) {\n            var footnoteItemElement = (0,hasClosest/* hasClosestByAttribute */.a1)(vditor.ir.element.querySelector(\"wbr\"), \"data-type\", \"footnotes-def\");\n            if (footnoteItemElement) {\n                var footnoteItemText = footnoteItemElement.textContent;\n                var marker = footnoteItemText.substring(1, footnoteItemText.indexOf(\"]:\"));\n                var footnoteRefElement = vditor.ir.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + marker + \"\\\"]\");\n                if (footnoteRefElement) {\n                    footnoteRefElement.setAttribute(\"aria-label\", footnoteItemText.substr(marker.length + 3).trim().substr(0, 24));\n                }\n            }\n        }\n    }\n    //  linkref \n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item;\n        }\n        else {\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n    }\n    // \n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item;\n        }\n        else {\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n    });\n    renderToc(vditor);\n    process_processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/hotKey.ts\n\n//  [] / [] / [] / [] / Tab / []\nvar matchHotKey = function (hotKey, event) {\n    if (hotKey === \"\") {\n        return false;\n    }\n    // []\n    if (hotKey.indexOf(\"\") === -1 && hotKey.indexOf(\"\") === -1 && hotKey.indexOf(\"\") === -1) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.code === hotKey) {\n            return true;\n        }\n        return false;\n    }\n    //  Tab\n    if (hotKey === \"Tab\") {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.shiftKey && event.code === \"Tab\") {\n            return true;\n        }\n        return false;\n    }\n    var hotKeys = hotKey.split(\"\");\n    if (hotKey.startsWith(\"\")) {\n        //  [] / []\n        var keyCode = hotKeys.length === 3 ? hotKeys[2] : hotKeys[1];\n        if ((hotKeys.length === 3 ? (0,compatibility/* isCtrl */.yl)(event) : !(0,compatibility/* isCtrl */.yl)(event)) && event.altKey && !event.shiftKey &&\n            event.code === (/^[0-9]$/.test(keyCode) ? \"Digit\" : \"Key\") + keyCode) {\n            return true;\n        }\n        return false;\n    }\n    //  [] / []\n    if (hotKey === \"Enter\") {\n        hotKeys = [\"\", \"Enter\"];\n    }\n    var hasShift = hotKeys.length > 2 && (hotKeys[0] === \"\");\n    var key = (hasShift ? hotKeys[2] : hotKeys[1]);\n    if (hasShift && ((0,compatibility/* isFirefox */.vU)() || !/Mac/.test(navigator.platform))) {\n        if (key === \"-\") {\n            key = \"_\";\n        }\n        else if (key === \"=\") {\n            key = \"+\";\n        }\n    }\n    if ((0,compatibility/* isCtrl */.yl)(event) && event.key.toLowerCase() === key.toLowerCase() && !event.altKey\n        && ((!hasShift && !event.shiftKey) || (hasShift && event.shiftKey))) {\n        return true;\n    }\n    return false;\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/expandMarker.ts\n\n\nvar nextIsNode = function (range) {\n    var startContainer = range.startContainer;\n    if (startContainer.nodeType === 3 && startContainer.nodeValue.length !== range.startOffset) {\n        return false;\n    }\n    var nextNode = startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (!nextNode) {\n        // *em*|**string**\n        var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker\");\n        if (markerElement && !markerElement.nextSibling) {\n            var parentNextNode = startContainer.parentElement.parentElement.nextSibling;\n            if (parentNextNode && parentNextNode.nodeType !== 3 &&\n                parentNextNode.classList.contains(\"vditor-ir__node\")) {\n                return parentNextNode;\n            }\n        }\n        return false;\n    }\n    else if (nextNode && nextNode.nodeType !== 3 && nextNode.classList.contains(\"vditor-ir__node\") &&\n        !nextNode.getAttribute(\"data-block\")) {\n        // test|*em*\n        return nextNode;\n    }\n    return false;\n};\nvar previousIsNode = function (range) {\n    var startContainer = range.startContainer;\n    var previousNode = startContainer.previousSibling;\n    if (startContainer.nodeType === 3 && range.startOffset === 0 && previousNode && previousNode.nodeType !== 3 &&\n        // *em*|text\n        previousNode.classList.contains(\"vditor-ir__node\") && !previousNode.getAttribute(\"data-block\")) {\n        return previousNode;\n    }\n    return false;\n};\nvar expandMarker = function (range, vditor) {\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    var nodeElement = (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.startContainer, \"vditor-ir__node\");\n    var nodeElementEnd = !range.collapsed && (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.endContainer, \"vditor-ir__node\");\n    //  nodeElement \n    if (!range.collapsed && (!nodeElement || nodeElement !== nodeElementEnd)) {\n        return;\n    }\n    if (nodeElement) {\n        nodeElement.classList.add(\"vditor-ir__node--expand\");\n        nodeElement.classList.remove(\"vditor-ir__node--hidden\");\n        // https://github.com/Vanessa219/vditor/issues/615 safari\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    var nextNode = nextIsNode(range);\n    if (nextNode) {\n        nextNode.classList.add(\"vditor-ir__node--expand\");\n        nextNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n    var previousNode = previousIsNode(range);\n    if (previousNode) {\n        previousNode.classList.add(\"vditor-ir__node--expand\");\n        previousNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processKeydown = function (vditor, event) {\n    vditor.ir.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    //  undo \n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // \n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    // \n    var newlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-newline\", \"1\");\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.key === \"Enter\" && newlineElement\n        && range.startOffset < newlineElement.textContent.length) {\n        var beforeMarkerElement = newlineElement.previousElementSibling;\n        if (beforeMarkerElement) {\n            range.insertNode(document.createTextNode(beforeMarkerElement.textContent));\n            range.collapse(false);\n        }\n        var afterMarkerElement = newlineElement.nextSibling;\n        if (afterMarkerElement) {\n            range.insertNode(document.createTextNode(afterMarkerElement.textContent));\n            range.collapse(true);\n        }\n    }\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md \n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // \n    var preRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker--pre\");\n    if (preRenderElement && preRenderElement.tagName === \"PRE\") {\n        var codeRenderElement = preRenderElement.firstChild;\n        if (fixCodeBlock(vditor, event, preRenderElement, range)) {\n            return true;\n        }\n        // \n        if ((codeRenderElement.getAttribute(\"data-type\") === \"math-block\"\n            || codeRenderElement.getAttribute(\"data-type\") === \"html-block\") &&\n            insertBeforeBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n        // /table \n        if (insertAfterBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n    }\n    // \n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (event.key === \"Enter\" || event.key === \"Tab\") {\n            range.selectNodeContents(preBeforeElement.nextElementSibling.firstChild);\n            range.collapse(true);\n            event.preventDefault();\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n        if (event.key === \"Backspace\") {\n            var start = (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start;\n            if (start === 1) { // \n                range.setStart(startContainer, 0);\n            }\n            if (start === 2) { // \n                vditor.hint.recentLanguage = \"\";\n            }\n        }\n        if (insertBeforeBlock(vditor, event, range, preBeforeElement, preBeforeElement.parentElement)) {\n            // \n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n    }\n    // table\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (event.key.indexOf(\"Arrow\") > -1 && cellElement) {\n        var tableElement = isFirstCell(cellElement);\n        if (tableElement && insertBeforeBlock(vditor, event, range, cellElement, tableElement)) {\n            return true;\n        }\n        var table2Element = isLastCell(cellElement);\n        if (table2Element && insertAfterBlock(vditor, event, range, cellElement, table2Element)) {\n            return true;\n        }\n    }\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        // enter++: \n        if (matchHotKey(\"=\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length > 1) {\n                process_processHeading(vditor, headingMarkerElement.textContent.substr(1));\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: \n        if (matchHotKey(\"-\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length < 6) {\n                process_processHeading(vditor, headingMarkerElement.textContent.trim() + \"# \");\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement && blockElement.previousElementSibling\n            && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\"\n            && (blockElement.previousElementSibling.getAttribute(\"data-type\") === \"code-block\" ||\n                blockElement.previousElementSibling.getAttribute(\"data-type\") === \"math-block\")) {\n            var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n            if (rangeStart === 0 || (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                //  keyup \n                range.selectNodeContents(blockElement.previousElementSibling.querySelector(\".vditor-ir__marker--pre code\"));\n                range.collapse(false);\n                expandMarker(range, vditor);\n                if (blockElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    // \n                    blockElement.remove();\n                    process_processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n        // marker \n        if (headingElement) {\n            var headingLength = headingElement.firstElementChild.textContent.length;\n            if ((0,selection/* getSelectPosition */.im)(headingElement, vditor.ir.element).start === headingLength) {\n                range.setStart(headingElement.firstElementChild.firstChild, headingLength - 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n    }\n    if ((event.key === \"ArrowUp\" || event.key === \"ArrowDown\") && blockElement) {\n        // https://github.com/Vanessa219/vditor/issues/358\n        blockElement.querySelectorAll(\".vditor-ir__node\").forEach(function (item) {\n            if (!item.contains(startContainer)) {\n                item.classList.add(\"vditor-ir__node--hidden\");\n            }\n        });\n        if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n            return true;\n        }\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n;// CONCATENATED MODULE: ./src/ts/sv/inputEvent.ts\n\n\n\n\nvar inputEvent = function (vditor, event) {\n    var _a;\n    var range = getSelection().getRangeAt(0).cloneRange();\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    //  lute \n    if (blockElement && event && (event.inputType === \"deleteContentBackward\" || event.data === \" \")) {\n        // \n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start;\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // \n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                //  tab  https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        if (startSpace) {\n            processAfterRender(vditor);\n            return;\n        }\n        if (event.inputType === \"deleteContentBackward\") {\n            // https://github.com/Vanessa219/vditor/issues/584  marker \n            var codeBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-open-marker\") ||\n                (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-close-marker\");\n            if (codeBlockMarkerElement) {\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-close-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-open-marker\");\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-open-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-close-marker\", false);\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/877 \n            var mathBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"math-block-open-marker\");\n            if (mathBlockMarkerElement) {\n                var mathBlockCloseElement = mathBlockMarkerElement.nextElementSibling.nextElementSibling;\n                if (mathBlockCloseElement && mathBlockCloseElement.getAttribute(\"data-type\") === \"math-block-close-marker\") {\n                    mathBlockCloseElement.remove();\n                    processAfterRender(vditor);\n                }\n                return;\n            }\n            blockElement.querySelectorAll('[data-type=\"code-block-open-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            blockElement.querySelectorAll('[data-type=\"code-block-close-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            // \n            var headingElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"heading-marker\");\n            if (headingElement && headingElement.textContent.indexOf(\"#\") === -1) {\n                processAfterRender(vditor);\n                return;\n            }\n        }\n        //  format \n        if ((event.data === \" \" || event.inputType === \"deleteContentBackward\") &&\n            ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"padding\") // b  [> 1. a\\n>   b]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\") //  [* 1\\n* ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\") //  [* [ ] ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\") //  [> ]\n            )) {\n            processAfterRender(vditor);\n            return;\n        }\n    }\n    if (blockElement && blockElement.textContent.trimRight() === \"$$\") {\n        // \n        processAfterRender(vditor);\n        return;\n    }\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    if (((_a = blockElement.firstElementChild) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"link-ref-defs-block\") {\n        // \n        blockElement = vditor.sv.element;\n    }\n    if ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-link\")) {\n        // \n        blockElement = vditor.sv.element;\n    }\n    // \n    if (blockElement.textContent.indexOf(Lute.Caret) === -1) {\n        //  Caret\n        range.insertNode(document.createTextNode(Lute.Caret));\n    }\n    // \n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    blockElement.querySelectorAll(\"font\").forEach(function (item) {\n        item.outerHTML = item.innerHTML;\n    });\n    var html = blockElement.textContent;\n    var isSVElement = blockElement.isEqualNode(vditor.sv.element);\n    if (isSVElement) {\n        html = blockElement.textContent;\n    }\n    else {\n        // \n        if (blockElement.previousElementSibling) {\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (blockElement.previousElementSibling && html.indexOf(\"---\\n\") === 0) {\n            //  yaml-front \n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // \n        vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n        // \n        vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n    }\n    html = processSpinVditorSVDOM(html, vditor);\n    if (isSVElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item.parentElement;\n        }\n        else {\n            firstLinkRefDefElement.lastElementChild.remove();\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstLinkRefDefElement);\n    }\n    // \n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item.parentElement;\n        }\n        else {\n            firstFootnoteElement.lastElementChild.remove();\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstFootnoteElement);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n    processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/processKeydown.ts\n\n\n\n\n\n\n\nvar processKeydown_processKeydown = function (vditor, event) {\n    var _a, _b, _c, _d, _e;\n    vditor.sv.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    // \n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\") {\n        return false;\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var textElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"text\");\n    // blockquote\n    var blockquoteMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\");\n    if (!blockquoteMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        textElement.previousElementSibling.getAttribute(\"data-type\") === \"blockquote-marker\") {\n        blockquoteMarkerElement = textElement.previousElementSibling;\n    }\n    //  blockquote marker \n    if (blockquoteMarkerElement) {\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey &&\n            blockquoteMarkerElement.nextElementSibling.textContent.trim() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(blockquoteMarkerElement, vditor.sv.element, range).start ===\n                blockquoteMarkerElement.textContent.length) {\n            if (((_a = blockquoteMarkerElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"padding\") {\n                //  BQ \n                blockquoteMarkerElement.previousElementSibling.setAttribute(\"data-action\", \"enter-remove\");\n            }\n            blockquoteMarkerElement.remove();\n            processAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // list item\n    var listMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\");\n    var taskMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\");\n    var listLastMarkerElement = listMarkerElement;\n    if (!listLastMarkerElement) {\n        if (taskMarkerElement && taskMarkerElement.nextElementSibling.getAttribute(\"data-type\") !== \"task-marker\") {\n            listLastMarkerElement = taskMarkerElement;\n        }\n    }\n    if (!listLastMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        (textElement.previousElementSibling.getAttribute(\"data-type\") === \"li-marker\" ||\n            textElement.previousElementSibling.getAttribute(\"data-type\") === \"task-marker\")) {\n        listLastMarkerElement = textElement.previousElementSibling;\n    }\n    if (listLastMarkerElement) {\n        var startIndex = (0,selection/* getSelectPosition */.im)(listLastMarkerElement, vditor.sv.element, range).start;\n        var isTask = listLastMarkerElement.getAttribute(\"data-type\") === \"task-marker\";\n        var listFirstMarkerElement = listLastMarkerElement;\n        if (isTask) {\n            listFirstMarkerElement = listLastMarkerElement.previousElementSibling.previousElementSibling\n                .previousElementSibling;\n        }\n        if (startIndex === listLastMarkerElement.textContent.length) {\n            // \n            if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n                listLastMarkerElement.nextElementSibling.textContent.trim() === \"\") {\n                if (((_b = listFirstMarkerElement.previousElementSibling) === null || _b === void 0 ? void 0 : _b.getAttribute(\"data-type\")) === \"padding\") {\n                    listFirstMarkerElement.previousElementSibling.remove();\n                    inputEvent(vditor);\n                }\n                else {\n                    if (isTask) {\n                        listFirstMarkerElement.remove();\n                        listLastMarkerElement.previousElementSibling.previousElementSibling.remove();\n                        listLastMarkerElement.previousElementSibling.remove();\n                    }\n                    listLastMarkerElement.nextElementSibling.remove();\n                    listLastMarkerElement.remove();\n                    processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n            //  marker  tab \n            if (event.key === \"Tab\") {\n                listFirstMarkerElement.insertAdjacentHTML(\"beforebegin\", \"<span data-type=\\\"padding\\\">\" + listFirstMarkerElement.textContent.replace(/\\S/g, \" \") + \"</span>\");\n                if (/^\\d/.test(listFirstMarkerElement.textContent)) {\n                    listFirstMarkerElement.textContent = listFirstMarkerElement.textContent.replace(/^\\d{1,}/, \"1\");\n                    range.selectNodeContents(listLastMarkerElement.firstChild);\n                    range.collapse(false);\n                }\n                inputEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(startContainer, \"SPAN\");\n    // \n    if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && blockElement) {\n        var isFirst = false;\n        var newLineMatch = blockElement.textContent.match(/^\\n+/);\n        if ((0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element).start <= (newLineMatch ? newLineMatch[0].length : 0)) {\n            // \n            isFirst = true;\n        }\n        var newLineText = \"\\n\";\n        if (spanElement) {\n            if (((_c = spanElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.getAttribute(\"data-action\")) === \"enter-remove\") {\n                // https://github.com/Vanessa219/vditor/issues/596\n                spanElement.previousElementSibling.remove();\n                processAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                newLineText += processPreviousMarkers(spanElement);\n            }\n        }\n        range.insertNode(document.createTextNode(newLineText));\n        range.collapse(false);\n        if (blockElement && blockElement.textContent.trim() !== \"\" && !isFirst) {\n            inputEvent(vditor);\n        }\n        else {\n            processAfterRender(vditor);\n        }\n        event.preventDefault();\n        return true;\n    }\n    //  newline \n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey) {\n        if (spanElement && ((_d = spanElement.previousElementSibling) === null || _d === void 0 ? void 0 : _d.getAttribute(\"data-type\")) === \"newline\" &&\n            (0,selection/* getSelectPosition */.im)(spanElement, vditor.sv.element, range).start === 1 &&\n            //  inputEvent \n            spanElement.getAttribute(\"data-type\").indexOf(\"code-block-\") === -1) {\n            // \n            range.setStart(spanElement, 0);\n            range.extractContents();\n            if (spanElement.textContent.trim() !== \"\") {\n                inputEvent(vditor);\n            }\n            else {\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (blockElement && (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start === 0 &&\n            blockElement.previousElementSibling) {\n            range.extractContents();\n            var previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            if (previousLastElement.getAttribute(\"data-type\") === \"newline\") {\n                previousLastElement.remove();\n                previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            }\n            //  [```\\ntext\\n```\\n\\n]\n            if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                previousLastElement.insertAdjacentHTML(\"afterend\", blockElement.innerHTML);\n                blockElement.remove();\n            }\n            if (blockElement.textContent.trim() !== \"\" && !((_e = blockElement.previousElementSibling) === null || _e === void 0 ? void 0 : _e.querySelector('[data-type=\"code-block-open-marker\"]'))) {\n                inputEvent(vditor);\n            }\n            else {\n                if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                    // https://github.com/Vanessa219/vditor/issues/597\n                    range.selectNodeContents(previousLastElement.lastChild);\n                    range.collapse(false);\n                }\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/i18n/index.ts\nvar i18n = __webpack_require__(577);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n;// CONCATENATED MODULE: ./src/ts/ui/setTheme.ts\nvar setTheme = function (vditor) {\n    if (vditor.options.theme === \"dark\") {\n        vditor.element.classList.add(\"vditor--dark\");\n    }\n    else {\n        vditor.element.classList.remove(\"vditor--dark\");\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ui/initUI.ts\n\n\n\n\n\nvar initUI = function (vditor) {\n    vditor.element.innerHTML = \"\";\n    vditor.element.classList.add(\"vditor\");\n    setTheme(vditor);\n    (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n    if (typeof vditor.options.height === \"number\") {\n        vditor.element.style.height = vditor.options.height + \"px\";\n    }\n    if (typeof vditor.options.minHeight === \"number\") {\n        vditor.element.style.minHeight = vditor.options.minHeight + \"px\";\n    }\n    if (typeof vditor.options.width === \"number\") {\n        vditor.element.style.width = vditor.options.width + \"px\";\n    }\n    else {\n        vditor.element.style.width = vditor.options.width;\n    }\n    vditor.element.appendChild(vditor.toolbar.element);\n    var contentElement = document.createElement(\"div\");\n    contentElement.className = \"vditor-content\";\n    if (vditor.options.outline.position === \"left\") {\n        contentElement.appendChild(vditor.outline.element);\n    }\n    contentElement.appendChild(vditor.wysiwyg.element.parentElement);\n    contentElement.appendChild(vditor.sv.element);\n    contentElement.appendChild(vditor.ir.element.parentElement);\n    contentElement.appendChild(vditor.preview.element);\n    if (vditor.toolbar.elements.devtools) {\n        contentElement.appendChild(vditor.devtools.element);\n    }\n    if (vditor.options.outline.position === \"right\") {\n        vditor.outline.element.classList.add(\"vditor-outline--right\");\n        contentElement.appendChild(vditor.outline.element);\n    }\n    if (vditor.upload) {\n        contentElement.appendChild(vditor.upload.element);\n    }\n    if (vditor.options.resize.enable) {\n        contentElement.appendChild(vditor.resize.element);\n    }\n    contentElement.appendChild(vditor.hint.element);\n    contentElement.appendChild(vditor.tip.element);\n    vditor.element.appendChild(contentElement);\n    if (vditor.toolbar.elements.export) {\n        // for export pdf\n        vditor.element.insertAdjacentHTML(\"beforeend\", '<iframe style=\"width: 100%;height: 0;border: 0\"></iframe>');\n    }\n    setEditMode(vditor, vditor.options.mode, afterRender(vditor, contentElement));\n    document.execCommand(\"DefaultParagraphSeparator\", false, \"p\");\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1 && typeof window.visualViewport !== \"undefined\") {\n        // https://github.com/Vanessa219/vditor/issues/379\n        var pendingUpdate_1 = false;\n        var viewportHandler = function (event) {\n            if (pendingUpdate_1) {\n                return;\n            }\n            pendingUpdate_1 = true;\n            requestAnimationFrame(function () {\n                pendingUpdate_1 = false;\n                var layoutViewport = vditor.toolbar.element;\n                layoutViewport.style.transform = \"none\";\n                if (layoutViewport.getBoundingClientRect().top < 0) {\n                    layoutViewport.style.transform = \"translate(0, \" + -layoutViewport.getBoundingClientRect().top + \"px)\";\n                }\n            });\n        };\n        window.visualViewport.addEventListener(\"scroll\", viewportHandler);\n        window.visualViewport.addEventListener(\"resize\", viewportHandler);\n    }\n};\nvar setPadding = function (vditor) {\n    var minPadding = window.innerWidth <= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH ? 10 : 35;\n    if (vditor.wysiwyg.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.wysiwyg.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.wysiwyg.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.ir.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.ir.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.ir.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.preview.element.style.display !== \"block\" || vditor.currentMode === \"sv\") {\n        vditor.toolbar.element.style.paddingLeft = Math.max(5, parseInt(vditor[vditor.currentMode].element.style.paddingLeft || \"0\", 10) +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n};\nvar setTypewriterPosition = function (vditor) {\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var height = window.innerHeight;\n    if (typeof vditor.options.height === \"number\") {\n        height = vditor.options.height;\n        if (typeof vditor.options.minHeight === \"number\") {\n            height = Math.max(height, vditor.options.minHeight);\n        }\n        height = Math.min(window.innerHeight, height);\n    }\n    if (vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        height = window.innerHeight;\n    }\n    //  Firefox padding-bottom bug :after\n    vditor[vditor.currentMode].element.style.setProperty(\"--editor-bottom\", ((height - vditor.toolbar.element.offsetHeight) / 2) + \"px\");\n};\nvar afterRender = function (vditor, contentElement) {\n    setTypewriterPosition(vditor);\n    window.addEventListener(\"resize\", function () {\n        setPadding(vditor);\n        setTypewriterPosition(vditor);\n    });\n    // set default value\n    var initValue = (0,compatibility/* accessLocalStorage */.pK)() && localStorage.getItem(vditor.options.cache.id);\n    if (!vditor.options.cache.enable || !initValue) {\n        if (vditor.options.value) {\n            initValue = vditor.options.value;\n        }\n        else if (vditor.originalInnerHTML) {\n            initValue = vditor.lute.HTML2Md(vditor.originalInnerHTML);\n        }\n        else if (!vditor.options.cache.enable) {\n            initValue = \"\";\n        }\n    }\n    return initValue || \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/highlightToolbarIR.ts\n\n\n\n\n\nvar highlightToolbarIR = function (vditor) {\n    clearTimeout(vditor[vditor.currentMode].hlToolbarTimeoutId);\n    vditor[vditor.currentMode].hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor[vditor.currentMode].element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        if (typeElement.classList.contains(\"vditor-reset\")) {\n            typeElement = typeElement.childNodes[range.startOffset];\n        }\n        var headingElement = vditor.currentMode === \"sv\" ?\n            (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"heading\") : (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if (headingElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        var quoteElement = vditor.currentMode === \"sv\" ? (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"blockquote\") :\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n        if (quoteElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        var strongElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"strong\");\n        if (strongElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        var emElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"em\");\n        if (emElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        var sElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"s\");\n        if (sElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"a\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        var codeBlockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code-block\");\n        if (codeBlockElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n        }\n        var codeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code\");\n        if (codeElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"table\");\n        if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"list\", \"ordered-list\", \"check\", \"line\",\n                \"quote\", \"code\", \"table\"]);\n        }\n    }, 200);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/afterRenderEvent.ts\n\n\nvar afterRenderEvent = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n    vditor.wysiwyg.afterRenderTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/inlineTag.ts\n\n\nvar previoueIsEmptyA = function (node) {\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType !== 3 && previousNode.tagName === \"A\" && !previousNode.previousSibling\n            && previousNode.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && previousNode.nextSibling) {\n            return previousNode;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return false;\n};\nvar nextIsCode = function (range) {\n    var nextNode = range.startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (nextNode && nextNode.nodeType !== 3 && (nextNode.tagName === \"CODE\" ||\n        nextNode.getAttribute(\"data-type\") === \"math-inline\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-entity\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-inline\")) {\n        return true;\n    }\n    return false;\n};\nvar getNextHTML = function (node) {\n    var html = \"\";\n    var nextNode = node.nextSibling;\n    while (nextNode) {\n        if (nextNode.nodeType === 3) {\n            html += nextNode.textContent;\n        }\n        else {\n            html += nextNode.outerHTML;\n        }\n        nextNode = nextNode.nextSibling;\n    }\n    return html;\n};\nvar getPreviousHTML = function (node) {\n    var html = \"\";\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType === 3) {\n            html = previousNode.textContent + html;\n        }\n        else {\n            html = previousNode.outerHTML + html;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return html;\n};\nvar getRenderElementNextNode = function (blockCodeElement) {\n    var nextNode = blockCodeElement;\n    while (nextNode && !nextNode.nextSibling) {\n        nextNode = nextNode.parentElement;\n    }\n    return nextNode.nextSibling;\n};\nvar splitElement = function (range) {\n    var previousHTML = getPreviousHTML(range.startContainer);\n    var nextHTML = getNextHTML(range.startContainer);\n    var text = range.startContainer.textContent;\n    var offset = range.startOffset;\n    var beforeHTML = \"\";\n    var afterHTML = \"\";\n    if (text.substr(0, offset) !== \"\" && text.substr(0, offset) !== constants/* Constants.ZWSP */.g.ZWSP || previousHTML) {\n        beforeHTML = \"\" + previousHTML + text.substr(0, offset);\n    }\n    if (text.substr(offset) !== \"\" && text.substr(offset) !== constants/* Constants.ZWSP */.g.ZWSP || nextHTML) {\n        afterHTML = \"\" + text.substr(offset) + nextHTML;\n    }\n    return {\n        afterHTML: afterHTML,\n        beforeHTML: beforeHTML,\n    };\n};\nvar modifyPre = function (vditor, range) {\n    // \n    Array.from(vditor.wysiwyg.element.childNodes).find(function (node) {\n        if (node.nodeType === 3) {\n            var pElement = document.createElement(\"p\");\n            pElement.setAttribute(\"data-block\", \"0\");\n            pElement.textContent = node.textContent;\n            //  tab  tab = '    ' range.startContainer  node\n            var cloneRangeOffset = range.startContainer.nodeType === 3 ? range.startOffset : node.textContent.length;\n            node.parentNode.insertBefore(pElement, node);\n            node.remove();\n            range.setStart(pElement.firstChild, Math.min(pElement.firstChild.textContent.length, cloneRangeOffset));\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        else if (!node.getAttribute(\"data-block\")) {\n            if (node.tagName === \"P\") {\n                node.remove();\n            }\n            else {\n                if (node.tagName === \"DIV\") {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    // firefox  div\n                    node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.innerHTML + \"</p>\";\n                }\n                else {\n                    if (node.tagName === \"BR\") {\n                        // firefox  BR\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"<wbr></p>\";\n                    }\n                    else {\n                        range.insertNode(document.createElement(\"wbr\"));\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"</p>\";\n                    }\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                range = getSelection().getRangeAt(0);\n            }\n            return true;\n        }\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/setHeading.ts\n\n\n\nvar setHeading = function (vditor, tagName) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (!blockElement && vditor.wysiwyg.element.children.length === 0) {\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (blockElement && !blockElement.classList.contains(\"vditor-wysiwyg__block\")) {\n        range.insertNode(document.createElement(\"wbr\"));\n        // Firefox  trim https://github.com/Vanessa219/vditor/issues/207\n        if (blockElement.innerHTML.trim() === \"<wbr>\") {\n            // Firefox  https://github.com/Vanessa219/vditor/issues/199 1\n            blockElement.innerHTML = \"<wbr><br>\";\n        }\n        if (blockElement.tagName === \"BLOCKQUOTE\" || blockElement.classList.contains(\"vditor-reset\")) {\n            blockElement.innerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        else {\n            blockElement.outerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        renderToc(vditor);\n    }\n};\nvar removeHeading = function (vditor) {\n    var range = getSelection().getRangeAt(0);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (blockElement) {\n        range.insertNode(document.createElement(\"wbr\"));\n        blockElement.outerHTML = \"<p data-block=\\\"0\\\">\" + blockElement.innerHTML + \"</p>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n    }\n    vditor.wysiwyg.popover.style.display = \"none\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/showCode.ts\n\n\nvar showCode = function (previewElement, vditor, first) {\n    if (first === void 0) { first = true; }\n    var previousElement = previewElement.previousElementSibling;\n    var range = previousElement.ownerDocument.createRange();\n    if (previousElement.tagName === \"CODE\") {\n        previousElement.style.display = \"inline-block\";\n        if (first) {\n            range.setStart(previousElement.firstChild, 1);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n        }\n    }\n    else {\n        previousElement.style.display = \"block\";\n        if (!previousElement.firstChild.firstChild) {\n            previousElement.firstChild.appendChild(document.createTextNode(\"\"));\n        }\n        range.selectNodeContents(previousElement.firstChild);\n    }\n    if (first) {\n        range.collapse(true);\n    }\n    else {\n        range.collapse(false);\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    if (previewElement.firstElementChild.classList.contains(\"language-mindmap\")) {\n        return;\n    }\n    scrollCenter(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar wysiwyg_processKeydown_processKeydown = function (vditor, event) {\n    // Chrome firefox  compositionend  https://github.com/Vanessa219/vditor/issues/188\n    vditor.wysiwyg.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    //  undo \n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // \n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md \n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // table\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // code render\n    var codeRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-wysiwyg__block\");\n    if (codeRenderElement) {\n        // esc: \n        if (event.key === \"Escape\" && codeRenderElement.children.length === 2) {\n            vditor.wysiwyg.popover.style.display = \"none\";\n            codeRenderElement.firstElementChild.style.display = \"none\";\n            vditor.wysiwyg.element.blur();\n            event.preventDefault();\n            return true;\n        }\n        // alt+enter:  https://github.com/Vanessa219/vditor/issues/54\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\" &&\n            codeRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n            var inputElemment = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElemment.focus();\n            inputElemment.select();\n            event.preventDefault();\n            return true;\n        }\n        if (codeRenderElement.getAttribute(\"data-block\") === \"0\") {\n            if (fixCodeBlock(vditor, event, codeRenderElement.firstElementChild, range)) {\n                return true;\n            }\n            if (insertAfterBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n            if (codeRenderElement.getAttribute(\"data-type\") !== \"yaml-front-matter\" &&\n                insertBeforeBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n        }\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    //  blockquote\n    var topBQElement = (0,hasClosest/* hasTopClosestByTag */.E2)(startContainer, \"BLOCKQUOTE\");\n    if (topBQElement) {\n        if (!event.shiftKey && event.altKey && event.key === \"Enter\") {\n            if (!(0,compatibility/* isCtrl */.yl)(event)) {\n                // alt+enter:  blockquote  https://github.com/Vanessa219/vditor/issues/51\n                range.setStartAfter(topBQElement);\n            }\n            else {\n                // ctrl+alt+enter:  blockquote \n                range.setStartBefore(topBQElement);\n            }\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            var node = document.createElement(\"p\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.innerHTML = \"\\n\";\n            range.insertNode(node);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // h1-h6\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        if (headingElement.tagName === \"H6\" && startContainer.textContent.length === range.startOffset &&\n            !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\") {\n            // enter: H6  https://github.com/Vanessa219/vditor/issues/48\n            var pTempElement = document.createElement(\"p\");\n            pTempElement.textContent = \"\\n\";\n            pTempElement.setAttribute(\"data-block\", \"0\");\n            startContainer.parentElement.insertAdjacentElement(\"afterend\", pTempElement);\n            range.setStart(pTempElement, 0);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // enter++: \n        if (matchHotKey(\"=\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) - 1;\n            if (index > 0) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: \n        if (matchHotKey(\"-\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) + 1;\n            if (index < 7) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && headingElement.textContent.length === 1) {\n            // \n            removeHeading(vditor);\n        }\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // alt+enter\n    if (event.altKey && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey) {\n        // \n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"A\");\n        var linRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"link-ref\");\n        var footnoteRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-ref\");\n        if (aElement || linRefElement || footnoteRefElement ||\n            (headingElement && headingElement.tagName.length === 2)) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n            inputElement.focus();\n            inputElement.select();\n        }\n    }\n    // \n    if (removeBlockElement(vditor, event)) {\n        return true;\n    }\n    // \n    if (matchHotKey(\"U\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"up\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    // \n    if (matchHotKey(\"D\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"down\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    // shift+enter table/hr/heading cell block render li & p \n    if (!(0,compatibility/* isCtrl */.yl)(event) && event.shiftKey && !event.altKey && event.key === \"Enter\" &&\n        startContainer.parentElement.tagName !== \"LI\" && startContainer.parentElement.tagName !== \"P\") {\n        if ([\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n            //  https://github.com/Vanessa219/vditor/issues/170\n            range.insertNode(document.createTextNode(\"\\n\" + constants/* Constants.ZWSP */.g.ZWSP));\n        }\n        else {\n            range.insertNode(document.createTextNode(\"\\n\"));\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        afterRenderEvent(vditor);\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // \n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement) {\n            if (blockElement.previousElementSibling\n                && blockElement.previousElementSibling.classList.contains(\"vditor-wysiwyg__block\")\n                && blockElement.previousElementSibling.getAttribute(\"data-block\") === \"0\"\n                // https://github.com/Vanessa219/vditor/issues/946\n                && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\") {\n                var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n                if ((rangeStart === 0 && range.startOffset === 0) || // https://github.com/Vanessa219/vditor/issues/894\n                    (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                    //  keyup \n                    showCode(blockElement.previousElementSibling.lastElementChild, vditor, false);\n                    if (blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        // \n                        blockElement.remove();\n                        afterRenderEvent(vditor);\n                    }\n                    event.preventDefault();\n                    return true;\n                }\n            }\n            var rangeStartOffset = range.startOffset;\n            if (range.toString() === \"\" && startContainer.nodeType === 3 &&\n                startContainer.textContent.charAt(rangeStartOffset - 2) === \"\\n\" &&\n                startContainer.textContent.charAt(rangeStartOffset - 1) !== constants/* Constants.ZWSP */.g.ZWSP\n                && [\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n                // \n                startContainer.textContent = startContainer.textContent.substring(0, rangeStartOffset - 1) +\n                    constants/* Constants.ZWSP */.g.ZWSP;\n                range.setStart(startContainer, rangeStartOffset);\n                range.collapse(true);\n                afterRenderEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n            // inline codemathhtml \n            if (startContainer.textContent === constants/* Constants.ZWSP */.g.ZWSP && range.startOffset === 1\n                && !startContainer.previousSibling && nextIsCode(range)) {\n                startContainer.textContent = \"\";\n                //  inline math/html  code \n            }\n            //  inline math/html, html-entity  code , \n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='math-inline']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='html-entity']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n        }\n    }\n    if ((0,compatibility/* isFirefox */.vU)() && range.startOffset === 1 && startContainer.textContent.indexOf(constants/* Constants.ZWSP */.g.ZWSP) > -1 &&\n        startContainer.previousSibling && startContainer.previousSibling.nodeType !== 3 &&\n        startContainer.previousSibling.tagName === \"CODE\" &&\n        (event.key === \"Backspace\" || event.key === \"ArrowLeft\")) {\n        // https://github.com/Vanessa219/vditor/issues/410\n        range.selectNodeContents(startContainer.previousSibling);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n        event.preventDefault();\n        return true;\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (event.key === \"ArrowDown\") {\n        // \n        var nextElement = startContainer.nextSibling;\n        if (nextElement && nextElement.nodeType !== 3 && nextElement.getAttribute(\"data-type\") === \"math-inline\") {\n            range.setStartAfter(nextElement);\n        }\n    }\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar removeBlockElement = function (vditor, event) {\n    // \n    if (matchHotKey(\"X\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"remove\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/highlightToolbarWYSIWYG.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar highlightToolbarWYSIWYG = function (vditor) {\n    clearTimeout(vditor.wysiwyg.hlToolbarTimeoutId);\n    vditor.wysiwyg.hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor.wysiwyg.element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = getSelection().getRangeAt(0);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        else {\n            typeElement = typeElement.childNodes[range.startOffset >= typeElement.childNodes.length ?\n                typeElement.childNodes.length - 1 : range.startOffset];\n        }\n        var footnotesElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-block\");\n        if (footnotesElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(footnotesElement, vditor);\n            setPopoverPosition(vditor, footnotesElement);\n            return;\n        }\n        // \n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"B\") || (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRONG\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"I\") || (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"EM\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRIKE\") || (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"S\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        // comments\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-comment--focus\").forEach(function (item) {\n            item.classList.remove(\"vditor-comment--focus\");\n        });\n        var commentElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-comment\");\n        if (commentElement) {\n            var ids_1 = commentElement.getAttribute(\"data-cmtids\").split(\" \");\n            if (ids_1.length > 1 && commentElement.nextSibling.isSameNode(commentElement.nextElementSibling)) {\n                var nextIds_1 = commentElement.nextElementSibling.getAttribute(\"data-cmtids\").split(\" \");\n                ids_1.find(function (id) {\n                    if (nextIds_1.includes(id)) {\n                        ids_1 = [id];\n                        return true;\n                    }\n                });\n            }\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(ids_1[0]) > -1) {\n                    item.classList.add(\"vditor-comment--focus\");\n                }\n            });\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"A\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TABLE\");\n        var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"CODE\")) {\n            if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"PRE\")) {\n                disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                    \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                    \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n            }\n        }\n        else if (headingElement) {\n            disableToolbar(vditor.toolbar.elements, [\"bold\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        else if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"table\"]);\n        }\n        // toc popover\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-toc\");\n        if (tocElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(tocElement, vditor);\n            setPopoverPosition(vditor, tocElement);\n            return;\n        }\n        // quote popover\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(typeElement, \"BLOCKQUOTE\");\n        if (blockquoteElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockquoteElement, vditor);\n            genDown(range, blockquoteElement, vditor);\n            genClose(blockquoteElement, vditor);\n            setPopoverPosition(vditor, blockquoteElement);\n        }\n        // list item popover\n        if (liElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, liElement, vditor);\n            genDown(range, liElement, vditor);\n            genClose(liElement, vditor);\n            setPopoverPosition(vditor, liElement);\n        }\n        // table popover\n        if (tableElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var updateTable_1 = function () {\n                var oldRow = tableElement.rows.length;\n                var oldColumn = tableElement.rows[0].cells.length;\n                var row = parseInt(input_1.value, 10) || oldRow;\n                var column = parseInt(input2_1.value, 10) || oldColumn;\n                if (row === oldRow && oldColumn === column) {\n                    return;\n                }\n                if (oldColumn !== column) {\n                    var columnDiff = column - oldColumn;\n                    for (var i = 0; i < tableElement.rows.length; i++) {\n                        if (columnDiff > 0) {\n                            for (var j = 0; j < columnDiff; j++) {\n                                if (i === 0) {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<th> </th>\");\n                                }\n                                else {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<td> </td>\");\n                                }\n                            }\n                        }\n                        else {\n                            for (var k = oldColumn - 1; k >= column; k--) {\n                                tableElement.rows[i].cells[k].remove();\n                            }\n                        }\n                    }\n                }\n                if (oldRow !== row) {\n                    var rowDiff = row - oldRow;\n                    if (rowDiff > 0) {\n                        var rowHTML = \"<tr>\";\n                        for (var m = 0; m < column; m++) {\n                            rowHTML += \"<td> </td>\";\n                        }\n                        for (var l = 0; l < rowDiff; l++) {\n                            if (tableElement.querySelector(\"tbody\")) {\n                                tableElement.querySelector(\"tbody\").insertAdjacentHTML(\"beforeend\", rowHTML);\n                            }\n                            else {\n                                tableElement.querySelector(\"thead\").insertAdjacentHTML(\"afterend\", rowHTML + \"</tr>\");\n                            }\n                        }\n                    }\n                    else {\n                        for (var m = oldRow - 1; m >= row; m--) {\n                            tableElement.rows[m].remove();\n                            if (tableElement.rows.length === 1) {\n                                tableElement.querySelector(\"tbody\").remove();\n                            }\n                        }\n                    }\n                }\n            };\n            var setAlign_1 = function (type) {\n                setTableAlign(tableElement, type);\n                if (type === \"right\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.add(\"vditor-icon--current\");\n                }\n                else if (type === \"center\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.add(\"vditor-icon--current\");\n                }\n                else {\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    left_1.classList.add(\"vditor-icon--current\");\n                }\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                afterRenderEvent(vditor);\n            };\n            var td = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TD\");\n            var th = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TH\");\n            var alignType = \"left\";\n            if (td) {\n                alignType = td.getAttribute(\"align\") || \"left\";\n            }\n            else if (th) {\n                alignType = th.getAttribute(\"align\") || \"center\";\n            }\n            var left_1 = document.createElement(\"button\");\n            left_1.setAttribute(\"type\", \"button\");\n            left_1.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alignLeft +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"L\") + \">\");\n            left_1.setAttribute(\"data-type\", \"left\");\n            left_1.innerHTML = '<svg><use xlink:href=\"#vditor-icon-align-left\"></use></svg>';\n            left_1.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                (alignType === \"left\" ? \" vditor-icon--current\" : \"\");\n            left_1.onclick = function () {\n                setAlign_1(\"left\");\n            };\n            var center_1 = document.createElement(\"button\");\n            center_1.setAttribute(\"type\", \"button\");\n            center_1.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alignCenter +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"C\") + \">\");\n            center_1.setAttribute(\"data-type\", \"center\");\n            center_1.innerHTML = '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>';\n            center_1.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                (alignType === \"center\" ? \" vditor-icon--current\" : \"\");\n            center_1.onclick = function () {\n                setAlign_1(\"center\");\n            };\n            var right_1 = document.createElement(\"button\");\n            right_1.setAttribute(\"type\", \"button\");\n            right_1.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alignRight +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"R\") + \">\");\n            right_1.setAttribute(\"data-type\", \"right\");\n            right_1.innerHTML = '<svg><use xlink:href=\"#vditor-icon-align-right\"></use></svg>';\n            right_1.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                (alignType === \"right\" ? \" vditor-icon--current\" : \"\");\n            right_1.onclick = function () {\n                setAlign_1(\"right\");\n            };\n            var insertRowElement = document.createElement(\"button\");\n            insertRowElement.setAttribute(\"type\", \"button\");\n            insertRowElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertRowBelow +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"=\") + \">\");\n            insertRowElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-row\"></use></svg>';\n            insertRowElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRow(vditor, range, cellElement);\n                }\n            };\n            var insertRowBElement = document.createElement(\"button\");\n            insertRowBElement.setAttribute(\"type\", \"button\");\n            insertRowBElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertRowAbove +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"F\") + \">\");\n            insertRowBElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowBElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-rowb\"></use></svg>';\n            insertRowBElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRowAbove(vditor, range, cellElement);\n                }\n            };\n            var insertColumnElement = document.createElement(\"button\");\n            insertColumnElement.setAttribute(\"type\", \"button\");\n            insertColumnElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertColumnRight +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"=\") + \">\");\n            insertColumnElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-column\"></use></svg>';\n            insertColumnElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement);\n                }\n            };\n            var insertColumnBElement = document.createElement(\"button\");\n            insertColumnBElement.setAttribute(\"type\", \"button\");\n            insertColumnBElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertColumnLeft +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"G\") + \">\");\n            insertColumnBElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnBElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-columnb\"></use></svg>';\n            insertColumnBElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n                }\n            };\n            var deleteRowElement = document.createElement(\"button\");\n            deleteRowElement.setAttribute(\"type\", \"button\");\n            deleteRowElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang][\"delete-row\"] +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"-\") + \">\");\n            deleteRowElement.setAttribute(\"data-type\", \"deleteRow\");\n            deleteRowElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-delete-row\"></use></svg>';\n            deleteRowElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteRow(vditor, range, cellElement);\n                }\n            };\n            var deleteColumnElement = document.createElement(\"button\");\n            deleteColumnElement.setAttribute(\"type\", \"button\");\n            deleteColumnElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang][\"delete-column\"] +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"-\") + \">\");\n            deleteColumnElement.setAttribute(\"data-type\", \"deleteColumn\");\n            deleteColumnElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-delete-column\"></use></svg>';\n            deleteColumnElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteColumn(vditor, range, tableElement, cellElement);\n                }\n            };\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].row);\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_1 = document.createElement(\"input\");\n            inputWrap.appendChild(input_1);\n            input_1.type = \"number\";\n            input_1.min = \"1\";\n            input_1.className = \"vditor-input\";\n            input_1.style.width = \"42px\";\n            input_1.style.textAlign = \"center\";\n            input_1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].row);\n            input_1.value = tableElement.rows.length.toString();\n            input_1.oninput = function () {\n                updateTable_1();\n            };\n            input_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input2_1.focus();\n                    input2_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            var input2Wrap = document.createElement(\"span\");\n            input2Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].column);\n            input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input2_1 = document.createElement(\"input\");\n            input2Wrap.appendChild(input2_1);\n            input2_1.type = \"number\";\n            input2_1.min = \"1\";\n            input2_1.className = \"vditor-input\";\n            input2_1.style.width = \"42px\";\n            input2_1.style.textAlign = \"center\";\n            input2_1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].column);\n            input2_1.value = tableElement.rows[0].cells.length.toString();\n            input2_1.oninput = function () {\n                updateTable_1();\n            };\n            input2_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input_1.focus();\n                    input_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, tableElement, vditor);\n            genDown(range, tableElement, vditor);\n            genClose(tableElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", left_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", center_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", right_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            vditor.wysiwyg.popover.insertAdjacentHTML(\"beforeend\", \" x \");\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n            setPopoverPosition(vditor, tableElement);\n        }\n        // link ref popover\n        var linkRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"link-ref\");\n        if (linkRefElement) {\n            genLinkRefPopover(vditor, linkRefElement);\n        }\n        // footnote popover\n        var footnotesRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-ref\");\n        if (footnotesRefElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].footnoteRef +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_2 = document.createElement(\"input\");\n            inputWrap.appendChild(input_2);\n            input_2.className = \"vditor-input\";\n            input_2.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"Enter\") + \">\");\n            input_2.style.width = \"120px\";\n            input_2.value = footnotesRefElement.getAttribute(\"data-footnotes-label\");\n            input_2.oninput = function () {\n                if (input_2.value.trim() !== \"\") {\n                    footnotesRefElement.setAttribute(\"data-footnotes-label\", input_2.value);\n                }\n            };\n            input_2.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n                    range.selectNodeContents(footnotesRefElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genClose(footnotesRefElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, footnotesRefElement);\n        }\n        var blockRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-wysiwyg__block\");\n        // block popover: math-inline, math-block, html-block, html-inline, code-block, html-entity\n        if (blockRenderElement && blockRenderElement.getAttribute(\"data-type\").indexOf(\"block\") > -1) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockRenderElement, vditor);\n            genDown(range, blockRenderElement, vditor);\n            genClose(blockRenderElement, vditor);\n            if (blockRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n                var languageWrap = document.createElement(\"span\");\n                languageWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].language +\n                    \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"Enter\") + \">\");\n                languageWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n                var language_1 = document.createElement(\"input\");\n                languageWrap.appendChild(language_1);\n                var codeElement_1 = blockRenderElement.firstElementChild.firstElementChild;\n                language_1.className = \"vditor-input\";\n                language_1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"Enter\") + \">\");\n                language_1.value = codeElement_1.className.indexOf(\"language-\") > -1 ?\n                    codeElement_1.className.split(\"-\")[1].split(\" \")[0] : \"\";\n                language_1.oninput = function () {\n                    if (language_1.value.trim() !== \"\") {\n                        codeElement_1.className = \"language-\" + language_1.value;\n                    }\n                    else {\n                        codeElement_1.className = \"\";\n                        vditor.hint.recentLanguage = \"\";\n                    }\n                    if (blockRenderElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                        blockRenderElement.lastElementChild.innerHTML = blockRenderElement.firstElementChild.innerHTML;\n                        processCodeRender(blockRenderElement.lastElementChild, vditor);\n                    }\n                    afterRenderEvent(vditor);\n                };\n                language_1.onkeydown = function (event) {\n                    if (event.isComposing) {\n                        return;\n                    }\n                    if (removeBlockElement(vditor, event)) {\n                        return;\n                    }\n                    if (event.key === \"Escape\" && vditor.hint.element.style.display === \"block\") {\n                        vditor.hint.element.style.display = \"none\";\n                        event.preventDefault();\n                        return;\n                    }\n                    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                    }\n                    vditor.hint.select(event, vditor);\n                };\n                language_1.onkeyup = function (event) {\n                    if (event.isComposing || event.key === \"Enter\" || event.key === \"ArrowUp\" || event.key === \"Escape\"\n                        || event.key === \"ArrowDown\") {\n                        return;\n                    }\n                    var matchLangData = [];\n                    var key = language_1.value.substring(0, language_1.selectionStart);\n                    constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                        if (keyName.indexOf(key.toLowerCase()) > -1) {\n                            matchLangData.push({\n                                html: keyName,\n                                value: keyName,\n                            });\n                        }\n                    });\n                    vditor.hint.genHTML(matchLangData, key, vditor);\n                    event.preventDefault();\n                };\n                vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", languageWrap);\n            }\n            setPopoverPosition(vditor, blockRenderElement);\n        }\n        else {\n            if (!blockRenderElement) {\n                vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (itemElement) {\n                    var previousElement = itemElement.previousElementSibling;\n                    previousElement.style.display = \"none\";\n                });\n            }\n            blockRenderElement = undefined;\n        }\n        if (headingElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_3 = document.createElement(\"input\");\n            inputWrap.appendChild(input_3);\n            input_3.className = \"vditor-input\";\n            input_3.setAttribute(\"placeholder\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"Enter\") + \">\");\n            input_3.style.width = \"120px\";\n            input_3.value = headingElement.getAttribute(\"data-id\") || \"\";\n            input_3.oninput = function () {\n                headingElement.setAttribute(\"data-id\", input_3.value);\n            };\n            input_3.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n                    range.selectNodeContents(headingElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, headingElement, vditor);\n            genDown(range, headingElement, vditor);\n            genClose(headingElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, headingElement);\n        }\n        // a popover\n        if (aElement) {\n            genAPopover(vditor, aElement);\n        }\n        if (!blockquoteElement && !liElement && !tableElement && !blockRenderElement && !aElement\n            && !linkRefElement && !footnotesRefElement && !headingElement && !tocElement) {\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-block\", \"0\");\n            if (blockElement && blockElement.parentElement.isEqualNode(vditor.wysiwyg.element)) {\n                vditor.wysiwyg.popover.innerHTML = \"\";\n                genUp(range, blockElement, vditor);\n                genDown(range, blockElement, vditor);\n                genClose(blockElement, vditor);\n                setPopoverPosition(vditor, blockElement);\n            }\n            else {\n                vditor.wysiwyg.popover.style.display = \"none\";\n            }\n        }\n        // \n        vditor.wysiwyg.element.querySelectorAll('span[data-type=\"backslash\"] > span').forEach(function (item) {\n            item.style.display = \"none\";\n        });\n        var backslashElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"backslash\");\n        if (backslashElement) {\n            backslashElement.querySelector(\"span\").style.display = \"inline\";\n        }\n    }, 200);\n};\nvar setPopoverPosition = function (vditor, element) {\n    var targetElement = element;\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(element, \"TABLE\");\n    if (tableElement) {\n        targetElement = tableElement;\n    }\n    vditor.wysiwyg.popover.style.left = \"0\";\n    vditor.wysiwyg.popover.style.display = \"block\";\n    vditor.wysiwyg.popover.style.top = Math.max(-8, targetElement.offsetTop - 21 - vditor.wysiwyg.element.scrollTop) + \"px\";\n    vditor.wysiwyg.popover.style.left =\n        Math.min(targetElement.offsetLeft, vditor.wysiwyg.element.clientWidth - vditor.wysiwyg.popover.clientWidth) + \"px\";\n    vditor.wysiwyg.popover.setAttribute(\"data-top\", (targetElement.offsetTop - 21).toString());\n};\nvar genLinkRefPopover = function (vditor, linkRefElement) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateLinkRef = function () {\n        if (input.value.trim() !== \"\") {\n            if (linkRefElement.tagName === \"IMG\") {\n                linkRefElement.setAttribute(\"alt\", input.value);\n            }\n            else {\n                linkRefElement.textContent = input.value;\n            }\n        }\n        // data-link-label\n        if (input1.value.trim() !== \"\") {\n            linkRefElement.setAttribute(\"data-link-label\", input1.value);\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = linkRefElement.getAttribute(\"alt\") || linkRefElement.textContent;\n    input.oninput = function () {\n        updateLinkRef();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].linkRef);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].linkRef);\n    input1.value = linkRefElement.getAttribute(\"data-link-label\");\n    input1.oninput = function () {\n        updateLinkRef();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input);\n    };\n    genClose(linkRefElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    setPopoverPosition(vditor, linkRefElement);\n};\nvar genUp = function (range, element, vditor) {\n    var previousElement = element.previousElementSibling;\n    if (!previousElement || (!element.parentElement.isEqualNode(vditor.wysiwyg.element) && element.tagName !== \"LI\")) {\n        return;\n    }\n    var upElement = document.createElement(\"button\");\n    upElement.setAttribute(\"type\", \"button\");\n    upElement.setAttribute(\"data-type\", \"up\");\n    upElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].up +\n        \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"U\") + \">\");\n    upElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-up\"></use></svg>';\n    upElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    upElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        previousElement.insertAdjacentElement(\"beforebegin\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", upElement);\n};\nvar genDown = function (range, element, vditor) {\n    var nextElement = element.nextElementSibling;\n    if (!nextElement || (!element.parentElement.isEqualNode(vditor.wysiwyg.element) && element.tagName !== \"LI\")) {\n        return;\n    }\n    var downElement = document.createElement(\"button\");\n    downElement.setAttribute(\"type\", \"button\");\n    downElement.setAttribute(\"data-type\", \"down\");\n    downElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].down +\n        \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"D\") + \">\");\n    downElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-down\"></use></svg>';\n    downElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    downElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        nextElement.insertAdjacentElement(\"afterend\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", downElement);\n};\nvar genClose = function (element, vditor) {\n    var close = document.createElement(\"button\");\n    close.setAttribute(\"type\", \"button\");\n    close.setAttribute(\"data-type\", \"remove\");\n    close.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].remove +\n        \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"X\") + \">\");\n    close.innerHTML = '<svg><use xlink:href=\"#vditor-icon-trashcan\"></use></svg>';\n    close.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    close.onclick = function () {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        range.setStartAfter(element);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        element.remove();\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", close);\n};\nvar linkHotkey = function (vditor, element, event, nextInputElement) {\n    if (event.isComposing) {\n        return;\n    }\n    if (event.key === \"Tab\") {\n        nextInputElement.focus();\n        nextInputElement.select();\n        event.preventDefault();\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        // firefox  link https://github.com/Vanessa219/vditor/issues/193\n        element.insertAdjacentHTML(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n        range.setStartAfter(element.nextSibling);\n        range.collapse(true);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        event.preventDefault();\n    }\n};\nvar genAPopover = function (vditor, aElement) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateA = function () {\n        if (input.value.trim() !== \"\") {\n            aElement.innerHTML = input.value;\n        }\n        aElement.setAttribute(\"href\", input1.value);\n        aElement.setAttribute(\"title\", input2.value);\n    };\n    aElement.querySelectorAll(\"[data-marker]\").forEach(function (item) {\n        item.removeAttribute(\"data-marker\");\n    });\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = aElement.innerHTML || \"\";\n    input.oninput = function () {\n        updateA();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].link);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].link);\n    input1.value = aElement.getAttribute(\"href\") || \"\";\n    input1.oninput = function () {\n        updateA();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input2);\n    };\n    var input2Wrap = document.createElement(\"span\");\n    input2Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].tooltipText);\n    input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input2 = document.createElement(\"input\");\n    input2Wrap.appendChild(input2);\n    input2.className = \"vditor-input\";\n    input2.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].tooltipText);\n    input2.style.width = \"60px\";\n    input2.value = aElement.getAttribute(\"title\") || \"\";\n    input2.oninput = function () {\n        updateA();\n    };\n    input2.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input);\n    };\n    genClose(aElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n    setPopoverPosition(vditor, aElement);\n};\nvar genImagePopover = function (event, vditor) {\n    var imgElement = event.target;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateImg = function () {\n        imgElement.setAttribute(\"src\", inputElement.value);\n        imgElement.setAttribute(\"alt\", alt.value);\n        imgElement.setAttribute(\"title\", title.value);\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].imageURL);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var inputElement = document.createElement(\"input\");\n    inputWrap.appendChild(inputElement);\n    inputElement.className = \"vditor-input\";\n    inputElement.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].imageURL);\n    inputElement.value = imgElement.getAttribute(\"src\") || \"\";\n    inputElement.oninput = function () {\n        updateImg();\n    };\n    inputElement.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var altWrap = document.createElement(\"span\");\n    altWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alternateText);\n    altWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var alt = document.createElement(\"input\");\n    altWrap.appendChild(alt);\n    alt.className = \"vditor-input\";\n    alt.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].alternateText);\n    alt.style.width = \"52px\";\n    alt.value = imgElement.getAttribute(\"alt\") || \"\";\n    alt.oninput = function () {\n        updateImg();\n    };\n    alt.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var titleWrap = document.createElement(\"span\");\n    titleWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].title);\n    titleWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var title = document.createElement(\"input\");\n    titleWrap.appendChild(title);\n    title.className = \"vditor-input\";\n    title.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].title);\n    title.value = imgElement.getAttribute(\"title\") || \"\";\n    title.oninput = function () {\n        updateImg();\n    };\n    title.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    genClose(imgElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", altWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", titleWrap);\n    setPopoverPosition(vditor, imgElement);\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/highlightToolbar.ts\n\n\nvar highlightToolbar = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\") {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/renderDomByMd.ts\n\n\nvar renderDomByMd = function (vditor, md, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    var editorElement = vditor.wysiwyg.element;\n    editorElement.innerHTML = vditor.lute.Md2VditorDOM(md);\n    editorElement.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n        item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n    });\n    afterRenderEvent(vditor, options);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/toolbarEvent.ts\n\n\n\n\n\n\n\n\n\nvar cancelBES = function (range, vditor, commandName) {\n    var element = range.startContainer.parentElement;\n    var jump = false;\n    var lastTagName = \"\";\n    var lastEndTagName = \"\";\n    var splitHTML = splitElement(range);\n    var lastBeforeHTML = splitHTML.beforeHTML;\n    var lastAfterHTML = splitHTML.afterHTML;\n    while (element && !jump) {\n        var tagName = element.tagName;\n        if (tagName === \"STRIKE\") {\n            tagName = \"S\";\n        }\n        if (tagName === \"I\") {\n            tagName = \"EM\";\n        }\n        if (tagName === \"B\") {\n            tagName = \"STRONG\";\n        }\n        if (tagName === \"S\" || tagName === \"STRONG\" || tagName === \"EM\") {\n            var insertHTML = \"\";\n            var previousHTML = \"\";\n            var nextHTML = \"\";\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                previousHTML = getPreviousHTML(element);\n                nextHTML = getNextHTML(element);\n            }\n            if (lastBeforeHTML || previousHTML) {\n                insertHTML = previousHTML + \"<\" + tagName + \">\" + lastBeforeHTML + \"</\" + tagName + \">\";\n                lastBeforeHTML = insertHTML;\n            }\n            if ((commandName === \"bold\" && tagName === \"STRONG\") ||\n                (commandName === \"italic\" && tagName === \"EM\") ||\n                (commandName === \"strikeThrough\" && tagName === \"S\")) {\n                // \n                insertHTML += \"\" + lastTagName + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\" + lastEndTagName;\n                jump = true;\n            }\n            if (lastAfterHTML || nextHTML) {\n                lastAfterHTML = \"<\" + tagName + \">\" + lastAfterHTML + \"</\" + tagName + \">\" + nextHTML;\n                insertHTML += lastAfterHTML;\n            }\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                element = element.parentElement;\n                element.innerHTML = insertHTML;\n            }\n            else {\n                element.outerHTML = insertHTML;\n                element = element.parentElement;\n            }\n            lastTagName = \"<\" + tagName + \">\" + lastTagName;\n            lastEndTagName = \"</\" + tagName + \">\" + lastEndTagName;\n        }\n        else {\n            jump = true;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n};\nvar toolbarEvent = function (vditor, actionBtn, event) {\n    if (vditor.wysiwyg.composingLock // Mac Chrome  https://github.com/Vanessa219/vditor/issues/188\n        && event instanceof CustomEvent //  https://github.com/Vanessa219/vditor/issues/473\n    ) {\n        return;\n    }\n    var useHighlight = true;\n    var useRender = true;\n    if (vditor.wysiwyg.element.querySelector(\"wbr\")) {\n        vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // \n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"strike\") {\n            commandName = \"strikeThrough\";\n        }\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"BLOCKQUOTE\");\n            if (!quoteElement) {\n                quoteElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (quoteElement) {\n                useHighlight = false;\n                actionBtn.classList.remove(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"inline-code\") {\n            var inlineCodeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n            if (!inlineCodeElement) {\n                inlineCodeElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (inlineCodeElement) {\n                inlineCodeElement.outerHTML = inlineCodeElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") + \"<wbr>\";\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"link\") {\n            if (!range.collapsed) {\n                document.execCommand(\"unlink\", false, \"\");\n            }\n            else {\n                range.selectNode(range.startContainer.parentElement);\n                document.execCommand(\"unlink\", false, \"\");\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n            if (range.toString() === \"\") {\n                cancelBES(range, vditor, commandName);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    else {\n        // \n        if (vditor.wysiwyg.element.childNodes.length === 0) {\n            vditor.wysiwyg.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"quote\") {\n            if (!blockElement) {\n                blockElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (blockElement) {\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n                // li \n                if (liElement && blockElement.contains(liElement)) {\n                    liElement.innerHTML = \"<blockquote data-block=\\\"0\\\">\" + liElement.innerHTML + \"</blockquote>\";\n                }\n                else {\n                    blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"inline-code\") {\n            if (range.toString() === \"\") {\n                var node = document.createElement(\"code\");\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else if (range.startContainer.nodeType === 3) {\n                var node = document.createElement(\"code\");\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"code\") {\n            var node = document.createElement(\"div\");\n            node.className = \"vditor-wysiwyg__block\";\n            node.setAttribute(\"data-type\", \"code-block\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.setAttribute(\"data-marker\", \"```\");\n            if (range.toString() === \"\") {\n                node.innerHTML = \"<pre><code><wbr>\\n</code></pre>\";\n            }\n            else {\n                node.innerHTML = \"<pre><code>\" + range.toString() + \"<wbr></code></pre>\";\n                range.deleteContents();\n            }\n            range.insertNode(node);\n            if (blockElement) {\n                blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, vditor);\n            });\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"link\") {\n            if (range.toString() === \"\") {\n                var aElement = document.createElement(\"a\");\n                aElement.innerText = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(aElement);\n                range.setStart(aElement.firstChild, 1);\n                range.collapse(true);\n                genAPopover(vditor, aElement);\n                var textInputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n                textInputElement.value = \"\";\n                textInputElement.focus();\n                useRender = false;\n            }\n            else {\n                var node = document.createElement(\"a\");\n                node.setAttribute(\"href\", \"\");\n                node.innerHTML = range.toString();\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                genAPopover(vditor, node);\n                var textInputElements = vditor.wysiwyg.popover.querySelectorAll(\"input\");\n                textInputElements[0].value = node.innerText;\n                textInputElements[1].focus();\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"table\") {\n            var tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>\";\n            if (range.toString().trim() === \"\") {\n                if (blockElement && blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    blockElement.outerHTML = tableHTML_1;\n                }\n                else {\n                    document.execCommand(\"insertHTML\", false, tableHTML_1);\n                }\n                range.selectNode(vditor.wysiwyg.element.querySelector(\"wbr\").previousSibling);\n                vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr>\";\n                var tableText = range.toString().split(\"\\n\");\n                var delimiter_1 = tableText[0].split(\",\").length > tableText[0].split(\"\\t\").length ? \",\" : \"\\t\";\n                tableText.forEach(function (rows, index) {\n                    if (index === 0) {\n                        rows.split(delimiter_1).forEach(function (header, subIndex) {\n                            if (subIndex === 0) {\n                                tableHTML_1 += \"<th>\" + header + \"<wbr></th>\";\n                            }\n                            else {\n                                tableHTML_1 += \"<th>\" + header + \"</th>\";\n                            }\n                        });\n                        tableHTML_1 += \"</tr></thead>\";\n                    }\n                    else {\n                        if (index === 1) {\n                            tableHTML_1 += \"<tbody><tr>\";\n                        }\n                        else {\n                            tableHTML_1 += \"<tr>\";\n                        }\n                        rows.split(delimiter_1).forEach(function (cell) {\n                            tableHTML_1 += \"<td>\" + cell + \"</td>\";\n                        });\n                        tableHTML_1 += \"</tr>\";\n                    }\n                });\n                tableHTML_1 += \"</tbody></table>\";\n                document.execCommand(\"insertHTML\", false, tableHTML_1);\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n            if (commandName === \"strike\") {\n                commandName = \"strikeThrough\";\n            }\n            if (range.toString() === \"\" && (commandName === \"bold\" || commandName === \"italic\" || commandName === \"strikeThrough\")) {\n                var tagName = \"strong\";\n                if (commandName === \"italic\") {\n                    tagName = \"em\";\n                }\n                else if (commandName === \"strikeThrough\") {\n                    tagName = \"s\";\n                }\n                var node = document.createElement(tagName);\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                if (node.previousSibling && node.previousSibling.textContent === constants/* Constants.ZWSP */.g.ZWSP) {\n                    //  zwsp\n                    node.previousSibling.textContent = \"\";\n                }\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    if (useHighlight) {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    if (useRender) {\n        afterRenderEvent(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/MenuItem.ts\n\n\n\n\n\n\n\nvar MenuItem = /** @class */ (function () {\n    function MenuItem(vditor, menuItem) {\n        var _a;\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        if (menuItem.className) {\n            (_a = this.element.classList).add.apply(_a, menuItem.className.split(\" \"));\n        }\n        var hotkey = menuItem.hotkey ? \" <\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \">\" : \"\";\n        if (menuItem.level === 2) {\n            hotkey = menuItem.hotkey ? \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \"&gt;\" : \"\";\n        }\n        var tip = menuItem.tip ?\n            menuItem.tip + hotkey : i18n/* i18n */.a[vditor.options.lang][menuItem.name] + hotkey;\n        var tagName = menuItem.name === \"upload\" ? \"div\" : \"button\";\n        if (menuItem.level === 2) {\n            this.element.innerHTML = \"<\" + tagName + \" data-type=\\\"\" + menuItem.name + \"\\\">\" + tip + \"</\" + tagName + \">\";\n        }\n        else {\n            this.element.classList.add(\"vditor-toolbar__item\");\n            var iconElement = document.createElement(tagName);\n            iconElement.setAttribute(\"data-type\", menuItem.name);\n            iconElement.className = \"vditor-tooltipped vditor-tooltipped__\" + menuItem.tipPosition;\n            iconElement.setAttribute(\"aria-label\", tip);\n            iconElement.innerHTML = menuItem.icon;\n            this.element.appendChild(iconElement);\n        }\n        if (!menuItem.prefix) {\n            return;\n        }\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            if (vditor.currentMode === \"wysiwyg\") {\n                toolbarEvent(vditor, _this.element.children[0], event);\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n            else {\n                processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n        });\n    }\n    return MenuItem;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/EditMode.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar setEditMode = function (vditor, type, event) {\n    var markdownText;\n    if (typeof event !== \"string\") {\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n        event.preventDefault();\n        markdownText = getMarkdown(vditor);\n    }\n    else {\n        markdownText = event;\n    }\n    if (vditor.currentMode === type && typeof event !== \"string\") {\n        return;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    if (vditor.options.preview.mode === \"both\" && type === \"sv\") {\n        vditor.preview.element.style.display = \"block\";\n    }\n    else {\n        vditor.preview.element.style.display = \"none\";\n    }\n    enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n    if (type === \"ir\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"block\";\n        vditor.lute.SetVditorIR(true);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"ir\";\n        vditor.ir.element.innerHTML = vditor.lute.Md2VditorIRDOM(markdownText);\n        process_processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n        vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        vditor.ir.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n    }\n    else if (type === \"wysiwyg\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"block\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(true);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"wysiwyg\";\n        setPadding(vditor);\n        renderDomByMd(vditor, markdownText, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n    else if (type === \"sv\") {\n        showToolbar(vditor.toolbar.elements, [\"both\"]);\n        hideToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        if (vditor.options.preview.mode === \"both\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        else if (vditor.options.preview.mode === \"editor\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(true);\n        vditor.currentMode = \"sv\";\n        var svHTML = processSpinVditorSVDOM(markdownText, vditor);\n        if (svHTML === \"<div data-block='0'></div>\") {\n            // https://github.com/Vanessa219/vditor/issues/654 SV  Placeholder \n            svHTML = \"\";\n        }\n        vditor.sv.element.innerHTML = svHTML;\n        processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n    }\n    vditor.undo.resetIcon(vditor);\n    if (typeof event !== \"string\") {\n        //  focus\n        vditor[vditor.currentMode].element.focus();\n        highlightToolbar(vditor);\n    }\n    renderToc(vditor);\n    setTypewriterPosition(vditor);\n    if (vditor.toolbar.elements[\"edit-mode\"]) {\n        vditor.toolbar.elements[\"edit-mode\"].querySelectorAll(\"button\").forEach(function (item) {\n            item.classList.remove(\"vditor-menu--current\");\n        });\n        vditor.toolbar.elements[\"edit-mode\"].querySelector(\"button[data-mode=\\\"\" + vditor.currentMode + \"\\\"]\").classList.add(\"vditor-menu--current\");\n    }\n    vditor.outline.toggle(vditor, vditor.currentMode !== \"sv\" && vditor.options.outline.enable);\n};\nvar EditMode = /** @class */ (function (_super) {\n    __extends(EditMode, _super);\n    function EditMode(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-mode=\\\"wysiwyg\\\">\" + i18n/* i18n */.a[vditor.options.lang].wysiwyg + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"7\") + \"></button>\\n<button data-mode=\\\"ir\\\">\" + i18n/* i18n */.a[vditor.options.lang].instantRendering + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"8\") + \"></button>\\n<button data-mode=\\\"sv\\\">\" + i18n/* i18n */.a[vditor.options.lang].splitView + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"9\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement, menuItem);\n        return _this;\n    }\n    EditMode.prototype._bindEvent = function (vditor, panelElement, menuItem) {\n        var actionBtn = this.element.children[0];\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        panelElement.children.item(0).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // wysiwyg\n            setEditMode(vditor, \"wysiwyg\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(1).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // ir\n            setEditMode(vditor, \"ir\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(2).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // markdown\n            setEditMode(vditor, \"sv\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n    };\n    return EditMode;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/getSelectText.ts\n\nvar getSelectText = function (editor, range) {\n    if ((0,selection/* selectIsEditor */.Gb)(editor, range)) {\n        return getSelection().toString();\n    }\n    return \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/editorCommonEvent.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar focusEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"focus\", function () {\n        if (vditor.options.focus) {\n            vditor.options.focus(getMarkdown(vditor));\n        }\n        hidePanel(vditor, [\"subToolbar\"]);\n    });\n};\nvar dblclickEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dblclick\", function (event) {\n        if (event.target.tagName === \"IMG\") {\n            (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n        }\n    });\n};\nvar blurEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"blur\", function (event) {\n        if (vditor.currentMode === \"ir\") {\n            var expandElement = vditor.ir.element.querySelector(\".vditor-ir__node--expand\");\n            if (expandElement) {\n                expandElement.classList.remove(\"vditor-ir__node--expand\");\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\" &&\n            !vditor.wysiwyg.selectPopover.contains(event.relatedTarget)) {\n            vditor.wysiwyg.hideComment();\n        }\n        vditor[vditor.currentMode].range = (0,selection/* getEditorRange */.zh)(vditor);\n        if (vditor.options.blur) {\n            vditor.options.blur(getMarkdown(vditor));\n        }\n    });\n};\nvar dropEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dragstart\", function (event) {\n        // \n        event.dataTransfer.setData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR, constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR);\n    });\n    editorElement.addEventListener(\"drop\", function (event) {\n        if (event.dataTransfer.getData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR)) {\n            // \n            execAfterRender(vditor);\n        }\n        else if (event.dataTransfer.types[0] === \"Files\" || event.dataTransfer.types.includes(\"text/html\")) {\n            // \n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        }\n    });\n};\nvar copyEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"copy\", function (event) { return copy(event, vditor); });\n};\nvar cutEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"cut\", function (event) {\n        copy(event, vditor);\n        //  comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\") {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        document.execCommand(\"delete\");\n    });\n};\nvar scrollCenter = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n        vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n    }\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var cursorTop = (0,selection/* getCursorPosition */.Ny)(editorElement).top;\n    if (typeof vditor.options.height === \"string\" && !vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        window.scrollTo(window.scrollX, cursorTop + vditor.element.offsetTop + vditor.toolbar.element.offsetHeight - window.innerHeight / 2 + 10);\n    }\n    if (typeof vditor.options.height === \"number\" || vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        editorElement.scrollTop = cursorTop + editorElement.scrollTop - editorElement.clientHeight / 2 + 10;\n    }\n};\nvar hotkeyEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"keydown\", function (event) {\n        // hint: \n        if ((vditor.options.hint.extend.length > 1 || vditor.toolbar.elements.emoji) &&\n            vditor.hint.select(event, vditor)) {\n            return;\n        }\n        //  comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\" &&\n            (event.key === \"Backspace\" || matchHotKey(\"X\", event))) {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        if (vditor.currentMode === \"sv\") {\n            if (processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\") {\n            if (wysiwyg_processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"ir\") {\n            if (processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        if (vditor.options.ctrlEnter && matchHotKey(\"Enter\", event)) {\n            vditor.options.ctrlEnter(getMarkdown(vditor));\n            event.preventDefault();\n            return;\n        }\n        // undo\n        if (matchHotKey(\"Z\", event) && !vditor.toolbar.elements.undo) {\n            vditor.undo.undo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // redo\n        if (matchHotKey(\"Y\", event) && !vditor.toolbar.elements.redo) {\n            vditor.undo.redo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // esc\n        if (event.key === \"Escape\") {\n            if (vditor.hint.element.style.display === \"block\") {\n                vditor.hint.element.style.display = \"none\";\n            }\n            else if (vditor.options.esc && !event.isComposing) {\n                vditor.options.esc(getMarkdown(vditor));\n            }\n            event.preventDefault();\n            return;\n        }\n        // h1 - h6 hotkey\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[1-6]$/.test(event.code)) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                var tagName = event.code.replace(\"Digit\", \"H\");\n                if ((0,hasClosest/* hasClosestByMatchTag */.lG)(getSelection().getRangeAt(0).startContainer, tagName)) {\n                    removeHeading(vditor);\n                }\n                else {\n                    setHeading(vditor, tagName);\n                }\n                afterRenderEvent(vditor);\n            }\n            else if (vditor.currentMode === \"sv\") {\n                processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            event.preventDefault();\n            return true;\n        }\n        // toggle edit mode\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[7-9]$/.test(event.code)) {\n            if (event.code === \"Digit7\") {\n                setEditMode(vditor, \"wysiwyg\", event);\n            }\n            else if (event.code === \"Digit8\") {\n                setEditMode(vditor, \"ir\", event);\n            }\n            else if (event.code === \"Digit9\") {\n                setEditMode(vditor, \"sv\", event);\n            }\n            return true;\n        }\n        // toolbar action\n        vditor.options.toolbar.find(function (menuItem) {\n            if (!menuItem.hotkey || menuItem.toolbar) {\n                if (menuItem.toolbar) {\n                    var sub = menuItem.toolbar.find(function (subMenuItem) {\n                        if (!subMenuItem.hotkey) {\n                            return false;\n                        }\n                        if (matchHotKey(subMenuItem.hotkey, event)) {\n                            vditor.toolbar.elements[subMenuItem.name].children[0]\n                                .dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                            event.preventDefault();\n                            return true;\n                        }\n                    });\n                    return sub ? true : false;\n                }\n                return false;\n            }\n            if (matchHotKey(menuItem.hotkey, event)) {\n                vditor.toolbar.elements[menuItem.name].children[0].dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                event.preventDefault();\n                return true;\n            }\n        });\n    });\n};\nvar selectEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"selectstart\", function (event) {\n        editorElement.onmouseup = function () {\n            setTimeout(function () {\n                var selectText = getSelectText(vditor[vditor.currentMode].element);\n                if (selectText.trim()) {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        if (!(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"footnotes-block\") &&\n                            !(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"link-ref-defs-block\")) {\n                            vditor.wysiwyg.showComment();\n                        }\n                        else {\n                            vditor.wysiwyg.hideComment();\n                        }\n                    }\n                    if (vditor.options.select) {\n                        vditor.options.select(selectText);\n                    }\n                }\n                else {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        vditor.wysiwyg.hideComment();\n                    }\n                }\n            });\n        };\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/process.ts\n\n\n\n\n\n\n\n\nvar processPaste = function (vditor, text) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    range.extractContents();\n    range.insertNode(document.createTextNode(Lute.Caret));\n    range.insertNode(document.createTextNode(text));\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    var html = \"<div data-block='0'>\" +\n        vditor.lute.Md2VditorSVDOM(blockElement.textContent).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    if (blockElement.isEqualNode(vditor.sv.element)) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n};\nvar getSideByType = function (spanNode, type, isPrevious) {\n    if (isPrevious === void 0) { isPrevious = true; }\n    var sideElement = spanNode;\n    if (sideElement.nodeType === 3) {\n        sideElement = sideElement.parentElement;\n    }\n    while (sideElement) {\n        if (sideElement.getAttribute(\"data-type\") === type) {\n            return sideElement;\n        }\n        if (isPrevious) {\n            sideElement = sideElement.previousElementSibling;\n        }\n        else {\n            sideElement = sideElement.nextElementSibling;\n        }\n    }\n    return false;\n};\nvar processSpinVditorSVDOM = function (html, vditor) {\n    log(\"SpinVditorSVDOM\", html, \"argument\", vditor.options.debugger);\n    html = \"<div data-block='0'>\" +\n        vditor.lute.SpinVditorSVDOM(html).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    log(\"SpinVditorSVDOM\", html, \"result\", vditor.options.debugger);\n    return html;\n};\nvar processPreviousMarkers = function (spanElement) {\n    var spanType = spanElement.getAttribute(\"data-type\");\n    var previousElement = spanElement.previousElementSibling;\n    // / marker \n    var markerText = (spanType && spanType !== \"text\" && spanType !== \"table\" && spanType !== \"heading-marker\" &&\n        spanType !== \"newline\" && spanType !== \"yaml-front-matter-open-marker\" && spanType !== \"yaml-front-matter-close-marker\"\n        && spanType !== \"code-block-info\" && spanType !== \"code-block-close-marker\" && spanType !== \"code-block-open-marker\") ?\n        spanElement.textContent : \"\";\n    var hasNL = false;\n    if (spanType === \"newline\") {\n        hasNL = true;\n    }\n    while (previousElement && !hasNL) {\n        var previousType = previousElement.getAttribute(\"data-type\");\n        if (previousType === \"li-marker\" || previousType === \"blockquote-marker\" || previousType === \"task-marker\" ||\n            previousType === \"padding\") {\n            var previousText = previousElement.textContent;\n            if (previousType === \"li-marker\" &&\n                (spanType === \"code-block-open-marker\" || spanType === \"code-block-info\")) {\n                // https://github.com/Vanessa219/vditor/issues/586\n                markerText = previousText.replace(/\\S/g, \" \") + markerText;\n            }\n            else if (spanType === \"code-block-close-marker\" &&\n                previousElement.nextElementSibling.isSameNode(spanElement)) {\n                // https://github.com/Vanessa219/vditor/issues/594\n                var openMarker = getSideByType(spanElement, \"code-block-open-marker\");\n                if (openMarker && openMarker.previousElementSibling) {\n                    previousElement = openMarker.previousElementSibling;\n                    markerText = previousText + markerText;\n                }\n            }\n            else {\n                markerText = previousText + markerText;\n            }\n        }\n        else if (previousType === \"newline\") {\n            hasNL = true;\n        }\n        previousElement = previousElement.previousElementSibling;\n    }\n    return markerText;\n};\nvar processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    vditor.preview.render(vditor);\n    var text = getMarkdown(vditor);\n    if (typeof vditor.options.input === \"function\" && options.enableInput) {\n        vditor.options.input(text);\n    }\n    if (vditor.options.counter.enable) {\n        vditor.counter.render(vditor, text);\n    }\n    if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n        localStorage.setItem(vditor.options.cache.id, text);\n        if (vditor.options.cache.after) {\n            vditor.options.cache.after(text);\n        }\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    clearTimeout(vditor.sv.processTimeoutId);\n    vditor.sv.processTimeoutId = window.setTimeout(function () {\n        if (options.enableAddUndoStack && !vditor.sv.composingLock) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (headingElement && headingElement.textContent.trim() !== \"\") {\n        value = \"\\n\" + value;\n    }\n    range.collapse(true);\n    document.execCommand(\"insertHTML\", false, value);\n};\nvar processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // \n    if (vditor.sv.element.childNodes.length === 0) {\n        vditor.sv.element.innerHTML = \"<span data-type=\\\"p\\\" data-block=\\\"0\\\"><span data-type=\\\"text\\\"><wbr></span></span><span data-type=\\\"newline\\\"><br><span style=\\\"display: none\\\">\\n</span></span>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (!blockElement) {\n        return;\n    }\n    if (commandName === \"link\") {\n        var html = void 0;\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + suffix;\n        }\n        else {\n            html = \"\" + prefix + range.toString() + suffix.replace(\")\", Lute.Caret + \")\");\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\" ||\n        commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\" || commandName === \"line\") {\n        var html = void 0;\n        // https://github.com/Vanessa219/vditor/issues/563  ```\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        else {\n            html = \"\" + prefix + range.toString() + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        if (commandName === \"table\" || (commandName === \"code\" && spanElement && spanElement.textContent !== \"\")) {\n            html = \"\\n\\n\" + html;\n        }\n        else if (commandName === \"line\") {\n            html = \"\\n\\n\" + prefix + \"\\n\" + Lute.Caret;\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\" ||\n        commandName === \"quote\") {\n        if (spanElement) {\n            var marker = \"* \";\n            if (commandName === \"check\") {\n                marker = \"* [ ] \";\n            }\n            else if (commandName === \"ordered-list\") {\n                marker = \"1. \";\n            }\n            else if (commandName === \"quote\") {\n                marker = \"> \";\n            }\n            var newLine = getSideByType(spanElement, \"newline\");\n            if (newLine) {\n                newLine.insertAdjacentText(\"afterend\", marker);\n            }\n            else {\n                blockElement.insertAdjacentText(\"afterbegin\", marker);\n            }\n            inputEvent(vditor);\n            return;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    processAfterRender(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/getElement.ts\nvar getElement = function (vditor) {\n    switch (vditor.currentMode) {\n        case \"ir\":\n            return vditor.ir.element;\n        case \"wysiwyg\":\n            return vditor.wysiwyg.element;\n        case \"sv\":\n            return vditor.sv.element;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/setHeaders.ts\nvar setHeaders = function (vditor, xhr) {\n    if (vditor.options.upload.setHeaders) {\n        vditor.options.upload.headers = vditor.options.upload.setHeaders();\n    }\n    if (vditor.options.upload.headers) {\n        Object.keys(vditor.options.upload.headers).forEach(function (key) {\n            xhr.setRequestHeader(key, vditor.options.upload.headers[key]);\n        });\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/index.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar Upload = /** @class */ (function () {\n    function Upload() {\n        this.isUploading = false;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-upload\";\n    }\n    return Upload;\n}());\nvar validateFile = function (vditor, files) {\n    vditor.tip.hide();\n    var uploadFileList = [];\n    var errorTip = \"\";\n    var uploadingStr = \"\";\n    var lang = vditor.options.lang;\n    var _loop_1 = function (iMax, i) {\n        var file = files[i];\n        var validate = true;\n        if (!file.name) {\n            errorTip += \"<li>\" + i18n/* i18n */.a[lang].nameEmpty + \"</li>\";\n            validate = false;\n        }\n        if (file.size > vditor.options.upload.max) {\n            errorTip += \"<li>\" + file.name + \" \" + i18n/* i18n */.a[lang].over + \" \" + vditor.options.upload.max / 1024 / 1024 + \"M</li>\";\n            validate = false;\n        }\n        var lastIndex = file.name.lastIndexOf(\".\");\n        var fileExt = file.name.substr(lastIndex);\n        var filename = vditor.options.upload.filename(file.name.substr(0, lastIndex)) + fileExt;\n        if (vditor.options.upload.accept) {\n            var isAccept = vditor.options.upload.accept.split(\",\").some(function (item) {\n                var type = item.trim();\n                if (type.indexOf(\".\") === 0) {\n                    if (fileExt.toLowerCase() === type.toLowerCase()) {\n                        return true;\n                    }\n                }\n                else {\n                    if (file.type.split(\"/\")[0] === type.split(\"/\")[0]) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (!isAccept) {\n                errorTip += \"<li>\" + file.name + \" \" + i18n/* i18n */.a[lang].fileTypeError + \"</li>\";\n                validate = false;\n            }\n        }\n        if (validate) {\n            uploadFileList.push(file);\n            uploadingStr += \"<li>\" + filename + \" \" + i18n/* i18n */.a[lang].uploading + \"</li>\";\n        }\n    };\n    for (var iMax = files.length, i = 0; i < iMax; i++) {\n        _loop_1(iMax, i);\n    }\n    vditor.tip.show(\"<ul>\" + errorTip + uploadingStr + \"</ul>\");\n    return uploadFileList;\n};\nvar genUploadedLabel = function (responseText, vditor) {\n    var editorElement = getElement(vditor);\n    editorElement.focus();\n    var response = JSON.parse(responseText);\n    var errorTip = \"\";\n    if (response.code === 1) {\n        errorTip = \"\" + response.msg;\n    }\n    if (response.data.errFiles && response.data.errFiles.length > 0) {\n        errorTip = \"<ul><li>\" + errorTip + \"</li>\";\n        response.data.errFiles.forEach(function (data) {\n            var lastIndex = data.lastIndexOf(\".\");\n            var filename = vditor.options.upload.filename(data.substr(0, lastIndex)) + data.substr(lastIndex);\n            errorTip += \"<li>\" + filename + \" \" + i18n/* i18n */.a[vditor.options.lang].uploadError + \"</li>\";\n        });\n        errorTip += \"</ul>\";\n    }\n    if (errorTip) {\n        vditor.tip.show(errorTip);\n    }\n    else {\n        vditor.tip.hide();\n    }\n    var succFileText = \"\";\n    Object.keys(response.data.succMap).forEach(function (key) {\n        var path = response.data.succMap[key];\n        var lastIndex = key.lastIndexOf(\".\");\n        var type = key.substr(lastIndex);\n        var filename = vditor.options.upload.filename(key.substr(0, lastIndex)) + type;\n        type = type.toLowerCase();\n        if (type.indexOf(\".wav\") === 0 || type.indexOf(\".mp3\") === 0 || type.indexOf(\".ogg\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<div class=\\\"vditor-wysiwyg__block\\\" data-type=\\\"html-block\\\"\\n data-block=\\\"0\\\"><pre><code>&lt;audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"&gt;&lt;/audio&gt;</code></pre>\";\n            }\n            else if (vditor.currentMode === \"ir\") {\n                succFileText += \"<audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"></audio>\\n\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else if (type.indexOf(\".apng\") === 0\n            || type.indexOf(\".bmp\") === 0\n            || type.indexOf(\".gif\") === 0\n            || type.indexOf(\".ico\") === 0 || type.indexOf(\".cur\") === 0\n            || type.indexOf(\".jpg\") === 0 || type.indexOf(\".jpeg\") === 0 || type.indexOf(\".jfif\") === 0 || type.indexOf(\".pjp\") === 0 || type.indexOf(\".pjpeg\") === 0\n            || type.indexOf(\".png\") === 0\n            || type.indexOf(\".svg\") === 0\n            || type.indexOf(\".webp\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<img alt=\\\"\" + filename + \"\\\" src=\\\"\" + path + \"\\\">\";\n            }\n            else {\n                succFileText += \"![\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<a href=\\\"\" + path + \"\\\">\" + filename + \"</a>\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n    });\n    (0,selection/* setSelectionFocus */.Hc)(vditor.upload.range);\n    document.execCommand(\"insertHTML\", false, succFileText);\n    vditor.upload.range = getSelection().getRangeAt(0).cloneRange();\n};\nvar uploadFiles = function (vditor, files, element) { return __awaiter(void 0, void 0, void 0, function () {\n    var fileList, filesMax, i, fileItem, isValidate, isValidate, editorElement, validateResult, formData, extraData, _i, _a, key, i, iMax, xhr;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileList = [];\n                filesMax = vditor.options.upload.multiple === true ? files.length : 1;\n                for (i = 0; i < filesMax; i++) {\n                    fileItem = files[i];\n                    if (fileItem instanceof DataTransferItem) {\n                        fileItem = fileItem.getAsFile();\n                    }\n                    fileList.push(fileItem);\n                }\n                if (vditor.options.upload.handler) {\n                    isValidate = vditor.options.upload.handler(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.url || !vditor.upload) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    vditor.tip.show(\"please config: options.upload.url\");\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.file) return [3 /*break*/, 2];\n                return [4 /*yield*/, vditor.options.upload.file(fileList)];\n            case 1:\n                fileList = _b.sent();\n                _b.label = 2;\n            case 2:\n                if (vditor.options.upload.validate) {\n                    isValidate = vditor.options.upload.validate(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                }\n                editorElement = getElement(vditor);\n                vditor.upload.range = (0,selection/* getEditorRange */.zh)(vditor);\n                validateResult = validateFile(vditor, fileList);\n                if (validateResult.length === 0) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    return [2 /*return*/];\n                }\n                formData = new FormData();\n                extraData = vditor.options.upload.extraData;\n                for (_i = 0, _a = Object.keys(extraData); _i < _a.length; _i++) {\n                    key = _a[_i];\n                    formData.append(key, extraData[key]);\n                }\n                for (i = 0, iMax = validateResult.length; i < iMax; i++) {\n                    formData.append(vditor.options.upload.fieldName, validateResult[i]);\n                }\n                xhr = new XMLHttpRequest();\n                xhr.open(\"POST\", vditor.options.upload.url);\n                if (vditor.options.upload.token) {\n                    xhr.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                }\n                if (vditor.options.upload.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                setHeaders(vditor, xhr);\n                vditor.upload.isUploading = true;\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === XMLHttpRequest.DONE) {\n                        vditor.upload.isUploading = false;\n                        editorElement.setAttribute(\"contenteditable\", \"true\");\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            if (vditor.options.upload.success) {\n                                vditor.options.upload.success(editorElement, xhr.responseText);\n                            }\n                            else {\n                                var responseText = xhr.responseText;\n                                if (vditor.options.upload.format) {\n                                    responseText = vditor.options.upload.format(files, xhr.responseText);\n                                }\n                                genUploadedLabel(responseText, vditor);\n                            }\n                        }\n                        else {\n                            if (vditor.options.upload.error) {\n                                vditor.options.upload.error(xhr.responseText);\n                            }\n                            else {\n                                vditor.tip.show(xhr.responseText);\n                            }\n                        }\n                        if (element) {\n                            element.value = \"\";\n                        }\n                        vditor.upload.element.style.display = \"none\";\n                    }\n                };\n                xhr.upload.onprogress = function (event) {\n                    if (!event.lengthComputable) {\n                        return;\n                    }\n                    var progress = event.loaded / event.total * 100;\n                    vditor.upload.element.style.display = \"block\";\n                    var progressBar = vditor.upload.element;\n                    progressBar.style.width = progress + \"%\";\n                };\n                xhr.send(formData);\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/input.ts\n\n\n\n\n\n\n\n\nvar input_input = function (vditor, range, event) {\n    var _a;\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        //  innerHTML\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (event && event.inputType !== \"formatItalic\"\n        && event.inputType !== \"deleteByDrag\"\n        && event.inputType !== \"insertFromDrop\"\n        && event.inputType !== \"formatBold\"\n        && event.inputType !== \"formatRemove\"\n        && event.inputType !== \"formatStrikeThrough\"\n        && event.inputType !== \"insertUnorderedList\"\n        && event.inputType !== \"insertOrderedList\"\n        && event.inputType !== \"formatOutdent\"\n        && event.inputType !== \"formatIndent\"\n        && event.inputType !== \"\" // document.execCommand('unlink', false)\n        || !event) {\n        var previousAEmptyElement = previoueIsEmptyA(range.startContainer);\n        if (previousAEmptyElement) {\n            //  https://github.com/Vanessa219/vditor/issues/163\n            previousAEmptyElement.remove();\n        }\n        // \n        vditor.wysiwyg.element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        // \n        blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n            item.removeAttribute(\"style\");\n        });\n        // \n        blockElement.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        //  \n        (_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        var html_1 = \"\";\n        if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n            // \n            blockElement = vditor.wysiwyg.element;\n        }\n        var isWYSIWYGElement = blockElement.isEqualNode(vditor.wysiwyg.element);\n        var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n        if (!isWYSIWYGElement) {\n            // \n            var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n            if (topListElement && !footnoteElement) {\n                var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n                if (blockquoteElement) {\n                    // li  blockquote  blockquote\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || blockElement;\n                }\n                else {\n                    blockElement = topListElement;\n                }\n            }\n            // \n            if (footnoteElement) {\n                blockElement = footnoteElement;\n            }\n            html_1 = blockElement.outerHTML;\n            if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n                // \n                var listPrevElement = blockElement.previousElementSibling;\n                var listNextElement = blockElement.nextElementSibling;\n                if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                    html_1 = listPrevElement.outerHTML + html_1;\n                    listPrevElement.remove();\n                }\n                if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                    html_1 = html_1 + listNextElement.outerHTML;\n                    listNextElement.remove();\n                }\n                // firefox  list item https://github.com/Vanessa219/vditor/issues/194\n                html_1 = html_1.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n            }\n            // \n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n            // \n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n        }\n        else {\n            html_1 = blockElement.innerHTML;\n        }\n        //  em strongs commonmark \n        html_1 = html_1.replace(/<\\/(strong|b)><strong data-marker=\"\\W{2}\">/g, \"\")\n            .replace(/<\\/(em|i)><em data-marker=\"\\W{1}\">/g, \"\")\n            .replace(/<\\/(s|strike)><s data-marker=\"~{1,2}\">/g, \"\");\n        if (html_1 === '<p data-block=\"0\">```<wbr></p>' && vditor.hint.recentLanguage) {\n            html_1 = '<p data-block=\"0\">```<wbr></p>'.replace(\"```\", \"```\" + vditor.hint.recentLanguage);\n        }\n        log(\"SpinVditorDOM\", html_1, \"argument\", vditor.options.debugger);\n        html_1 = vditor.lute.SpinVditorDOM(html_1);\n        log(\"SpinVditorDOM\", html_1, \"result\", vditor.options.debugger);\n        if (isWYSIWYGElement) {\n            blockElement.innerHTML = html_1;\n        }\n        else {\n            blockElement.outerHTML = html_1;\n            if (footnoteElement) {\n                //  tip\n                var footnoteItemElement = (0,hasClosest/* hasTopClosestByTag */.E2)(vditor.wysiwyg.element.querySelector(\"wbr\"), \"LI\");\n                if (footnoteItemElement) {\n                    var footnoteRefElement = vditor.wysiwyg.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + footnoteItemElement.getAttribute(\"data-marker\") + \"\\\"]\");\n                    if (footnoteRefElement) {\n                        footnoteRefElement.setAttribute(\"aria-label\", footnoteItemElement.textContent.trim().substr(0, 24));\n                    }\n                }\n            }\n        }\n        var firstLinkRefDefElement_1;\n        var allLinkRefDefsElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n        allLinkRefDefsElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstLinkRefDefElement_1 = item;\n            }\n            else {\n                firstLinkRefDefElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allLinkRefDefsElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n        }\n        // \n        var firstFootnoteElement_1;\n        var allFootnoteElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\");\n        allFootnoteElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstFootnoteElement_1 = item;\n            }\n            else {\n                firstFootnoteElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allFootnoteElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n        }\n        // \n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (event && (event.inputType === \"deleteContentBackward\" || event.inputType === \"deleteContentForward\") &&\n            vditor.options.comment.enable) {\n            vditor.wysiwyg.triggerRemoveComment(vditor);\n            vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n        }\n    }\n    renderToc(vditor);\n    afterRenderEvent(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/fixBrowserBehavior.ts\nvar __makeTemplateObject = (undefined && undefined.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar fixBrowserBehavior_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar fixBrowserBehavior_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://github.com/Vanessa219/vditor/issues/508 \nvar fixGSKeyBackspace = function (event, vditor, startContainer) {\n    if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\" && vditor.currentMode !== \"sv\") {\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        //  299\n        if (blockElement && blockElement.textContent.trim() === \"\") {\n            vditor[vditor.currentMode].composingLock = true;\n            return false;\n        }\n    }\n    return true;\n};\n// https://github.com/Vanessa219/vditor/issues/361 \nvar fixCJKPosition = function (range, vditor, event) {\n    if (event.key === \"Enter\" || event.key === \"Tab\" || event.key === \"Backspace\" || event.key.indexOf(\"Arrow\") > -1\n        || (0,compatibility/* isCtrl */.yl)(event) || event.key === \"Escape\" || event.shiftKey || event.altKey) {\n        return;\n    }\n    var pLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"P\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    if (pLiElement && (0,selection/* getSelectPosition */.im)(pLiElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var zwspNode = document.createTextNode(constants/* Constants.ZWSP */.g.ZWSP);\n        range.insertNode(zwspNode);\n        range.setStartAfter(zwspNode);\n    }\n};\n// https://github.com/Vanessa219/vditor/issues/381 \nvar fixCursorDownInlineMath = function (range, key) {\n    if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n        var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"math-inline\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-entity\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-inline\");\n        if (inlineElement) {\n            if (key === \"ArrowDown\") {\n                range.setStartAfter(inlineElement.parentElement);\n            }\n            if (key === \"ArrowUp\") {\n                range.setStartBefore(inlineElement.parentElement);\n            }\n        }\n    }\n};\nvar insertEmptyBlock = function (vditor, position) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (blockElement) {\n        blockElement.insertAdjacentHTML(position, \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        highlightToolbar(vditor);\n        execAfterRender(vditor);\n    }\n};\nvar isFirstCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.rows[0].cells[0].isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\nvar isLastCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.lastElementChild.lastElementChild.lastElementChild.isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\n// \nvar goPreviousCell = function (cellElement, range, isSelected) {\n    if (isSelected === void 0) { isSelected = true; }\n    var previousElement = cellElement.previousElementSibling;\n    if (!previousElement) {\n        if (cellElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement.previousElementSibling.lastElementChild;\n        }\n        else if (cellElement.parentElement.parentElement.tagName === \"TBODY\" &&\n            cellElement.parentElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement\n                .parentElement.previousElementSibling.lastElementChild.lastElementChild;\n        }\n        else {\n            previousElement = null;\n        }\n    }\n    if (previousElement) {\n        range.selectNodeContents(previousElement);\n        if (!isSelected) {\n            range.collapse(false);\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    return previousElement;\n};\nvar insertAfterBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowDown\" && element.textContent.trimRight().substr(position.start).indexOf(\"\\n\") === -1) ||\n        (event.key === \"ArrowRight\" && position.start >= element.textContent.trimRight().length)) {\n        var nextElement = blockElement.nextElementSibling;\n        if (!nextElement ||\n            (nextElement && (nextElement.tagName === \"TABLE\" || nextElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(nextElement);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar insertBeforeBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowUp\" && element.textContent.substr(0, position.start).indexOf(\"\\n\") === -1) ||\n        ((event.key === \"ArrowLeft\" || (event.key === \"Backspace\" && range.toString() === \"\")) &&\n            position.start === 0)) {\n        var previousElement = blockElement.previousElementSibling;\n        // table || code\n        if (!previousElement ||\n            (previousElement && (previousElement.tagName === \"TABLE\" || previousElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar listToggle = function (vditor, range, type, cancel) {\n    if (cancel === void 0) { cancel = true; }\n    var itemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n        wbr.remove();\n    });\n    range.insertNode(document.createElement(\"wbr\"));\n    if (cancel && itemElement) {\n        // \n        var pHTML = \"\";\n        for (var i = 0; i < itemElement.parentElement.childElementCount; i++) {\n            var inputElement = itemElement.parentElement.children[i].querySelector(\"input\");\n            if (inputElement) {\n                inputElement.remove();\n            }\n            pHTML += \"<p data-block=\\\"0\\\">\" + itemElement.parentElement.children[i].innerHTML.trimLeft() + \"</p>\";\n        }\n        itemElement.parentElement.insertAdjacentHTML(\"beforebegin\", pHTML);\n        itemElement.parentElement.remove();\n    }\n    else {\n        if (!itemElement) {\n            // \n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n            if (!blockElement) {\n                vditor[vditor.currentMode].element.querySelector(\"wbr\").remove();\n                blockElement = vditor[vditor.currentMode].element.querySelector(\"p\");\n                blockElement.innerHTML = \"<wbr>\";\n            }\n            if (type === \"check\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li class=\\\"vditor-task\\\"><input type=\\\"checkbox\\\" /> \" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"ordered-list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ol data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ol>\");\n                blockElement.remove();\n            }\n        }\n        else {\n            // \n            if (type === \"check\") {\n                itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                    item.insertAdjacentHTML(\"afterbegin\", \"<input type=\\\"checkbox\\\" />\" + (item.textContent.indexOf(\" \") === 0 ? \"\" : \" \"));\n                    item.classList.add(\"vditor-task\");\n                });\n            }\n            else {\n                if (itemElement.querySelector(\"input\")) {\n                    itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                        item.querySelector(\"input\").remove();\n                        item.classList.remove(\"vditor-task\");\n                    });\n                }\n                var element = void 0;\n                if (type === \"list\") {\n                    element = document.createElement(\"ul\");\n                }\n                else {\n                    element = document.createElement(\"ol\");\n                }\n                element.innerHTML = itemElement.parentElement.innerHTML;\n                itemElement.parentElement.parentNode.replaceChild(element, itemElement.parentElement);\n            }\n        }\n    }\n};\nvar listIndent = function (vditor, liElement, range) {\n    var previousElement = liElement.previousElementSibling;\n    if (liElement && previousElement) {\n        var liElements_1 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\"\n                && liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_1.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = previousElement.parentElement;\n        var liHTML_1 = \"\";\n        liElements_1.forEach(function (item) {\n            var marker = item.getAttribute(\"data-marker\");\n            if (marker.length !== 1) {\n                marker = \"1\" + marker.slice(-1);\n            }\n            liHTML_1 += \"<li data-node-id=\\\"\" + item.getAttribute(\"data-node-id\") + \"\\\" data-marker=\\\"\" + marker + \"\\\">\" + item.innerHTML + \"</li>\";\n            item.remove();\n        });\n        previousElement.insertAdjacentHTML(\"beforeend\", \"<\" + liParentElement.tagName + \" data-block=\\\"0\\\">\" + liHTML_1 + \"</\" + liParentElement.tagName + \">\");\n        if (vditor.currentMode === \"wysiwyg\") {\n            liParentElement.outerHTML = vditor.lute.SpinVditorDOM(liParentElement.outerHTML);\n        }\n        else {\n            liParentElement.outerHTML = vditor.lute.SpinVditorIRDOM(liParentElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar listOutdent = function (vditor, liElement, range, topListElement) {\n    var liParentLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(liElement.parentElement, \"LI\");\n    if (liParentLiElement) {\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = liElement.parentElement;\n        var liParentAfterElement = liParentElement.cloneNode();\n        var liElements_2 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\" &&\n                liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_2.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        var isMatch_1 = false;\n        var afterHTML_1 = \"\";\n        liParentElement.querySelectorAll(\"li\").forEach(function (item) {\n            if (isMatch_1) {\n                afterHTML_1 += item.outerHTML;\n                if (!item.nextElementSibling && !item.previousElementSibling) {\n                    item.parentElement.remove();\n                }\n                else {\n                    item.remove();\n                }\n            }\n            if (item.isSameNode(liElements_2[liElements_2.length - 1])) {\n                isMatch_1 = true;\n            }\n        });\n        liElements_2.reverse().forEach(function (item) {\n            liParentLiElement.insertAdjacentElement(\"afterend\", item);\n        });\n        if (afterHTML_1) {\n            liParentAfterElement.innerHTML = afterHTML_1;\n            liElements_2[0].insertAdjacentElement(\"beforeend\", liParentAfterElement);\n        }\n        if (vditor.currentMode === \"wysiwyg\") {\n            topListElement.outerHTML = vditor.lute.SpinVditorDOM(topListElement.outerHTML);\n        }\n        else {\n            topListElement.outerHTML = vditor.lute.SpinVditorIRDOM(topListElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar setTableAlign = function (tableElement, type) {\n    var cell = getSelection().getRangeAt(0).startContainer.parentElement;\n    var columnCnt = tableElement.rows[0].cells.length;\n    var rowCnt = tableElement.rows.length;\n    var currentColumn = 0;\n    for (var i = 0; i < rowCnt; i++) {\n        for (var j = 0; j < columnCnt; j++) {\n            if (tableElement.rows[i].cells[j].isSameNode(cell)) {\n                currentColumn = j;\n                break;\n            }\n        }\n    }\n    for (var k = 0; k < rowCnt; k++) {\n        tableElement.rows[k].cells[currentColumn].setAttribute(\"align\", type);\n    }\n};\nvar isHrMD = function (text) {\n    // - _ *\n    var marker = text.trimRight().split(\"\\n\").pop();\n    if (marker === \"\") {\n        return false;\n    }\n    if (marker.replace(/ |-/g, \"\") === \"\"\n        || marker.replace(/ |_/g, \"\") === \"\"\n        || marker.replace(/ |\\*/g, \"\") === \"\") {\n        if (marker.replace(/ /g, \"\").length > 2) {\n            if (marker.indexOf(\"-\") > -1 && marker.trimLeft().indexOf(\" \") === -1\n                && text.trimRight().split(\"\\n\").length > 1) {\n                //  heading\n                return false;\n            }\n            if (marker.indexOf(\"    \") === 0 || marker.indexOf(\"\\t\") === 0) {\n                // \n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\nvar isHeadingMD = function (text) {\n    // - =\n    var textArray = text.trimRight().split(\"\\n\");\n    text = textArray.pop();\n    if (text.indexOf(\"    \") === 0 || text.indexOf(\"\\t\") === 0) {\n        return false;\n    }\n    text = text.trimLeft();\n    if (text === \"\" || textArray.length === 0) {\n        return false;\n    }\n    if (text.replace(/-/g, \"\") === \"\"\n        || text.replace(/=/g, \"\") === \"\") {\n        return true;\n    }\n    return false;\n};\nvar execAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (vditor.currentMode === \"wysiwyg\") {\n        afterRenderEvent(vditor, options);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        process_processAfterRender(vditor, options);\n    }\n    else if (vditor.currentMode === \"sv\") {\n        processAfterRender(vditor, options);\n    }\n};\nvar fixList = function (range, vditor, pElement, event) {\n    var _a;\n    var startContainer = range.startContainer;\n    var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (liElement) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\" &&\n            // fix li  P  P  li\n            (!event.shiftKey && pElement && liElement.contains(pElement) && pElement.nextElementSibling)) {\n            if (liElement && !liElement.textContent.endsWith(\"\\n\")) {\n                // li  \\n\n                liElement.insertAdjacentText(\"beforeend\", \"\\n\");\n            }\n            range.insertNode(document.createTextNode(\"\\n\\n\"));\n            range.collapse(false);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            !liElement.previousElementSibling && range.toString() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(liElement, vditor[vditor.currentMode].element, range).start === 0) {\n            //  li \n            if (liElement.nextElementSibling) {\n                liElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\");\n                liElement.remove();\n            }\n            else {\n                liElement.parentElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\";\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            liElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" &&\n            range.toString() === \"\" && ((_a = liElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"LI\") {\n            liElement.previousElementSibling.insertAdjacentText(\"beforeend\", \"\\n\\n\");\n            range.selectNodeContents(liElement.previousElementSibling);\n            range.collapse(false);\n            liElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Tab\") {\n            // /tab \n            var isFirst = false;\n            if (range.startOffset === 0\n                && ((startContainer.nodeType === 3 && !startContainer.previousSibling)\n                    || (startContainer.nodeType !== 3 && startContainer.nodeName === \"LI\"))) {\n                // /\n                isFirst = true;\n            }\n            else if (liElement.classList.contains(\"vditor-task\") && range.startOffset === 1\n                && startContainer.previousSibling.nodeType !== 3\n                && startContainer.previousSibling.tagName === \"INPUT\") {\n                // \n                isFirst = true;\n            }\n            if (isFirst || range.toString() !== \"\") {\n                if (event.shiftKey) {\n                    listOutdent(vditor, liElement, range, liElement.parentElement);\n                }\n                else {\n                    listIndent(vditor, liElement, range);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// tab : block code render, table,  tab \nvar fixTab = function (vditor, range, event) {\n    if (vditor.options.tab && event.key === \"Tab\") {\n        if (event.shiftKey) {\n            // TODO shift+tab\n        }\n        else {\n            if (range.toString() === \"\") {\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n            else {\n                range.extractContents();\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n};\nvar fixMarkdown = function (event, vditor, pElement, range) {\n    if (!pElement) {\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        var pText = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\", \"\"], [\"\", \"\"])), pElement.textContent).replace(/\\\\\\|/g, \"\").trim();\n        var pTextList = pText.split(\"|\");\n        if (pText.startsWith(\"|\") && pText.endsWith(\"|\") && pTextList.length > 3) {\n            // table \n            var tableHeaderMD = pTextList.map(function () { return \"---\"; }).join(\"|\");\n            tableHeaderMD =\n                pElement.textContent + \"\\n\" + tableHeaderMD.substring(3, tableHeaderMD.length - 3) + \"\\n|<wbr>\";\n            pElement.outerHTML = vditor.lute.SpinVditorDOM(tableHeaderMD);\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // hr \n        if (isHrMD(pElement.innerHTML) && pElement.previousElementSibling) {\n            //  hr \n            var pInnerHTML = \"\";\n            var innerHTMLList = pElement.innerHTML.trimRight().split(\"\\n\");\n            if (innerHTMLList.length > 1) {\n                innerHTMLList.pop();\n                pInnerHTML = \"<p data-block=\\\"0\\\">\" + innerHTMLList.join(\"\\n\") + \"</p>\";\n            }\n            pElement.insertAdjacentHTML(\"afterend\", pInnerHTML + \"<hr data-block=\\\"0\\\"><p data-block=\\\"0\\\"><wbr>\\n</p>\");\n            pElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (isHeadingMD(pElement.innerHTML)) {\n            // heading \n            if (vditor.currentMode === \"wysiwyg\") {\n                pElement.outerHTML = vditor.lute.SpinVditorDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            else {\n                pElement.outerHTML = vditor.lute.SpinVditorIRDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    //  https://github.com/Vanessa219/vditor/issues/220\n    if (range.collapsed && pElement.previousElementSibling && event.key === \"Backspace\" &&\n        !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n        pElement.textContent.trimRight().split(\"\\n\").length > 1 &&\n        (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var lastElement = (0,hasClosest/* getLastNode */.DX)(pElement.previousElementSibling);\n        if (!lastElement.textContent.endsWith(\"\\n\")) {\n            lastElement.textContent = lastElement.textContent + \"\\n\";\n        }\n        lastElement.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + pElement.innerHTML);\n        pElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        return false;\n    }\n    return false;\n};\nvar insertRow = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tbody><tr>\" + rowHTML + \"</tr></tbody>\");\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertRowAbove = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        if (cellElement.tagName === \"TH\") {\n            rowHTML += \"<th align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </th>\";\n        }\n        else {\n            rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n        }\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<thead><tr>\" + rowHTML + \"</tr></thead>\");\n        range.insertNode(document.createElement(\"wbr\"));\n        var theadHTML = cellElement.parentElement.innerHTML.replace(/<th>/g, \"<td>\").replace(/<\\/th>/g, \"</td>\");\n        cellElement.parentElement.parentElement.nextElementSibling.insertAdjacentHTML(\"afterbegin\", theadHTML);\n        cellElement.parentElement.parentElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertColumn = function (vditor, tableElement, cellElement, type) {\n    if (type === void 0) { type = \"afterend\"; }\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        if (i === 0) {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<th> </th>\");\n        }\n        else {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<td> </td>\");\n        }\n    }\n    execAfterRender(vditor);\n};\nvar deleteRow = function (vditor, range, cellElement) {\n    if (cellElement.tagName === \"TD\") {\n        var tbodyElement = cellElement.parentElement.parentElement;\n        if (cellElement.parentElement.previousElementSibling) {\n            range.selectNodeContents(cellElement.parentElement.previousElementSibling.lastElementChild);\n        }\n        else {\n            range.selectNodeContents(tbodyElement.previousElementSibling.lastElementChild.lastElementChild);\n        }\n        if (tbodyElement.childElementCount === 1) {\n            tbodyElement.remove();\n        }\n        else {\n            cellElement.parentElement.remove();\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n    }\n};\nvar deleteColumn = function (vditor, range, tableElement, cellElement) {\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    if (cellElement.previousElementSibling || cellElement.nextElementSibling) {\n        range.selectNodeContents(cellElement.previousElementSibling || cellElement.nextElementSibling);\n        range.collapse(true);\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var cells = tableElement.rows[i].cells;\n        if (cells.length === 1) {\n            tableElement.remove();\n            highlightToolbar(vditor);\n            break;\n        }\n        cells[index].remove();\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    execAfterRender(vditor);\n};\nvar fixTable = function (vditor, event, range) {\n    var startContainer = range.startContainer;\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (cellElement) {\n        //  cell  br\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n            if (!cellElement.lastElementChild ||\n                (cellElement.lastElementChild && (!cellElement.lastElementChild.isSameNode(cellElement.lastChild) ||\n                    cellElement.lastElementChild.tagName !== \"BR\"))) {\n                cellElement.insertAdjacentHTML(\"beforeend\", \"<br>\");\n            }\n            var brElement = document.createElement(\"br\");\n            range.insertNode(brElement);\n            range.setStartAfter(brElement);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // tab cell\n        if (event.key === \"Tab\") {\n            if (event.shiftKey) {\n                // shift + tab  cell\n                goPreviousCell(cellElement, range);\n                event.preventDefault();\n                return true;\n            }\n            var nextElement = cellElement.nextElementSibling;\n            if (!nextElement) {\n                if (cellElement.parentElement.nextElementSibling) {\n                    nextElement = cellElement.parentElement.nextElementSibling.firstElementChild;\n                }\n                else if (cellElement.parentElement.parentElement.tagName === \"THEAD\" &&\n                    cellElement.parentElement.parentElement.nextElementSibling) {\n                    nextElement =\n                        cellElement.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;\n                }\n                else {\n                    nextElement = null;\n                }\n            }\n            if (nextElement) {\n                range.selectNodeContents(nextElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            event.preventDefault();\n            return true;\n        }\n        var tableElement = cellElement.parentElement.parentElement.parentElement;\n        if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (cellElement.tagName === \"TH\") {\n                if (tableElement.previousElementSibling) {\n                    range.selectNodeContents(tableElement.previousElementSibling);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"beforebegin\");\n                }\n                return true;\n            }\n            var m = 0;\n            var trElement = cellElement.parentElement;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var previousElement = trElement.previousElementSibling;\n            if (!previousElement) {\n                previousElement = trElement.parentElement.previousElementSibling.firstChild;\n            }\n            range.selectNodeContents(previousElement.cells[m]);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            var trElement = cellElement.parentElement;\n            if (!trElement.nextElementSibling && cellElement.tagName === \"TD\") {\n                if (tableElement.nextElementSibling) {\n                    range.selectNodeContents(tableElement.nextElementSibling);\n                    range.collapse(true);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"afterend\");\n                }\n                return true;\n            }\n            var m = 0;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var nextElement = trElement.nextElementSibling;\n            if (!nextElement) {\n                nextElement = trElement.parentElement.nextElementSibling.firstChild;\n            }\n            range.selectNodeContents(nextElement.cells[m]);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        // focus row input, only wysiwyg\n        if (vditor.currentMode === \"wysiwyg\" &&\n            !(0,compatibility/* isCtrl */.yl)(event) && event.key === \"Enter\" && !event.shiftKey && event.altKey) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElement.focus();\n            inputElement.select();\n            event.preventDefault();\n            return true;\n        }\n        // Backspace cell\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\"\n            && range.startOffset === 0 && range.toString() === \"\") {\n            var previousCellElement = goPreviousCell(cellElement, range, false);\n            if (!previousCellElement && tableElement) {\n                if (tableElement.textContent.trim() === \"\") {\n                    tableElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\\n</p>\";\n                    (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                }\n                else {\n                    range.setStartBefore(tableElement);\n                    range.collapse(true);\n                }\n                execAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (matchHotKey(\"F\", event)) {\n            insertRowAbove(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        //  https://github.com/Vanessa219/vditor/issues/46\n        if (matchHotKey(\"=\", event)) {\n            insertRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (matchHotKey(\"G\", event)) {\n            insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (matchHotKey(\"=\", event)) {\n            insertColumn(vditor, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (matchHotKey(\"-\", event)) {\n            deleteRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (matchHotKey(\"-\", event)) {\n            deleteColumn(vditor, range, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // \n        if (matchHotKey(\"L\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"left\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"left\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // \n        if (matchHotKey(\"C\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"center\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"center\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // \n        if (matchHotKey(\"R\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"right\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"right\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n};\nvar fixCodeBlock = function (vditor, event, codeRenderElement, range) {\n    //  command + a\n    if (codeRenderElement.tagName === \"PRE\" && matchHotKey(\"A\", event)) {\n        range.selectNodeContents(codeRenderElement.firstElementChild);\n        event.preventDefault();\n        return true;\n    }\n    // tab\n    // TODO shift + tab, shift and \n    if (vditor.options.tab && event.key === \"Tab\" && !event.shiftKey && range.toString() === \"\") {\n        range.insertNode(document.createTextNode(vditor.options.tab));\n        range.collapse(false);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // Backspace: \n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n        var codePosition = (0,selection/* getSelectPosition */.im)(codeRenderElement, vditor[vditor.currentMode].element, range);\n        if ((codePosition.start === 0 ||\n            (codePosition.start === 1 && codeRenderElement.innerText === \"\\n\")) //  \\n \n            && range.toString() === \"\") {\n            codeRenderElement.parentElement.outerHTML =\n                \"<p data-block=\\\"0\\\"><wbr>\" + codeRenderElement.firstElementChild.innerHTML + \"</p>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // \n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        if (!codeRenderElement.firstElementChild.textContent.endsWith(\"\\n\")) {\n            codeRenderElement.firstElementChild.insertAdjacentText(\"beforeend\", \"\\n\");\n        }\n        range.extractContents();\n        range.insertNode(document.createTextNode(\"\\n\"));\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        if (!(0,compatibility/* isFirefox */.vU)()) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                input_input(vditor, range);\n            }\n            else {\n                input(vditor, range);\n            }\n        }\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar fixBlockquote = function (vditor, range, event, pElement) {\n    var startContainer = range.startContainer;\n    var blockquoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"BLOCKQUOTE\");\n    if (blockquoteElement && range.toString() === \"\") {\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey &&\n            (0,selection/* getSelectPosition */.im)(blockquoteElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // Backspace: \n            range.insertNode(document.createElement(\"wbr\"));\n            blockquoteElement.outerHTML = blockquoteElement.innerHTML;\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (pElement && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && pElement.parentElement.tagName === \"BLOCKQUOTE\") {\n            // Enter: \n            var isEmpty = false;\n            if (pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\\n\" ||\n                pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                //  P\n                isEmpty = true;\n                pElement.remove();\n            }\n            else if (pElement.innerHTML.endsWith(\"\\n\\n\") &&\n                (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start ===\n                    pElement.textContent.length - 1) {\n                // \n                pElement.innerHTML = pElement.innerHTML.substr(0, pElement.innerHTML.length - 2);\n                isEmpty = true;\n            }\n            if (isEmpty) {\n                //  undo\n                blockquoteElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n                (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        if (vditor.currentMode === \"wysiwyg\" && blockElement && matchHotKey(\";\", event)) {\n            //  blockquote\n            range.insertNode(document.createElement(\"wbr\"));\n            blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            afterRenderEvent(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n    }\n    return false;\n};\nvar fixTask = function (vditor, range, event) {\n    var startContainer = range.startContainer;\n    var taskItemElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-task\");\n    if (taskItemElement) {\n        if (matchHotKey(\"J\", event)) {\n            // ctrl + shift: toggle checked\n            var inputElement = taskItemElement.firstElementChild;\n            if (inputElement.checked) {\n                inputElement.removeAttribute(\"checked\");\n            }\n            else {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // Backspace: \n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\"\n            && range.startOffset === 1\n            && ((startContainer.nodeType === 3 && startContainer.previousSibling &&\n                startContainer.previousSibling.tagName === \"INPUT\")\n                || startContainer.nodeType !== 3)) {\n            var previousElement = taskItemElement.previousElementSibling;\n            taskItemElement.querySelector(\"input\").remove();\n            if (previousElement) {\n                var lastNode = (0,hasClosest/* getLastNode */.DX)(previousElement);\n                lastNode.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + taskItemElement.innerHTML.trim());\n                taskItemElement.remove();\n            }\n            else {\n                taskItemElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + (taskItemElement.innerHTML.trim() || \"\\n\") + \"</p>\");\n                if (taskItemElement.nextElementSibling) {\n                    taskItemElement.remove();\n                }\n                else {\n                    taskItemElement.parentElement.remove();\n                }\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n            if (taskItemElement.textContent.trim() === \"\") {\n                // \n                if ((0,hasClosest/* hasClosestByClassName */.fb)(taskItemElement.parentElement, \"vditor-task\")) {\n                    // \n                    var topListElement = (0,hasClosest/* getTopList */.O9)(startContainer);\n                    if (topListElement) {\n                        listOutdent(vditor, taskItemElement, range, topListElement);\n                    }\n                }\n                else {\n                    // \n                    if (taskItemElement.nextElementSibling) {\n                        // \n                        var afterHTML_2 = \"\";\n                        var beforeHTML_1 = \"\";\n                        var isAfter_1 = false;\n                        Array.from(taskItemElement.parentElement.children).forEach(function (taskItem) {\n                            if (taskItemElement.isSameNode(taskItem)) {\n                                isAfter_1 = true;\n                            }\n                            else {\n                                if (isAfter_1) {\n                                    afterHTML_2 += taskItem.outerHTML;\n                                }\n                                else {\n                                    beforeHTML_1 += taskItem.outerHTML;\n                                }\n                            }\n                        });\n                        var parentTagName = taskItemElement.parentElement.tagName;\n                        var dataMarker = taskItemElement.parentElement.tagName === \"OL\" ? \"\" : \" data-marker=\\\"\" + taskItemElement.parentElement.getAttribute(\"data-marker\") + \"\\\"\";\n                        var startAttribute = \"\";\n                        if (beforeHTML_1) {\n                            startAttribute = taskItemElement.parentElement.tagName === \"UL\" ? \"\" : \" start=\\\"1\\\"\";\n                            beforeHTML_1 = \"<\" + parentTagName + \" data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\">\" + beforeHTML_1 + \"</\" + parentTagName + \">\";\n                        }\n                        // <p data-block=\"0\">\\n<wbr></p> => <p data-block=\"0\"><wbr>\\n</p>\n                        // https://github.com/Vanessa219/vditor/issues/430\n                        taskItemElement.parentElement.outerHTML = beforeHTML_1 + \"<p data-block=\\\"0\\\"><wbr>\\n</p><\" + parentTagName + \"\\n data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\"\" + startAttribute + \">\" + afterHTML_2 + \"</\" + parentTagName + \">\";\n                    }\n                    else {\n                        // \n                        taskItemElement.parentElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\"><wbr>\\n</p>\");\n                        if (taskItemElement.parentElement.querySelectorAll(\"li\").length === 1) {\n                            //  p \n                            taskItemElement.parentElement.remove();\n                        }\n                        else {\n                            // \n                            taskItemElement.remove();\n                        }\n                    }\n                }\n            }\n            else if (startContainer.nodeType !== 3 && range.startOffset === 0 &&\n                startContainer.firstChild.tagName === \"INPUT\") {\n                //  input \n                range.setStart(startContainer.childNodes[1], 1);\n            }\n            else {\n                // \n                range.setEndAfter(taskItemElement.lastChild);\n                taskItemElement.insertAdjacentHTML(\"afterend\", \"<li class=\\\"vditor-task\\\" data-marker=\\\"\" + taskItemElement.getAttribute(\"data-marker\") + \"\\\"><input type=\\\"checkbox\\\"> <wbr></li>\");\n                document.querySelector(\"wbr\").after(range.extractContents());\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixDelete = function (vditor, range, event, pElement) {\n    if (range.startContainer.nodeType !== 3) {\n        //  hr hr \n        var rangeElement = range.startContainer.children[range.startOffset];\n        if (rangeElement && rangeElement.tagName === \"HR\") {\n            range.selectNodeContents(rangeElement.previousElementSibling);\n            range.collapse(false);\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (pElement) {\n        var previousElement = pElement.previousElementSibling;\n        if (previousElement && (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0 &&\n            (((0,compatibility/* isFirefox */.vU)() && previousElement.tagName === \"HR\") || previousElement.tagName === \"TABLE\")) {\n            if (previousElement.tagName === \"TABLE\") {\n                // table  https://github.com/Vanessa219/vditor/issues/243\n                var lastCellElement = previousElement.lastElementChild.lastElementChild.lastElementChild;\n                lastCellElement.innerHTML =\n                    lastCellElement.innerHTML.trimLeft() + \"<wbr>\" + pElement.textContent.trim();\n                pElement.remove();\n            }\n            else {\n                //  hr \n                previousElement.remove();\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixHR = function (range) {\n    if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.nodeType !== 3 &&\n        range.startContainer.tagName === \"HR\") {\n        range.setStartBefore(range.startContainer);\n    }\n};\n// firefox https://github.com/Vanessa219/vditor/issues/407\nvar fixFirefoxArrowUpTable = function (event, blockElement, range) {\n    var _a, _b;\n    if (!(0,compatibility/* isFirefox */.vU)()) {\n        return false;\n    }\n    if (event.key === \"ArrowUp\" && blockElement && ((_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"TABLE\") {\n        var tableElement = blockElement.previousElementSibling;\n        range.selectNodeContents(tableElement.rows[tableElement.rows.length - 1].lastElementChild);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (event.key === \"ArrowDown\" && blockElement && ((_b = blockElement.nextElementSibling) === null || _b === void 0 ? void 0 : _b.tagName) === \"TABLE\") {\n        range.selectNodeContents(blockElement.nextElementSibling.rows[0].cells[0]);\n        range.collapse(true);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar paste = function (vditor, event, callback) { return fixBrowserBehavior_awaiter(void 0, void 0, void 0, function () {\n    var textHTML, textPlain, files, renderers, renderLinkDest, doc, height, code, codeElement, position, tempElement, blockElement, range;\n    var _a;\n    return fixBrowserBehavior_generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                event.stopPropagation();\n                event.preventDefault();\n                if (\"clipboardData\" in event) {\n                    textHTML = event.clipboardData.getData(\"text/html\");\n                    textPlain = event.clipboardData.getData(\"text/plain\");\n                    files = event.clipboardData.files;\n                }\n                else {\n                    textHTML = event.dataTransfer.getData(\"text/html\");\n                    textPlain = event.dataTransfer.getData(\"text/plain\");\n                    if (event.dataTransfer.types[0] === \"Files\") {\n                        files = event.dataTransfer.items;\n                    }\n                }\n                renderers = {};\n                renderLinkDest = function (node, entering) {\n                    if (!entering) {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    var src = node.TokensStr();\n                    if (node.__internal_object__.Parent.Type === 34 && src && src.indexOf(\"file://\") === -1 &&\n                        vditor.options.upload.linkToImgUrl) {\n                        var xhr_1 = new XMLHttpRequest();\n                        xhr_1.open(\"POST\", vditor.options.upload.linkToImgUrl);\n                        if (vditor.options.upload.token) {\n                            xhr_1.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                        }\n                        if (vditor.options.upload.withCredentials) {\n                            xhr_1.withCredentials = true;\n                        }\n                        setHeaders(vditor, xhr_1);\n                        xhr_1.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n                        xhr_1.onreadystatechange = function () {\n                            if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                                if (xhr_1.status === 200) {\n                                    var responseText = xhr_1.responseText;\n                                    if (vditor.options.upload.linkToImgFormat) {\n                                        responseText = vditor.options.upload.linkToImgFormat(xhr_1.responseText);\n                                    }\n                                    var responseJSON_1 = JSON.parse(responseText);\n                                    if (responseJSON_1.code !== 0) {\n                                        vditor.tip.show(responseJSON_1.msg);\n                                        return;\n                                    }\n                                    var original_1 = responseJSON_1.data.originalURL;\n                                    if (vditor.currentMode === \"sv\") {\n                                        vditor.sv.element.querySelectorAll(\".vditor-sv__marker--link\")\n                                            .forEach(function (item) {\n                                            if (item.textContent === original_1) {\n                                                item.textContent = responseJSON_1.data.url;\n                                            }\n                                        });\n                                    }\n                                    else {\n                                        var imgElement = vditor[vditor.currentMode].element.querySelector(\"img[src=\\\"\" + original_1 + \"\\\"]\");\n                                        imgElement.src = responseJSON_1.data.url;\n                                        if (vditor.currentMode === \"ir\") {\n                                            imgElement.previousElementSibling.previousElementSibling.innerHTML =\n                                                responseJSON_1.data.url;\n                                        }\n                                    }\n                                    execAfterRender(vditor);\n                                }\n                                else {\n                                    vditor.tip.show(xhr_1.responseText);\n                                }\n                                if (vditor.options.upload.linkToImgCallback) {\n                                    vditor.options.upload.linkToImgCallback(xhr_1.responseText);\n                                }\n                            }\n                        };\n                        xhr_1.send(JSON.stringify({ url: src }));\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        return [\"<span class=\\\"vditor-ir__marker vditor-ir__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    else {\n                        return [\"<span class=\\\"vditor-sv__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                };\n                // \n                if (textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                    \"<a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a>\" ||\n                    textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                        \"<!--StartFragment--><a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a><!--EndFragment-->\") {\n                    textHTML = \"\";\n                }\n                doc = new DOMParser().parseFromString(textHTML, \"text/html\");\n                if (doc.body) {\n                    textHTML = doc.body.innerHTML;\n                }\n                vditor.wysiwyg.getComments(vditor);\n                height = vditor[vditor.currentMode].element.scrollHeight;\n                code = processPasteCode(textHTML, textPlain, vditor.currentMode);\n                codeElement = vditor.currentMode === \"sv\" ?\n                    (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"code-block\") :\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"CODE\");\n                if (!codeElement) return [3 /*break*/, 1];\n                // \n                if (vditor.currentMode === \"sv\") {\n                    document.execCommand(\"insertHTML\", false, textPlain.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"));\n                }\n                else {\n                    position = (0,selection/* getSelectPosition */.im)(event.target, vditor[vditor.currentMode].element);\n                    if (codeElement.parentElement.tagName !== \"PRE\") {\n                        // https://github.com/Vanessa219/vditor/issues/463\n                        textPlain += constants/* Constants.ZWSP */.g.ZWSP;\n                    }\n                    codeElement.textContent = codeElement.textContent.substring(0, position.start)\n                        + textPlain + codeElement.textContent.substring(position.end);\n                    (0,selection/* setSelectionByPosition */.$j)(position.start + textPlain.length, position.start + textPlain.length, codeElement.parentElement);\n                    if ((_a = codeElement.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling.classList.contains(\"vditor-\" + vditor.currentMode + \"__preview\")) {\n                        codeElement.parentElement.nextElementSibling.innerHTML = codeElement.outerHTML;\n                        processCodeRender(codeElement.parentElement.nextElementSibling, vditor);\n                    }\n                }\n                return [3 /*break*/, 6];\n            case 1:\n                if (!code) return [3 /*break*/, 2];\n                callback.pasteCode(code);\n                return [3 /*break*/, 6];\n            case 2:\n                if (!(textHTML.trim() !== \"\")) return [3 /*break*/, 3];\n                tempElement = document.createElement(\"div\");\n                tempElement.innerHTML = textHTML;\n                tempElement.querySelectorAll(\"[style]\").forEach(function (e) {\n                    e.removeAttribute(\"style\");\n                });\n                tempElement.querySelectorAll(\".vditor-copy\").forEach(function (e) {\n                    e.remove();\n                });\n                if (vditor.currentMode === \"ir\") {\n                    renderers.HTML2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorIRDOM(tempElement.innerHTML), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    renderers.HTML2VditorDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorDOM(tempElement.innerHTML), vditor);\n                }\n                else {\n                    renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    processPaste(vditor, vditor.lute.HTML2Md(tempElement.innerHTML).trimRight());\n                }\n                vditor.outline.render(vditor);\n                return [3 /*break*/, 6];\n            case 3:\n                if (!(files.length > 0 && vditor.options.upload.url)) return [3 /*break*/, 5];\n                return [4 /*yield*/, uploadFiles(vditor, files)];\n            case 4:\n                _b.sent();\n                return [3 /*break*/, 6];\n            case 5:\n                if (textPlain.trim() !== \"\" && files.length === 0) {\n                    if (vditor.currentMode === \"ir\") {\n                        renderers.Md2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorIRDOM(textPlain), vditor);\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        renderers.Md2VditorDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorDOM(textPlain), vditor);\n                    }\n                    else {\n                        renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        processPaste(vditor, textPlain);\n                    }\n                    vditor.outline.render(vditor);\n                }\n                _b.label = 6;\n            case 6:\n                if (vditor.currentMode !== \"sv\") {\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)((0,selection/* getEditorRange */.zh)(vditor).startContainer);\n                    if (blockElement) {\n                        range = (0,selection/* getEditorRange */.zh)(vditor);\n                        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n                            wbr.remove();\n                        });\n                        range.insertNode(document.createElement(\"wbr\"));\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                        }\n                        else {\n                            blockElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.outerHTML);\n                        }\n                        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                    }\n                    vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                        .forEach(function (item) {\n                        processCodeRender(item, vditor);\n                    });\n                }\n                vditor.wysiwyg.triggerRemoveComment(vditor);\n                execAfterRender(vditor);\n                if (vditor[vditor.currentMode].element.scrollHeight - height >\n                    Math.min(vditor[vditor.currentMode].element.clientHeight, window.innerHeight) / 2) {\n                    scrollCenter(vditor);\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar templateObject_1;\n\n;// CONCATENATED MODULE: ./src/ts/ir/process.ts\n\n\n\n\n\n\n\n\n\nvar processHint = function (vditor) {\n    vditor.hint.render(vditor);\n    var startContainer = (0,selection/* getEditorRange */.zh)(vditor).startContainer;\n    // \n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (preBeforeElement.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && vditor.hint.recentLanguage) {\n            preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + vditor.hint.recentLanguage;\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            range.selectNodeContents(preBeforeElement);\n        }\n        else {\n            var matchLangData_1 = [];\n            var key_1 = preBeforeElement.textContent.substring(0, (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start)\n                .replace(constants/* Constants.ZWSP */.g.ZWSP, \"\");\n            constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                if (keyName.indexOf(key_1.toLowerCase()) > -1) {\n                    matchLangData_1.push({\n                        html: keyName,\n                        value: keyName,\n                    });\n                }\n            });\n            vditor.hint.genHTML(matchLangData_1, key_1, vditor);\n        }\n    }\n};\nvar process_processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        processHint(vditor);\n    }\n    clearTimeout(vditor.ir.processTimeoutId);\n    vditor.ir.processTimeoutId = window.setTimeout(function () {\n        if (vditor.ir.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar process_processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || range.startContainer;\n    if (headingElement) {\n        var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n        if (headingMarkerElement) {\n            headingMarkerElement.innerHTML = value;\n        }\n        else {\n            headingElement.insertAdjacentText(\"afterbegin\", value);\n            range.selectNodeContents(headingElement);\n            range.collapse(false);\n        }\n        input(vditor, range.cloneRange());\n        highlightToolbarIR(vditor);\n    }\n};\nvar removeInline = function (range, vditor, type) {\n    var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", type);\n    if (inlineElement) {\n        inlineElement.firstElementChild.remove();\n        inlineElement.lastElementChild.remove();\n        range.insertNode(document.createElement(\"wbr\"));\n        var tempElement = document.createElement(\"div\");\n        tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(inlineElement.outerHTML);\n        inlineElement.outerHTML = tempElement.firstElementChild.innerHTML.trim();\n    }\n};\nvar process_processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    var typeElement = range.startContainer;\n    if (typeElement.nodeType === 3) {\n        typeElement = typeElement.parentElement;\n    }\n    var useHighlight = true;\n    // \n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n            if (quoteElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n            }\n        }\n        else if (commandName === \"link\") {\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"a\");\n            if (aElement) {\n                var aTextElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__link\");\n                if (aTextElement) {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    aElement.outerHTML = aTextElement.innerHTML;\n                }\n                else {\n                    aElement.outerHTML = aElement.querySelector(\".vditor-ir__link\").innerHTML + \"<wbr>\";\n                }\n            }\n        }\n        else if (commandName === \"italic\") {\n            removeInline(range, vditor, \"em\");\n        }\n        else if (commandName === \"bold\") {\n            removeInline(range, vditor, \"strong\");\n        }\n        else if (commandName === \"strike\") {\n            removeInline(range, vditor, \"s\");\n        }\n        else if (commandName === \"inline-code\") {\n            removeInline(range, vditor, \"code\");\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n    }\n    else {\n        // \n        if (vditor.ir.element.childNodes.length === 0) {\n            vditor.ir.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n            }\n        }\n        else if (commandName === \"quote\") {\n            if (blockElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n            }\n        }\n        else if (commandName === \"link\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                html = \"\" + prefix + range.toString() + suffix.replace(\")\", \"<wbr>)\");\n            }\n            document.execCommand(\"insertHTML\", false, html);\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\"\n            || commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                if (commandName === \"code\" || commandName === \"table\") {\n                    html = \"\" + prefix + range.toString() + \"<wbr>\" + suffix;\n                }\n                else {\n                    html = \"\" + prefix + range.toString() + suffix + \"<wbr>\";\n                }\n                range.deleteContents();\n            }\n            if (commandName === \"table\" || commandName === \"code\") {\n                html = \"\\n\" + html + \"\\n\\n\";\n            }\n            var spanElement = document.createElement(\"span\");\n            spanElement.innerHTML = html;\n            range.insertNode(spanElement);\n            input(vditor, range);\n            if (commandName === \"table\") {\n                range.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    process_processAfterRender(vditor);\n    if (useHighlight) {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/hint/index.ts\n\n\n\n\n\n\n\n\nvar Hint = /** @class */ (function () {\n    function Hint(hintExtends) {\n        var _this = this;\n        this.splitChar = \"\";\n        this.lastIndex = -1;\n        this.fillEmoji = function (element, vditor) {\n            _this.element.style.display = \"none\";\n            var value = decodeURIComponent(element.getAttribute(\"data-value\"));\n            var range = window.getSelection().getRangeAt(0);\n            // \n            if (vditor.currentMode === \"ir\") {\n                var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"code-block-info\");\n                if (preBeforeElement) {\n                    preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + value.trimRight();\n                    range.selectNodeContents(preBeforeElement);\n                    range.collapse(false);\n                    process_processAfterRender(vditor);\n                    preBeforeElement.parentElement.querySelectorAll(\"code\").forEach(function (item) {\n                        item.className = \"language-\" + value.trimRight();\n                    });\n                    processCodeRender(preBeforeElement.parentElement.querySelector(\".vditor-ir__preview\"), vditor);\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            if (vditor.currentMode === \"wysiwyg\" && range.startContainer.nodeType !== 3 &&\n                range.startContainer.firstElementChild.classList.contains(\"vditor-input\")) {\n                var inputElement = range.startContainer.firstElementChild;\n                inputElement.value = value.trimRight();\n                range.selectNodeContents(inputElement);\n                range.collapse(false);\n                inputElement.dispatchEvent(new CustomEvent(\"input\"));\n                _this.recentLanguage = value.trimRight();\n                return;\n            }\n            range.setStart(range.startContainer, _this.lastIndex);\n            range.deleteContents();\n            if (vditor.options.hint.parse) {\n                if (vditor.currentMode === \"sv\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorSVDOM(value), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorDOM(value), vditor);\n                }\n                else {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorIRDOM(value), vditor);\n                }\n            }\n            else {\n                (0,selection/* insertHTML */.oC)(value, vditor);\n            }\n            if (_this.splitChar === \":\" && value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                range.insertNode(document.createTextNode(\" \"));\n            }\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            if (vditor.currentMode === \"wysiwyg\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__block\");\n                if (preElement && preElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                    preElement.lastElementChild.innerHTML = preElement.firstElementChild.innerHTML;\n                    processCodeRender(preElement.lastElementChild, vditor);\n                }\n            }\n            else if (vditor.currentMode === \"ir\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker--pre\");\n                if (preElement && preElement.nextElementSibling.classList.contains(\"vditor-ir__preview\")) {\n                    preElement.nextElementSibling.innerHTML = preElement.innerHTML;\n                    processCodeRender(preElement.nextElementSibling, vditor);\n                }\n            }\n            execAfterRender(vditor);\n        };\n        this.timeId = -1;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-hint\";\n        this.recentLanguage = \"\";\n        hintExtends.push({ key: \":\" });\n    }\n    Hint.prototype.render = function (vditor) {\n        var _this = this;\n        if (!window.getSelection().focusNode) {\n            return;\n        }\n        var currentLineValue;\n        var range = getSelection().getRangeAt(0);\n        currentLineValue = range.startContainer.textContent.substring(0, range.startOffset) || \"\";\n        var key = this.getKey(currentLineValue, vditor.options.hint.extend);\n        if (typeof key === \"undefined\") {\n            this.element.style.display = \"none\";\n            clearTimeout(this.timeId);\n        }\n        else {\n            if (this.splitChar === \":\") {\n                var emojiHint_1 = key === \"\" ? vditor.options.hint.emoji : vditor.lute.GetEmojis();\n                var matchEmojiData_1 = [];\n                Object.keys(emojiHint_1).forEach(function (keyName) {\n                    if (keyName.indexOf(key.toLowerCase()) === 0) {\n                        if (emojiHint_1[keyName].indexOf(\".\") > -1) {\n                            matchEmojiData_1.push({\n                                html: \"<img src=\\\"\" + emojiHint_1[keyName] + \"\\\" title=\\\":\" + keyName + \":\\\"/> :\" + keyName + \":\",\n                                value: \":\" + keyName + \":\",\n                            });\n                        }\n                        else {\n                            matchEmojiData_1.push({\n                                html: \"<span class=\\\"vditor-hint__emoji\\\">\" + emojiHint_1[keyName] + \"</span>\" + keyName,\n                                value: emojiHint_1[keyName],\n                            });\n                        }\n                    }\n                });\n                this.genHTML(matchEmojiData_1, key, vditor);\n            }\n            else {\n                vditor.options.hint.extend.forEach(function (item) {\n                    if (item.key === _this.splitChar) {\n                        clearTimeout(_this.timeId);\n                        _this.timeId = window.setTimeout(function () {\n                            _this.genHTML(item.hint(key), key, vditor);\n                        }, vditor.options.hint.delay);\n                    }\n                });\n            }\n        }\n    };\n    Hint.prototype.genHTML = function (data, key, vditor) {\n        var _this = this;\n        if (data.length === 0) {\n            this.element.style.display = \"none\";\n            return;\n        }\n        var editorElement = vditor[vditor.currentMode].element;\n        var textareaPosition = (0,selection/* getCursorPosition */.Ny)(editorElement);\n        var x = textareaPosition.left +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0);\n        var y = textareaPosition.top;\n        var hintsHTML = \"\";\n        data.forEach(function (hintData, i) {\n            if (i > 7) {\n                return;\n            }\n            // process high light\n            var html = hintData.html;\n            if (key !== \"\") {\n                var lastIndex = html.lastIndexOf(\">\") + 1;\n                var replaceHtml = html.substr(lastIndex);\n                var replaceIndex = replaceHtml.toLowerCase().indexOf(key.toLowerCase());\n                if (replaceIndex > -1) {\n                    replaceHtml = replaceHtml.substring(0, replaceIndex) + \"<b>\" +\n                        replaceHtml.substring(replaceIndex, replaceIndex + key.length) + \"</b>\" +\n                        replaceHtml.substring(replaceIndex + key.length);\n                    html = html.substr(0, lastIndex) + replaceHtml;\n                }\n            }\n            hintsHTML += \"<button data-value=\\\"\" + encodeURIComponent(hintData.value) + \" \\\"\\n\" + (i === 0 ? \"class='vditor-hint--current'\" : \"\") + \"> \" + html + \"</button>\";\n        });\n        this.element.innerHTML = hintsHTML;\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(editorElement, null)\n            .getPropertyValue(\"line-height\"), 10);\n        this.element.style.top = y + (lineHeight || 22) + \"px\";\n        this.element.style.left = x + \"px\";\n        this.element.style.display = \"block\";\n        this.element.style.right = \"auto\";\n        this.element.querySelectorAll(\"button\").forEach(function (element) {\n            element.addEventListener(\"click\", function (event) {\n                _this.fillEmoji(element, vditor);\n                event.preventDefault();\n            });\n        });\n        // hint \n        if (this.element.getBoundingClientRect().bottom > window.innerHeight) {\n            this.element.style.top = y - this.element.offsetHeight + \"px\";\n        }\n        if (this.element.getBoundingClientRect().right > window.innerWidth) {\n            this.element.style.left = \"auto\";\n            this.element.style.right = \"0\";\n        }\n    };\n    Hint.prototype.select = function (event, vditor) {\n        if (this.element.querySelectorAll(\"button\").length === 0 ||\n            this.element.style.display === \"none\") {\n            return false;\n        }\n        var currentHintElement = this.element.querySelector(\".vditor-hint--current\");\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.nextElementSibling) {\n                this.element.children[0].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.nextElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.previousElementSibling) {\n                var length_1 = this.element.children.length;\n                this.element.children[length_1 - 1].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.previousElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\" && !event.isComposing) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.fillEmoji(currentHintElement, vditor);\n            return true;\n        }\n        return false;\n    };\n    Hint.prototype.getKey = function (currentLineValue, extend) {\n        var _this = this;\n        this.lastIndex = -1;\n        this.splitChar = \"\";\n        extend.forEach(function (item) {\n            var currentLastIndex = currentLineValue.lastIndexOf(item.key);\n            if (_this.lastIndex < currentLastIndex) {\n                _this.splitChar = item.key;\n                _this.lastIndex = currentLastIndex;\n            }\n        });\n        var key;\n        if (this.lastIndex === -1) {\n            return key;\n        }\n        var lineArray = currentLineValue.split(this.splitChar);\n        var lastItem = lineArray[lineArray.length - 1];\n        var maxLength = 32;\n        if (lineArray.length > 1 && lastItem.trim() === lastItem) {\n            if (lineArray.length === 2 && lineArray[0] === \"\" && lineArray[1].length < maxLength) {\n                key = lineArray[1];\n            }\n            else {\n                var preChar = lineArray[lineArray.length - 2].slice(-1);\n                if ((0,code160to32/* code160to32 */.X)(preChar) === \" \" && lastItem.length < maxLength) {\n                    key = lastItem;\n                }\n            }\n        }\n        return key;\n    };\n    return Hint;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ir/index.ts\n\n\n\n\n\n\n\n\n\n\n\nvar IR = /** @class */ (function () {\n    function IR(vditor) {\n        this.composingLock = false;\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-ir\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\";\n        this.element = divElement.firstElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    IR.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorIRDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    IR.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input(vditor, getSelection().getRangeAt(0).cloneRange());\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 \n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"\" || event.data === \"\" || event.data === \"\") {\n                return;\n            }\n            input(vditor, getSelection().getRangeAt(0).cloneRange(), false, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                if (event.target.checked) {\n                    event.target.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    event.target.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                process_processAfterRender(vditor);\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            // \n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-ir__preview\");\n            if (!previewElement) {\n                previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            }\n            if (previewElement) {\n                if (previewElement.previousElementSibling.firstElementChild) {\n                    range.selectNodeContents(previewElement.previousElementSibling.firstElementChild);\n                }\n                else {\n                    // \n                    range.selectNodeContents(previewElement.previousElementSibling);\n                }\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                scrollCenter(vditor);\n            }\n            // \n            if (event.target.tagName === \"IMG\") {\n                var linkElement = event.target.parentElement.querySelector(\".vditor-ir__marker--link\");\n                if (linkElement) {\n                    range.selectNode(linkElement);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n            }\n            // \n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"a\");\n            if (aElement && (!aElement.classList.contains(\"vditor-ir__node--expand\"))) {\n                window.open(aElement.querySelector(\":scope > .vditor-ir__marker--link\").textContent);\n                return;\n            }\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            if (range.toString() === \"\") {\n                expandMarker(range, vditor);\n            }\n            else {\n                // https://github.com/Vanessa219/vditor/pull/681  eventTarget  range  range \n                setTimeout(function () {\n                    expandMarker((0,selection/* getEditorRange */.zh)(vditor), vditor);\n                });\n            }\n            clickToc(event, vditor);\n            highlightToolbarIR(vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            highlightToolbarIR(vditor);\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.ir.element.innerHTML !== \"\" && vditor.ir.element.childNodes.length === 1 &&\n                vditor.ir.element.firstElementChild && vditor.ir.element.firstElementChild.tagName === \"P\"\n                && vditor.ir.element.firstElementChild.childElementCount === 0\n                && (vditor.ir.element.textContent === \"\" || vditor.ir.element.textContent === \"\\n\")) {\n                //  placeholder\n                vditor.ir.element.innerHTML = \"\";\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                    expandMarker(range, vditor);\n                }\n                //  table br\n                _this.element.querySelectorAll(\".language-math\").forEach(function (item) {\n                    var brElement = item.querySelector(\"br\");\n                    if (brElement) {\n                        brElement.remove();\n                    }\n                });\n            }\n            else if (event.key.indexOf(\"Arrow\") > -1) {\n                if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                    processHint(vditor);\n                }\n                expandMarker(range, vditor);\n            }\n            else if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\") {\n                // https://github.com/Vanessa219/vditor/issues/508 IR \n                expandMarker(range, vditor);\n            }\n            var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            if (previewRenderElement) {\n                if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n                    if (previewRenderElement.previousElementSibling.firstElementChild) {\n                        range.selectNodeContents(previewRenderElement.previousElementSibling.firstElementChild);\n                    }\n                    else {\n                        // /html entity\n                        range.selectNodeContents(previewRenderElement.previousElementSibling);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n                if (previewRenderElement.tagName === \"SPAN\" &&\n                    (event.key === \"ArrowDown\" || event.key === \"ArrowRight\")) {\n                    if (previewRenderElement.parentElement.getAttribute(\"data-type\") === \"html-entity\") {\n                        // html entity\n                        previewRenderElement.parentElement.insertAdjacentText(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n                        range.setStart(previewRenderElement.parentElement.nextSibling, 1);\n                    }\n                    else {\n                        range.selectNodeContents(previewRenderElement.parentElement.lastElementChild);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        });\n    };\n    return IR;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/markdown/getHTML.ts\n\nvar getHTML = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return vditor.lute.Md2HTML(getMarkdown(vditor));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2HTML(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2HTML(vditor.ir.element.innerHTML);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n;// CONCATENATED MODULE: ./src/ts/outline/index.ts\n\n\n\n\nvar Outline = /** @class */ (function () {\n    function Outline(outlineLabel) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-outline\";\n        this.element.innerHTML = \"<div class=\\\"vditor-outline__title\\\">\" + outlineLabel + \"</div>\\n<div class=\\\"vditor-outline__content\\\"></div>\";\n    }\n    Outline.prototype.render = function (vditor) {\n        var html = \"\";\n        if (vditor.preview.element.style.display === \"block\") {\n            html = (0,outlineRender/* outlineRender */.k)(vditor.preview.element.lastElementChild, this.element.lastElementChild, vditor);\n        }\n        else {\n            html = (0,outlineRender/* outlineRender */.k)(vditor[vditor.currentMode].element, this.element.lastElementChild, vditor);\n        }\n        return html;\n    };\n    Outline.prototype.toggle = function (vditor, show) {\n        var _a;\n        if (show === void 0) { show = true; }\n        var btnElement = (_a = vditor.toolbar.elements.outline) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n        if (show && window.innerWidth >= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH) {\n            this.element.style.display = \"block\";\n            this.render(vditor);\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.add(\"vditor-menu--current\");\n        }\n        else {\n            this.element.style.display = \"none\";\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.remove(\"vditor-menu--current\");\n        }\n        if (getSelection().rangeCount > 0) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                vditor[vditor.currentMode].element.focus();\n            }\n        }\n        setPadding(vditor);\n    };\n    return Outline;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n;// CONCATENATED MODULE: ./src/ts/preview/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Preview = /** @class */ (function () {\n    function Preview(vditor) {\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-preview\";\n        var previewElement = document.createElement(\"div\");\n        previewElement.className = \"vditor-reset\";\n        if (vditor.options.classes.preview) {\n            previewElement.classList.add(vditor.options.classes.preview);\n        }\n        previewElement.style.maxWidth = vditor.options.preview.maxWidth + \"px\";\n        previewElement.addEventListener(\"copy\", function (event) {\n            if (event.target.tagName === \"TEXTAREA\") {\n                // https://github.com/Vanessa219/vditor/issues/901\n                return;\n            }\n            var tempElement = document.createElement(\"div\");\n            tempElement.className = \"vditor-reset\";\n            tempElement.appendChild(getSelection().getRangeAt(0).cloneContents());\n            _this.copyToX(vditor, tempElement);\n            event.preventDefault();\n        });\n        previewElement.addEventListener(\"click\", function (event) {\n            var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n            if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                if (headingElement) {\n                    _this.element.scrollTop = headingElement.offsetTop;\n                }\n                return;\n            }\n            if (event.target.tagName === \"IMG\") {\n                (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n            }\n        });\n        var actions = vditor.options.preview.actions;\n        var actionElement = document.createElement(\"div\");\n        actionElement.className = \"vditor-preview__action\";\n        var actionHtml = [];\n        for (var i = 0; i < actions.length; i++) {\n            var action = actions[i];\n            if (typeof action === \"object\") {\n                actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"\" + action.key + \"\\\" class=\\\"\" + action.className + \"\\\"\" + (action.tooltip ? \" aria-label=\\\"\" + action.tooltip + \"\\\"\" : \"\") + \"\\\">\" + action.text + \"</button>\");\n                continue;\n            }\n            switch (action) {\n                case \"desktop\":\n                    actionHtml.push(\"<button type=\\\"button\\\" class=\\\"vditor-preview__action--current\\\" data-type=\\\"desktop\\\">Desktop</button>\");\n                    break;\n                case \"tablet\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"tablet\\\">Tablet</button>\");\n                    break;\n                case \"mobile\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mobile\\\">Mobile/Wechat</button>\");\n                    break;\n                case \"mp-wechat\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mp-wechat\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u516C\\u4F17\\u53F7\\\"><svg><use xlink:href=\\\"#vditor-icon-mp-wechat\\\"></use></svg></button>\");\n                    break;\n                case \"zhihu\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"zhihu\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u77E5\\u4E4E\\\"><svg><use xlink:href=\\\"#vditor-icon-zhihu\\\"></use></svg></button>\");\n                    break;\n            }\n        }\n        actionElement.innerHTML = actionHtml.join(\"\");\n        if (actions.length === 0) {\n            actionElement.style.display = \"none\";\n        }\n        this.element.appendChild(actionElement);\n        this.element.appendChild(previewElement);\n        actionElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btn = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (!btn) {\n                return;\n            }\n            var type = btn.getAttribute(\"data-type\");\n            var actionCustom = actions.find(function (w) { return (w === null || w === void 0 ? void 0 : w.key) === type; });\n            if (actionCustom) {\n                actionCustom.click(type);\n                return;\n            }\n            if (type === \"mp-wechat\" || type === \"zhihu\") {\n                _this.copyToX(vditor, _this.element.lastElementChild.cloneNode(true), type);\n                return;\n            }\n            if (type === \"desktop\") {\n                previewElement.style.width = \"auto\";\n            }\n            else if (type === \"tablet\") {\n                previewElement.style.width = \"780px\";\n            }\n            else {\n                previewElement.style.width = \"360px\";\n            }\n            if (previewElement.scrollWidth > previewElement.parentElement.clientWidth) {\n                previewElement.style.width = \"auto\";\n            }\n            _this.render(vditor);\n            actionElement.querySelectorAll(\"button\").forEach(function (item) {\n                item.classList.remove(\"vditor-preview__action--current\");\n            });\n            btn.classList.add(\"vditor-preview__action--current\");\n        });\n    }\n    Preview.prototype.render = function (vditor, value) {\n        var _this = this;\n        clearTimeout(this.mdTimeoutId);\n        if (this.element.style.display === \"none\") {\n            if (this.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n                vditor.tip.hide();\n            }\n            return;\n        }\n        if (value) {\n            this.element.lastElementChild.innerHTML = value;\n            return;\n        }\n        if (getMarkdown(vditor)\n            .replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\") === \"\") {\n            this.element.lastElementChild.innerHTML = \"\";\n            return;\n        }\n        var renderStartTime = new Date().getTime();\n        var markdownText = getMarkdown(vditor);\n        this.mdTimeoutId = window.setTimeout(function () {\n            if (vditor.options.preview.url) {\n                var xhr_1 = new XMLHttpRequest();\n                xhr_1.open(\"POST\", vditor.options.preview.url);\n                xhr_1.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n                xhr_1.onreadystatechange = function () {\n                    if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                        if (xhr_1.status === 200) {\n                            var responseJSON = JSON.parse(xhr_1.responseText);\n                            if (responseJSON.code !== 0) {\n                                vditor.tip.show(responseJSON.msg);\n                                return;\n                            }\n                            if (vditor.options.preview.transform) {\n                                responseJSON.data = vditor.options.preview.transform(responseJSON.data);\n                            }\n                            _this.element.lastElementChild.innerHTML = responseJSON.data;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                        else {\n                            var html = vditor.lute.Md2HTML(markdownText);\n                            if (vditor.options.preview.transform) {\n                                html = vditor.options.preview.transform(html);\n                            }\n                            _this.element.lastElementChild.innerHTML = html;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                    }\n                };\n                xhr_1.send(JSON.stringify({ markdownText: markdownText }));\n            }\n            else {\n                var html = vditor.lute.Md2HTML(markdownText);\n                if (vditor.options.preview.transform) {\n                    html = vditor.options.preview.transform(html);\n                }\n                _this.element.lastElementChild.innerHTML = html;\n                _this.afterRender(vditor, renderStartTime);\n            }\n        }, vditor.options.preview.delay);\n    };\n    Preview.prototype.afterRender = function (vditor, startTime) {\n        if (vditor.options.preview.parse) {\n            vditor.options.preview.parse(this.element);\n        }\n        var time = (new Date().getTime() - startTime);\n        if ((new Date().getTime() - startTime) > 2600) {\n            // https://github.com/b3log/vditor/issues/67\n            vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].performanceTip.replace(\"${x}\", time.toString()));\n            vditor.preview.element.setAttribute(\"data-type\", \"renderPerformance\");\n        }\n        else if (vditor.preview.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n            vditor.tip.hide();\n            vditor.preview.element.removeAttribute(\"data-type\");\n        }\n        var cmtFocusElement = vditor.preview.element.querySelector(\".vditor-comment--focus\");\n        if (cmtFocusElement) {\n            cmtFocusElement.classList.remove(\"vditor-comment--focus\");\n        }\n        (0,codeRender/* codeRender */.O)(vditor.preview.element.lastElementChild, vditor.options.lang);\n        (0,highlightRender/* highlightRender */.s)(vditor.options.preview.hljs, vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mermaidRender/* mermaidRender */.i)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,flowchartRender/* flowchartRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,graphvizRender/* graphvizRender */.v)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,chartRender/* chartRender */.p)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,mindmapRender/* mindmapRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,plantumlRender/* plantumlRender */.B)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,abcRender/* abcRender */.Q)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mediaRender/* mediaRender */.Y)(vditor.preview.element.lastElementChild);\n        // toc render\n        var editorElement = vditor.preview.element;\n        var tocHTML = vditor.outline.render(vditor);\n        if (tocHTML === \"\") {\n            tocHTML = \"[ToC]\";\n        }\n        editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n            item.innerHTML = tocHTML;\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        (0,mathRender/* mathRender */.H)(vditor.preview.element.lastElementChild, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    };\n    Preview.prototype.copyToX = function (vditor, copyElement, type) {\n        if (type === void 0) { type = \"mp-wechat\"; }\n        // fix math render\n        if (type !== \"zhihu\") {\n            copyElement.querySelectorAll(\".katex-html .base\").forEach(function (item) {\n                item.style.display = \"initial\";\n            });\n        }\n        else {\n            copyElement.querySelectorAll(\".language-math\").forEach(function (item) {\n                item.outerHTML = \"<img class=\\\"Formula-image\\\" data-eeimg=\\\"true\\\" src=\\\"//www.zhihu.com/equation?tex=\\\" alt=\\\"\" + item.getAttribute(\"data-math\") + \"\\\\\\\" style=\\\"display: block; margin: 0 auto; max-width: 100%;\\\">\";\n            });\n        }\n        // \n        copyElement.style.backgroundColor = \"#fff\";\n        // \n        copyElement.querySelectorAll(\"code\").forEach(function (item) {\n            item.style.backgroundImage = \"none\";\n        });\n        this.element.append(copyElement);\n        var range = copyElement.ownerDocument.createRange();\n        range.selectNode(copyElement);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        document.execCommand(\"copy\");\n        this.element.lastElementChild.remove();\n        vditor.tip.show(\"\\u5DF2\\u590D\\u5236\\uFF0C\\u53EF\\u5230\" + (type === \"zhihu\" ? \"\" : \"\") + \"\\u8FDB\\u884C\\u7C98\\u8D34\");\n    };\n    return Preview;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/resize/index.ts\nvar Resize = /** @class */ (function () {\n    function Resize(vditor) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-resize vditor-resize--\" + vditor.options.resize.position;\n        this.element.innerHTML = \"<div><svg><use xlink:href=\\\"#vditor-icon-resize\\\"></use></svg></div>\";\n        this.bindEvent(vditor);\n    }\n    Resize.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"mousedown\", function (event) {\n            var documentSelf = document;\n            var y = event.clientY;\n            var height = vditor.element.offsetHeight;\n            var minHeight = 63 + vditor.element.querySelector(\".vditor-toolbar\").clientHeight;\n            documentSelf.ondragstart = function () { return false; };\n            if (window.captureEvents) {\n                window.captureEvents();\n            }\n            _this.element.classList.add(\"vditor-resize--selected\");\n            documentSelf.onmousemove = function (moveEvent) {\n                if (vditor.options.resize.position === \"top\") {\n                    vditor.element.style.height = Math.max(minHeight, height + (y - moveEvent.clientY)) + \"px\";\n                }\n                else {\n                    vditor.element.style.height = Math.max(minHeight, height + (moveEvent.clientY - y)) + \"px\";\n                }\n                if (vditor.options.typewriterMode) {\n                    vditor.sv.element.style.paddingBottom =\n                        vditor.sv.element.parentElement.offsetHeight / 2 + \"px\";\n                }\n            };\n            documentSelf.onmouseup = function () {\n                if (vditor.options.resize.after) {\n                    vditor.options.resize.after(vditor.element.offsetHeight - height);\n                }\n                if (window.captureEvents) {\n                    window.captureEvents();\n                }\n                documentSelf.onmousemove = null;\n                documentSelf.onmouseup = null;\n                documentSelf.ondragstart = null;\n                documentSelf.onselectstart = null;\n                documentSelf.onselect = null;\n                _this.element.classList.remove(\"vditor-resize--selected\");\n            };\n        });\n    };\n    return Resize;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/sv/index.ts\n\n\n\n\n\nvar Editor = /** @class */ (function () {\n    function Editor(vditor) {\n        this.composingLock = false;\n        this.element = document.createElement(\"pre\");\n        this.element.className = \"vditor-sv vditor-reset\";\n        this.element.setAttribute(\"placeholder\", vditor.options.placeholder);\n        this.element.setAttribute(\"contenteditable\", \"true\");\n        this.element.setAttribute(\"spellcheck\", \"false\");\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    Editor.prototype.copy = function (event, vditor) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.clipboardData.setData(\"text/plain\", getSelectText(vditor[vditor.currentMode].element));\n    };\n    Editor.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            if (vditor.preview.element.style.display !== \"block\") {\n                return;\n            }\n            var textScrollTop = _this.element.scrollTop;\n            var textHeight = _this.element.clientHeight;\n            var textScrollHeight = _this.element.scrollHeight - parseFloat(_this.element.style.paddingBottom || \"0\");\n            var preview = vditor.preview.element;\n            if ((textScrollTop / textHeight > 0.5)) {\n                preview.scrollTop = (textScrollTop + textHeight) *\n                    preview.scrollHeight / textScrollHeight - textHeight;\n            }\n            else {\n                preview.scrollTop = textScrollTop *\n                    preview.scrollHeight / textScrollHeight;\n            }\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                inputEvent(vditor, event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 \n                return;\n            }\n            if (_this.composingLock || event.data === \"\" || event.data === \"\" || event.data === \"\") {\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            inputEvent(vditor, event);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.sv.element.innerHTML !== \"\" && vditor.sv.element.childNodes.length === 1 &&\n                vditor.sv.element.firstElementChild && vditor.sv.element.firstElementChild.tagName === \"DIV\"\n                && vditor.sv.element.firstElementChild.childElementCount === 2\n                && (vditor.sv.element.firstElementChild.textContent === \"\" || vditor.sv.element.textContent === \"\\n\")) {\n                //  placeholder\n                vditor.sv.element.innerHTML = \"\";\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n        });\n    };\n    return Editor;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/tip/index.ts\nvar Tip = /** @class */ (function () {\n    function Tip() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-tip\";\n    }\n    Tip.prototype.show = function (text, time) {\n        var _this = this;\n        if (time === void 0) { time = 6000; }\n        this.element.className = \"vditor-tip vditor-tip--show\";\n        if (time === 0) {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"\\n<div class=\\\"vditor-tip__close\\\">X</div></div>\";\n            this.element.querySelector(\".vditor-tip__close\").addEventListener(\"click\", function () {\n                _this.hide();\n            });\n            return;\n        }\n        this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"</div>\";\n        setTimeout(function () {\n            _this.hide();\n        }, time);\n    };\n    Tip.prototype.hide = function () {\n        this.element.className = \"vditor-messageElementtip\";\n        this.element.innerHTML = \"\";\n    };\n    return Tip;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ui/setPreviewMode.ts\n\n\nvar setPreviewMode = function (mode, vditor) {\n    if (vditor.options.preview.mode === mode) {\n        return;\n    }\n    vditor.options.preview.mode = mode;\n    switch (mode) {\n        case \"both\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"block\";\n            vditor.preview.render(vditor);\n            setCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        case \"editor\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"none\";\n            removeCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        default:\n            break;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Both.ts\nvar Both_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Both = /** @class */ (function (_super) {\n    Both_extends(Both, _super);\n    function Both(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.preview.mode === \"both\") {\n            _this.element.children[0].classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (vditor.currentMode !== \"sv\") {\n                return;\n            }\n            if (vditor.options.preview.mode === \"both\") {\n                setPreviewMode(\"editor\", vditor);\n            }\n            else {\n                setPreviewMode(\"both\", vditor);\n            }\n        });\n        return _this;\n    }\n    return Both;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Br.ts\nvar Br = /** @class */ (function () {\n    function Br() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__br\";\n    }\n    return Br;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/ts/toolbar/CodeTheme.ts\nvar CodeTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar CodeTheme = /** @class */ (function (_super) {\n    CodeTheme_extends(CodeTheme, _super);\n    function CodeTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        constants/* Constants.CODE_THEME.forEach */.g.CODE_THEME.forEach(function (theme) {\n            innerHTML += \"<button>\" + theme + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.hljs.style = event.target.textContent;\n                (0,setCodeTheme/* setCodeTheme */.Y)(event.target.textContent, vditor.options.cdn);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return CodeTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/ContentTheme.ts\nvar ContentTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ContentTheme = /** @class */ (function (_super) {\n    ContentTheme_extends(ContentTheme, _super);\n    function ContentTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        Object.keys(vditor.options.preview.theme.list).forEach(function (key) {\n            innerHTML += \"<button data-type=\\\"\" + key + \"\\\">\" + vditor.options.preview.theme.list[key] + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.theme.current = event.target.getAttribute(\"data-type\");\n                (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return ContentTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Counter.ts\nvar Counter = /** @class */ (function () {\n    function Counter(vditor) {\n        this.element = document.createElement(\"span\");\n        this.element.className = \"vditor-counter vditor-tooltipped vditor-tooltipped__nw\";\n        this.render(vditor, \"\");\n    }\n    Counter.prototype.render = function (vditor, mdText) {\n        var length = mdText.endsWith(\"\\n\") ? mdText.length - 1 : mdText.length;\n        if (vditor.options.counter.type === \"text\" && vditor[vditor.currentMode]) {\n            var tempElement = vditor[vditor.currentMode].element.cloneNode(true);\n            tempElement.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (item) {\n                item.remove();\n            });\n            length = tempElement.textContent.length;\n        }\n        if (typeof vditor.options.counter.max === \"number\") {\n            if (length > vditor.options.counter.max) {\n                this.element.className = \"vditor-counter vditor-counter--error\";\n            }\n            else {\n                this.element.className = \"vditor-counter\";\n            }\n            this.element.innerHTML = length + \"/\" + vditor.options.counter.max;\n        }\n        else {\n            this.element.innerHTML = \"\" + length;\n        }\n        this.element.setAttribute(\"aria-label\", vditor.options.counter.type);\n        if (vditor.options.counter.after) {\n            vditor.options.counter.after(length, {\n                enable: vditor.options.counter.enable,\n                max: vditor.options.counter.max,\n                type: vditor.options.counter.type,\n            });\n        }\n    };\n    return Counter;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Custom.ts\nvar Custom_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Custom = /** @class */ (function (_super) {\n    Custom_extends(Custom, _super);\n    function Custom(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].innerHTML = menuItem.icon;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (event.currentTarget.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            menuItem.click(event, vditor);\n        });\n        return _this;\n    }\n    return Custom;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Devtools.ts\nvar Devtools_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Devtools = /** @class */ (function (_super) {\n    Devtools_extends(Devtools, _super);\n    function Devtools(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.firstElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"none\";\n                setPadding(vditor);\n            }\n            else {\n                btnElement.classList.add(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"block\";\n                setPadding(vditor);\n                vditor.devtools.renderEchart(vditor);\n            }\n        });\n        return _this;\n    }\n    return Devtools;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Divider.ts\nvar Divider = /** @class */ (function () {\n    function Divider() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__divider\";\n    }\n    return Divider;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Emoji.ts\nvar Emoji_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Emoji = /** @class */ (function (_super) {\n    Emoji_extends(Emoji, _super);\n    function Emoji(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-panel vditor-panel--arrow\";\n        var commonEmojiHTML = \"\";\n        Object.keys(vditor.options.hint.emoji).forEach(function (key) {\n            var emojiValue = vditor.options.hint.emoji[key];\n            if (emojiValue.indexOf(\".\") > -1) {\n                commonEmojiHTML += \"<button data-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\"><img\\ndata-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\" class=\\\"vditor-emojis__icon\\\" src=\\\"\" + emojiValue + \"\\\"/></button>\";\n            }\n            else {\n                commonEmojiHTML += \"<button data-value=\\\"\" + emojiValue + \" \\\"\\n data-key=\\\"\" + key + \"\\\"><span class=\\\"vditor-emojis__icon\\\">\" + emojiValue + \"</span></button>\";\n            }\n        });\n        var tailHTML = \"<div class=\\\"vditor-emojis__tail\\\">\\n    <span class=\\\"vditor-emojis__tip\\\"></span><span>\" + (vditor.options.hint.emojiTail || \"\") + \"</span>\\n</div>\";\n        panelElement.innerHTML = \"<div class=\\\"vditor-emojis\\\" style=\\\"max-height: \" + (vditor.options.height === \"auto\" ? \"auto\" : vditor.options.height - 80) + \"px\\\">\" + commonEmojiHTML + \"</div>\" + tailHTML;\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, _this.element.children[0], menuItem.level);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Emoji.prototype._bindEvent = function (vditor, panelElement) {\n        panelElement.querySelectorAll(\".vditor-emojis button\").forEach(function (element) {\n            element.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                var value = element.getAttribute(\"data-value\");\n                var range = (0,selection/* getEditorRange */.zh)(vditor);\n                var html = value;\n                if (vditor.currentMode === \"wysiwyg\") {\n                    html = vditor.lute.SpinVditorDOM(value);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    html = vditor.lute.SpinVditorIRDOM(value);\n                }\n                if (value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                    var tempElement = document.createElement(\"div\");\n                    tempElement.innerHTML = html;\n                    html = tempElement.firstElementChild.firstElementChild.outerHTML + \" \";\n                    (0,selection/* insertHTML */.oC)(html, vditor);\n                }\n                else {\n                    range.extractContents();\n                    range.insertNode(document.createTextNode(value));\n                }\n                range.collapse(false);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                panelElement.style.display = \"none\";\n                execAfterRender(vditor);\n            });\n            element.addEventListener(\"mouseover\", function (event) {\n                if (event.target.tagName === \"BUTTON\") {\n                    panelElement.querySelector(\".vditor-emojis__tip\").innerHTML =\n                        event.target.getAttribute(\"data-key\");\n                }\n            });\n        });\n    };\n    return Emoji;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/export/index.ts\n\n\n\nvar download = function (vditor, content, filename) {\n    var aElement = document.createElement(\"a\");\n    if (\"download\" in aElement) {\n        aElement.download = filename;\n        aElement.style.display = \"none\";\n        aElement.href = URL.createObjectURL(new Blob([content]));\n        document.body.appendChild(aElement);\n        aElement.click();\n        aElement.remove();\n    }\n    else {\n        vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].downloadTip, 0);\n    }\n};\nvar exportMarkdown = function (vditor) {\n    var content = getMarkdown(vditor);\n    download(vditor, content, content.substr(0, 10) + \".md\");\n};\nvar exportPDF = function (vditor) {\n    vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].generate, 3800);\n    var iframe = document.querySelector(\"iframe\");\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script>\\n<div id=\\\"preview\\\"></div>\\n<script>\\nwindow.addEventListener(\\\"message\\\", (e) => {\\n  if(!e.data) {\\n    return;\\n  }\\n  Vditor.preview(document.getElementById('preview'), e.data, {\\n    markdown: {\\n      theme: \\\"\" + vditor.options.preview.theme + \"\\\"\\n    },\\n    hljs: {\\n      style: \\\"\" + vditor.options.preview.hljs.style + \"\\\"\\n    }\\n  });\\n  setTimeout(() => {\\n        window.print();\\n    }, 3600);\\n}, false);\\n</script>\");\n    iframe.contentDocument.close();\n    setTimeout(function () {\n        iframe.contentWindow.postMessage(getMarkdown(vditor), \"*\");\n    }, 200);\n};\nvar exportHTML = function (vditor) {\n    var content = getHTML(vditor);\n    var html = \"<html><head><link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script></head>\\n<body><div class=\\\"vditor-reset\\\" id=\\\"preview\\\">\" + content + \"</div>\\n<script>\\n    const previewElement = document.getElementById('preview')\\n    Vditor.setContentTheme('\" + vditor.options.preview.theme.current + \"', '\" + vditor.options.preview.theme.path + \"');\\n    Vditor.codeRender(previewElement, '\" + vditor.options.lang + \"');\\n    Vditor.highlightRender(\" + JSON.stringify(vditor.options.preview.hljs) + \", previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mathRender(previewElement, {\\n        cdn: '\" + vditor.options.cdn + \"',\\n        math: \" + JSON.stringify(vditor.options.preview.math) + \",\\n    });\\n    Vditor.mermaidRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.flowchartRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.graphvizRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.chartRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.mindmapRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.abcRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mediaRender(previewElement);\\n</script></body></html>\";\n    download(vditor, html, content.substr(0, 10) + \".html\");\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Export.ts\nvar Export_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Export = /** @class */ (function (_super) {\n    Export_extends(Export, _super);\n    function Export(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-type=\\\"markdown\\\">Markdown</button>\\n<button data-type=\\\"pdf\\\">PDF</button>\\n<button data-type=\\\"html\\\">HTML</button>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = event.target;\n            if (btnElement.tagName === \"BUTTON\") {\n                switch (btnElement.getAttribute(\"data-type\")) {\n                    case \"markdown\":\n                        exportMarkdown(vditor);\n                        break;\n                    case \"pdf\":\n                        exportPDF(vditor);\n                        break;\n                    case \"html\":\n                        exportHTML(vditor);\n                        break;\n                    default:\n                        break;\n                }\n                hidePanel(vditor, [\"subToolbar\"]);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return Export;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Fullscreen.ts\nvar Fullscreen_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Fullscreen = /** @class */ (function (_super) {\n    Fullscreen_extends(Fullscreen, _super);\n    function Fullscreen(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor, menuItem);\n        return _this;\n    }\n    Fullscreen.prototype._bindEvent = function (vditor, menuItem) {\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (vditor.element.className.includes(\"vditor--fullscreen\")) {\n                if (!menuItem.level) {\n                    this.innerHTML = menuItem.icon;\n                }\n                vditor.element.style.zIndex = \"\";\n                document.body.style.overflow = \"\";\n                vditor.element.classList.remove(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__s\", \"__n\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__s\", \"__n\");\n                }\n            }\n            else {\n                if (!menuItem.level) {\n                    this.innerHTML = '<svg><use xlink:href=\"#vditor-icon-contract\"></use></svg>';\n                }\n                vditor.element.style.zIndex = vditor.options.fullscreen.index.toString();\n                document.body.style.overflow = \"hidden\";\n                vditor.element.classList.add(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__n\", \"__s\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__n\", \"__s\");\n                }\n            }\n            if (vditor.devtools) {\n                vditor.devtools.renderEchart(vditor);\n            }\n            if (menuItem.click) {\n                menuItem.click(event, vditor);\n            }\n            setPadding(vditor);\n            setTypewriterPosition(vditor);\n        });\n    };\n    return Fullscreen;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Headings.ts\nvar Headings_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Headings = /** @class */ (function (_super) {\n    Headings_extends(Headings, _super);\n    function Headings(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint vditor-panel--arrow\";\n        panelElement.innerHTML = \"<button data-tag=\\\"h1\\\" data-value=\\\"# \\\">Heading 1 \" + (0,compatibility/* updateHotkeyTip */.ns)(\"&lt;1>\") + \"</button>\\n<button data-tag=\\\"h2\\\" data-value=\\\"## \\\">Heading 2 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"2\") + \"></button>\\n<button data-tag=\\\"h3\\\" data-value=\\\"### \\\">Heading 3 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"3\") + \"></button>\\n<button data-tag=\\\"h4\\\" data-value=\\\"#### \\\">Heading 4 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"4\") + \"></button>\\n<button data-tag=\\\"h5\\\" data-value=\\\"##### \\\">Heading 5 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"5\") + \"></button>\\n<button data-tag=\\\"h6\\\" data-value=\\\"###### \\\">Heading 6 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"6\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Headings.prototype._bindEvent = function (vditor, panelElement) {\n        var actionBtn = this.element.children[0];\n        actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            actionBtn.blur();\n            if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n                if (vditor.currentMode === \"wysiwyg\") {\n                    removeHeading(vditor);\n                    afterRenderEvent(vditor);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, \"\");\n                }\n                actionBtn.classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                hidePanel(vditor, [\"subToolbar\"]);\n                panelElement.style.display = \"block\";\n            }\n        });\n        for (var i = 0; i < 6; i++) {\n            panelElement.children.item(i).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                if (vditor.currentMode === \"wysiwyg\") {\n                    setHeading(vditor, event.target.getAttribute(\"data-tag\"));\n                    afterRenderEvent(vditor);\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else {\n                    processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                }\n                panelElement.style.display = \"none\";\n            });\n        }\n    };\n    return Headings;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Help.ts\nvar Help_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Help = /** @class */ (function (_super) {\n    Help_extends(Help, _super);\n    function Help(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;\\\">\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Markdown \\u4F7F\\u7528\\u6307\\u5357</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://ld246.com/article/1583308420519\\\" target=\\\"_blank\\\">\\u8BED\\u6CD5\\u901F\\u67E5\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583129520165\\\" target=\\\"_blank\\\">\\u57FA\\u7840\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583305480675\\\" target=\\\"_blank\\\">\\u6269\\u5C55\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1582778815353\\\" target=\\\"_blank\\\">\\u952E\\u76D8\\u5FEB\\u6377\\u952E</a></li>\\n    </ul>\\n</div>\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Vditor \\u652F\\u6301</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://github.com/Vanessa219/vditor/issues\\\" target=\\\"_blank\\\">Issues</a></li>\\n        <li><a href=\\\"https://ld246.com/tag/vditor\\\" target=\\\"_blank\\\">\\u5B98\\u65B9\\u8BA8\\u8BBA\\u533A</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1549638745630\\\" target=\\\"_blank\\\">\\u5F00\\u53D1\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/guide/markdown\\\" target=\\\"_blank\\\">\\u6F14\\u793A\\u5730\\u5740</a></li>\\n    </ul>\\n</div></div>\", 0);\n        });\n        return _this;\n    }\n    return Help;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Indent.ts\nvar Indent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Indent = /** @class */ (function (_super) {\n    Indent_extends(Indent, _super);\n    function Indent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listIndent(vditor, liElement, range);\n            }\n        });\n        return _this;\n    }\n    return Indent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Info.ts\nvar Info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Info = /** @class */ (function (_super) {\n    Info_extends(Info, _super);\n    function Info(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;\\\">\\n<p style=\\\"text-align: center;margin: 14px 0\\\">\\n    <em>\\u4E0B\\u4E00\\u4EE3\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u4E3A\\u672A\\u6765\\u800C\\u6784\\u5EFA</em>\\n</p>\\n<div style=\\\"display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center\\\">\\n    <img src=\\\"https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png\\\" style=\\\"margin: 0 auto;height: 68px\\\"/>\\n    <div>&nbsp;&nbsp;</div>\\n    <div style=\\\"flex: 1;min-width: 250px\\\">\\n        Vditor \\u662F\\u4E00\\u6B3E\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u652F\\u6301\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u3001\\u5373\\u65F6\\u6E32\\u67D3\\uFF08\\u7C7B\\u4F3C Typora\\uFF09\\u548C\\u5206\\u5C4F\\u9884\\u89C8\\u6A21\\u5F0F\\u3002\\n        \\u5B83\\u4F7F\\u7528 TypeScript \\u5B9E\\u73B0\\uFF0C\\u652F\\u6301\\u539F\\u751F JavaScript\\u3001Vue\\u3001React\\u3001Angular\\uFF0C\\u63D0\\u4F9B<a target=\\\"_blank\\\" href=\\\"https://b3log.org/siyuan\\\">\\u684C\\u9762\\u7248</a>\\u3002\\n    </div>\\n</div>\\n<div style=\\\"display: flex;flex-wrap: wrap;\\\">\\n    <ul style=\\\"list-style: none;flex: 1;min-width:148px\\\">\\n        <li>\\n        \\u9879\\u76EE\\u5730\\u5740\\uFF1A<a href=\\\"https://b3log.org/vditor\\\" target=\\\"_blank\\\">b3log.org/vditor</a>\\n        </li>\\n        <li>\\n        \\u5F00\\u6E90\\u534F\\u8BAE\\uFF1AMIT\\n        </li>\\n    </ul>\\n    <ul style=\\\"list-style: none;margin-right: 18px\\\">\\n        <li>\\n        \\u7EC4\\u4EF6\\u7248\\u672C\\uFF1AVditor v\" + constants/* VDITOR_VERSION */.H + \" / Lute v\" + Lute.Version + \"\\n        </li>\\n        <li>\\n        \\u8D5E\\u52A9\\u6350\\u8D60\\uFF1A<a href=\\\"https://ld246.com/sponsor\\\" target=\\\"_blank\\\">https://ld246.com/sponsor</a>\\n        </li>\\n    </ul>\\n</div>\\n</div>\", 0);\n        });\n        return _this;\n    }\n    return Info;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertAfter.ts\nvar InsertAfter_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertAfter = /** @class */ (function (_super) {\n    InsertAfter_extends(InsertAfter, _super);\n    function InsertAfter(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"afterend\");\n        });\n        return _this;\n    }\n    return InsertAfter;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertBefore.ts\nvar InsertBefore_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertBefore = /** @class */ (function (_super) {\n    InsertBefore_extends(InsertBefore, _super);\n    function InsertBefore(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"beforebegin\");\n        });\n        return _this;\n    }\n    return InsertBefore;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outdent.ts\nvar Outdent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Outdent = /** @class */ (function (_super) {\n    Outdent_extends(Outdent, _super);\n    function Outdent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listOutdent(vditor, liElement, range, liElement.parentElement);\n            }\n        });\n        return _this;\n    }\n    return Outdent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outline.ts\nvar Outline_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Outline_Outline = /** @class */ (function (_super) {\n    Outline_extends(Outline, _super);\n    function Outline(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.outline) {\n            _this.element.firstElementChild.classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = vditor.toolbar.elements.outline.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.options.outline.enable = !_this.element.firstElementChild.classList.contains(\"vditor-menu--current\");\n            vditor.outline.toggle(vditor, vditor.options.outline.enable);\n        });\n        return _this;\n    }\n    return Outline;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Preview.ts\nvar Preview_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Preview_Preview = /** @class */ (function (_super) {\n    Preview_extends(Preview, _super);\n    function Preview(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Preview.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var toolbars = constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"both\", \"edit-mode\", \"devtools\"]);\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"block\";\n                    if (vditor.options.preview.mode === \"both\") {\n                        vditor.preview.element.style.display = \"block\";\n                    }\n                    else {\n                        vditor.preview.element.style.display = \"none\";\n                    }\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"block\";\n                    vditor.preview.element.style.display = \"none\";\n                }\n                enableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.outline.render(vditor);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.preview.element.style.display = \"block\";\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"none\";\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"none\";\n                }\n                vditor.preview.render(vditor);\n                btnElement.classList.add(\"vditor-menu--current\");\n                hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n                setTimeout(function () {\n                    vditor.outline.render(vditor);\n                }, vditor.options.preview.delay + 10);\n            }\n            setPadding(vditor);\n        });\n    };\n    return Preview;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/RecordMedia.ts\nvar RecordMedia = /** @class */ (function () {\n    function RecordMedia(e) {\n        this.SAMPLE_RATE = 5000; // 44100 suggested by demos;\n        this.isRecording = false;\n        this.readyFlag = false;\n        this.leftChannel = [];\n        this.rightChannel = [];\n        this.recordingLength = 0;\n        var context;\n        // creates the audio context\n        if (typeof AudioContext !== \"undefined\") {\n            context = new AudioContext();\n        }\n        else if (webkitAudioContext) {\n            context = new webkitAudioContext();\n        }\n        else {\n            return;\n        }\n        this.DEFAULT_SAMPLE_RATE = context.sampleRate;\n        // creates a gain node\n        var volume = context.createGain();\n        // creates an audio node from the microphone incoming stream\n        var audioInput = context.createMediaStreamSource(e);\n        // connect the stream to the gain node\n        audioInput.connect(volume);\n        /* From the spec: The size of the buffer controls how frequently the audioprocess event is\n         dispatched and how many sample-frames need to be processed each call.\n         Lower values for buffer size will result in a lower (better) latency.\n         Higher values will be necessary to avoid audio breakup and glitches */\n        this.recorder = context.createScriptProcessor(2048, 2, 1);\n        // The onaudioprocess event needs to be defined externally, so make sure it is not set:\n        this.recorder.onaudioprocess = null;\n        // we connect the recorder\n        volume.connect(this.recorder);\n        this.recorder.connect(context.destination);\n        this.readyFlag = true;\n    }\n    // Publicly accessible methods:\n    RecordMedia.prototype.cloneChannelData = function (leftChannelData, rightChannelData) {\n        this.leftChannel.push(new Float32Array(leftChannelData));\n        this.rightChannel.push(new Float32Array(rightChannelData));\n        this.recordingLength += 2048;\n    };\n    RecordMedia.prototype.startRecordingNewWavFile = function () {\n        if (this.readyFlag) {\n            this.isRecording = true;\n            this.leftChannel.length = this.rightChannel.length = 0;\n            this.recordingLength = 0;\n        }\n    };\n    RecordMedia.prototype.stopRecording = function () {\n        this.isRecording = false;\n    };\n    RecordMedia.prototype.buildWavFileBlob = function () {\n        // we flat the left and right channels down\n        var leftBuffer = this.mergeBuffers(this.leftChannel);\n        var rightBuffer = this.mergeBuffers(this.rightChannel);\n        // Interleave the left and right channels together:\n        var interleaved = new Float32Array(leftBuffer.length);\n        for (var i = 0; i < leftBuffer.length; ++i) {\n            interleaved[i] = 0.5 * (leftBuffer[i] + rightBuffer[i]);\n        }\n        // Downsample the audio data if necessary:\n        if (this.DEFAULT_SAMPLE_RATE > this.SAMPLE_RATE) {\n            interleaved = this.downSampleBuffer(interleaved, this.SAMPLE_RATE);\n        }\n        var totalByteCount = (44 + interleaved.length * 2);\n        var buffer = new ArrayBuffer(totalByteCount);\n        var view = new DataView(buffer);\n        // Build the RIFF chunk descriptor:\n        this.writeUTFBytes(view, 0, \"RIFF\");\n        view.setUint32(4, totalByteCount, true);\n        this.writeUTFBytes(view, 8, \"WAVE\");\n        // Build the FMT sub-chunk:\n        this.writeUTFBytes(view, 12, \"fmt \"); // subchunk1 ID is format\n        view.setUint32(16, 16, true); // The sub-chunk size is 16.\n        view.setUint16(20, 1, true); // The audio format is 1.\n        view.setUint16(22, 1, true); // Number of interleaved channels.\n        view.setUint32(24, this.SAMPLE_RATE, true); // Sample rate.\n        view.setUint32(28, this.SAMPLE_RATE * 2, true); // Byte rate.\n        view.setUint16(32, 2, true); // Block align\n        view.setUint16(34, 16, true); // Bits per sample.\n        // Build the data sub-chunk:\n        var subChunk2ByteCount = interleaved.length * 2;\n        this.writeUTFBytes(view, 36, \"data\");\n        view.setUint32(40, subChunk2ByteCount, true);\n        // Write the PCM samples to the view:\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var j = 0; j < lng; j++) {\n            view.setInt16(index, interleaved[j] * (0x7FFF * volume), true);\n            index += 2;\n        }\n        return new Blob([view], { type: \"audio/wav\" });\n    };\n    RecordMedia.prototype.downSampleBuffer = function (buffer, rate) {\n        if (rate === this.DEFAULT_SAMPLE_RATE) {\n            return buffer;\n        }\n        if (rate > this.DEFAULT_SAMPLE_RATE) {\n            // throw \"downsampling rate show be smaller than original sample rate\";\n            return buffer;\n        }\n        var sampleRateRatio = this.DEFAULT_SAMPLE_RATE / rate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0;\n            var count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    RecordMedia.prototype.mergeBuffers = function (desiredChannelBuffer) {\n        var result = new Float32Array(this.recordingLength);\n        var offset = 0;\n        var lng = desiredChannelBuffer.length;\n        for (var i = 0; i < lng; ++i) {\n            var buffer = desiredChannelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    };\n    RecordMedia.prototype.writeUTFBytes = function (view, offset, value) {\n        var lng = value.length;\n        for (var i = 0; i < lng; i++) {\n            view.setUint8(offset + i, value.charCodeAt(i));\n        }\n    };\n    return RecordMedia;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Record.ts\nvar Record_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Record = /** @class */ (function (_super) {\n    Record_extends(Record, _super);\n    function Record(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Record.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        var mediaRecorder;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var editorElement = vditor[vditor.currentMode].element;\n            if (!mediaRecorder) {\n                navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {\n                    mediaRecorder = new RecordMedia(mediaStream);\n                    mediaRecorder.recorder.onaudioprocess = function (e) {\n                        // Do nothing if not recording:\n                        if (!mediaRecorder.isRecording) {\n                            return;\n                        }\n                        // Copy the data from the input buffers;\n                        var left = e.inputBuffer.getChannelData(0);\n                        var right = e.inputBuffer.getChannelData(1);\n                        mediaRecorder.cloneChannelData(left, right);\n                    };\n                    mediaRecorder.startRecordingNewWavFile();\n                    vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].recording);\n                    editorElement.setAttribute(\"contenteditable\", \"false\");\n                    _this.element.children[0].classList.add(\"vditor-menu--current\");\n                }).catch(function () {\n                    vditor.tip.show(i18n/* i18n */.a[vditor.options.lang][\"record-tip\"]);\n                });\n                return;\n            }\n            if (mediaRecorder.isRecording) {\n                mediaRecorder.stopRecording();\n                vditor.tip.hide();\n                var file = new File([mediaRecorder.buildWavFileBlob()], \"record\" + (new Date()).getTime() + \".wav\", { type: \"video/webm\" });\n                uploadFiles(vditor, [file]);\n                _this.element.children[0].classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].recording);\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                mediaRecorder.startRecordingNewWavFile();\n                _this.element.children[0].classList.add(\"vditor-menu--current\");\n            }\n        });\n    };\n    return Record;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Redo.ts\nvar Redo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Redo = /** @class */ (function (_super) {\n    Redo_extends(Redo, _super);\n    function Redo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ redo: _this.element }, [\"redo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.redo(vditor);\n        });\n        return _this;\n    }\n    return Redo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Undo.ts\nvar Undo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Undo = /** @class */ (function (_super) {\n    Undo_extends(Undo, _super);\n    function Undo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ undo: _this.element }, [\"undo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.undo(vditor);\n        });\n        return _this;\n    }\n    return Undo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Upload.ts\nvar Upload_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Upload_Upload = /** @class */ (function (_super) {\n    Upload_extends(Upload, _super);\n    function Upload(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var inputHTML = '<input type=\"file\"';\n        if (vditor.options.upload.multiple) {\n            inputHTML += ' multiple=\"multiple\"';\n        }\n        if (vditor.options.upload.accept) {\n            inputHTML += \" accept=\\\"\" + vditor.options.upload.accept + \"\\\"\";\n        }\n        _this.element.children[0].innerHTML = \"\" + (menuItem.icon || '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>') + inputHTML + \">\";\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Upload.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n        });\n        this.element.querySelector(\"input\").addEventListener(\"change\", function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            if (event.target.files.length === 0) {\n                return;\n            }\n            uploadFiles(vditor, event.target.files, event.target);\n        });\n    };\n    return Upload;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(vditor) {\n        var _this = this;\n        var options = vditor.options;\n        this.elements = {};\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar\";\n        options.toolbar.forEach(function (menuItem, i) {\n            var itemElement = _this.genItem(vditor, menuItem, i);\n            _this.element.appendChild(itemElement);\n            if (menuItem.toolbar) {\n                var panelElement_1 = document.createElement(\"div\");\n                panelElement_1.className = \"vditor-hint vditor-panel--arrow\";\n                panelElement_1.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                    panelElement_1.style.display = \"none\";\n                });\n                menuItem.toolbar.forEach(function (subMenuItem, subI) {\n                    subMenuItem.level = 2;\n                    panelElement_1.appendChild(_this.genItem(vditor, subMenuItem, i + subI));\n                });\n                itemElement.appendChild(panelElement_1);\n                toggleSubMenu(vditor, panelElement_1, itemElement.children[0], 2);\n            }\n        });\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter = new Counter(vditor);\n            this.element.appendChild(vditor.counter.element);\n        }\n    }\n    Toolbar.prototype.genItem = function (vditor, menuItem, index) {\n        var menuItemObj;\n        switch (menuItem.name) {\n            case \"bold\":\n            case \"italic\":\n            case \"more\":\n            case \"strike\":\n            case \"line\":\n            case \"quote\":\n            case \"list\":\n            case \"ordered-list\":\n            case \"check\":\n            case \"code\":\n            case \"inline-code\":\n            case \"link\":\n            case \"table\":\n                menuItemObj = new MenuItem(vditor, menuItem);\n                break;\n            case \"emoji\":\n                menuItemObj = new Emoji(vditor, menuItem);\n                break;\n            case \"headings\":\n                menuItemObj = new Headings(vditor, menuItem);\n                break;\n            case \"|\":\n                menuItemObj = new Divider();\n                break;\n            case \"br\":\n                menuItemObj = new Br();\n                break;\n            case \"undo\":\n                menuItemObj = new Undo(vditor, menuItem);\n                break;\n            case \"redo\":\n                menuItemObj = new Redo(vditor, menuItem);\n                break;\n            case \"help\":\n                menuItemObj = new Help(vditor, menuItem);\n                break;\n            case \"both\":\n                menuItemObj = new Both(vditor, menuItem);\n                break;\n            case \"preview\":\n                menuItemObj = new Preview_Preview(vditor, menuItem);\n                break;\n            case \"fullscreen\":\n                menuItemObj = new Fullscreen(vditor, menuItem);\n                break;\n            case \"upload\":\n                menuItemObj = new Upload_Upload(vditor, menuItem);\n                break;\n            case \"record\":\n                menuItemObj = new Record(vditor, menuItem);\n                break;\n            case \"info\":\n                menuItemObj = new Info(vditor, menuItem);\n                break;\n            case \"edit-mode\":\n                menuItemObj = new EditMode(vditor, menuItem);\n                break;\n            case \"devtools\":\n                menuItemObj = new Devtools(vditor, menuItem);\n                break;\n            case \"outdent\":\n                menuItemObj = new Outdent(vditor, menuItem);\n                break;\n            case \"indent\":\n                menuItemObj = new Indent(vditor, menuItem);\n                break;\n            case \"outline\":\n                menuItemObj = new Outline_Outline(vditor, menuItem);\n                break;\n            case \"insert-after\":\n                menuItemObj = new InsertAfter(vditor, menuItem);\n                break;\n            case \"insert-before\":\n                menuItemObj = new InsertBefore(vditor, menuItem);\n                break;\n            case \"code-theme\":\n                menuItemObj = new CodeTheme(vditor, menuItem);\n                break;\n            case \"content-theme\":\n                menuItemObj = new ContentTheme(vditor, menuItem);\n                break;\n            case \"export\":\n                menuItemObj = new Export(vditor, menuItem);\n                break;\n            default:\n                menuItemObj = new Custom(vditor, menuItem);\n                break;\n        }\n        if (!menuItemObj) {\n            return;\n        }\n        var key = menuItem.name;\n        if (key === \"br\" || key === \"|\") {\n            key = key + index;\n        }\n        this.elements[key] = menuItemObj.element;\n        return menuItemObj.element;\n    };\n    return Toolbar;\n}());\n\n\n// EXTERNAL MODULE: ./node_modules/diff-match-patch/index.js\nvar diff_match_patch = __webpack_require__(694);\n;// CONCATENATED MODULE: ./src/ts/undo/index.ts\n\n\n\n\n\n\n\n\nvar undo_Undo = /** @class */ (function () {\n    function Undo() {\n        this.stackSize = 50;\n        this.resetStack();\n        // @ts-ignore\n        this.dmp = new diff_match_patch();\n    }\n    Undo.prototype.clearStack = function (vditor) {\n        this.resetStack();\n        this.resetIcon(vditor);\n    };\n    Undo.prototype.resetIcon = function (vditor) {\n        if (!vditor.toolbar) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.undo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length < 2) {\n            return;\n        }\n        var state = this[vditor.currentMode].undoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].redoStack.push(state);\n        this.renderDiff(state, vditor);\n        this[vditor.currentMode].hasUndo = true;\n        // undo  hint\n        hidePanel(vditor, [\"hint\"]);\n    };\n    Undo.prototype.redo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        var state = this[vditor.currentMode].redoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].undoStack.push(state);\n        this.renderDiff(state, vditor, true);\n    };\n    Undo.prototype.recordFirstPosition = function (vditor, event) {\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length !== 1 || this[vditor.currentMode].undoStack[0].length === 0 ||\n            this[vditor.currentMode].redoStack.length > 0) {\n            return;\n        }\n        if ((0,compatibility/* isFirefox */.vU)() && event.key === \"Backspace\") {\n            // Firefox \n            return;\n        }\n        if ((0,compatibility/* isSafari */.G6)()) {\n            // Safari keydown  input \n            return;\n        }\n        var text = this.addCaret(vditor);\n        if (text.replace(\"<wbr>\", \"\").replace(\" vditor-ir__node--expand\", \"\")\n            !== this[vditor.currentMode].undoStack[0][0].diffs[0][1].replace(\"<wbr>\", \"\")) {\n            //  undo  ctrl  lastText\n            return;\n        }\n        this[vditor.currentMode].undoStack[0][0].diffs[0][1] = text;\n        this[vditor.currentMode].lastText = text;\n        //  setSelectionFocus(cloneRange);  windows chrome \n    };\n    Undo.prototype.addToUndoStack = function (vditor) {\n        // afterRenderEvent.ts  debounce\n        var text = this.addCaret(vditor, true);\n        var diff = this.dmp.diff_main(text, this[vditor.currentMode].lastText, true);\n        var patchList = this.dmp.patch_make(text, this[vditor.currentMode].lastText, diff);\n        if (patchList.length === 0 && this[vditor.currentMode].undoStack.length > 0) {\n            return;\n        }\n        this[vditor.currentMode].lastText = text;\n        this[vditor.currentMode].undoStack.push(patchList);\n        if (this[vditor.currentMode].undoStack.length > this.stackSize) {\n            this[vditor.currentMode].undoStack.shift();\n        }\n        if (this[vditor.currentMode].hasUndo) {\n            this[vditor.currentMode].redoStack = [];\n            this[vditor.currentMode].hasUndo = false;\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n    };\n    Undo.prototype.renderDiff = function (state, vditor, isRedo) {\n        if (isRedo === void 0) { isRedo = false; }\n        var text;\n        if (isRedo) {\n            var redoPatchList = this.dmp.patch_deepCopy(state).reverse();\n            redoPatchList.forEach(function (patch) {\n                patch.diffs.forEach(function (diff) {\n                    diff[0] = -diff[0];\n                });\n            });\n            text = this.dmp.patch_apply(redoPatchList, this[vditor.currentMode].lastText)[0];\n        }\n        else {\n            text = this.dmp.patch_apply(state, this[vditor.currentMode].lastText)[0];\n        }\n        this[vditor.currentMode].lastText = text;\n        vditor[vditor.currentMode].element.innerHTML = text;\n        if (vditor.currentMode !== \"sv\") {\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (blockElement) {\n                processCodeRender(blockElement, vditor);\n            });\n        }\n        if (!vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            // Safari \n            var range = getSelection().getRangeAt(0);\n            range.setEndBefore(vditor[vditor.currentMode].element);\n            range.collapse(false);\n        }\n        else {\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, vditor[vditor.currentMode].element.ownerDocument.createRange());\n            scrollCenter(vditor);\n        }\n        execAfterRender(vditor, {\n            enableAddUndoStack: false,\n            enableHint: false,\n            enableInput: true,\n        });\n        highlightToolbar(vditor);\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.resetStack = function () {\n        this.ir = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.sv = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.wysiwyg = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n    };\n    Undo.prototype.addCaret = function (vditor, setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var cloneRange;\n        if (getSelection().rangeCount !== 0 && !vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                cloneRange = range.cloneRange();\n                var wbrElement = document.createElement(\"span\");\n                wbrElement.className = \"vditor-wbr\";\n                range.insertNode(wbrElement);\n            }\n        }\n        // echart  https://github.com/siyuan-note/siyuan/issues/537\n        var cloneElement = vditor.ir.element.cloneNode(true);\n        cloneElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='1']\")\n            .forEach(function (item) {\n            if (item.firstElementChild.classList.contains(\"language-echarts\") ||\n                item.firstElementChild.classList.contains(\"language-plantuml\") ||\n                item.firstElementChild.classList.contains(\"language-mindmap\")) {\n                item.firstElementChild.removeAttribute(\"_echarts_instance_\");\n                item.firstElementChild.removeAttribute(\"data-processed\");\n                item.firstElementChild.innerHTML = item.previousElementSibling.firstElementChild.innerHTML;\n                item.setAttribute(\"data-render\", \"2\");\n            }\n            if (item.firstElementChild.classList.contains(\"language-math\")) {\n                item.setAttribute(\"data-render\", \"2\");\n                item.firstElementChild.textContent = item.firstElementChild.getAttribute(\"data-math\");\n                item.firstElementChild.removeAttribute(\"data-math\");\n            }\n        });\n        var text = vditor[vditor.currentMode].element.innerHTML;\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-wbr\").forEach(function (item) {\n            item.remove();\n            //  item.outerHTML = \"\"  https://github.com/Vanessa219/vditor/pull/686;\n        });\n        if (setFocus && cloneRange) {\n            (0,selection/* setSelectionFocus */.Hc)(cloneRange);\n        }\n        return text.replace('<span class=\"vditor-wbr\"></span>', \"<wbr>\");\n    };\n    return Undo;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/util/Options.ts\n\n\nvar Options = /** @class */ (function () {\n    function Options(options) {\n        this.defaultOptions = {\n            after: undefined,\n            cache: {\n                enable: true,\n            },\n            cdn: constants/* Constants.CDN */.g.CDN,\n            classes: {\n                preview: \"\",\n            },\n            comment: {\n                enable: false,\n            },\n            counter: {\n                enable: false,\n                type: \"markdown\",\n            },\n            debugger: false,\n            fullscreen: {\n                index: 90,\n            },\n            height: \"auto\",\n            hint: {\n                delay: 200,\n                emoji: {\n                    \"+1\": \"\",\n                    \"-1\": \"\",\n                    \"confused\": \"\",\n                    \"eyes\": \"\",\n                    \"heart\": \"\",\n                    \"rocket\": \"\",\n                    \"smile\": \"\",\n                    \"tada\": \"\",\n                },\n                emojiPath: constants/* Constants.CDN */.g.CDN + \"/dist/images/emoji\",\n                extend: [],\n                parse: true,\n            },\n            icon: \"ant\",\n            lang: \"zh_CN\",\n            mode: \"ir\",\n            outline: {\n                enable: false,\n                position: \"left\",\n            },\n            placeholder: \"\",\n            preview: {\n                actions: [\"desktop\", \"tablet\", \"mobile\", \"mp-wechat\", \"zhihu\"],\n                delay: 1000,\n                hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n                markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n                math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n                maxWidth: 800,\n                mode: \"both\",\n                theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n            },\n            resize: {\n                enable: false,\n                position: \"bottom\",\n            },\n            theme: \"classic\",\n            toolbar: [\n                \"emoji\",\n                \"headings\",\n                \"bold\",\n                \"italic\",\n                \"strike\",\n                \"link\",\n                \"|\",\n                \"list\",\n                \"ordered-list\",\n                \"check\",\n                \"outdent\",\n                \"indent\",\n                \"|\",\n                \"quote\",\n                \"line\",\n                \"code\",\n                \"inline-code\",\n                \"insert-before\",\n                \"insert-after\",\n                \"|\",\n                \"upload\",\n                \"record\",\n                \"table\",\n                \"|\",\n                \"undo\",\n                \"redo\",\n                \"|\",\n                \"fullscreen\",\n                \"edit-mode\",\n                {\n                    name: \"more\",\n                    toolbar: [\n                        \"both\",\n                        \"code-theme\",\n                        \"content-theme\",\n                        \"export\",\n                        \"outline\",\n                        \"preview\",\n                        \"devtools\",\n                        \"info\",\n                        \"help\",\n                    ],\n                }\n            ],\n            toolbarConfig: {\n                hide: false,\n                pin: false,\n            },\n            typewriterMode: false,\n            undoDelay: 800,\n            upload: {\n                extraData: {},\n                fieldName: \"file[]\",\n                filename: function (name) { return name.replace(/\\W/g, \"\"); },\n                linkToImgUrl: \"\",\n                max: 10 * 1024 * 1024,\n                multiple: true,\n                url: \"\",\n                withCredentials: false,\n            },\n            value: \"\",\n            width: \"auto\",\n        };\n        this.options = options;\n    }\n    Options.prototype.merge = function () {\n        var _a, _b, _c;\n        if (this.options) {\n            if (this.options.toolbar) {\n                this.options.toolbar = this.mergeToolbar(this.options.toolbar);\n            }\n            else {\n                this.options.toolbar = this.mergeToolbar(this.defaultOptions.toolbar);\n            }\n            if ((_b = (_a = this.options.preview) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.list) {\n                this.defaultOptions.preview.theme.list = this.options.preview.theme.list;\n            }\n            if ((_c = this.options.hint) === null || _c === void 0 ? void 0 : _c.emoji) {\n                this.defaultOptions.hint.emoji = this.options.hint.emoji;\n            }\n            if (this.options.comment) {\n                this.defaultOptions.comment = this.options.comment;\n            }\n        }\n        var mergedOptions = (0,merge/* merge */.T)(this.defaultOptions, this.options);\n        if (mergedOptions.cache.enable && !mergedOptions.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        return mergedOptions;\n    };\n    Options.prototype.mergeToolbar = function (toolbar) {\n        var _this = this;\n        var toolbarItem = [{\n                icon: '<svg><use xlink:href=\"#vditor-icon-export\"></use></svg>',\n                name: \"export\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-emoji\"></use></svg>',\n                name: \"emoji\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-headings\"></use></svg>',\n                name: \"headings\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-bold\"></use></svg>',\n                name: \"bold\",\n                prefix: \"**\",\n                suffix: \"**\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-italic\"></use></svg>',\n                name: \"italic\",\n                prefix: \"*\",\n                suffix: \"*\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"D\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-strike\"></use></svg>',\n                name: \"strike\",\n                prefix: \"~~\",\n                suffix: \"~~\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"K\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-link\"></use></svg>',\n                name: \"link\",\n                prefix: \"[\",\n                suffix: \"](https://)\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                hotkey: \"L\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-list\"></use></svg>',\n                name: \"list\",\n                prefix: \"* \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-ordered-list\"></use></svg>',\n                name: \"ordered-list\",\n                prefix: \"1. \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"J\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-check\"></use></svg>',\n                name: \"check\",\n                prefix: \"* [ ] \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-outdent\"></use></svg>',\n                name: \"outdent\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-indent\"></use></svg>',\n                name: \"indent\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                hotkey: \";\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-quote\"></use></svg>',\n                name: \"quote\",\n                prefix: \"> \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-line\"></use></svg>',\n                name: \"line\",\n                prefix: \"---\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"U\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-code\"></use></svg>',\n                name: \"code\",\n                prefix: \"```\",\n                suffix: \"\\n```\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"G\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-inline-code\"></use></svg>',\n                name: \"inline-code\",\n                prefix: \"`\",\n                suffix: \"`\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-before\"></use></svg>',\n                name: \"insert-before\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-after\"></use></svg>',\n                name: \"insert-after\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>',\n                name: \"upload\",\n                tipPosition: \"n\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-record\"></use></svg>',\n                name: \"record\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"M\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-table\"></use></svg>',\n                name: \"table\",\n                prefix: \"| col1\",\n                suffix: \" | col2 | col3 |\\n| --- | --- | --- |\\n|  |  |  |\\n|  |  |  |\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                hotkey: \"Z\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-undo\"></use></svg>',\n                name: \"undo\",\n                tipPosition: \"nw\",\n            }, {\n                hotkey: \"Y\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-redo\"></use></svg>',\n                name: \"redo\",\n                tipPosition: \"nw\",\n            }, {\n                name: \"|\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-more\"></use></svg>',\n                name: \"more\",\n                tipPosition: \"e\",\n            }, {\n                hotkey: \"'\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-fullscreen\"></use></svg>',\n                name: \"fullscreen\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-edit\"></use></svg>',\n                name: \"edit-mode\",\n                tipPosition: \"nw\",\n            }, {\n                hotkey: \"P\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-both\"></use></svg>',\n                name: \"both\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-preview\"></use></svg>',\n                name: \"preview\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>',\n                name: \"outline\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-theme\"></use></svg>',\n                name: \"content-theme\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-code-theme\"></use></svg>',\n                name: \"code-theme\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-bug\"></use></svg>',\n                name: \"devtools\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-info\"></use></svg>',\n                name: \"info\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-help\"></use></svg>',\n                name: \"help\",\n                tipPosition: \"nw\",\n            }, {\n                name: \"br\",\n            }];\n        var toolbarResult = [];\n        toolbar.forEach(function (menuItem) {\n            var currentMenuItem = menuItem;\n            toolbarItem.forEach(function (defaultMenuItem) {\n                if (typeof menuItem === \"string\" && defaultMenuItem.name === menuItem) {\n                    currentMenuItem = defaultMenuItem;\n                }\n                if (typeof menuItem === \"object\" && defaultMenuItem.name === menuItem.name) {\n                    currentMenuItem = Object.assign({}, defaultMenuItem, menuItem);\n                }\n            });\n            if (menuItem.toolbar) {\n                currentMenuItem.toolbar = _this.mergeToolbar(menuItem.toolbar);\n            }\n            toolbarResult.push(currentMenuItem);\n        });\n        return toolbarResult;\n    };\n    return Options;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WYSIWYG = /** @class */ (function () {\n    function WYSIWYG(vditor) {\n        var _this = this;\n        this.composingLock = false;\n        this.commentIds = [];\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-wysiwyg\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\\n<div class=\\\"vditor-panel vditor-panel--none\\\"></div>\\n<div class=\\\"vditor-panel vditor-panel--none\\\">\\n    <button type=\\\"button\\\" aria-label=\\\"\" + i18n/* i18n */.a[vditor.options.lang].comment + \"\\\" class=\\\"vditor-icon vditor-tooltipped vditor-tooltipped__n\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-comment\\\"></use></svg>\\n    </button>\\n</div>\";\n        this.element = divElement.firstElementChild;\n        this.popover = divElement.firstElementChild.nextElementSibling;\n        this.selectPopover = divElement.lastElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n        if (vditor.options.comment.enable) {\n            this.selectPopover.querySelector(\"button\").onclick = function () {\n                var id = Lute.NewNodeID();\n                var range = getSelection().getRangeAt(0);\n                var rangeClone = range.cloneRange();\n                var contents = range.extractContents();\n                var blockStartElement;\n                var blockEndElement;\n                var removeStart = false;\n                var removeEnd = false;\n                contents.childNodes.forEach(function (item, index) {\n                    var wrap = false;\n                    if (item.nodeType === 3) {\n                        wrap = true;\n                    }\n                    else if (!item.classList.contains(\"vditor-comment\")) {\n                        wrap = true;\n                    }\n                    else if (item.classList.contains(\"vditor-comment\")) {\n                        item.setAttribute(\"data-cmtids\", item.getAttribute(\"data-cmtids\") + \" \" + id);\n                    }\n                    if (wrap) {\n                        if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === 0 && rangeClone.startOffset > 0) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockStartElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === contents.childNodes.length - 1\n                            && rangeClone.endOffset < rangeClone.endContainer.textContent.length) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockEndElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\") {\n                            if (index === 0) {\n                                removeStart = true;\n                            }\n                            else if (index === contents.childNodes.length - 1) {\n                                removeEnd = true;\n                            }\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                        }\n                        else {\n                            var commentElement = document.createElement(\"span\");\n                            commentElement.classList.add(\"vditor-comment\");\n                            commentElement.setAttribute(\"data-cmtids\", id);\n                            item.parentNode.insertBefore(commentElement, item);\n                            commentElement.appendChild(item);\n                        }\n                    }\n                });\n                var startElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.startContainer);\n                if (startElement) {\n                    if (blockStartElement) {\n                        startElement.insertAdjacentHTML(\"beforeend\", blockStartElement.innerHTML);\n                        blockStartElement.remove();\n                    }\n                    else if (startElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeStart) {\n                        startElement.remove();\n                    }\n                }\n                var endElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.endContainer);\n                if (endElement) {\n                    if (blockEndElement) {\n                        endElement.insertAdjacentHTML(\"afterbegin\", blockEndElement.innerHTML);\n                        blockEndElement.remove();\n                    }\n                    else if (endElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeEnd) {\n                        endElement.remove();\n                    }\n                }\n                range.insertNode(contents);\n                vditor.options.comment.add(id, range.toString(), _this.getComments(vditor, true));\n                afterRenderEvent(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: false,\n                    enableInput: false,\n                });\n                _this.hideComment();\n            };\n        }\n    }\n    WYSIWYG.prototype.getComments = function (vditor, getData) {\n        var _this = this;\n        if (getData === void 0) { getData = false; }\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n            this.commentIds = [];\n            this.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                _this.commentIds =\n                    _this.commentIds.concat(item.getAttribute(\"data-cmtids\").split(\" \"));\n            });\n            this.commentIds = Array.from(new Set(this.commentIds));\n            var comments_1 = [];\n            if (getData) {\n                this.commentIds.forEach(function (id) {\n                    comments_1.push({\n                        id: id,\n                        top: _this.element.querySelector(\".vditor-comment[data-cmtids=\\\"\" + id + \"\\\"]\").offsetTop,\n                    });\n                });\n                return comments_1;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    WYSIWYG.prototype.triggerRemoveComment = function (vditor) {\n        var difference = function (a, b) {\n            var s = new Set(b);\n            return a.filter(function (x) { return !s.has(x); });\n        };\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable && vditor.wysiwyg.commentIds.length > 0) {\n            var oldIds = JSON.parse(JSON.stringify(this.commentIds));\n            this.getComments(vditor);\n            var removedIds = difference(oldIds, this.commentIds);\n            if (removedIds.length > 0) {\n                vditor.options.comment.remove(removedIds);\n            }\n        }\n    };\n    WYSIWYG.prototype.showComment = function () {\n        var position = (0,selection/* getCursorPosition */.Ny)(this.element);\n        this.selectPopover.setAttribute(\"style\", \"left:\" + position.left + \"px;display:block;top:\" + Math.max(-8, position.top - 21) + \"px\");\n    };\n    WYSIWYG.prototype.hideComment = function () {\n        this.selectPopover.setAttribute(\"style\", \"display:none\");\n    };\n    WYSIWYG.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var codeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n        var codeEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"CODE\");\n        if (codeElement && codeEndElement && codeEndElement.isSameNode(codeElement)) {\n            var codeText = \"\";\n            if (codeElement.parentElement.tagName === \"PRE\") {\n                codeText = range.toString();\n            }\n            else {\n                codeText = \"`\" + range.toString() + \"`\";\n            }\n            event.clipboardData.setData(\"text/plain\", codeText);\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"A\");\n        var aEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"A\");\n        if (aElement && aEndElement && aEndElement.isSameNode(aElement)) {\n            var aTitle = aElement.getAttribute(\"title\") || \"\";\n            if (aTitle) {\n                aTitle = \" \\\"\" + aTitle + \"\\\"\";\n            }\n            event.clipboardData.setData(\"text/plain\", \"[\" + range.toString() + \"](\" + aElement.getAttribute(\"href\") + aTitle + \")\");\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    WYSIWYG.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        window.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (_this.popover.style.display !== \"block\" || _this.selectPopover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10);\n            if (vditor.options.height !== \"auto\") {\n                if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                    var popoverTop = Math.max(window.scrollY - vditor.element.offsetTop - 8, Math.min(top - vditor.wysiwyg.element.scrollTop, _this.element.clientHeight - 21)) + \"px\";\n                    if (_this.popover.style.display === \"block\") {\n                        _this.popover.style.top = popoverTop;\n                    }\n                    if (_this.selectPopover.style.display === \"block\") {\n                        _this.selectPopover.style.top = popoverTop;\n                    }\n                }\n                return;\n            }\n            else if (!vditor.options.toolbarConfig.pin) {\n                return;\n            }\n            var popoverTop1 = Math.max(top, (window.scrollY - vditor.element.offsetTop - 8)) + \"px\";\n            if (_this.popover.style.display === \"block\") {\n                _this.popover.style.top = popoverTop1;\n            }\n            if (_this.selectPopover.style.display === \"block\") {\n                _this.selectPopover.style.top = popoverTop1;\n            }\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (vditor.options.comment && vditor.options.comment.enable && vditor.options.comment.scroll) {\n                vditor.options.comment.scroll(vditor.wysiwyg.element.scrollTop);\n            }\n            if (_this.popover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10) - vditor.wysiwyg.element.scrollTop;\n            var max = -8;\n            if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                max = window.scrollY - vditor.element.offsetTop + max;\n            }\n            var topPx = Math.max(max, Math.min(top, _this.element.clientHeight - 21)) + \"px\";\n            _this.popover.style.top = topPx;\n            _this.selectPopover.style.top = topPx;\n        });\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    var range = (0,selection/* getEditorRange */.zh)(vditor);\n                    var node = document.createElement(\"template\");\n                    node.innerHTML = code;\n                    range.insertNode(node.content.cloneNode(true));\n                    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n                    if (blockElement) {\n                        blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                    }\n                    else {\n                        vditor.wysiwyg.element.innerHTML = vditor.lute.SpinVditorDOM(vditor.wysiwyg.element.innerHTML);\n                    }\n                    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                },\n            });\n        });\n        // \n        this.element.addEventListener(\"compositionstart\", function () {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading  https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                return;\n            }\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input_input(vditor, getSelection().getRangeAt(0).cloneRange(), event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 \n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"\" || event.data === \"\" || event.data === \"\") {\n                return;\n            }\n            var range = getSelection().getRangeAt(0);\n            var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            if (!blockElement) {\n                // \n                modifyPre(vditor, range);\n                blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            }\n            if (!blockElement) {\n                return;\n            }\n            // \n            var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n            // \n            var startSpace = true;\n            for (var i = startOffset - 1; i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n                if (blockElement.textContent.charAt(i) !== \" \" &&\n                    //  tab  https://github.com/Vanessa219/vditor/issues/162 1\n                    blockElement.textContent.charAt(i) !== \"\\t\") {\n                    startSpace = false;\n                    break;\n                }\n            }\n            if (startOffset === 0) {\n                startSpace = false;\n            }\n            // \n            var endSpace = true;\n            for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n                if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                    endSpace = false;\n                    break;\n                }\n            }\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading  https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                headingElement.remove();\n            }\n            if ((startSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\")\n                || endSpace || isHeadingMD(blockElement.innerHTML) ||\n                (isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling)) {\n                return;\n            }\n            input_input(vditor, range, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                var checkElement = event.target;\n                if (checkElement.checked) {\n                    checkElement.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    checkElement.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (event.target.tagName === \"IMG\" &&\n                // plantuml \n                !event.target.parentElement.classList.contains(\"vditor-wysiwyg__preview\")) {\n                if (event.target.getAttribute(\"data-type\") === \"link-ref\") {\n                    genLinkRefPopover(vditor, event.target);\n                }\n                else {\n                    genImagePopover(event, vditor);\n                }\n                return;\n            }\n            // \n            if (event.target.tagName === \"A\") {\n                window.open(event.target.getAttribute(\"href\"));\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            highlightToolbarWYSIWYG(vditor);\n            // \n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-wysiwyg__preview\");\n            if (!previewElement) {\n                previewElement =\n                    (0,hasClosest/* hasClosestByClassName */.fb)((0,selection/* getEditorRange */.zh)(vditor).startContainer, \"vditor-wysiwyg__preview\");\n            }\n            if (previewElement) {\n                showCode(previewElement, vditor);\n            }\n            clickToc(event, vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            //  md cell table /block render / blockquoteh6 \n            // \n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.wysiwyg.element.innerHTML !== \"\" && vditor.wysiwyg.element.childNodes.length === 1 &&\n                vditor.wysiwyg.element.firstElementChild && vditor.wysiwyg.element.firstElementChild.tagName === \"P\"\n                && vditor.wysiwyg.element.firstElementChild.childElementCount === 0\n                && (vditor.wysiwyg.element.textContent === \"\" || vditor.wysiwyg.element.textContent === \"\\n\")) {\n                //  placeholder\n                vditor.wysiwyg.element.innerHTML = \"\";\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                }\n            }\n            // \n            modifyPre(vditor, range);\n            highlightToolbarWYSIWYG(vditor);\n            if (event.key !== \"ArrowDown\" && event.key !== \"ArrowRight\" && event.key !== \"Backspace\"\n                && event.key !== \"ArrowLeft\" && event.key !== \"ArrowUp\") {\n                return;\n            }\n            if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                vditor.hint.render(vditor);\n            }\n            // \n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__preview\");\n            if (!previewElement && range.startContainer.nodeType !== 3 && range.startOffset > 0) {\n                // table \n                var blockRenderElement = range.startContainer;\n                if (blockRenderElement.classList.contains(\"vditor-wysiwyg__block\")) {\n                    previewElement = blockRenderElement.lastElementChild;\n                }\n            }\n            if (!previewElement) {\n                return;\n            }\n            var previousElement = previewElement.previousElementSibling;\n            if (previousElement.style.display === \"none\") {\n                if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                    showCode(previewElement, vditor);\n                }\n                else {\n                    showCode(previewElement, vditor, false);\n                }\n                return;\n            }\n            var codeElement = previewElement.previousElementSibling;\n            if (codeElement.tagName === \"PRE\") {\n                codeElement = codeElement.firstElementChild;\n            }\n            if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                var blockRenderElement = previewElement.parentElement;\n                var nextNode = getRenderElementNextNode(blockRenderElement);\n                if (nextNode && nextNode.nodeType !== 3) {\n                    // \n                    var nextRenderElement = nextNode.querySelector(\".vditor-wysiwyg__preview\");\n                    if (nextRenderElement) {\n                        showCode(nextRenderElement, vditor);\n                        return;\n                    }\n                }\n                // \n                if (nextNode.nodeType === 3) {\n                    // inline\n                    while (nextNode.textContent.length === 0 && nextNode.nextSibling) {\n                        // https://github.com/Vanessa219/vditor/issues/100 2\n                        nextNode = nextNode.nextSibling;\n                    }\n                    range.setStart(nextNode, 1);\n                }\n                else {\n                    // block\n                    range.setStart(nextNode.firstChild, 0);\n                }\n            }\n            else {\n                range.selectNodeContents(codeElement);\n                range.collapse(false);\n            }\n        });\n    };\n    return WYSIWYG;\n}());\n\n\n;// CONCATENATED MODULE: ./src/index.ts\nvar src_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function (_super) {\n    src_extends(Vditor, _super);\n    /**\n     * @param id  Vditor  ID\n     * @param options Vditor \n     */\n    function Vditor(id, options) {\n        var _this = _super.call(this) || this;\n        _this.version = constants/* VDITOR_VERSION */.H;\n        if (typeof id === \"string\") {\n            if (!options) {\n                options = {\n                    cache: {\n                        id: \"vditor\" + id,\n                    },\n                };\n            }\n            else if (!options.cache) {\n                options.cache = { id: \"vditor\" + id };\n            }\n            else if (!options.cache.id) {\n                options.cache.id = \"vditor\" + id;\n            }\n            id = document.getElementById(id);\n        }\n        var getOptions = new Options(options);\n        var mergedOptions = getOptions.merge();\n        if (![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n            throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n        }\n        _this.vditor = {\n            currentMode: mergedOptions.mode,\n            element: id,\n            hint: new Hint(mergedOptions.hint.extend),\n            lute: undefined,\n            options: mergedOptions,\n            originalInnerHTML: id.innerHTML,\n            outline: new Outline(i18n/* i18n */.a[mergedOptions.lang].outline),\n            tip: new Tip(),\n        };\n        _this.vditor.sv = new Editor(_this.vditor);\n        _this.vditor.undo = new undo_Undo();\n        _this.vditor.wysiwyg = new WYSIWYG(_this.vditor);\n        _this.vditor.ir = new IR(_this.vditor);\n        _this.vditor.toolbar = new Toolbar(_this.vditor);\n        if (mergedOptions.resize.enable) {\n            _this.vditor.resize = new Resize(_this.vditor);\n        }\n        if (_this.vditor.toolbar.elements.devtools) {\n            _this.vditor.devtools = new DevTools();\n        }\n        if (mergedOptions.upload.url || mergedOptions.upload.handler) {\n            _this.vditor.upload = new Upload();\n        }\n        (0,addScript/* addScript */.G)(options._lutePath || mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\")\n            .then(function () {\n            _this.vditor.lute = (0,setLute/* setLute */.X)({\n                autoSpace: _this.vditor.options.preview.markdown.autoSpace,\n                codeBlockPreview: _this.vditor.options.preview.markdown.codeBlockPreview,\n                emojiSite: _this.vditor.options.hint.emojiPath,\n                emojis: _this.vditor.options.hint.emoji,\n                fixTermTypo: _this.vditor.options.preview.markdown.fixTermTypo,\n                footnotes: _this.vditor.options.preview.markdown.footnotes,\n                headingAnchor: false,\n                inlineMathDigit: _this.vditor.options.preview.math.inlineDigit,\n                linkBase: _this.vditor.options.preview.markdown.linkBase,\n                linkPrefix: _this.vditor.options.preview.markdown.linkPrefix,\n                listStyle: _this.vditor.options.preview.markdown.listStyle,\n                mark: _this.vditor.options.preview.markdown.mark,\n                mathBlockPreview: _this.vditor.options.preview.markdown.mathBlockPreview,\n                paragraphBeginningSpace: _this.vditor.options.preview.markdown.paragraphBeginningSpace,\n                sanitize: _this.vditor.options.preview.markdown.sanitize,\n                toc: _this.vditor.options.preview.markdown.toc,\n            });\n            _this.vditor.preview = new Preview(_this.vditor);\n            initUI(_this.vditor);\n            if (mergedOptions.after) {\n                mergedOptions.after();\n            }\n            if (mergedOptions.icon) {\n                //  2  2 \n                (0,addScript/* addScriptSync */.J)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n            }\n        });\n        return _this;\n    }\n    /**  */\n    Vditor.prototype.setTheme = function (theme, contentTheme, codeTheme, contentThemePath) {\n        this.vditor.options.theme = theme;\n        setTheme(this.vditor);\n        if (contentTheme) {\n            this.vditor.options.preview.theme.current = contentTheme;\n            (0,setContentTheme/* setContentTheme */.Z)(contentTheme, contentThemePath || this.vditor.options.preview.theme.path);\n        }\n        if (codeTheme) {\n            this.vditor.options.preview.hljs.style = codeTheme;\n            (0,setCodeTheme/* setCodeTheme */.Y)(codeTheme, this.vditor.options.cdn);\n        }\n    };\n    /**  Markdown  */\n    Vditor.prototype.getValue = function () {\n        return getMarkdown(this.vditor);\n    };\n    /**  */\n    Vditor.prototype.getCurrentMode = function () {\n        return this.vditor.currentMode;\n    };\n    /**  */\n    Vditor.prototype.focus = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.focus();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.focus();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.focus();\n        }\n    };\n    /**  */\n    Vditor.prototype.blur = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.blur();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.blur();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.blur();\n        }\n    };\n    /**  */\n    Vditor.prototype.disabled = function () {\n        hidePanel(this.vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n        disableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\",\n            \"edit-mode\"]));\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"false\");\n    };\n    /**  */\n    Vditor.prototype.enable = function () {\n        enableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\",\n            \"edit-mode\"]));\n        this.vditor.undo.resetIcon(this.vditor);\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"true\");\n    };\n    /**  */\n    Vditor.prototype.getSelection = function () {\n        if (this.vditor.currentMode === \"wysiwyg\") {\n            return getSelectText(this.vditor.wysiwyg.element);\n        }\n        else if (this.vditor.currentMode === \"sv\") {\n            return getSelectText(this.vditor.sv.element);\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            return getSelectText(this.vditor.ir.element);\n        }\n    };\n    /**  */\n    Vditor.prototype.renderPreview = function (value) {\n        this.vditor.preview.render(this.vditor, value);\n    };\n    /**  */\n    Vditor.prototype.getCursorPosition = function () {\n        return (0,selection/* getCursorPosition */.Ny)(this.vditor[this.vditor.currentMode].element);\n    };\n    /**  */\n    Vditor.prototype.isUploading = function () {\n        return this.vditor.upload.isUploading;\n    };\n    /**  */\n    Vditor.prototype.clearCache = function () {\n        localStorage.removeItem(this.vditor.options.cache.id);\n    };\n    /**  */\n    Vditor.prototype.disabledCache = function () {\n        this.vditor.options.cache.enable = false;\n    };\n    /**  */\n    Vditor.prototype.enableCache = function () {\n        if (!this.vditor.options.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n            return;\n        }\n        this.vditor.options.cache.enable = true;\n    };\n    /** HTML  md */\n    Vditor.prototype.html2md = function (value) {\n        return this.vditor.lute.HTML2Md(value);\n    };\n    /**  HTML */\n    Vditor.prototype.getHTML = function () {\n        return getHTML(this.vditor);\n    };\n    /** time  0  */\n    Vditor.prototype.tip = function (text, time) {\n        this.vditor.tip.show(text, time);\n    };\n    /**  */\n    Vditor.prototype.setPreviewMode = function (mode) {\n        setPreviewMode(mode, this.vditor);\n    };\n    /**  */\n    Vditor.prototype.deleteValue = function () {\n        if (window.getSelection().isCollapsed) {\n            return;\n        }\n        document.execCommand(\"delete\", false);\n    };\n    /**  */\n    Vditor.prototype.updateValue = function (value) {\n        document.execCommand(\"insertHTML\", false, value);\n    };\n    /**  Markdown  */\n    Vditor.prototype.insertValue = function (value, render) {\n        if (render === void 0) { render = true; }\n        var range = (0,selection/* getEditorRange */.zh)(this.vditor);\n        range.collapse(true);\n        var tmpElement = document.createElement(\"template\");\n        tmpElement.innerHTML = value;\n        range.insertNode(tmpElement.content.cloneNode(true));\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.preventInput = true;\n            if (render) {\n                inputEvent(this.vditor);\n            }\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.preventInput = true;\n            if (render) {\n                input_input(this.vditor, getSelection().getRangeAt(0));\n            }\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.preventInput = true;\n            if (render) {\n                input(this.vditor, getSelection().getRangeAt(0), true);\n            }\n        }\n    };\n    /**  */\n    Vditor.prototype.setValue = function (markdown, clearStack) {\n        var _this = this;\n        if (clearStack === void 0) { clearStack = false; }\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.innerHTML = this.vditor.lute.SpinVditorSVDOM(markdown);\n            processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            renderDomByMd(this.vditor, markdown, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else {\n            this.vditor.ir.element.innerHTML = this.vditor.lute.Md2VditorIRDOM(markdown);\n            this.vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, _this.vditor);\n            });\n            process_processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        this.vditor.outline.render(this.vditor);\n        if (!markdown) {\n            hidePanel(this.vditor, [\"emoji\", \"headings\", \"submenu\", \"hint\"]);\n            if (this.vditor.wysiwyg.popover) {\n                this.vditor.wysiwyg.popover.style.display = \"none\";\n            }\n            this.clearCache();\n        }\n        if (clearStack) {\n            this.clearStack();\n        }\n    };\n    /**  undo & redo  */\n    Vditor.prototype.clearStack = function () {\n        this.vditor.undo.clearStack(this.vditor);\n        this.vditor.undo.addToUndoStack(this.vditor);\n    };\n    /**  */\n    Vditor.prototype.destroy = function () {\n        this.vditor.element.innerHTML = this.vditor.originalInnerHTML;\n        this.vditor.element.classList.remove(\"vditor\");\n        this.vditor.element.removeAttribute(\"style\");\n        document.getElementById(\"vditorIconScript\").remove();\n        this.clearCache();\n    };\n    /**  ID */\n    Vditor.prototype.getCommentIds = function () {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return [];\n        }\n        return this.vditor.wysiwyg.getComments(this.vditor, true);\n    };\n    /**  */\n    Vditor.prototype.hlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var hlItem = function (item) {\n            item.classList.remove(\"vditor-comment--hover\");\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.add(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            hlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                hlItem(item);\n            });\n        }\n    };\n    /**  */\n    Vditor.prototype.unHlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var unHlItem = function (item) {\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.remove(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            unHlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                unHlItem(item);\n            });\n        }\n    };\n    /**  */\n    Vditor.prototype.removeCommentIds = function (removeIds) {\n        var _this = this;\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var removeItem = function (item, removeId) {\n            var ids = item.getAttribute(\"data-cmtids\").split(\" \");\n            ids.find(function (id, index) {\n                if (id === removeId) {\n                    ids.splice(index, 1);\n                    return true;\n                }\n            });\n            if (ids.length === 0) {\n                item.outerHTML = item.innerHTML;\n                (0,selection/* getEditorRange */.zh)(_this.vditor).collapse(true);\n            }\n            else {\n                item.setAttribute(\"data-cmtids\", ids.join(\" \"));\n            }\n        };\n        removeIds.forEach(function (removeId) {\n            _this.vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                removeItem(item, removeId);\n            });\n            if (_this.vditor.preview.element.style.display !== \"none\") {\n                _this.vditor.preview.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                    removeItem(item, removeId);\n                });\n            }\n        });\n        afterRenderEvent(this.vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n    };\n    return Vditor;\n}(method.default));\n/* harmony default export */ const src = (Vditor);\n\n})();\n\n__webpack_exports__ = __webpack_exports__.default;\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"],"sourceRoot":""}